"use strict";var Fte=Object.defineProperty,Lte=Object.defineProperties,Bte=Object.getOwnPropertyDescriptors,i5=Object.getOwnPropertySymbols,Ute=Object.prototype.hasOwnProperty,Vte=Object.prototype.propertyIsEnumerable,r5=(lt,Te,B)=>Te in lt?Fte(lt,Te,{enumerable:!0,configurable:!0,writable:!0,value:B}):lt[Te]=B,s5=(lt,Te)=>{for(var B in Te||(Te={}))Ute.call(Te,B)&&r5(lt,B,Te[B]);if(i5)for(var B of i5(Te))Vte.call(Te,B)&&r5(lt,B,Te[B]);return lt},o5=(lt,Te)=>Lte(lt,Bte(Te));(self.webpackChunkpruebaAngular=self.webpackChunkpruebaAngular||[]).push([[179],{2011:(lt,Te,B)=>{B.d(Te,{Dh:()=>he,GT:()=>ve,cc:()=>Re,hO:()=>ze,on:()=>$,pX:()=>le,xv:()=>_e});var l=B(5e3),ne=B(127),U=B(5813);lt=B.hmd(lt);const de=["ngOnDestroy"],le=(xe,Je,st,Le={})=>new Proxy(xe,{get:(we,Me)=>st.runOutsideAngular(()=>{var qe;if(xe[Me])return(null===(qe=null==Le?void 0:Le.spy)||void 0===qe?void 0:qe.get)&&Le.spy.get(Me,xe[Me]),xe[Me];if(de.indexOf(Me)>-1)return()=>{};const Ke=Je.toPromise().then(K=>{const De=K&&K[Me];return"function"==typeof De?De.bind(K):De&&De.then?De.then(J=>st.run(()=>J)):st.run(()=>De)});return new Proxy(()=>{},{get:(K,De)=>Ke[De],apply:(K,De,J)=>Ke.then(se=>{var ie;const be=se&&se(...J);return(null===(ie=null==Le?void 0:Le.spy)||void 0===ie?void 0:ie.apply)&&Le.spy.apply(Me,J,be),be})})})}),ve=(xe,Je)=>{Je.forEach(st=>{Object.getOwnPropertyNames(st.prototype||st).forEach(Le=>{Object.defineProperty(xe.prototype,Le,Object.getOwnPropertyDescriptor(st.prototype||st,Le))})})};class ce{constructor(Je){return Je}}const he=new l.OlP("angularfire2.app.options"),_e=new l.OlP("angularfire2.app.name");function $(xe,Je,st){const we="object"==typeof st&&st||{};we.name=we.name||"string"==typeof st&&st||"[DEFAULT]";const qe=ne.Z.apps.filter(Ke=>Ke&&Ke.name===we.name)[0]||Je.runOutsideAngular(()=>ne.Z.initializeApp(xe,we));try{JSON.stringify(xe)!==JSON.stringify(qe.options)&&W("error",`${qe.name} Firebase App already initialized with different options${lt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(Ke){}return new ce(qe)}const W=(xe,...Je)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[xe](...Je)},re={provide:ce,useFactory:$,deps:[he,l.R0b,[new l.FiY,_e]]};let ze=(()=>{class xe{constructor(st){ne.Z.registerVersion("angularfire",U.q4.full,"core"),ne.Z.registerVersion("angularfire",U.q4.full,"app-compat"),ne.Z.registerVersion("angular",l.q4F.full,st.toString())}static initializeApp(st,Le){return{ngModule:xe,providers:[{provide:he,useValue:st},{provide:_e,useValue:Le}]}}}return xe.\u0275fac=function(st){return new(st||xe)(l.LFG(l.Lbi))},xe.\u0275mod=l.oAB({type:xe}),xe.\u0275inj=l.cJS({providers:[re]}),xe})();function Re(xe,Je,st,Le,we){const[,Me,qe]=globalThis.\u0275AngularfireInstanceCache.find(Ke=>Ke[0]===xe)||[];if(Me)return function Ve(xe,Je){try{return xe.toString()===Je.toString()}catch(st){return xe===Je}}(we,qe)||(ye("error",`${Je} was already initialized on the ${st} Firebase App with different settings.${Ze?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:we,was:qe})),Me;{const Ke=Le();return globalThis.\u0275AngularfireInstanceCache.push([xe,Ke,we]),Ke}}const Ze=!!lt.hot,ye=(xe,...Je)=>{(0,l.X6Q)()&&"undefined"!=typeof console&&console[xe](...Je)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(lt,Te,B)=>{B.d(Te,{q4:()=>qt,iC:()=>kc,fc:()=>ph,HU:()=>dm,vb:()=>fh,JM:()=>Nc});var l=B(5e3),ne=B(5867),U=B(5861),de=B(9681),le=B(2090),ve=B(4859),ce=B(1877),he=B(8766);const _e="@firebase/installations",$="0.5.16",re=`w:${$}`,ze="FIS_v2",Je=new le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function st(D){return D instanceof le.ZR&&D.code.includes("request-failed")}function Le({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function we(D){return{token:D.token,requestStatus:2,expiresIn:se(D.expiresIn),creationTime:Date.now()}}function Me(D,S){return qe.apply(this,arguments)}function qe(){return(qe=(0,U.Z)(function*(D,S){const j=(yield S.json()).error;return Je.create("request-failed",{requestName:D,serverCode:j.code,serverMessage:j.message,serverStatus:j.status})})).apply(this,arguments)}function Ke({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function K(D,{refreshToken:S}){const k=Ke(D);return k.append("Authorization",function ie(D){return`${ze} ${D}`}(S)),k}function De(D){return J.apply(this,arguments)}function J(){return(J=(0,U.Z)(function*(D){const S=yield D();return S.status>=500&&S.status<600?D():S})).apply(this,arguments)}function se(D){return Number(D.replace("s","000"))}function be(D,S){return fe.apply(this,arguments)}function fe(){return(fe=(0,U.Z)(function*({appConfig:D,heartbeatServiceProvider:S},{fid:k}){const j=Le(D),ee=Ke(D),oe=S.getImmediate({optional:!0});if(oe){const Mt=yield oe.getHeartbeatsHeader();Mt&&ee.append("x-firebase-client",Mt)}const Ye={method:"POST",headers:ee,body:JSON.stringify({fid:k,authVersion:ze,appId:D.appId,sdkVersion:re})},yt=yield De(()=>fetch(j,Ye));if(yt.ok){const Mt=yield yt.json();return{fid:Mt.fid||k,registrationStatus:2,refreshToken:Mt.refreshToken,authToken:we(Mt.authToken)}}throw yield Me("Create Installation",yt)})).apply(this,arguments)}function je(D){return new Promise(S=>{setTimeout(S,D)})}const ln=/^[cdef][\w-]{21}$/;function ot(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const k=function pn(D){return function bt(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return ln.test(k)?k:""}catch(D){return""}}function On(D){return`${D.appName}!${D.appId}`}const mn=new Map;function cn(D,S){const k=On(D);Kt(k,S),function br(D,S){const k=function ir(){return!fs&&"BroadcastChannel"in self&&(fs=new BroadcastChannel("[Firebase] FID Change"),fs.onmessage=D=>{Kt(D.data.key,D.data.fid)}),fs}();k&&k.postMessage({key:D,fid:S}),function rr(){0===mn.size&&fs&&(fs.close(),fs=null)}()}(k,S)}function Kt(D,S){const k=mn.get(D);if(k)for(const j of k)j(S)}let fs=null;const wr="firebase-installations-store";let Kr=null;function It(){return Kr||(Kr=(0,he.X3)("firebase-installations-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(wr)}})),Kr}function sr(D,S){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,U.Z)(function*(D,S){const k=On(D),ee=(yield It()).transaction(wr,"readwrite"),oe=ee.objectStore(wr),Oe=yield oe.get(k);return yield oe.put(S,k),yield ee.done,(!Oe||Oe.fid!==S.fid)&&cn(D,S.fid),S})).apply(this,arguments)}function Ci(D){return mo.apply(this,arguments)}function mo(){return(mo=(0,U.Z)(function*(D){const S=On(D),j=(yield It()).transaction(wr,"readwrite");yield j.objectStore(wr).delete(S),yield j.done})).apply(this,arguments)}function gs(D,S){return hi.apply(this,arguments)}function hi(){return(hi=(0,U.Z)(function*(D,S){const k=On(D),ee=(yield It()).transaction(wr,"readwrite"),oe=ee.objectStore(wr),Oe=yield oe.get(k),Ye=S(Oe);return void 0===Ye?yield oe.delete(k):yield oe.put(Ye,k),yield ee.done,Ye&&(!Oe||Oe.fid!==Ye.fid)&&cn(D,Ye.fid),Ye})).apply(this,arguments)}function Qn(D){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,U.Z)(function*(D){let S;const k=yield gs(D.appConfig,j=>{const ee=Zo(j),oe=on(D,ee);return S=oe.registrationPromise,oe.installationEntry});return""===k.fid?{installationEntry:yield S}:{installationEntry:k,registrationPromise:S}})).apply(this,arguments)}function Zo(D){return _o(D||{fid:ot(),registrationStatus:0})}function on(D,S){if(0===S.registrationStatus){if(!navigator.onLine)return{installationEntry:S,registrationPromise:Promise.reject(Je.create("app-offline"))};const k={fid:S.fid,registrationStatus:1,registrationTime:Date.now()},j=function _t(D,S){return St.apply(this,arguments)}(D,k);return{installationEntry:k,registrationPromise:j}}return 1===S.registrationStatus?{installationEntry:S,registrationPromise:Gi(D)}:{installationEntry:S}}function St(){return(St=(0,U.Z)(function*(D,S){try{const k=yield be(D,S);return sr(D.appConfig,k)}catch(k){throw st(k)&&409===k.customData.serverCode?yield Ci(D.appConfig):yield sr(D.appConfig,{fid:S.fid,registrationStatus:0}),k}})).apply(this,arguments)}function Gi(D){return $i.apply(this,arguments)}function $i(){return($i=(0,U.Z)(function*(D){let S=yield en(D.appConfig);for(;1===S.registrationStatus;)yield je(100),S=yield en(D.appConfig);if(0===S.registrationStatus){const{installationEntry:k,registrationPromise:j}=yield Qn(D);return j||k}return S})).apply(this,arguments)}function en(D){return gs(D,S=>{if(!S)throw Je.create("installation-not-found");return _o(S)})}function _o(D){return function Wi(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function zi(D,S){return wt.apply(this,arguments)}function wt(){return(wt=(0,U.Z)(function*({appConfig:D,heartbeatServiceProvider:S},k){const j=Ko(D,k),ee=K(D,k),oe=S.getImmediate({optional:!0});if(oe){const Mt=yield oe.getHeartbeatsHeader();Mt&&ee.append("x-firebase-client",Mt)}const Ye={method:"POST",headers:ee,body:JSON.stringify({installation:{sdkVersion:re,appId:D.appId}})},yt=yield De(()=>fetch(j,Ye));if(yt.ok)return we(yield yt.json());throw yield Me("Generate Auth Token",yt)})).apply(this,arguments)}function Ko(D,{fid:S}){return`${Le(D)}/${S}/authTokens:generate`}function Wt(D){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,U.Z)(function*(D,S=!1){let k;const j=yield gs(D.appConfig,oe=>{if(!zt(oe))throw Je.create("not-registered");const Oe=oe.authToken;if(!S&&z(Oe))return oe;if(1===Oe.requestStatus)return k=at(D,S),oe;{if(!navigator.onLine)throw Je.create("app-offline");const Ye=X(oe);return k=Rt(D,Ye),Ye}});return k?yield k:j.authToken})).apply(this,arguments)}function at(D,S){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,U.Z)(function*(D,S){let k=yield et(D.appConfig);for(;1===k.authToken.requestStatus;)yield je(100),k=yield et(D.appConfig);const j=k.authToken;return 0===j.requestStatus?Wt(D,S):j})).apply(this,arguments)}function et(D){return gs(D,S=>{if(!zt(S))throw Je.create("not-registered");return function Ie(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(S.authToken)?Object.assign(Object.assign({},S),{authToken:{requestStatus:0}}):S})}function Rt(D,S){return xt.apply(this,arguments)}function xt(){return(xt=(0,U.Z)(function*(D,S){try{const k=yield zi(D,S),j=Object.assign(Object.assign({},S),{authToken:k});return yield sr(D.appConfig,j),k}catch(k){if(!st(k)||401!==k.customData.serverCode&&404!==k.customData.serverCode){const j=Object.assign(Object.assign({},S),{authToken:{requestStatus:0}});yield sr(D.appConfig,j)}else yield Ci(D.appConfig);throw k}})).apply(this,arguments)}function zt(D){return void 0!==D&&2===D.registrationStatus}function z(D){return 2===D.requestStatus&&!function H(D){const S=Date.now();return S<D.creationTime||D.creationTime+D.expiresIn<S+36e5}(D)}function X(D){const S={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:S})}function ht(){return(ht=(0,U.Z)(function*(D){const S=D,{installationEntry:k,registrationPromise:j}=yield Qn(S);return j?j.catch(console.error):Wt(S).catch(console.error),k.fid})).apply(this,arguments)}function wn(){return(wn=(0,U.Z)(function*(D,S=!1){const k=D;return yield un(k),(yield Wt(k,S)).token})).apply(this,arguments)}function un(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,U.Z)(function*(D){const{registrationPromise:S}=yield Qn(D);S&&(yield S)})).apply(this,arguments)}function Ga(D){return Je.create("missing-app-config-values",{valueName:D})}const Er="installations",vt=D=>{const S=D.getProvider("app").getImmediate(),k=function Mi(D){if(!D||!D.options)throw Ga("App Configuration");if(!D.name)throw Ga("App Name");const S=["projectId","apiKey","appId"];for(const k of S)if(!D.options[k])throw Ga(k);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(S);return{app:S,appConfig:k,heartbeatServiceProvider:(0,de._getProvider)(S,"heartbeat"),_delete:()=>Promise.resolve()}},En=D=>{const S=D.getProvider("app").getImmediate(),k=(0,de._getProvider)(S,Er).getImmediate();return{getId:()=>function ae(D){return ht.apply(this,arguments)}(k),getToken:ee=>function Ut(D){return wn.apply(this,arguments)}(k,ee)}};(function or(){(0,de._registerComponent)(new ve.wA(Er,vt,"PUBLIC")),(0,de._registerComponent)(new ve.wA("installations-internal",En,"PRIVATE"))})(),(0,de.registerVersion)(_e,$),(0,de.registerVersion)(_e,$,"esm2017");const ms="@firebase/remote-config",Jn=new le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class fc{constructor(S,k,j,ee){this.client=S,this.storage=k,this.storageCache=j,this.logger=ee}isCachedDataFresh(S,k){if(!k)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const j=Date.now()-k,ee=j<=S;return this.logger.debug(`Config fetch cache check. Cache age millis: ${j}. Cache max age millis (minimumFetchIntervalMillis setting): ${S}. Is cache hit: ${ee}.`),ee}fetch(S){var k=this;return(0,U.Z)(function*(){const[j,ee]=yield Promise.all([k.storage.getLastSuccessfulFetchTimestampMillis(),k.storage.getLastSuccessfulFetchResponse()]);if(ee&&k.isCachedDataFresh(S.cacheMaxAgeMillis,j))return ee;S.eTag=ee&&ee.eTag;const oe=yield k.client.fetch(S),Oe=[k.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===oe.status&&Oe.push(k.storage.setLastSuccessfulFetchResponse(oe)),yield Promise.all(Oe),oe})()}}function Vd(D=navigator){return D.languages&&D.languages[0]||D.language}class qi{constructor(S,k,j,ee,oe,Oe){this.firebaseInstallations=S,this.sdkVersion=k,this.namespace=j,this.projectId=ee,this.apiKey=oe,this.appId=Oe}fetch(S){var k=this;return(0,U.Z)(function*(){var j,ee,oe;const[Oe,Ye]=yield Promise.all([k.firebaseInstallations.getId(),k.firebaseInstallations.getToken()]),Mt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${k.projectId}/namespaces/${k.namespace}:fetch?key=${k.apiKey}`,Pt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":S.eTag||"*"},pt={sdk_version:k.sdkVersion,app_instance_id:Oe,app_instance_id_token:Ye,app_id:k.appId,language_code:Vd()},li={method:"POST",headers:Pt,body:JSON.stringify(pt)},ci=fetch(Mt,li),Ro=new Promise((As,ns)=>{S.signal.addEventListener(()=>{const cl=new Error("The operation was aborted.");cl.name="AbortError",ns(cl)})});let Po;try{yield Promise.race([ci,Ro]),Po=yield ci}catch(As){let ns="fetch-client-network";throw"AbortError"===(null===(j=As)||void 0===j?void 0:j.name)&&(ns="fetch-timeout"),Jn.create(ns,{originalErrorMessage:null===(ee=As)||void 0===ee?void 0:ee.message})}let Ss=Po.status;const Fc=Po.headers.get("ETag")||void 0;let $l,ga;if(200===Po.status){let As;try{As=yield Po.json()}catch(ns){throw Jn.create("fetch-client-parse",{originalErrorMessage:null===(oe=ns)||void 0===oe?void 0:oe.message})}$l=As.entries,ga=As.state}if("INSTANCE_STATE_UNSPECIFIED"===ga?Ss=500:"NO_CHANGE"===ga?Ss=304:("NO_TEMPLATE"===ga||"EMPTY_CONFIG"===ga)&&($l={}),304!==Ss&&200!==Ss)throw Jn.create("fetch-status",{httpStatus:Ss});return{status:Ss,eTag:Fc,config:$l}})()}}class Xg{constructor(S,k){this.client=S,this.storage=k}fetch(S){var k=this;return(0,U.Z)(function*(){const j=(yield k.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return k.attemptFetch(S,j)})()}attemptFetch(S,{throttleEndTimeMillis:k,backoffCount:j}){var ee=this;return(0,U.Z)(function*(){yield function Eo(D,S){return new Promise((k,j)=>{const ee=Math.max(S-Date.now(),0),oe=setTimeout(k,ee);D.addEventListener(()=>{clearTimeout(oe),j(Jn.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}(S.signal,k);try{const oe=yield ee.client.fetch(S);return yield ee.storage.deleteThrottleMetadata(),oe}catch(oe){if(!function jd(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}(oe))throw oe;const Oe={throttleEndTimeMillis:Date.now()+(0,le.$s)(j),backoffCount:j+1};return yield ee.storage.setThrottleMetadata(Oe),ee.attemptFetch(S,Oe)}})()}}class Hd{constructor(S,k,j,ee,oe){this.app=S,this._client=k,this._storageCache=j,this._storage=ee,this._logger=oe,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Nu(D,S){var k;const j=D.target.error||void 0;return Jn.create(S,{originalErrorMessage:j&&(null===(k=j)||void 0===k?void 0:k.message)})}const Co="app_namespace_store";class im{constructor(S,k,j,ee=function nm(){return new Promise((D,S)=>{var k;try{const j=indexedDB.open("firebase_remote_config",1);j.onerror=ee=>{S(Nu(ee,"storage-open"))},j.onsuccess=ee=>{D(ee.target.result)},j.onupgradeneeded=ee=>{0===ee.oldVersion&&ee.target.result.createObjectStore(Co,{keyPath:"compositeKey"})}}catch(j){S(Jn.create("storage-open",{originalErrorMessage:null===(k=j)||void 0===k?void 0:k.message}))}})}()){this.appId=S,this.appName=k,this.namespace=j,this.openDbPromise=ee}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(S){return this.set("last_fetch_status",S)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(S){return this.set("last_successful_fetch_timestamp_millis",S)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(S){return this.set("last_successful_fetch_response",S)}getActiveConfig(){return this.get("active_config")}setActiveConfig(S){return this.set("active_config",S)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(S){return this.set("active_config_etag",S)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(S){return this.set("throttle_metadata",S)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(S){var k=this;return(0,U.Z)(function*(){const j=yield k.openDbPromise;return new Promise((ee,oe)=>{var Oe;const yt=j.transaction([Co],"readonly").objectStore(Co),Mt=k.createCompositeKey(S);try{const Pt=yt.get(Mt);Pt.onerror=pt=>{oe(Nu(pt,"storage-get"))},Pt.onsuccess=pt=>{const li=pt.target.result;ee(li?li.value:void 0)}}catch(Pt){oe(Jn.create("storage-get",{originalErrorMessage:null===(Oe=Pt)||void 0===Oe?void 0:Oe.message}))}})})()}set(S,k){var j=this;return(0,U.Z)(function*(){const ee=yield j.openDbPromise;return new Promise((oe,Oe)=>{var Ye;const Mt=ee.transaction([Co],"readwrite").objectStore(Co),Pt=j.createCompositeKey(S);try{const pt=Mt.put({compositeKey:Pt,value:k});pt.onerror=li=>{Oe(Nu(li,"storage-set"))},pt.onsuccess=()=>{oe()}}catch(pt){Oe(Jn.create("storage-set",{originalErrorMessage:null===(Ye=pt)||void 0===Ye?void 0:Ye.message}))}})})()}delete(S){var k=this;return(0,U.Z)(function*(){const j=yield k.openDbPromise;return new Promise((ee,oe)=>{var Oe;const yt=j.transaction([Co],"readwrite").objectStore(Co),Mt=k.createCompositeKey(S);try{const Pt=yt.delete(Mt);Pt.onerror=pt=>{oe(Nu(pt,"storage-delete"))},Pt.onsuccess=()=>{ee()}}catch(Pt){oe(Jn.create("storage-delete",{originalErrorMessage:null===(Oe=Pt)||void 0===Oe?void 0:Oe.message}))}})})()}createCompositeKey(S){return[this.appId,this.appName,this.namespace,S].join()}}class $d{constructor(S){this.storage=S}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var S=this;return(0,U.Z)(function*(){const k=S.storage.getLastFetchStatus(),j=S.storage.getLastSuccessfulFetchTimestampMillis(),ee=S.storage.getActiveConfig(),oe=yield k;oe&&(S.lastFetchStatus=oe);const Oe=yield j;Oe&&(S.lastSuccessfulFetchTimestampMillis=Oe);const Ye=yield ee;Ye&&(S.activeConfig=Ye)})()}setLastFetchStatus(S){return this.lastFetchStatus=S,this.storage.setLastFetchStatus(S)}setLastSuccessfulFetchTimestampMillis(S){return this.lastSuccessfulFetchTimestampMillis=S,this.storage.setLastSuccessfulFetchTimestampMillis(S)}setActiveConfig(S){return this.activeConfig=S,this.storage.setActiveConfig(S)}}function gc(){return Wd.apply(this,arguments)}function Wd(){return(Wd=(0,U.Z)(function*(){if(!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}!function Wa(){(0,de._registerComponent)(new ve.wA("remote-config",function D(S,{instanceIdentifier:k}){const j=S.getProvider("app").getImmediate(),ee=S.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Jn.create("registration-window");if(!(0,le.hl)())throw Jn.create("indexed-db-unavailable");const{projectId:oe,apiKey:Oe,appId:Ye}=j.options;if(!oe)throw Jn.create("registration-project-id");if(!Oe)throw Jn.create("registration-api-key");if(!Ye)throw Jn.create("registration-app-id");const yt=new im(Ye,j.name,k=k||"firebase"),Mt=new $d(yt),Pt=new ce.Yd(ms);Pt.logLevel=ce.in.ERROR;const pt=new qi(ee,de.SDK_VERSION,k,oe,Oe,Ye),li=new Xg(pt,yt),ci=new fc(li,yt,Mt,Pt),Ro=new Hd(j,ci,Mt,yt,Pt);return function Sn(D){const S=(0,le.m9)(D);S._initializePromise||(S._initializePromise=S._storageCache.loadFromStorage().then(()=>{S._isInitializationComplete=!0}))}(Ro),Ro},"PUBLIC").setMultipleInstances(!0)),(0,de.registerVersion)(ms,"0.3.15"),(0,de.registerVersion)(ms,"0.3.15","esm2017")}();const zd="/firebase-messaging-sw.js",Zi="/firebase-cloud-messaging-push-scope",Jo="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",za="google.c.a.c_id",qd="google.c.a.c_l",Zf="google.c.a.ts",Ni="google.c.a.e";var qa=(()=>{return(D=qa||(qa={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",qa;var D})();function ar(D){const S=new Uint8Array(D);return btoa(String.fromCharCode(...S)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zd(D){const k=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),j=atob(k),ee=new Uint8Array(j.length);for(let oe=0;oe<j.length;++oe)ee[oe]=j.charCodeAt(oe);return ee}const Oi="fcm_token_details_db",Or="fcm_token_object_Store";function Ou(D){return Kd.apply(this,arguments)}function Kd(){return Kd=(0,U.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(oe=>oe.name).includes(Oi))return null;let S=null;return(yield(0,he.X3)(Oi,5,{upgrade:(j=(0,U.Z)(function*(ee,oe,Oe,Ye){var yt;if(oe<2||!ee.objectStoreNames.contains(Or))return;const Mt=Ye.objectStore(Or),Pt=yield Mt.index("fcmSenderId").get(D);if(yield Mt.clear(),Pt)if(2===oe){const pt=Pt;if(!pt.auth||!pt.p256dh||!pt.endpoint)return;S={token:pt.fcmToken,createTime:null!==(yt=pt.createTime)&&void 0!==yt?yt:Date.now(),subscriptionOptions:{auth:pt.auth,p256dh:pt.p256dh,endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:"string"==typeof pt.vapidKey?pt.vapidKey:ar(pt.vapidKey)}}}else if(3===oe){const pt=Pt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:ar(pt.auth),p256dh:ar(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:ar(pt.vapidKey)}}}else if(4===oe){const pt=Pt;S={token:pt.fcmToken,createTime:pt.createTime,subscriptionOptions:{auth:ar(pt.auth),p256dh:ar(pt.p256dh),endpoint:pt.endpoint,swScope:pt.swScope,vapidKey:ar(pt.vapidKey)}}}}),function(oe,Oe,Ye,yt){return j.apply(this,arguments)})})).close(),yield(0,he.Lj)(Oi),yield(0,he.Lj)("fcm_vapid_details_db"),yield(0,he.Lj)("undefined"),ku(S)?S:null;var j}),Kd.apply(this,arguments)}function ku(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:S}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof S.auth&&S.auth.length>0&&"string"==typeof S.p256dh&&S.p256dh.length>0&&"string"==typeof S.endpoint&&S.endpoint.length>0&&"string"==typeof S.swScope&&S.swScope.length>0&&"string"==typeof S.vapidKey&&S.vapidKey.length>0}const Es="firebase-messaging-store";let Kf=null;function Tn(){return Kf||(Kf=(0,he.X3)("firebase-messaging-database",1,{upgrade:(D,S)=>{0===S&&D.createObjectStore(Es)}})),Kf}function Ol(D){return ea.apply(this,arguments)}function ea(){return(ea=(0,U.Z)(function*(D){const S=ki(D),j=yield(yield Tn()).transaction(Es).objectStore(Es).get(S);if(j)return j;{const ee=yield Ou(D.appConfig.senderId);if(ee)return yield gn(D,ee),ee}})).apply(this,arguments)}function gn(D,S){return kl.apply(this,arguments)}function kl(){return(kl=(0,U.Z)(function*(D,S){const k=ki(D),ee=(yield Tn()).transaction(Es,"readwrite");return yield ee.objectStore(Es).put(S,k),yield ee.done,S})).apply(this,arguments)}function mc(D){return To.apply(this,arguments)}function To(){return(To=(0,U.Z)(function*(D){const S=ki(D),j=(yield Tn()).transaction(Es,"readwrite");yield j.objectStore(Es).delete(S),yield j.done})).apply(this,arguments)}function ki({appConfig:D}){return D.appId}const Gn=new le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Cs(D,S){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,U.Z)(function*(D,S){var k;const j=yield Ya(D),ee=Do(S),oe={method:"POST",headers:j,body:JSON.stringify(ee)};let Oe;try{Oe=yield(yield fetch(Ts(D.appConfig),oe)).json()}catch(Ye){throw Gn.create("token-subscribe-failed",{errorInfo:null===(k=Ye)||void 0===k?void 0:k.toString()})}if(Oe.error)throw Gn.create("token-subscribe-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw Gn.create("token-subscribe-no-token");return Oe.token})).apply(this,arguments)}function ta(D,S){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,U.Z)(function*(D,S){var k;const j=yield Ya(D),ee=Do(S.subscriptionOptions),oe={method:"PATCH",headers:j,body:JSON.stringify(ee)};let Oe;try{Oe=yield(yield fetch(`${Ts(D.appConfig)}/${S.token}`,oe)).json()}catch(Ye){throw Gn.create("token-update-failed",{errorInfo:null===(k=Ye)||void 0===k?void 0:k.toString()})}if(Oe.error)throw Gn.create("token-update-failed",{errorInfo:Oe.error.message});if(!Oe.token)throw Gn.create("token-update-no-token");return Oe.token})).apply(this,arguments)}function Rl(D,S){return Qr.apply(this,arguments)}function Qr(){return(Qr=(0,U.Z)(function*(D,S){var k;const ee={method:"DELETE",headers:yield Ya(D)};try{const Oe=yield(yield fetch(`${Ts(D.appConfig)}/${S}`,ee)).json();if(Oe.error)throw Gn.create("token-unsubscribe-failed",{errorInfo:Oe.error.message})}catch(oe){throw Gn.create("token-unsubscribe-failed",{errorInfo:null===(k=oe)||void 0===k?void 0:k.toString()})}})).apply(this,arguments)}function Ts({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function Ya(D){return At.apply(this,arguments)}function At(){return(At=(0,U.Z)(function*({appConfig:D,installations:S}){const k=yield S.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${k}`})})).apply(this,arguments)}function Do({p256dh:D,auth:S,endpoint:k,vapidKey:j}){const ee={web:{endpoint:k,auth:S,p256dh:D}};return j!==Jo&&(ee.web.applicationPubKey=j),ee}const Fu=6048e5;function Pl(D){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,U.Z)(function*(D){const S=yield na(D.swRegistration,D.vapidKey),k={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:S.endpoint,auth:ar(S.getKey("auth")),p256dh:ar(S.getKey("p256dh"))},j=yield Ol(D.firebaseDependencies);if(j){if(vc(j.subscriptionOptions,k))return Date.now()>=j.createTime+Fu?Bu(D,{token:j.token,createTime:Date.now(),subscriptionOptions:k}):j.token;try{yield Rl(D.firebaseDependencies,j.token)}catch(ee){console.warn(ee)}return Pe(D.firebaseDependencies,k)}return Pe(D.firebaseDependencies,k)})).apply(this,arguments)}function _c(D){return yc.apply(this,arguments)}function yc(){return(yc=(0,U.Z)(function*(D){const S=yield Ol(D.firebaseDependencies);S&&(yield Rl(D.firebaseDependencies,S.token),yield mc(D.firebaseDependencies));const k=yield D.swRegistration.pushManager.getSubscription();return!k||k.unsubscribe()})).apply(this,arguments)}function Bu(D,S){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,U.Z)(function*(D,S){try{const k=yield ta(D.firebaseDependencies,S),j=Object.assign(Object.assign({},S),{token:k,createTime:Date.now()});return yield gn(D.firebaseDependencies,j),k}catch(k){throw yield _c(D),k}})).apply(this,arguments)}function Pe(D,S){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,U.Z)(function*(D,S){const j={token:yield Cs(D,S),createTime:Date.now(),subscriptionOptions:S};return yield gn(D,j),j.token})).apply(this,arguments)}function na(D,S){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,U.Z)(function*(D,S){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zd(S)})})).apply(this,arguments)}function vc(D,S){return S.vapidKey===D.vapidKey&&S.endpoint===D.endpoint&&S.auth===D.auth&&S.p256dh===D.p256dh}function ia(D){const S={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function kr(D,S){if(!S.notification)return;D.notification={};const k=S.notification.title;k&&(D.notification.title=k);const j=S.notification.body;j&&(D.notification.body=j);const ee=S.notification.image;ee&&(D.notification.image=ee);const oe=S.notification.icon;oe&&(D.notification.icon=oe)}(S,D),function Uu(D,S){!S.data||(D.data=S.data)}(S,D),function Vu(D,S){var k,j,ee,oe,Oe;if(!S.fcmOptions&&!(null===(k=S.notification)||void 0===k?void 0:k.click_action))return;D.fcmOptions={};const Ye=null!==(ee=null===(j=S.fcmOptions)||void 0===j?void 0:j.link)&&void 0!==ee?ee:null===(oe=S.notification)||void 0===oe?void 0:oe.click_action;Ye&&(D.fcmOptions.link=Ye);const yt=null===(Oe=S.fcmOptions)||void 0===Oe?void 0:Oe.analytics_label;yt&&(D.fcmOptions.analyticsLabel=yt)}(S,D),S}function ju(D){return"object"==typeof D&&!!D&&za in D}function Yd(D,S){const k=[];for(let j=0;j<D.length;j++)k.push(D.charAt(j)),j<S.length&&k.push(S.charAt(j));return k.join("")}function $s(D){return Gn.create("missing-app-config-values",{valueName:D})}Yd("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Yd("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ki{constructor(S,k,j){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ee=function rm(D){if(!D||!D.options)throw $s("App Configuration Object");if(!D.name)throw $s("App Name");const S=["projectId","apiKey","appId","messagingSenderId"],{options:k}=D;for(const j of S)if(!k[j])throw $s(j);return{appName:D.name,projectId:k.projectId,apiKey:k.apiKey,appId:k.appId,senderId:k.messagingSenderId}}(S);this.firebaseDependencies={app:S,appConfig:ee,installations:k,analyticsProvider:j}}_delete(){return Promise.resolve()}}function Rr(D){return bc.apply(this,arguments)}function bc(){return(bc=(0,U.Z)(function*(D){var S;try{D.swRegistration=yield navigator.serviceWorker.register(zd,{scope:Zi}),D.swRegistration.update().catch(()=>{})}catch(k){throw Gn.create("failed-service-worker-registration",{browserErrorMessage:null===(S=k)||void 0===S?void 0:S.message})}})).apply(this,arguments)}function Io(D,S){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,U.Z)(function*(D,S){if(!S&&!D.swRegistration&&(yield Rr(D)),S||!D.swRegistration){if(!(S instanceof ServiceWorkerRegistration))throw Gn.create("invalid-sw-registration");D.swRegistration=S}})).apply(this,arguments)}function Hu(D,S){return wc.apply(this,arguments)}function wc(){return(wc=(0,U.Z)(function*(D,S){S?D.vapidKey=S:D.vapidKey||(D.vapidKey=Jo)})).apply(this,arguments)}function Gu(){return(Gu=(0,U.Z)(function*(D,S){if(!navigator)throw Gn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Gn.create("permission-blocked");return yield Hu(D,null==S?void 0:S.vapidKey),yield Io(D,null==S?void 0:S.serviceWorkerRegistration),Pl(D)})).apply(this,arguments)}function Ja(D,S,k){return Cc.apply(this,arguments)}function Cc(){return(Cc=(0,U.Z)(function*(D,S,k){const j=Tc(S);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(j,{message_id:k[za],message_name:k[qd],message_time:k[Zf],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Tc(D){switch(D){case qa.NOTIFICATION_CLICKED:return"notification_open";case qa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Jd(){return(Jd=(0,U.Z)(function*(D,S){const k=S.data;if(!k.isFirebaseMessaging)return;D.onMessageHandler&&k.messageType===qa.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(ia(k)):D.onMessageHandler.next(ia(k)));const j=k.data;ju(j)&&"1"===j[Ni]&&(yield Ja(D,k.messageType,j))})).apply(this,arguments)}const Dc="@firebase/messaging",Xd=D=>{const S=new Ki(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",k=>function Qd(D,S){return Jd.apply(this,arguments)}(S,k)),S},Xa=D=>{const S=D.getProvider("messaging").getImmediate();return{getToken:j=>function Ec(D,S){return Gu.apply(this,arguments)}(S,j)}};function Ic(){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,U.Z)(function*(){try{yield(0,le.eu)()}catch(D){return!1}return"undefined"!=typeof window&&(0,le.hl)()&&(0,le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function eh(){(0,de._registerComponent)(new ve.wA("messaging",Xd,"PUBLIC")),(0,de._registerComponent)(new ve.wA("messaging-internal",Xa,"PRIVATE")),(0,de.registerVersion)(Dc,"0.10.0"),(0,de.registerVersion)(Dc,"0.10.0","esm2017")}();const th="analytics",om="firebase_id",Ws="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",oa="https://www.googletagmanager.com/gtag/js",pi=new ce.Yd("@firebase/analytics");function nh(D){return Promise.all(D.map(S=>S.catch(k=>k)))}function am(D,S){const k=document.createElement("script");k.src=`${oa}?l=${D}&id=${S}`,k.async=!0,document.head.appendChild(k)}function el(D,S,k,j,ee,oe){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,U.Z)(function*(D,S,k,j,ee,oe){const Oe=j[ee];try{if(Oe)yield S[Oe];else{const yt=(yield nh(k)).find(Mt=>Mt.measurementId===ee);yt&&(yield S[yt.appId])}}catch(Ye){pi.error(Ye)}D("config",ee,oe)})).apply(this,arguments)}function lm(D,S,k,j,ee){return zs.apply(this,arguments)}function zs(){return(zs=(0,U.Z)(function*(D,S,k,j,ee){try{let oe=[];if(ee&&ee.send_to){let Oe=ee.send_to;Array.isArray(Oe)||(Oe=[Oe]);const Ye=yield nh(k);for(const yt of Oe){const Mt=Ye.find(pt=>pt.measurementId===yt),Pt=Mt&&S[Mt.appId];if(!Pt){oe=[];break}oe.push(Pt)}}0===oe.length&&(oe=Object.values(S)),yield Promise.all(oe),D("event",j,ee||{})}catch(oe){pi.error(oe)}})).apply(this,arguments)}function An(D){const S=window.document.getElementsByTagName("script");for(const k of Object.values(S))if(k.src&&k.src.includes(oa)&&k.src.includes(D))return k;return null}const ct=new le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Ll=new class yn{constructor(S={},k=1e3){this.throttleMetadata=S,this.intervalMillis=k}getThrottleMetadata(S){return this.throttleMetadata[S]}setThrottleMetadata(S,k){this.throttleMetadata[S]=k}deleteThrottleMetadata(S){delete this.throttleMetadata[S]}};function ih(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function tl(D){return So.apply(this,arguments)}function So(){return(So=(0,U.Z)(function*(D){var S;const{appId:k,apiKey:j}=D,ee={method:"GET",headers:ih(j)},oe=Ws.replace("{app-id}",k),Oe=yield fetch(oe,ee);if(200!==Oe.status&&304!==Oe.status){let Ye="";try{const yt=yield Oe.json();(null===(S=yt.error)||void 0===S?void 0:S.message)&&(Ye=yt.error.message)}catch(yt){}throw ct.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:Ye})}return Oe.json()})).apply(this,arguments)}function ei(D){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,U.Z)(function*(D,S=Ll,k){const{appId:j,apiKey:ee,measurementId:oe}=D.options;if(!j)throw ct.create("no-app-id");if(!ee){if(oe)return{measurementId:oe,appId:j};throw ct.create("no-api-key")}const Oe=S.getThrottleMetadata(j)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new xc;return setTimeout((0,U.Z)(function*(){Ye.abort()}),void 0!==k?k:6e4),Xr({appId:j,apiKey:ee,measurementId:oe},Oe,Ye,S)})).apply(this,arguments)}function Xr(D,S,k){return ut.apply(this,arguments)}function ut(){return(ut=(0,U.Z)(function*(D,{throttleEndTimeMillis:S,backoffCount:k},j,ee=Ll){var oe,Oe;const{appId:Ye,measurementId:yt}=D;try{yield rh(j,S)}catch(Mt){if(yt)return pi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null===(oe=Mt)||void 0===oe?void 0:oe.message}]`),{appId:Ye,measurementId:yt};throw Mt}try{const Mt=yield tl(D);return ee.deleteThrottleMetadata(Ye),Mt}catch(Mt){const Pt=Mt;if(!sh(Pt)){if(ee.deleteThrottleMetadata(Ye),yt)return pi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${yt} provided in the "measurementId" field in the local Firebase config. [${null==Pt?void 0:Pt.message}]`),{appId:Ye,measurementId:yt};throw Mt}const pt=503===Number(null===(Oe=null==Pt?void 0:Pt.customData)||void 0===Oe?void 0:Oe.httpStatus)?(0,le.$s)(k,ee.intervalMillis,30):(0,le.$s)(k,ee.intervalMillis),li={throttleEndTimeMillis:Date.now()+pt,backoffCount:k+1};return ee.setThrottleMetadata(Ye,li),pi.debug(`Calling attemptFetch again in ${pt} millis`),Xr(D,li,j,ee)}})).apply(this,arguments)}function rh(D,S){return new Promise((k,j)=>{const ee=Math.max(S-Date.now(),0),oe=setTimeout(k,ee);D.addEventListener(()=>{clearTimeout(oe),j(ct.create("fetch-throttle",{throttleEndTimeMillis:S}))})})}function sh(D){if(!(D instanceof le.ZR&&D.customData))return!1;const S=Number(D.customData.httpStatus);return 429===S||500===S||503===S||504===S}class xc{constructor(){this.listeners=[]}addEventListener(S){this.listeners.push(S)}abort(){this.listeners.forEach(S=>S())}}let Bl,rl;function Ds(){return(Ds=(0,U.Z)(function*(D,S,k,j,ee){if(ee&&ee.global)D("event",k,j);else{const oe=yield S;D("event",k,Object.assign(Object.assign({},j),{send_to:oe}))}})).apply(this,arguments)}function da(D){rl=D}function es(D){Bl=D}function Vl(){return lr.apply(this,arguments)}function lr(){return(lr=(0,U.Z)(function*(){var D;if(!(0,le.hl)())return pi.warn(ct.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,le.eu)()}catch(S){return pi.warn(ct.create("indexeddb-unavailable",{errorInfo:null===(D=S)||void 0===D?void 0:D.toString()}).message),!1}return!0})).apply(this,arguments)}function $n(){return($n=(0,U.Z)(function*(D,S,k,j,ee,oe,Oe){var Ye;const yt=ei(D);yt.then(ci=>{k[ci.measurementId]=ci.appId,D.options.measurementId&&ci.measurementId!==D.options.measurementId&&pi.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${ci.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ci=>pi.error(ci)),S.push(yt);const Mt=Vl().then(ci=>{if(ci)return j.getId()}),[Pt,pt]=yield Promise.all([yt,Mt]);An(oe)||am(oe,Pt.measurementId),rl&&(ee("consent","default",rl),da(void 0)),ee("js",new Date);const li=null!==(Ye=null==Oe?void 0:Oe.config)&&void 0!==Ye?Ye:{};return li.origin="firebase",li.update=!0,null!=pt&&(li[om]=pt),ee("config",Pt.measurementId,li),Bl&&(ee("set",Bl),es(void 0)),Pt.measurementId})).apply(this,arguments)}class zu{constructor(S){this.app=S}_delete(){return delete cr[this.app.options.appId],Promise.resolve()}}let cr={},Rn=[];const ai={};let Ir,tn,Dr="dataLayer",ur=!1;function oh(D,S,k){!function ts(){const D=[];if((0,le.ru)()&&D.push("This is a browser extension environment."),(0,le.zI)()||D.push("Cookies are not available."),D.length>0){const S=D.map((j,ee)=>`(${ee+1}) ${j}`).join(" "),k=ct.create("invalid-analytics-context",{errorInfo:S});pi.warn(k.message)}}();const j=D.options.appId;if(!j)throw ct.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw ct.create("no-api-key");pi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=cr[j])throw ct.create("already-exists",{id:j});if(!ur){!function aa(D){let S=[];Array.isArray(window[D])?S=window[D]:window[D]=S}(Dr);const{wrappedGtag:oe,gtagCore:Oe}=function cm(D,S,k,j,ee){let oe=function(...Oe){window[j].push(arguments)};return window[ee]&&"function"==typeof window[ee]&&(oe=window[ee]),window[ee]=function Ac(D,S,k,j){function oe(){return(oe=(0,U.Z)(function*(Oe,Ye,yt){try{"event"===Oe?yield lm(D,S,k,Ye,yt):"config"===Oe?yield el(D,S,k,j,Ye,yt):"consent"===Oe?D("consent","update",yt):D("set",Ye)}catch(Mt){pi.error(Mt)}})).apply(this,arguments)}return function ee(Oe,Ye,yt){return oe.apply(this,arguments)}}(oe,D,S,k),{gtagCore:oe,wrappedGtag:window[ee]}}(cr,Rn,ai,Dr,"gtag");tn=oe,Ir=Oe,ur=!0}return cr[j]=function ha(D,S,k,j,ee,oe,Oe){return $n.apply(this,arguments)}(D,Rn,ai,S,Ir,Dr,k),new zu(D)}function ah(){return lh.apply(this,arguments)}function lh(){return(lh=(0,U.Z)(function*(){if((0,le.ru)()||!(0,le.zI)()||!(0,le.hl)())return!1;try{return yield(0,le.eu)()}catch(D){return!1}})).apply(this,arguments)}const ni="@firebase/analytics";!function Hl(){(0,de._registerComponent)(new ve.wA(th,(S,{options:k})=>oh(S.getProvider("app").getImmediate(),S.getProvider("installations-internal").getImmediate(),k),"PUBLIC")),(0,de._registerComponent)(new ve.wA("analytics-internal",function D(S){try{const k=S.getProvider(th).getImmediate();return{logEvent:(j,ee,oe)=>function Zs(D,S,k,j){D=(0,le.m9)(D),function Un(D,S,k,j,ee){return Ds.apply(this,arguments)}(tn,cr[D.app.options.appId],S,k,j).catch(ee=>pi.error(ee))}(k,j,ee,oe)}}catch(k){throw ct.create("interop-component-reg-failed",{reason:k})}},"PRIVATE")),(0,de.registerVersion)(ni,"0.8.4"),(0,de.registerVersion)(ni,"0.8.4","esm2017")}();var uh=B(4408),hr=B(7565);const Gl=new class fr extends hr.v{}(class Jf extends uh.o{constructor(S,k){super(S,k),this.scheduler=S,this.work=k}schedule(S,k=0){return k>0?super.schedule(S,k):(this.delay=k,this.state=S,this.scheduler.flush(this),this)}execute(S,k){return k>0||this.closed?super.execute(S,k):this._execute(S,k)}requestAsyncId(S,k,j=0){return null!=j&&j>0||null==j&&this.delay>0?super.requestAsyncId(S,k,j):(S.flush(this),0)}});var pa=B(4986),ol=B(8505),No=B(5363),Mc=B(9468);const qt=new l.GfV("7.4.1"),dh="__angularfire_symbol__analyticsIsSupportedValue",Ks="__angularfire_symbol__analyticsIsSupported",mi="__angularfire_symbol__remoteConfigIsSupportedValue",Oo="__angularfire_symbol__remoteConfigIsSupported",ko="__angularfire_symbol__messagingIsSupportedValue",hh="__angularfire_symbol__messagingIsSupported";function Nc(D,S,k){if(S){if(1===S.length)return S[0];const oe=S.filter(Oe=>Oe.app===k);if(1===oe.length)return oe[0]}return k.container.getProvider(D).getImmediate({optional:!0})}globalThis[Ks]||(globalThis[Ks]=ah().then(D=>globalThis[dh]=D).catch(()=>globalThis[dh]=!1)),globalThis[hh]||(globalThis[hh]=Ic().then(D=>globalThis[ko]=D).catch(()=>globalThis[ko]=!1)),globalThis[Oo]||(globalThis[Oo]=gc().then(D=>globalThis[mi]=D).catch(()=>globalThis[mi]=!1));const fh=(D,S)=>{const k=S?[S]:(0,ne.C6)(),j=[];return k.forEach(ee=>{ee.container.getProvider(D).instances.forEach(Oe=>{j.includes(Oe)||j.push(Oe)})}),j};function Vn(){}class Di{constructor(S,k=Gl){this.zone=S,this.delegate=k}now(){return this.delegate.now()}schedule(S,k,j){const ee=this.zone;return this.delegate.schedule(function(Oe){ee.runGuarded(()=>{S.apply(this,[Oe])})},k,j)}}class Oc{constructor(S){this.zone=S,this.task=null}call(S,k){const j=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Vn,{},Vn,Vn)),k.pipe((0,ol.b)({next:j,complete:j,error:j})).subscribe(S).add(j)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dm=(()=>{class D{constructor(k){this.ngZone=k,this.outsideAngular=k.runOutsideAngular(()=>new Di(Zone.current)),this.insideAngular=k.run(()=>new Di(Zone.current,pa.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(k){return new(k||D)(l.LFG(l.R0b))},D.\u0275prov=l.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function pr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function ph(D){return D.pipe((0,No.Q)(pr().outsideAngular))}function kc(D){return pr(),function Rc(D){return function(k){return(k=k.lift(new Oc(D.ngZone))).pipe((0,Mc.R)(D.outsideAngular),(0,No.Q)(D.insideAngular))}}(pr())(D)}},2090:(lt,Te,B)=>{B.d(Te,{$s:()=>et,BH:()=>$t,DV:()=>wr,Dv:()=>Gi,G6:()=>Me,GJ:()=>ps,L:()=>he,LL:()=>mn,Pz:()=>ln,Sg:()=>ot,UG:()=>Ve,UI:()=>It,US:()=>ve,Wj:()=>_o,Wl:()=>Kt,Yr:()=>we,ZB:()=>W,ZR:()=>On,aH:()=>bt,b$:()=>xe,cI:()=>Xt,dS:()=>zi,eu:()=>Ke,g5:()=>U,gK:()=>$i,gQ:()=>Qn,h$:()=>ce,hl:()=>qe,hu:()=>ne,jU:()=>Ze,lb:()=>Wi,m9:()=>zt,ne:()=>Nr,p$:()=>$,pd:()=>hi,r3:()=>Us,ru:()=>ye,tV:()=>_e,uI:()=>Re,ug:()=>wt,vZ:()=>sr,w1:()=>st,w9:()=>rr,xO:()=>mo,xb:()=>Kr,z$:()=>ze,zI:()=>K,zd:()=>gs});const ne=function(z,H){if(!z)throw U(H)},U=function(z){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+z)},de=function(z){const H=[];let X=0;for(let Ie=0;Ie<z.length;Ie++){let ae=z.charCodeAt(Ie);ae<128?H[X++]=ae:ae<2048?(H[X++]=ae>>6|192,H[X++]=63&ae|128):55296==(64512&ae)&&Ie+1<z.length&&56320==(64512&z.charCodeAt(Ie+1))?(ae=65536+((1023&ae)<<10)+(1023&z.charCodeAt(++Ie)),H[X++]=ae>>18|240,H[X++]=ae>>12&63|128,H[X++]=ae>>6&63|128,H[X++]=63&ae|128):(H[X++]=ae>>12|224,H[X++]=ae>>6&63|128,H[X++]=63&ae|128)}return H},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(z,H){if(!Array.isArray(z))throw Error("encodeByteArray takes an array as a parameter");this.init_();const X=H?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ie=[];for(let ae=0;ae<z.length;ae+=3){const ht=z[ae],Ut=ae+1<z.length,wn=Ut?z[ae+1]:0,un=ae+2<z.length,_n=un?z[ae+2]:0;let Ln=(15&wn)<<2|_n>>6,Yo=63&_n;un||(Yo=64,Ut||(Ln=64)),Ie.push(X[ht>>2],X[(3&ht)<<4|wn>>4],X[Ln],X[Yo])}return Ie.join("")},encodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?btoa(z):this.encodeByteArray(de(z),H)},decodeString(z,H){return this.HAS_NATIVE_SUPPORT&&!H?atob(z):function(z){const H=[];let X=0,Ie=0;for(;X<z.length;){const ae=z[X++];if(ae<128)H[Ie++]=String.fromCharCode(ae);else if(ae>191&&ae<224){const ht=z[X++];H[Ie++]=String.fromCharCode((31&ae)<<6|63&ht)}else if(ae>239&&ae<365){const un=((7&ae)<<18|(63&z[X++])<<12|(63&z[X++])<<6|63&z[X++])-65536;H[Ie++]=String.fromCharCode(55296+(un>>10)),H[Ie++]=String.fromCharCode(56320+(1023&un))}else{const ht=z[X++],Ut=z[X++];H[Ie++]=String.fromCharCode((15&ae)<<12|(63&ht)<<6|63&Ut)}}return H.join("")}(this.decodeStringToByteArray(z,H))},decodeStringToByteArray(z,H){this.init_();const X=H?this.charToByteMapWebSafe_:this.charToByteMap_,Ie=[];for(let ae=0;ae<z.length;){const ht=X[z.charAt(ae++)],wn=ae<z.length?X[z.charAt(ae)]:0;++ae;const _n=ae<z.length?X[z.charAt(ae)]:64;++ae;const Ot=ae<z.length?X[z.charAt(ae)]:64;if(++ae,null==ht||null==wn||null==_n||null==Ot)throw Error();Ie.push(ht<<2|wn>>4),64!==_n&&(Ie.push(wn<<4&240|_n>>2),64!==Ot&&Ie.push(_n<<6&192|Ot))}return Ie},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let z=0;z<this.ENCODED_VALS.length;z++)this.byteToCharMap_[z]=this.ENCODED_VALS.charAt(z),this.charToByteMap_[this.byteToCharMap_[z]]=z,this.byteToCharMapWebSafe_[z]=this.ENCODED_VALS_WEBSAFE.charAt(z),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[z]]=z,z>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(z)]=z,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(z)]=z)}}},ce=function(z){const H=de(z);return ve.encodeByteArray(H,!0)},he=function(z){return ce(z).replace(/\./g,"")},_e=function(z){try{return ve.decodeString(z,!0)}catch(H){console.error("base64Decode failed: ",H)}return null};function $(z){return W(void 0,z)}function W(z,H){if(!(H instanceof Object))return H;switch(H.constructor){case Date:return new Date(H.getTime());case Object:void 0===z&&(z={});break;case Array:z=[];break;default:return H}for(const X in H)!H.hasOwnProperty(X)||!re(X)||(z[X]=W(z[X],H[X]));return z}function re(z){return"__proto__"!==z}function ze(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Re(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ve(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(z){return!1}}function Ze(){return"object"==typeof self&&self.self===self}function ye(){const z="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof z&&void 0!==z.id}function xe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function st(){const z=ze();return z.indexOf("MSIE ")>=0||z.indexOf("Trident/")>=0}function we(){return!1}function Me(){return!Ve()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qe(){return"object"==typeof indexedDB}function Ke(){return new Promise((z,H)=>{try{let X=!0;const Ie="validate-browser-context-for-indexeddb-analytics-module",ae=self.indexedDB.open(Ie);ae.onsuccess=()=>{ae.result.close(),X||self.indexedDB.deleteDatabase(Ie),z(!0)},ae.onupgradeneeded=()=>{X=!1},ae.onerror=()=>{var ht;H((null===(ht=ae.error)||void 0===ht?void 0:ht.message)||"")}}catch(X){H(X)}})}function K(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const be=()=>{try{return function De(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const z=process.env.__FIREBASE_DEFAULTS__;return z?JSON.parse(z):void 0})()||(()=>{if("undefined"==typeof document)return;let z;try{z=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(X){return}const H=z&&_e(z[1]);return H&&JSON.parse(H)})()}catch(z){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${z}`)}},bt=()=>{var z;return null===(z=be())||void 0===z?void 0:z.config},ln=z=>{var H;return null===(H=be())||void 0===H?void 0:H[`_${z}`]};class $t{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((H,X)=>{this.resolve=H,this.reject=X})}wrapCallback(H){return(X,Ie)=>{X?this.reject(X):this.resolve(Ie),"function"==typeof H&&(this.promise.catch(()=>{}),1===H.length?H(X):H(X,Ie))}}}function ot(z,H){if(z.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ie=H||"demo-project",ae=z.iat||0,ht=z.sub||z.user_id;if(!ht)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ut=Object.assign({iss:`https://securetoken.google.com/${Ie}`,aud:Ie,iat:ae,exp:ae+3600,auth_time:ae,sub:ht,user_id:ht,firebase:{sign_in_provider:"custom",identities:{}}},z);return[he(JSON.stringify({alg:"none",type:"JWT"})),he(JSON.stringify(Ut)),""].join(".")}class On extends Error{constructor(H,X,Ie){super(X),this.code=H,this.customData=Ie,this.name="FirebaseError",Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mn.prototype.create)}}class mn{constructor(H,X,Ie){this.service=H,this.serviceName=X,this.errors=Ie}create(H,...X){const Ie=X[0]||{},ae=`${this.service}/${H}`,ht=this.errors[H],Ut=ht?function cn(z,H){return z.replace(nr,(X,Ie)=>{const ae=H[Ie];return null!=ae?String(ae):`<${Ie}?>`})}(ht,Ie):"Error";return new On(ae,`${this.serviceName}: ${Ut} (${ae}).`,Ie)}}const nr=/\{\$([^}]+)}/g;function Xt(z){return JSON.parse(z)}function Kt(z){return JSON.stringify(z)}const br=function(z){let H={},X={},Ie={},ae="";try{const ht=z.split(".");H=Xt(_e(ht[0])||""),X=Xt(_e(ht[1])||""),ae=ht[2],Ie=X.d||{},delete X.d}catch(ht){}return{header:H,claims:X,data:Ie,signature:ae}},rr=function(z){const X=br(z).claims;return!!X&&"object"==typeof X&&X.hasOwnProperty("iat")},ps=function(z){const H=br(z).claims;return"object"==typeof H&&!0===H.admin};function Us(z,H){return Object.prototype.hasOwnProperty.call(z,H)}function wr(z,H){if(Object.prototype.hasOwnProperty.call(z,H))return z[H]}function Kr(z){for(const H in z)if(Object.prototype.hasOwnProperty.call(z,H))return!1;return!0}function It(z,H,X){const Ie={};for(const ae in z)Object.prototype.hasOwnProperty.call(z,ae)&&(Ie[ae]=H.call(X,z[ae],ae,z));return Ie}function sr(z,H){if(z===H)return!0;const X=Object.keys(z),Ie=Object.keys(H);for(const ae of X){if(!Ie.includes(ae))return!1;const ht=z[ae],Ut=H[ae];if(Hn(ht)&&Hn(Ut)){if(!sr(ht,Ut))return!1}else if(ht!==Ut)return!1}for(const ae of Ie)if(!X.includes(ae))return!1;return!0}function Hn(z){return null!==z&&"object"==typeof z}function mo(z){const H=[];for(const[X,Ie]of Object.entries(z))Array.isArray(Ie)?Ie.forEach(ae=>{H.push(encodeURIComponent(X)+"="+encodeURIComponent(ae))}):H.push(encodeURIComponent(X)+"="+encodeURIComponent(Ie));return H.length?"&"+H.join("&"):""}function gs(z){const H={};return z.replace(/^\?/,"").split("&").forEach(Ie=>{if(Ie){const[ae,ht]=Ie.split("=");H[decodeURIComponent(ae)]=decodeURIComponent(ht)}}),H}function hi(z){const H=z.indexOf("?");if(!H)return"";const X=z.indexOf("#",H);return z.substring(H,X>0?X:void 0)}class Qn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let H=1;H<this.blockSize;++H)this.pad_[H]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(H,X){X||(X=0);const Ie=this.W_;if("string"==typeof H)for(let Ot=0;Ot<16;Ot++)Ie[Ot]=H.charCodeAt(X)<<24|H.charCodeAt(X+1)<<16|H.charCodeAt(X+2)<<8|H.charCodeAt(X+3),X+=4;else for(let Ot=0;Ot<16;Ot++)Ie[Ot]=H[X]<<24|H[X+1]<<16|H[X+2]<<8|H[X+3],X+=4;for(let Ot=16;Ot<80;Ot++){const Ln=Ie[Ot-3]^Ie[Ot-8]^Ie[Ot-14]^Ie[Ot-16];Ie[Ot]=4294967295&(Ln<<1|Ln>>>31)}let _n,fi,ae=this.chain_[0],ht=this.chain_[1],Ut=this.chain_[2],wn=this.chain_[3],un=this.chain_[4];for(let Ot=0;Ot<80;Ot++){Ot<40?Ot<20?(_n=wn^ht&(Ut^wn),fi=1518500249):(_n=ht^Ut^wn,fi=1859775393):Ot<60?(_n=ht&Ut|wn&(ht|Ut),fi=2400959708):(_n=ht^Ut^wn,fi=3395469782);const Ln=(ae<<5|ae>>>27)+_n+un+fi+Ie[Ot]&4294967295;un=wn,wn=Ut,Ut=4294967295&(ht<<30|ht>>>2),ht=ae,ae=Ln}this.chain_[0]=this.chain_[0]+ae&4294967295,this.chain_[1]=this.chain_[1]+ht&4294967295,this.chain_[2]=this.chain_[2]+Ut&4294967295,this.chain_[3]=this.chain_[3]+wn&4294967295,this.chain_[4]=this.chain_[4]+un&4294967295}update(H,X){if(null==H)return;void 0===X&&(X=H.length);const Ie=X-this.blockSize;let ae=0;const ht=this.buf_;let Ut=this.inbuf_;for(;ae<X;){if(0===Ut)for(;ae<=Ie;)this.compress_(H,ae),ae+=this.blockSize;if("string"==typeof H){for(;ae<X;)if(ht[Ut]=H.charCodeAt(ae),++Ut,++ae,Ut===this.blockSize){this.compress_(ht),Ut=0;break}}else for(;ae<X;)if(ht[Ut]=H[ae],++Ut,++ae,Ut===this.blockSize){this.compress_(ht),Ut=0;break}}this.inbuf_=Ut,this.total_+=X}digest(){const H=[];let X=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ae=this.blockSize-1;ae>=56;ae--)this.buf_[ae]=255&X,X/=256;this.compress_(this.buf_);let Ie=0;for(let ae=0;ae<5;ae++)for(let ht=24;ht>=0;ht-=8)H[Ie]=this.chain_[ae]>>ht&255,++Ie;return H}}function Nr(z,H){const X=new Zo(z,H);return X.subscribe.bind(X)}class Zo{constructor(H,X){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=X,this.task.then(()=>{H(this)}).catch(Ie=>{this.error(Ie)})}next(H){this.forEachObserver(X=>{X.next(H)})}error(H){this.forEachObserver(X=>{X.error(H)}),this.close(H)}complete(){this.forEachObserver(H=>{H.complete()}),this.close()}subscribe(H,X,Ie){let ae;if(void 0===H&&void 0===X&&void 0===Ie)throw new Error("Missing Observer.");ae=function _t(z,H){if("object"!=typeof z||null===z)return!1;for(const X of H)if(X in z&&"function"==typeof z[X])return!0;return!1}(H,["next","error","complete"])?H:{next:H,error:X,complete:Ie},void 0===ae.next&&(ae.next=St),void 0===ae.error&&(ae.error=St),void 0===ae.complete&&(ae.complete=St);const ht=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ae.error(this.finalError):ae.complete()}catch(Ut){}}),this.observers.push(ae),ht}unsubscribeOne(H){void 0===this.observers||void 0===this.observers[H]||(delete this.observers[H],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(H){if(!this.finalized)for(let X=0;X<this.observers.length;X++)this.sendOne(X,H)}sendOne(H,X){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[H])try{X(this.observers[H])}catch(Ie){"undefined"!=typeof console&&console.error&&console.error(Ie)}})}close(H){this.finalized||(this.finalized=!0,void 0!==H&&(this.finalError=H),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function St(){}const Gi=function(z,H,X,Ie){let ae;if(Ie<H?ae="at least "+H:Ie>X&&(ae=0===X?"none":"no more than "+X),ae)throw new Error(z+" failed: Was called with "+Ie+(1===Ie?" argument.":" arguments.")+" Expects "+ae+".")};function $i(z,H){return`${z} failed: ${H} argument `}function _o(z,H,X,Ie){if((!Ie||X)&&"function"!=typeof X)throw new Error($i(z,H)+"must be a valid function.")}function Wi(z,H,X,Ie){if((!Ie||X)&&("object"!=typeof X||null===X))throw new Error($i(z,H)+"must be a valid context object.")}const zi=function(z){const H=[];let X=0;for(let Ie=0;Ie<z.length;Ie++){let ae=z.charCodeAt(Ie);if(ae>=55296&&ae<=56319){const ht=ae-55296;Ie++,ne(Ie<z.length,"Surrogate pair missing trail surrogate."),ae=65536+(ht<<10)+(z.charCodeAt(Ie)-56320)}ae<128?H[X++]=ae:ae<2048?(H[X++]=ae>>6|192,H[X++]=63&ae|128):ae<65536?(H[X++]=ae>>12|224,H[X++]=ae>>6&63|128,H[X++]=63&ae|128):(H[X++]=ae>>18|240,H[X++]=ae>>12&63|128,H[X++]=ae>>6&63|128,H[X++]=63&ae|128)}return H},wt=function(z){let H=0;for(let X=0;X<z.length;X++){const Ie=z.charCodeAt(X);Ie<128?H++:Ie<2048?H+=2:Ie>=55296&&Ie<=56319?(H+=4,X++):H+=3}return H};function et(z,H=1e3,X=2){const Ie=H*Math.pow(X,z),ae=Math.round(.5*Ie*(Math.random()-.5)*2);return Math.min(144e5,Ie+ae)}function zt(z){return z&&z._delegate?z._delegate:z}},2626:(lt,Te,B)=>{var l=B(5e3);let ne=null;function U(){return ne}const ce=new l.OlP("DocumentToken");let he=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function _e(){return(0,l.LFG)(W)}()},providedIn:"platform"}),n})();const $=new l.OlP("Location Initialized");let W=(()=>{class n extends he{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return U().getBaseHref(this._doc)}onPopState(t){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",t,!1),()=>i.removeEventListener("popstate",t)}onHashChange(t){const i=U().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",t,!1),()=>i.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,i,r){re()?this._history.pushState(t,i,r):this.location.hash=r}replaceState(t,i,r){re()?this._history.replaceState(t,i,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function ze(){return new W((0,l.LFG)(ce))}()},providedIn:"platform"}),n})();function re(){return!!window.history.pushState}function Re(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Ve(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Ze(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:function(){return function xe(n){const e=(0,l.LFG)(ce).location;return new st((0,l.LFG)(he),e&&e.origin||"")}()},providedIn:"root"}),n})();const Je=new l.OlP("appBaseHref");let st=(()=>{class n extends ye{constructor(t,i){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==i&&(i=this._platformLocation.getBaseHrefFromDOM()),null==i)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=i}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Re(this._baseHref,t)}path(t=!1){const i=this._platformLocation.pathname+Ze(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${i}${r}`:i}pushState(t,i,r,s){const c=this.prepareExternalUrl(r+Ze(s));this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){const c=this.prepareExternalUrl(r+Ze(s));this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he),l.LFG(Je,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Le=(()=>{class n extends ye{constructor(t,i){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=i&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let i=this._platformLocation.hash;return null==i&&(i="#"),i.length>0?i.substring(1):i}prepareExternalUrl(t){const i=Re(this._baseHref,t);return i.length>0?"#"+i:i}pushState(t,i,r,s){let c=this.prepareExternalUrl(r+Ze(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.pushState(t,i,c)}replaceState(t,i,r,s){let c=this.prepareExternalUrl(r+Ze(s));0==c.length&&(c=this._platformLocation.pathname),this._platformLocation.replaceState(t,i,c)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformLocation).historyGo)||void 0===r||r.call(i,t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(he),l.LFG(Je,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),we=(()=>{class n{constructor(t,i){this._subject=new l.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const r=this._platformStrategy.getBaseHref();this._platformLocation=i,this._baseHref=Ve(Ke(r)),this._platformStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,i=""){return this.path()==this.normalize(t+Ze(i))}normalize(t){return n.stripTrailingSlash(function qe(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,Ke(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,i="",r=null){this._platformStrategy.pushState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(i)),r)}replaceState(t,i="",r=null){this._platformStrategy.replaceState(r,"",t,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Ze(i)),r)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var i,r;null===(r=(i=this._platformStrategy).historyGo)||void 0===r||r.call(i,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}))}_notifyUrlChangeListeners(t="",i){this._urlChangeListeners.forEach(r=>r(t,i))}subscribe(t,i,r){return this._subject.subscribe({next:t,error:i,complete:r})}}return n.normalizeQueryParams=Ze,n.joinWithSlash=Re,n.stripTrailingSlash=Ve,n.\u0275fac=function(t){return new(t||n)(l.LFG(ye),l.LFG(he))},n.\u0275prov=l.Yz7({token:n,factory:function(){return function Me(){return new we((0,l.LFG)(ye),(0,l.LFG)(he))}()},providedIn:"root"}),n})();function Ke(n){return n.replace(/\/index.html$/,"")}function $a(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[r,s]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(r.trim()===e)return decodeURIComponent(s)}return null}class bo{constructor(e,t,i,r){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Cn=(()=>{class n{constructor(t,i,r){this._viewContainer=t,this._template=i,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((r,s,c)=>{if(null==r.previousIndex)i.createEmbeddedView(this._template,new bo(r.item,this._ngForOf,-1,-1),null===c?void 0:c);else if(null==c)i.remove(null===s?void 0:s);else if(null!==s){const d=i.get(s);i.move(d,c),Qo(d,r)}});for(let r=0,s=i.length;r<s;r++){const d=i.get(r).context;d.index=r,d.count=s,d.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{Qo(i.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc),l.Y36(l.ZZ4))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function Qo(n,e){n.context.$implicit=e.item}let dn=(()=>{class n{constructor(t,i){this._viewContainer=t,this._context=new Sn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){dc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){dc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.s_b),l.Y36(l.Rgc))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class Sn{constructor(){this.$implicit=null,this.ngIf=null}}function dc(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,l.AaK)(e)}'.`)}let pc=(()=>{class n{transform(t){return JSON.stringify(t,null,2)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=l.Yjl({name:"json",type:n,pure:!1}),n})(),Ni=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const Xo="browser";function Za(n){return"server"===n}let ku=(()=>{class n{}return n.\u0275prov=(0,l.Yz7)({token:n,providedIn:"root",factory:()=>new Ka((0,l.LFG)(ce),window)}),n})();class Ka{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Es(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const i=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=i.currentNode;for(;r;){const s=r.shadowRoot;if(s){const c=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(c)return c}r=i.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),i=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(i-s[0],r-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ru(this.window.history)||Ru(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function Ru(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Tn{}class ea extends class Ol extends class ve{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function le(n){ne||(ne=n)}(new ea)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function kl(){return gn=gn||document.querySelector("base"),gn?gn.getAttribute("href"):null}();return null==t?null:function To(n){mc=mc||document.createElement("a"),mc.setAttribute("href",n);const e=mc.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){gn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return $a(document.cookie,e)}}let mc,gn=null;const ki=new l.OlP("TRANSITION_ID"),Gn=[{provide:l.ip1,useFactory:function Pu(n,e,t){return()=>{t.get(l.CZH).donePromise.then(()=>{const i=U(),r=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<r.length;s++)i.remove(r[s])})}},deps:[ki,ce,l.zs3],multi:!0}];class Cs{static init(){(0,l.VLi)(new Cs)}addToWindow(e){l.dqk.getAngularTestability=(i,r=!0)=>{const s=e.findTestabilityInTree(i,r);if(null==s)throw new Error("Could not find testability for element.");return s},l.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),l.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),l.dqk.frameworkStabilizers||(l.dqk.frameworkStabilizers=[]),l.dqk.frameworkStabilizers.push(i=>{const r=l.dqk.getAllAngularTestabilities();let s=r.length,c=!1;const d=function(f){c=c||f,s--,0==s&&i(c)};r.forEach(function(f){f.whenStable(d)})})}findTestabilityInTree(e,t,i){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:i?U().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ri=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ta=new l.OlP("EventManagerPlugins");let Gs=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,r){return this._findPluginFor(i).addEventListener(t,i,r)}addGlobalEventListener(t,i,r){return this._findPluginFor(i).addGlobalEventListener(t,i,r)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const r=this._plugins;for(let s=0;s<r.length;s++){const c=r[s];if(c.supports(t))return this._eventNameToPlugin.set(t,c),c}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ta),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Rl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const r=U().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,i)}}let Qr=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),i.add(r))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),Ts=(()=>{class n extends Qr{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,r){t.forEach(s=>{const c=this._doc.createElement("style");c.textContent=s,r.push(i.appendChild(c))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Ya),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,r)=>{this._addStylesToHost(t,r,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Ya))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Ya(n){U().remove(n)}const At={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Do=/%COMP%/g;function Qa(n,e,t){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?Qa(n,r,t):(r=r.replace(Do,n),t.push(r))}return t}function Pe(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let na=(()=>{class n{constructor(t,i,r){this.eventManager=t,this.sharedStylesHost=i,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new Bn(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case l.ifc.Emulated:{let r=this.rendererByCompId.get(i.id);return r||(r=new kr(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,r)),r.applyToHost(t),r}case 1:case l.ifc.ShadowDom:return new Uu(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const r=Qa(i.id,i.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Gs),l.LFG(Ts),l.LFG(l.AFp))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Bn{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(At[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,i){e&&e.insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;const s=At[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const r=At[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(l.JOm.DashCase|l.JOm.Important)?e.style.setProperty(t,i,r&l.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&l.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Pe(i)):this.eventManager.addEventListener(e,t,Pe(i))}}class kr extends Bn{constructor(e,t,i,r){super(e),this.component=i;const s=Qa(r+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function yc(n){return"_ngcontent-%COMP%".replace(Do,n)}(r+"-"+i.id),this.hostAttr=function Bu(n){return"_nghost-%COMP%".replace(Do,n)}(r+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class Uu extends Bn{constructor(e,t,i,r){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Qa(r.id,r.styles,[]);for(let c=0;c<s.length;c++){const d=document.createElement("style");d.textContent=s[c],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let Vu=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,r){return t.addEventListener(i,r,!1),()=>this.removeEventListener(t,i,r)}removeEventListener(t,i,r){return t.removeEventListener(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const ju=["alt","control","meta","shift"],rm={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$s={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ki={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Rr=(()=>{class n extends Rl{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,r){const s=n.parseEventName(i),c=n.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>U().onAndCancel(t,s.domEventName,c))}static parseEventName(t){const i=t.toLowerCase().split("."),r=i.shift();if(0===i.length||"keydown"!==r&&"keyup"!==r)return null;const s=n._normalizeKey(i.pop());let c="";if(ju.forEach(f=>{const y=i.indexOf(f);y>-1&&(i.splice(y,1),c+=f+".")}),c+=s,0!=i.length||0===s.length)return null;const d={};return d.domEventName=r,d.fullKey=c,d}static getEventFullKey(t){let i="",r=function bc(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&$s.hasOwnProperty(e)&&(e=$s[e]))}return rm[e]||e}(t);return r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),ju.forEach(s=>{s!=r&&Ki[s](t)&&(i+=s+".")}),i+=r,i}static eventCallback(t,i,r){return s=>{n.getEventFullKey(s)===t&&r.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Ec=(0,l.eFA)(l._c5,"browser",[{provide:l.Lbi,useValue:Xo},{provide:l.g9A,useValue:function Io(){ea.makeCurrent(),Cs.init()},multi:!0},{provide:ce,useFactory:function Hu(){return(0,l.RDi)(document),document},deps:[]}]),Gu=[{provide:l.zSh,useValue:"root"},{provide:l.qLn,useFactory:function Jr(){return new l.qLn},deps:[]},{provide:ta,useClass:Vu,multi:!0,deps:[ce,l.R0b,l.Lbi]},{provide:ta,useClass:Rr,multi:!0,deps:[ce]},{provide:na,useClass:na,deps:[Gs,Ts,l.AFp]},{provide:l.FYo,useExisting:na},{provide:Qr,useExisting:Ts},{provide:Ts,useClass:Ts,deps:[ce]},{provide:l.dDg,useClass:l.dDg,deps:[l.R0b]},{provide:Gs,useClass:Gs,deps:[ta,l.R0b]},{provide:Tn,useClass:Ri,deps:[]}];let Ja=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:l.AFp,useValue:t.appId},{provide:ki,useExisting:l.AFp},Gn]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(n,12))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:Gu,imports:[Ni,l.hGG]}),n})();"undefined"!=typeof window&&window;var An=B(8996),la=B(3269);function ct(...n){const e=(0,la.yG)(n);return(0,An.D)(n,e)}var Dn=B(7579);class gi extends Dn.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:i}=this;if(e)throw t;return this._throwIfClosed(),i}next(e){super.next(this._value=e)}}var yn=B(8306);const{isArray:Ll}=Array,{getPrototypeOf:ih,prototype:tl,keys:So}=Object;function ei(n){if(1===n.length){const e=n[0];if(Ll(e))return{args:e,keys:null};if(function Ao(n){return n&&"object"==typeof n&&ih(n)===tl}(e)){const t=So(e);return{args:t.map(i=>e[i]),keys:t}}}return{args:n,keys:null}}var Xr=B(4671),ut=B(4004);const{isArray:rh}=Array;function xc(n){return(0,ut.U)(e=>function sh(n,e){return rh(e)?n(...e):n(e)}(n,e))}function Bl(n,e){return n.reduce((t,i,r)=>(t[i]=e[r],t),{})}var Un=B(5403),Ds=B(9672);function xo(n,e,t){n?(0,Ds.f)(t,n,e):e()}var Yi=B(576);function il(n,e){const t=(0,Yi.m)(n)?n:()=>n,i=r=>r.error(t());return new yn.y(e?r=>e.schedule(i,0,r):i)}const ca=(0,B(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var ua=B(8189);function da(...n){return function rl(){return(0,ua.J)(1)}()((0,An.D)(n,(0,la.yG)(n)))}var es=B(8421);function Vl(n){return new yn.y(e=>{(0,es.Xf)(n()).subscribe(e)})}var lr=B(515),ha=B(727),$n=B(4482);function zu(){return(0,$n.e)((n,e)=>{let t=null;n._refCount++;const i=(0,Un.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,s=t;t=null,r&&(!s||r===s)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(i),i.closed||(t=n.connect())})}class cr extends yn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,$n.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ha.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Un.x)(t,void 0,()=>{this._teardown(),t.complete()},i=>{this._teardown(),t.error(i)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ha.w0.EMPTY)}return e}refCount(){return zu()(this)}}function Rn(n,e){return(0,$n.e)((t,i)=>{let r=null,s=0,c=!1;const d=()=>c&&!r&&i.complete();t.subscribe((0,Un.x)(i,f=>{null==r||r.unsubscribe();let y=0;const w=s++;(0,es.Xf)(n(f,w)).subscribe(r=(0,Un.x)(i,T=>i.next(e?e(f,T,w,y++):T),()=>{r=null,d()}))},()=>{c=!0,d()}))})}function ai(n){return n<=0?()=>lr.E:(0,$n.e)((e,t)=>{let i=0;e.subscribe((0,Un.x)(t,r=>{++i<=n&&(t.next(r),n<=i&&t.complete())}))})}function Dr(...n){const e=(0,la.yG)(n);return(0,$n.e)((t,i)=>{(e?da(n,t,e):da(n,t)).subscribe(i)})}function Mo(n,e,t,i,r){return(s,c)=>{let d=t,f=e,y=0;s.subscribe((0,Un.x)(c,w=>{const T=y++;f=d?n(f,w,T):(d=!0,w),i&&c.next(f)},r&&(()=>{d&&c.next(f),c.complete()})))}}function Ir(n,e){return(0,$n.e)(Mo(n,e,arguments.length>=2,!0))}function tn(n,e){return(0,$n.e)((t,i)=>{let r=0;t.subscribe((0,Un.x)(i,s=>n.call(e,s,r++)&&i.next(s)))})}function ur(n){return(0,$n.e)((e,t)=>{let s,i=null,r=!1;i=e.subscribe((0,Un.x)(t,void 0,void 0,c=>{s=(0,es.Xf)(n(c,ur(n)(e))),i?(i.unsubscribe(),i=null,s.subscribe(t)):r=!0})),r&&(i.unsubscribe(),i=null,s.subscribe(t))})}var ti=B(5577);function ts(n,e){return(0,Yi.m)(e)?(0,ti.z)(n,e,1):(0,ti.z)(n,1)}function oh(n){return n<=0?()=>lr.E:(0,$n.e)((e,t)=>{let i=[];e.subscribe((0,Un.x)(t,r=>{i.push(r),n<i.length&&i.shift()},()=>{for(const r of i)t.next(r);t.complete()},void 0,()=>{i=null}))})}function qu(n=Wn){return(0,$n.e)((e,t)=>{let i=!1;e.subscribe((0,Un.x)(t,r=>{i=!0,t.next(r)},()=>i?t.complete():t.error(n())))})}function Wn(){return new ca}function ah(n){return(0,$n.e)((e,t)=>{let i=!1;e.subscribe((0,Un.x)(t,r=>{i=!0,t.next(r)},()=>{i||t.next(n),t.complete()}))})}function jl(n,e){const t=arguments.length>=2;return i=>i.pipe(n?tn((r,s)=>n(r,s,i)):Xr.y,ai(1),t?ah(e):qu(()=>new ca))}var dr=B(8505);class fa{constructor(e,t){this.id=e,this.url=t}}class Qf extends fa{constructor(e,t,i="imperative",r=null){super(e,t),this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zs extends fa{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ch extends fa{constructor(e,t,i){super(e,t),this.reason=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ni extends fa{constructor(e,t,i){super(e,t),this.error=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class sl extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Hl extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class uh extends fa{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Jf extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class hr extends fa{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fr{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Gl{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Zu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pa{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ol{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class No{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mc{constructor(e,t,i){this.routerEvent=e,this.position=t,this.anchor=i}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const qt="primary";class dh{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Ks(n){return new dh(n)}const mi="ngNavigationCancelingError";function Oo(n){const e=Error("NavigationCancelingError: "+n);return e[mi]=!0,e}function hh(n,e,t){const i=t.path.split("/");if(i.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||i.length<n.length))return null;const r={};for(let s=0;s<i.length;s++){const c=i[s],d=n[s];if(c.startsWith(":"))r[c.substring(1)]=d;else if(c!==d.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Ys(n,e){const t=n?Object.keys(n):void 0,i=e?Object.keys(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Ku(n[r],e[r]))return!1;return!0}function Ku(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}return n===e}function Xf(n){return Array.prototype.concat.apply([],n)}function Nc(n){return n.length>0?n[n.length-1]:null}function Vn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Di(n){return(0,l.CqO)(n)?n:(0,l.QGY)(n)?(0,An.D)(Promise.resolve(n)):ct(n)}const dm={exact:function ph(n,e,t){if(!j(n.segments,e.segments)||!Pc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const i in e.children)if(!n.children[i]||!ph(n.children[i],e.children[i],t))return!1;return!0},subset:kc},pr={exact:function Pr(n,e){return Ys(n,e)},subset:function gh(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ku(n[t],e[t]))},ignored:()=>!0};function ll(n,e,t){return dm[t.paths](n.root,e.root,t.matrixParams)&&pr[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function kc(n,e,t){return Rc(n,e,e.segments,t)}function Rc(n,e,t,i){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!j(r,t)||e.hasChildren()||!Pc(r,t,i))}if(n.segments.length===t.length){if(!j(n.segments,t)||!Pc(n.segments,t,i))return!1;for(const r in e.children)if(!n.children[r]||!kc(n.children[r],e.children[r],i))return!1;return!0}{const r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(j(n.segments,r)&&Pc(n.segments,r,i)&&n.children[qt])&&Rc(n.children[qt],e,s,i)}}function Pc(n,e,t){return e.every((i,r)=>pr[t](n[r].parameters,i.parameters))}class Is{constructor(e,t,i){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ks(this.queryParams)),this._queryParamMap}toString(){return Ye.serialize(this)}}class D{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Vn(t,(i,r)=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return yt(this)}}class S{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Ks(this.parameters)),this._parameterMap}toString(){return Ss(this)}}function j(n,e){return n.length===e.length&&n.every((t,i)=>t.path===e[i].path)}class oe{}class Oe{parse(e){const t=new hm(e);return new Is(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Mt(e.root,!0)}`,i=function $l(n){const e=Object.keys(n).map(t=>{const i=n[t];return Array.isArray(i)?i.map(r=>`${pt(t)}=${pt(r)}`).join("&"):`${pt(t)}=${pt(i)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${i}${"string"==typeof e.fragment?`#${function li(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Ye=new Oe;function yt(n){return n.segments.map(e=>Ss(e)).join("/")}function Mt(n,e){if(!n.hasChildren())return yt(n);if(e){const t=n.children[qt]?Mt(n.children[qt],!1):"",i=[];return Vn(n.children,(r,s)=>{s!==qt&&i.push(`${s}:${Mt(r,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}{const t=function ee(n,e){let t=[];return Vn(n.children,(i,r)=>{r===qt&&(t=t.concat(e(i,r)))}),Vn(n.children,(i,r)=>{r!==qt&&(t=t.concat(e(i,r)))}),t}(n,(i,r)=>r===qt?[Mt(n.children[qt],!1)]:[`${r}:${Mt(i,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[qt]?`${yt(n)}/${t[0]}`:`${yt(n)}/(${t.join("//")})`}}function Pt(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function pt(n){return Pt(n).replace(/%3B/gi,";")}function ci(n){return Pt(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ro(n){return decodeURIComponent(n)}function Po(n){return Ro(n.replace(/\+/g,"%20"))}function Ss(n){return`${ci(n.path)}${function Fc(n){return Object.keys(n).map(e=>`;${ci(e)}=${ci(n[e])}`).join("")}(n.parameters)}`}const ga=/^[^\/()?;=#]+/;function As(n){const e=n.match(ga);return e?e[0]:""}const ns=/^[^=?&#]+/,ep=/^[^&#]+/;class hm{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new D([],{}):new D([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[qt]=new D(e,t)),i}parseSegment(){const e=As(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new S(Ro(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=As(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const r=As(this.remaining);r&&(i=r,this.capture(i))}e[Ro(t)]=Ro(i)}parseQueryParam(e){const t=function cl(n){const e=n.match(ns);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){const c=function pE(n){const e=n.match(ep);return e?e[0]:""}(this.remaining);c&&(i=c,this.capture(i))}const r=Po(t),s=Po(i);if(e.hasOwnProperty(r)){let c=e[r];Array.isArray(c)||(c=[c],e[r]=c),c.push(s)}else e[r]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const i=As(this.remaining),r=this.remaining[i.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let s;i.indexOf(":")>-1?(s=i.substr(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=qt);const c=this.parseChildren();t[s]=1===Object.keys(c).length?c[qt]:new D([],c),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class tp{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=fm(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){const t=fm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Lc(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Lc(e,this._root).map(t=>t.value)}}function fm(n,e){if(n===e.value)return e;for(const t of e.children){const i=fm(n,t);if(i)return i}return null}function Lc(n,e){if(n===e.value)return[e];for(const t of e.children){const i=Lc(n,t);if(i.length)return i.unshift(e),i}return[]}class ma{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Bc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Yu extends tp{constructor(e,t){super(e),this.snapshot=t,yh(this,e)}toString(){return this.snapshot.toString()}}function mh(n,e){const t=function Uc(n,e){const c=new _a([],{},{},"",{},qt,e,null,n.root,-1,{});return new _h("",new ma(c,[]))}(n,e),i=new gi([new S("",{})]),r=new gi({}),s=new gi({}),c=new gi({}),d=new gi(""),f=new Vc(i,r,c,d,s,qt,e,t.root);return f.snapshot=t.root,new Yu(new ma(f,[]),t)}class Vc{constructor(e,t,i,r,s,c,d,f){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this._futureSnapshot=f}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ut.U)(e=>Ks(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ut.U)(e=>Ks(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function pm(n,e="emptyOnly"){const t=n.pathFromRoot;let i=0;if("always"!==e)for(i=t.length-1;i>=1;){const r=t[i],s=t[i-1];if(r.routeConfig&&""===r.routeConfig.path)i--;else{if(s.component)break;i--}}return function gE(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(i))}class _a{constructor(e,t,i,r,s,c,d,f,y,w,T){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=c,this.component=d,this.routeConfig=f,this._urlSegment=y,this._lastPathIndex=w,this._resolve=T}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Ks(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Ks(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(i=>i.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class _h extends tp{constructor(e,t){super(t),this.url=e,yh(this,t)}toString(){return np(this._root)}}function yh(n,e){e.value._routerState=n,e.children.forEach(t=>yh(n,t))}function np(n){const e=n.children.length>0?` { ${n.children.map(np).join(", ")} } `:"";return`${n.value}${e}`}function vh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ys(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ys(e.params,t.params)||n.params.next(t.params),function al(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ys(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ys(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function bh(n,e){const t=Ys(n.params,e.params)&&function k(n,e){return j(n,e)&&n.every((t,i)=>Ys(t.parameters,e[i].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||bh(n.parent,e.parent))}function Qu(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const i=t.value;i._futureSnapshot=e.value;const r=function Ky(n,e,t){return e.children.map(i=>{for(const r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return Qu(n,i,r);return Qu(n,i)})}(n,e,t);return new ma(i,r)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const c=s.route;return c.value._futureSnapshot=e.value,c.children=e.children.map(d=>Qu(n,d)),c}}const i=function Yy(n){return new Vc(new gi(n.url),new gi(n.params),new gi(n.queryParams),new gi(n.fragment),new gi(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(s=>Qu(n,s));return new ma(i,r)}}function is(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function ya(n){return"object"==typeof n&&null!=n&&n.outlets}function Ju(n,e,t,i,r){let s={};if(i&&Vn(i,(d,f)=>{s[f]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`}),n===e)return new Is(t,s,r);const c=Jy(n,e,t);return new Is(c,s,r)}function Jy(n,e,t){const i={};return Vn(n.children,(r,s)=>{i[s]=r===e?t:Jy(r,e,t)}),new D(n.segments,i)}class mm{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&is(i[0]))throw new Error("Root segment cannot have matrix parameters");const r=i.find(ya);if(r&&r!==Nc(i))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class wh{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}}function ym(n,e,t){if(n||(n=new D([],{})),0===n.segments.length&&n.hasChildren())return Eh(n,e,t);const i=function Xy(n,e,t){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;const c=n.segments[r],d=t[i];if(ya(d))break;const f=`${d}`,y=i<t.length-1?t[i+1]:null;if(r>0&&void 0===f)break;if(f&&y&&"object"==typeof y&&void 0===y.outlets){if(!rp(f,y,c))return s;i+=2}else{if(!rp(f,{},c))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){const s=new D(n.segments.slice(0,i.pathIndex),{});return s.children[qt]=new D(n.segments.slice(i.pathIndex),n.children),Eh(s,0,r)}return i.match&&0===r.length?new D(n.segments,{}):i.match&&!n.hasChildren()?vm(n,e,t):i.match?Eh(n,0,r):vm(n,e,t)}function Eh(n,e,t){if(0===t.length)return new D(n.segments,{});{const i=function _m(n){return ya(n[0])?n[0].outlets:{[qt]:n}}(t),r={};return Vn(i,(s,c)=>{"string"==typeof s&&(s=[s]),null!==s&&(r[c]=ym(n.children[c],e,s))}),Vn(n.children,(s,c)=>{void 0===i[c]&&(r[c]=s)}),new D(n.segments,r)}}function vm(n,e,t){const i=n.segments.slice(0,e);let r=0;for(;r<t.length;){const s=t[r];if(ya(s)){const f=ev(s.outlets);return new D(i,f)}if(0===r&&is(t[0])){i.push(new S(n.segments[e].path,jc(t[0]))),r++;continue}const c=ya(s)?s.outlets[qt]:`${s}`,d=r<t.length-1?t[r+1]:null;c&&d&&is(d)?(i.push(new S(c,jc(d))),r+=2):(i.push(new S(c,{})),r++)}return new D(i,{})}function ev(n){const e={};return Vn(n,(t,i)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[i]=vm(new D([],{}),0,t))}),e}function jc(n){const e={};return Vn(n,(t,i)=>e[i]=`${t}`),e}function rp(n,e,t){return n==t.path&&Ys(e,t.parameters)}class Qs{constructor(e,t,i,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r}activate(e){const t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),vh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){const r=Bc(t);e.children.forEach(s=>{const c=s.value.outlet;this.deactivateRoutes(s,r[c],i),delete r[c]}),Vn(r,(s,c)=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(r===s)if(r.component){const c=i.getContext(r.outlet);c&&this.deactivateChildRoutes(e,t,c.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bc(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);if(i&&i.outlet){const c=i.outlet.detach(),d=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:c,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Bc(e);for(const c of Object.keys(s))this.deactivateRouteAndItsChildren(s[c],r);i&&i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated(),i.attachRef=null,i.resolver=null,i.route=null)}activateChildRoutes(e,t,i){const r=Bc(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new No(s.value.snapshot))}),e.children.length&&this.forwardEvent(new pa(e.value.snapshot))}activateRoutes(e,t,i){const r=e.value,s=t?t.value:null;if(vh(r),r===s)if(r.component){const c=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,c.children)}else this.activateChildRoutes(e,t,i);else if(r.component){const c=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const d=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),c.children.onOutletReAttached(d.contexts),c.attachRef=d.componentRef,c.route=d.route.value,c.outlet&&c.outlet.attach(d.componentRef,d.route.value),vh(d.route.value),this.activateChildRoutes(e,null,c.children)}else{const d=function bm(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),f=d?d.module.componentFactoryResolver:null;c.attachRef=null,c.route=r,c.resolver=f,c.outlet&&c.outlet.activateWith(r,f),this.activateChildRoutes(e,null,c.children)}}else this.activateChildRoutes(e,null,i)}}class Ch{constructor(e,t){this.routes=e,this.module=t}}function Js(n){return"function"==typeof n}function ul(n){return n instanceof Is}const Th=Symbol("INITIAL_VALUE");function Hc(){return Rn(n=>function nl(...n){const e=(0,la.yG)(n),t=(0,la.jO)(n),{args:i,keys:r}=ei(n);if(0===i.length)return(0,An.D)([],e);const s=new yn.y(function qs(n,e,t=Xr.y){return i=>{xo(e,()=>{const{length:r}=n,s=new Array(r);let c=r,d=r;for(let f=0;f<r;f++)xo(e,()=>{const y=(0,An.D)(n[f],e);let w=!1;y.subscribe((0,Un.x)(i,T=>{s[f]=T,w||(w=!0,d--),d||i.next(t(s.slice()))},()=>{--c||i.complete()}))},i)},i)}}(i,e,r?c=>Bl(r,c):Xr.y));return t?s.pipe(xc(t)):s}(n.map(e=>e.pipe(ai(1),Dr(Th)))).pipe(Ir((e,t)=>{let i=!1;return t.reduce((r,s,c)=>r!==Th?r:(s===Th&&(i=!0),i||!1!==s&&c!==t.length-1&&!ul(s)?r:s),e)},Th),tn(e=>e!==Th),(0,ut.U)(e=>ul(e)?e:!0===e),ai(1)))}class wm{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ed,this.attachRef=null}}class ed{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new wm,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let ap=(()=>{class n{constructor(t,i,r,s,c){this.parentContexts=t,this.location=i,this.resolver=r,this.changeDetector=c,this.activated=null,this._activatedRoute=null,this.activateEvents=new l.vpe,this.deactivateEvents=new l.vpe,this.attachEvents=new l.vpe,this.detachEvents=new l.vpe,this.name=s||qt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const c=(i=i||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),d=this.parentContexts.getOrCreateContext(this.name).children,f=new tv(t,d,this.location.injector);this.activated=this.location.createComponent(c,this.location.length,f),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ed),l.Y36(l.s_b),l.Y36(l._Vd),l.$8M("name"),l.Y36(l.sBO))},n.\u0275dir=l.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class tv{constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Vc?this.route:e===ed?this.childContexts:this.parent.get(e,t)}}let Em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&l._UZ(0,"router-outlet")},directives:[ap],encapsulation:2}),n})();function Dh(n,e=""){for(let t=0;t<n.length;t++){const i=n[t];Gc(i,nv(e,i))}}function Gc(n,e){n.children&&Dh(n.children,e)}function nv(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function td(n){const e=n.children&&n.children.map(td),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==qt&&(t.component=Em),t}function Fr(n){return n.outlet||qt}function Zn(n,e){const t=n.filter(i=>Fr(i)===e);return t.push(...n.filter(i=>Fr(i)!==e)),t}const Cm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ih(n,e,t){var i;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Cm):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const s=(e.matcher||hh)(t,n,e);if(!s)return Object.assign({},Cm);const c={};Vn(s.posParams,(f,y)=>{c[y]=f.path});const d=s.consumed.length>0?Object.assign(Object.assign({},c),s.consumed[s.consumed.length-1].parameters):c;return{matched:!0,consumedSegments:s.consumed,remainingSegments:t.slice(s.consumed.length),parameters:d,positionalParamSegments:null!==(i=s.posParams)&&void 0!==i?i:{}}}function ba(n,e,t,i,r="corrected"){if(t.length>0&&function rv(n,e,t){return t.some(i=>Sh(n,e,i)&&Fr(i)!==qt)}(n,t,i)){const c=new D(e,function iv(n,e,t,i){const r={};r[qt]=i,i._sourceSegment=n,i._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Fr(s)!==qt){const c=new D([],{});c._sourceSegment=n,c._segmentIndexShift=e.length,r[Fr(s)]=c}return r}(n,e,i,new D(t,n.children)));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:[]}}if(0===t.length&&function Dm(n,e,t){return t.some(i=>Sh(n,e,i))}(n,t,i)){const c=new D(n.segments,function Tm(n,e,t,i,r,s){const c={};for(const d of i)if(Sh(n,t,d)&&!r[Fr(d)]){const f=new D([],{});f._sourceSegment=n,f._segmentIndexShift="legacy"===s?n.segments.length:e.length,c[Fr(d)]=f}return Object.assign(Object.assign({},r),c)}(n,e,t,i,n.children,r));return c._sourceSegment=n,c._segmentIndexShift=e.length,{segmentGroup:c,slicedSegments:t}}const s=new D(n.segments,n.children);return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}function Sh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Im(n,e,t,i){return!!(Fr(n)===i||i!==qt&&Sh(e,t,n))&&("**"===n.path||Ih(e,n,t).matched)}function sv(n,e,t){return 0===e.length&&!n.children[t]}class lp{constructor(e){this.segmentGroup=e||null}}class Fo{constructor(e){this.urlTree=e}}function Ii(n){return il(new lp(n))}function nd(n){return il(new Fo(n))}class id{constructor(e,t,i,r,s){this.configLoader=t,this.urlSerializer=i,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(l.h0i)}apply(){const e=ba(this.urlTree.root,[],[],this.config).segmentGroup,t=new D(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,qt).pipe((0,ut.U)(s=>this.createUrlTree(rd(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ur(s=>{if(s instanceof Fo)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof lp?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,qt).pipe((0,ut.U)(r=>this.createUrlTree(rd(r),e.queryParams,e.fragment))).pipe(ur(r=>{throw r instanceof lp?this.noMatchError(r):r}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,i){const r=e.segments.length>0?new D([],{[qt]:e}):e;return new Is(r,t,i)}expandSegmentGroup(e,t,i,r){return 0===i.segments.length&&i.hasChildren()?this.expandChildren(e,t,i).pipe((0,ut.U)(s=>new D([],s))):this.expandSegment(e,i,t,i.segments,r,!0)}expandChildren(e,t,i){const r=[];for(const s of Object.keys(i.children))"primary"===s?r.unshift(s):r.push(s);return(0,An.D)(r).pipe(ts(s=>{const c=i.children[s],d=Zn(t,s);return this.expandSegmentGroup(e,d,c,s).pipe((0,ut.U)(f=>({segment:f,outlet:s})))}),Ir((s,c)=>(s[c.outlet]=c.segment,s),{}),function lh(n,e){const t=arguments.length>=2;return i=>i.pipe(n?tn((r,s)=>n(r,s,i)):Xr.y,oh(1),t?ah(e):qu(()=>new ca))}())}expandSegment(e,t,i,r,s,c){return(0,An.D)(i).pipe(ts(d=>this.expandSegmentAgainstRoute(e,t,i,d,r,s,c).pipe(ur(y=>{if(y instanceof lp)return ct(null);throw y}))),jl(d=>!!d),ur((d,f)=>{if(d instanceof ca||"EmptyError"===d.name)return sv(t,r,s)?ct(new D([],{})):Ii(t);throw d}))}expandSegmentAgainstRoute(e,t,i,r,s,c,d){return Im(r,t,s,c)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,s,c):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c):Ii(t):Ii(t)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,i,r,c):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,i,r){const s=this.applyRedirectCommands([],i.redirectTo,{});return i.redirectTo.startsWith("/")?nd(s):this.lineralizeSegments(i,s).pipe((0,ti.z)(c=>{const d=new D(c,{});return this.expandSegment(e,d,t,c,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,i,r,s,c){const{matched:d,consumedSegments:f,remainingSegments:y,positionalParamSegments:w}=Ih(t,r,s);if(!d)return Ii(t);const T=this.applyRedirectCommands(f,r.redirectTo,w);return r.redirectTo.startsWith("/")?nd(T):this.lineralizeSegments(r,T).pipe((0,ti.z)(x=>this.expandSegment(e,t,i,x.concat(y),c,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){if("**"===i.path)return i.loadChildren?(i._loadedConfig?ct(i._loadedConfig):this.configLoader.load(e.injector,i)).pipe((0,ut.U)(T=>(i._loadedConfig=T,new D(r,{})))):ct(new D(r,{}));const{matched:c,consumedSegments:d,remainingSegments:f}=Ih(t,i,r);return c?this.getChildConfig(e,i,r).pipe((0,ti.z)(w=>{const T=w.module,x=w.routes,{segmentGroup:O,slicedSegments:F}=ba(t,d,f,x),G=new D(O.segments,O.children);if(0===F.length&&G.hasChildren())return this.expandChildren(T,x,G).pipe((0,ut.U)(ke=>new D(d,ke)));if(0===x.length&&0===F.length)return ct(new D(d,{}));const Q=Fr(i)===s;return this.expandSegment(T,G,x,F,Q?qt:s,!0).pipe((0,ut.U)(Se=>new D(d.concat(Se.segments),Se.children)))})):Ii(t)}getChildConfig(e,t,i){return t.children?ct(new Ch(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?ct(t._loadedConfig):this.runCanLoadGuards(e.injector,t,i).pipe((0,ti.z)(r=>r?this.configLoader.load(e.injector,t).pipe((0,ut.U)(s=>(t._loadedConfig=s,s))):function Am(n){return il(Oo(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`))}(t))):ct(new Ch([],e))}runCanLoadGuards(e,t,i){const r=t.canLoad;return r&&0!==r.length?ct(r.map(c=>{const d=e.get(c);let f;if(function vE(n){return n&&Js(n.canLoad)}(d))f=d.canLoad(t,i);else{if(!Js(d))throw new Error("Invalid CanLoad guard");f=d(t,i)}return Di(f)})).pipe(Hc(),(0,dr.b)(c=>{if(!ul(c))return;const d=Oo(`Redirecting to "${this.urlSerializer.serialize(c)}"`);throw d.url=c,d}),(0,ut.U)(c=>!0===c)):ct(!0)}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),0===r.numberOfChildren)return ct(i);if(r.numberOfChildren>1||!r.children[qt])return il(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e.redirectTo}'`));r=r.children[qt]}}applyRedirectCommands(e,t,i){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,i)}applyRedirectCreatreUrlTree(e,t,i,r){const s=this.createSegmentGroup(e,t.root,i,r);return new Is(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const i={};return Vn(e,(r,s)=>{if("string"==typeof r&&r.startsWith(":")){const d=r.substring(1);i[s]=t[d]}else i[s]=r}),i}createSegmentGroup(e,t,i,r){const s=this.createSegments(e,t.segments,i,r);let c={};return Vn(t.children,(d,f)=>{c[f]=this.createSegmentGroup(e,d,i,r)}),new D(s,c)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){const r=i[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let i=0;for(const r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}}function rd(n){const e={};for(const i of Object.keys(n.children)){const s=rd(n.children[i]);(s.segments.length>0||s.hasChildren())&&(e[i]=s)}return function Ah(n){if(1===n.numberOfChildren&&n.children[qt]){const e=n.children[qt];return new D(n.segments.concat(e.segments),e.children)}return n}(new D(n.segments,e))}class xh{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Mh{constructor(e,t){this.component=e,this.route=t}}function Nh(n,e,t){const i=n._root;return $c(i,e?e._root:null,t,[i.value])}function Qi(n,e,t){const i=function sd(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:t).get(n)}function $c(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Bc(e);return n.children.forEach(c=>{(function up(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,c=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(c&&s.routeConfig===c.routeConfig){const f=function dp(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!j(n.url,e.url);case"pathParamsOrQueryParamsChange":return!j(n.url,e.url)||!Ys(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!bh(n,e)||!Ys(n.queryParams,e.queryParams);default:return!bh(n,e)}}(c,s,s.routeConfig.runGuardsAndResolvers);f?r.canActivateChecks.push(new xh(i)):(s.data=c.data,s._resolvedData=c._resolvedData),$c(n,e,s.component?d?d.children:null:t,i,r),f&&d&&d.outlet&&d.outlet.isActivated&&r.canDeactivateChecks.push(new Mh(d.outlet.component,c))}else c&&Wl(e,d,r),r.canActivateChecks.push(new xh(i)),$c(n,null,s.component?d?d.children:null:t,i,r)})(c,s[c.value.outlet],t,i.concat([c.value]),r),delete s[c.value.outlet]}),Vn(s,(c,d)=>Wl(c,t.getContext(d),r)),r}function Wl(n,e,t){const i=Bc(n),r=n.value;Vn(i,(s,c)=>{Wl(s,r.component?e?e.children.getContext(c):null:e,t)}),t.canDeactivateChecks.push(new Mh(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class Nm{}function mr(n){return new yn.y(e=>e.error(n))}class pp{constructor(e,t,i,r,s,c){this.rootComponentType=e,this.config=t,this.urlTree=i,this.url=r,this.paramsInheritanceStrategy=s,this.relativeLinkResolution=c}recognize(){const e=ba(this.urlTree.root,[],[],this.config.filter(c=>void 0===c.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,qt);if(null===t)return null;const i=new _a([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},qt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new ma(i,t),s=new _h(this.url,r);return this.inheritParamsAndData(s._root),s}inheritParamsAndData(e){const t=e.value,i=pm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(i.params),t.data=Object.freeze(i.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,i){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,i)}processChildren(e,t){const i=[];for(const s of Object.keys(t.children)){const c=t.children[s],d=Zn(e,s),f=this.processSegmentGroup(d,c,s);if(null===f)return null;i.push(...f)}const r=gp(i);return function dv(n){n.sort((e,t)=>e.value.outlet===qt?-1:t.value.outlet===qt?1:e.value.outlet.localeCompare(t.value.outlet))}(r),r}processSegment(e,t,i,r){for(const s of e){const c=this.processSegmentAgainstRoute(s,t,i,r);if(null!==c)return c}return sv(t,i,r)?[]:null}processSegmentAgainstRoute(e,t,i,r){if(e.redirectTo||!Im(e,t,i,r))return null;let s,c=[],d=[];if("**"===e.path){const O=i.length>0?Nc(i).parameters:{};s=new _a(i,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eo(e),Fr(e),e.component,e,Om(t),Ea(t)+i.length,fv(e))}else{const O=Ih(t,e,i);if(!O.matched)return null;c=O.consumedSegments,d=O.remainingSegments,s=new _a(c,O.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,eo(e),Fr(e),e.component,e,Om(t),Ea(t)+c.length,fv(e))}const f=function wa(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:y,slicedSegments:w}=ba(t,c,d,f.filter(O=>void 0===O.redirectTo),this.relativeLinkResolution);if(0===w.length&&y.hasChildren()){const O=this.processChildren(f,y);return null===O?null:[new ma(s,O)]}if(0===f.length&&0===w.length)return[new ma(s,[])];const T=Fr(e)===r,x=this.processSegment(f,y,w,T?qt:r);return null===x?null:[new ma(s,x)]}}function od(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function gp(n){const e=[],t=new Set;for(const i of n){if(!od(i)){e.push(i);continue}const r=e.find(s=>i.value.routeConfig===s.value.routeConfig);void 0!==r?(r.children.push(...i.children),t.add(r)):e.push(i)}for(const i of t){const r=gp(i.children);e.push(new ma(i.value,r))}return e.filter(i=>!t.has(i))}function Om(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ea(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function eo(n){return n.data||{}}function fv(n){return n.resolve||{}}function m(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function M(n){return Rn(e=>{const t=n(e);return t?(0,An.D)(t).pipe((0,ut.U)(()=>e)):ct(e)})}class ge extends class Y{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const Ge=new l.OlP("ROUTES");class rt{constructor(e,t,i,r){this.injector=e,this.compiler=t,this.onLoadStartListener=i,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const r=this.loadModuleFactory(t.loadChildren).pipe((0,ut.U)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t);const c=s.create(e);return new Ch(Xf(c.injector.get(Ge,void 0,l.XFs.Self|l.XFs.Optional)).map(td),c)}),ur(s=>{throw t._loader$=void 0,s}));return t._loader$=new cr(r,()=>new Dn.x).pipe(zu()),t._loader$}loadModuleFactory(e){return Di(e()).pipe((0,ti.z)(t=>t instanceof l.YKP?ct(t):(0,An.D)(this.compiler.compileModuleAsync(t))))}}class Et{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Pi(n){throw n}function _r(n,e,t){return e.parse("/")}function zl(n,e){return ct(null)}const mp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_p={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let zn=(()=>{class n{constructor(t,i,r,s,c,d,f){this.rootComponentType=t,this.urlSerializer=i,this.rootContexts=r,this.location=s,this.config=f,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Dn.x,this.errorHandler=Pi,this.malformedUriErrorHandler=_r,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:zl,afterPreactivation:zl},this.urlHandlingStrategy=new Et,this.routeReuseStrategy=new ge,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=c.get(l.h0i),this.console=c.get(l.c2e);const T=c.get(l.R0b);this.isNgZoneEnabled=T instanceof l.R0b&&l.R0b.isInAngularZone(),this.resetConfig(f),this.currentUrlTree=function Oc(){return new Is(new D([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new rt(c,d,x=>this.triggerEvent(new fr(x)),x=>this.triggerEvent(new Gl(x))),this.routerState=mh(this.currentUrlTree,this.rootComponentType),this.transitions=new gi({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const i=this.events;return t.pipe(tn(r=>0!==r.id),(0,ut.U)(r=>Object.assign(Object.assign({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),Rn(r=>{let s=!1,c=!1;return ct(r).pipe((0,dr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.currentRawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Rn(d=>{const f=this.browserUrlTree.toString(),y=!this.navigated||d.extractedUrl.toString()!==f||f!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||y)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Oh(d.source)&&(this.browserUrlTree=d.extractedUrl),ct(d).pipe(Rn(T=>{const x=this.transitions.getValue();return i.next(new Qf(T.id,this.serializeUrl(T.extractedUrl),T.source,T.restoredState)),x!==this.transitions.getValue()?lr.E:Promise.resolve(T)}),function cp(n,e,t,i){return Rn(r=>function gr(n,e,t,i,r){return new id(n,e,t,i,r).apply()}(n,e,t,r.extractedUrl,i).pipe((0,ut.U)(s=>Object.assign(Object.assign({},r),{urlAfterRedirects:s}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,dr.b)(T=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:T.urlAfterRedirects})}),function bE(n,e,t,i,r){return(0,ti.z)(s=>function fp(n,e,t,i,r="emptyOnly",s="legacy"){try{const c=new pp(n,e,t,i,r,s).recognize();return null===c?mr(new Nm):ct(c)}catch(c){return mr(c)}}(n,e,s.urlAfterRedirects,t(s.urlAfterRedirects),i,r).pipe((0,ut.U)(c=>Object.assign(Object.assign({},s),{targetSnapshot:c}))))}(this.rootComponentType,this.config,T=>this.serializeUrl(T),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,dr.b)(T=>{if("eager"===this.urlUpdateStrategy){if(!T.extras.skipLocationChange){const O=this.urlHandlingStrategy.merge(T.urlAfterRedirects,T.rawUrl);this.setBrowserUrl(O,T)}this.browserUrlTree=T.urlAfterRedirects}const x=new sl(T.id,this.serializeUrl(T.extractedUrl),this.serializeUrl(T.urlAfterRedirects),T.targetSnapshot);i.next(x)}));if(y&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:x,extractedUrl:O,source:F,restoredState:G,extras:Q}=d,pe=new Qf(x,this.serializeUrl(O),F,G);i.next(pe);const Se=mh(O,this.rootComponentType).snapshot;return ct(Object.assign(Object.assign({},d),{targetSnapshot:Se,urlAfterRedirects:O,extras:Object.assign(Object.assign({},Q),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=d.rawUrl,d.resolve(null),lr.E}),M(d=>{const{targetSnapshot:f,id:y,extractedUrl:w,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:O}}=d;return this.hooks.beforePreactivation(f,{navigationId:y,appliedUrlTree:w,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!O})}),(0,dr.b)(d=>{const f=new Hl(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(f)}),(0,ut.U)(d=>Object.assign(Object.assign({},d),{guards:Nh(d.targetSnapshot,d.currentSnapshot,this.rootContexts)})),function hp(n,e){return(0,ti.z)(t=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:c}}=t;return 0===c.length&&0===s.length?ct(Object.assign(Object.assign({},t),{guardsResult:!0})):function xm(n,e,t,i){return(0,An.D)(n).pipe((0,ti.z)(r=>function uv(n,e,t,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(d=>{const f=Qi(d,e,r);let y;if(function op(n){return n&&Js(n.canDeactivate)}(f))y=Di(f.canDeactivate(n,e,t,i));else{if(!Js(f))throw new Error("Invalid CanDeactivate guard");y=Di(f(n,e,t,i))}return y.pipe(jl())})).pipe(Hc()):ct(!0)}(r.component,r.route,t,e,i)),jl(r=>!0!==r,!0))}(c,i,r,n).pipe((0,ti.z)(d=>d&&function yE(n){return"boolean"==typeof n}(d)?function av(n,e,t,i){return(0,An.D)(e).pipe(ts(r=>da(function Mm(n,e){return null!==n&&e&&e(new Zu(n)),ct(!0)}(r.route.parent,i),function Xs(n,e){return null!==n&&e&&e(new ol(n)),ct(!0)}(r.route,i),function cv(n,e,t){const i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(c=>function ov(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(c)).filter(c=>null!==c).map(c=>Vl(()=>ct(c.guards.map(f=>{const y=Qi(f,c.node,t);let w;if(function Xu(n){return n&&Js(n.canActivateChild)}(y))w=Di(y.canActivateChild(i,n));else{if(!Js(y))throw new Error("Invalid CanActivateChild guard");w=Di(y(i,n))}return w.pipe(jl())})).pipe(Hc())));return ct(s).pipe(Hc())}(n,r.path,t),function lv(n,e,t){const i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||0===i.length)return ct(!0);const r=i.map(s=>Vl(()=>{const c=Qi(s,e,t);let d;if(function sp(n){return n&&Js(n.canActivate)}(c))d=Di(c.canActivate(e,n));else{if(!Js(c))throw new Error("Invalid CanActivate guard");d=Di(c(e,n))}return d.pipe(jl())}));return ct(r).pipe(Hc())}(n,r.route,t))),jl(r=>!0!==r,!0))}(i,s,n,e):ct(d)),(0,ut.U)(d=>Object.assign(Object.assign({},t),{guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,dr.b)(d=>{if(ul(d.guardsResult)){const y=Oo(`Redirecting to "${this.serializeUrl(d.guardsResult)}"`);throw y.url=d.guardsResult,y}const f=new uh(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(f)}),tn(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,""),!1)),M(d=>{if(d.guards.canActivateChecks.length)return ct(d).pipe((0,dr.b)(f=>{const y=new Jf(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}),Rn(f=>{let y=!1;return ct(f).pipe(function km(n,e){return(0,ti.z)(t=>{const{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return ct(t);let s=0;return(0,An.D)(r).pipe(ts(c=>function v(n,e,t,i){return function g(n,e,t,i){const r=m(n);if(0===r.length)return ct({});const s={};return(0,An.D)(r).pipe((0,ti.z)(c=>function E(n,e,t,i){const r=Qi(n,e,i);return Di(r.resolve?r.resolve(e,t):r(e,t))}(n[c],e,t,i).pipe((0,dr.b)(d=>{s[c]=d}))),oh(1),(0,ti.z)(()=>m(s).length===r.length?ct(s):lr.E))}(n._resolve,n,e,i).pipe((0,ut.U)(s=>(n._resolvedData=s,n.data=Object.assign(Object.assign({},n.data),pm(n,t).resolve),null)))}(c.route,i,n,e)),(0,dr.b)(()=>s++),oh(1),(0,ti.z)(c=>s===r.length?ct(t):lr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,dr.b)({next:()=>y=!0,complete:()=>{y||(this.restoreHistory(f),this.cancelNavigationTransition(f,"At least one route resolver didn't emit any value."))}}))}),(0,dr.b)(f=>{const y=new hr(f.id,this.serializeUrl(f.extractedUrl),this.serializeUrl(f.urlAfterRedirects),f.targetSnapshot);this.triggerEvent(y)}))}),M(d=>{const{targetSnapshot:f,id:y,extractedUrl:w,rawUrl:T,extras:{skipLocationChange:x,replaceUrl:O}}=d;return this.hooks.afterPreactivation(f,{navigationId:y,appliedUrlTree:w,rawUrlTree:T,skipLocationChange:!!x,replaceUrl:!!O})}),(0,ut.U)(d=>{const f=function gm(n,e,t){const i=Qu(n,e._root,t?t._root:void 0);return new Yu(i,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return Object.assign(Object.assign({},d),{targetRouterState:f})}),(0,dr.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,ut.U)(i=>(new Qs(e,i.targetRouterState,i.currentRouterState,t).activate(n),i)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,dr.b)({next(){s=!0},complete(){s=!0}}),function um(n){return(0,$n.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var d;s||c||this.cancelNavigationTransition(r,`Navigation ID ${r.id} is not equal to the current navigation id ${this.navigationId}`),(null===(d=this.currentNavigation)||void 0===d?void 0:d.id)===r.id&&(this.currentNavigation=null)}),ur(d=>{if(c=!0,function ko(n){return n&&n[mi]}(d)){const f=ul(d.url);f||(this.navigated=!0,this.restoreHistory(r,!0));const y=new ch(r.id,this.serializeUrl(r.extractedUrl),d.message);i.next(y),f?setTimeout(()=>{const w=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Oh(r.source)};this.scheduleNavigation(w,"imperative",null,T,{resolve:r.resolve,reject:r.reject,promise:r.promise})},0):r.resolve(!1)}else{this.restoreHistory(r,!0);const f=new ni(r.id,this.serializeUrl(r.extractedUrl),d);i.next(f);try{r.resolve(this.errorHandler(d))}catch(y){r.reject(y)}}return lr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const i="popstate"===t.type?"popstate":"hashchange";"popstate"===i&&setTimeout(()=>{var r;const s={replaceUrl:!0},c=(null===(r=t.state)||void 0===r?void 0:r.navigationId)?t.state:null;if(c){const f=Object.assign({},c);delete f.navigationId,delete f.\u0275routerPageId,0!==Object.keys(f).length&&(s.state=f)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,i,c,s)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){Dh(t),this.config=t.map(td),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,i={}){const{relativeTo:r,queryParams:s,fragment:c,queryParamsHandling:d,preserveFragment:f}=i,y=r||this.routerState.root,w=f?this.currentUrlTree.fragment:c;let T=null;switch(d){case"merge":T=Object.assign(Object.assign({},this.currentUrlTree.queryParams),s);break;case"preserve":T=this.currentUrlTree.queryParams;break;default:T=s||null}return null!==T&&(T=this.removeEmptyProps(T)),function Qy(n,e,t,i,r){if(0===t.length)return Ju(e.root,e.root,e.root,i,r);const s=function mE(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new mm(!0,0,n);let e=0,t=!1;const i=n.reduce((r,s,c)=>{if("object"==typeof s&&null!=s){if(s.outlets){const d={};return Vn(s.outlets,(f,y)=>{d[y]="string"==typeof f?f.split("/"):f}),[...r,{outlets:d}]}if(s.segmentPath)return[...r,s.segmentPath]}return"string"!=typeof s?[...r,s]:0===c?(s.split("/").forEach((d,f)=>{0==f&&"."===d||(0==f&&""===d?t=!0:".."===d?e++:""!=d&&r.push(d))}),r):[...r,s]},[]);return new mm(t,e,i)}(t);if(s.toRoot())return Ju(e.root,e.root,new D([],{}),i,r);const c=function _E(n,e,t){if(n.isAbsolute)return new wh(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const s=t.snapshot._urlSegment;return new wh(s,s===e.root,0)}const i=is(n.commands[0])?0:1;return function ip(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new wh(i,!1,r-s)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+i,n.numberOfDoubleDots)}(s,e,n),d=c.processChildren?Eh(c.segmentGroup,c.index,s.commands):ym(c.segmentGroup,c.index,s.commands);return Ju(e.root,c.segmentGroup,d,i,r)}(y,this.currentUrlTree,t,T,null!=w?w:null)}navigateByUrl(t,i={skipLocationChange:!1}){const r=ul(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,"imperative",null,i)}navigate(t,i={skipLocationChange:!1}){return function Rm(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let i;try{i=this.urlSerializer.parse(t)}catch(r){i=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return i}isActive(t,i){let r;if(r=!0===i?Object.assign({},mp):!1===i?Object.assign({},_p):i,ul(t))return ll(this.currentUrlTree,t,r);const s=this.parseUrl(t);return ll(this.currentUrlTree,s,r)}removeEmptyProps(t){return Object.keys(t).reduce((i,r)=>{const s=t[r];return null!=s&&(i[r]=s),i},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zs(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,i,r,s,c){var d,f;if(this.disposed)return Promise.resolve(!1);let y,w,T;c?(y=c.resolve,w=c.reject,T=c.promise):T=new Promise((F,G)=>{y=F,w=G});const x=++this.navigationId;let O;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),O=r&&r.\u0275routerPageId?r.\u0275routerPageId:s.replaceUrl||s.skipLocationChange?null!==(d=this.browserPageId)&&void 0!==d?d:0:(null!==(f=this.browserPageId)&&void 0!==f?f:0)+1):O=0,this.setTransition({id:x,targetPageId:O,source:i,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:s,resolve:y,reject:w,promise:T,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),T.catch(F=>Promise.reject(F))}setBrowserUrl(t,i){const r=this.urlSerializer.serialize(t),s=Object.assign(Object.assign({},i.extras.state),this.generateNgRouterState(i.id,i.targetPageId));this.location.isCurrentPathEqualTo(r)||i.extras.replaceUrl?this.location.replaceState(r,"",s):this.location.go(r,"",s)}restoreHistory(t,i=!1){var r,s;if("computed"===this.canceledNavigationResolution){const c=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)||0===c?this.currentUrlTree===(null===(s=this.currentNavigation)||void 0===s?void 0:s.finalUrl)&&0===c&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(c)}else"replace"===this.canceledNavigationResolution&&(i&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,i){const r=new ch(t.id,this.serializeUrl(t.extractedUrl),i);this.triggerEvent(r),t.resolve(!1)}generateNgRouterState(t,i){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Oh(n){return"imperative"!==n}class Wc{}class Bm{preload(e,t){return ct(null)}}let wE=(()=>{class n{constructor(t,i,r,s){this.router=t,this.injector=r,this.preloadingStrategy=s,this.loader=new rt(r,i,f=>t.triggerEvent(new fr(f)),f=>t.triggerEvent(new Gl(f)))}setUpPreloading(){this.subscription=this.router.events.pipe(tn(t=>t instanceof Zs),ts(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(l.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,i){const r=[];for(const s of i)if(s.loadChildren&&!s.canLoad&&s._loadedConfig){const c=s._loadedConfig;r.push(this.processRoutes(c.module,c.routes))}else s.loadChildren&&!s.canLoad?r.push(this.preloadConfig(t,s)):s.children&&r.push(this.processRoutes(t,s.children));return(0,An.D)(r).pipe((0,ua.J)(),(0,ut.U)(s=>{}))}preloadConfig(t,i){return this.preloadingStrategy.preload(i,()=>(i._loadedConfig?ct(i._loadedConfig):this.loader.load(t.injector,i)).pipe((0,ti.z)(s=>(i._loadedConfig=s,this.processRoutes(s.module,s.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(zn),l.LFG(l.Sil),l.LFG(l.zs3),l.LFG(Wc))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),pv=(()=>{class n{constructor(t,i,r={}){this.router=t,this.viewportScroller=i,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Qf?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zs&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mc&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,i){this.router.triggerEvent(new Mc(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,i))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){l.$Z()},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const zc=new l.OlP("ROUTER_CONFIGURATION"),qc=new l.OlP("ROUTER_FORROOT_GUARD"),EE=[we,{provide:oe,useClass:Oe},{provide:zn,useFactory:function IE(n,e,t,i,r,s,c={},d,f){const y=new zn(null,n,e,t,i,r,Xf(s));return d&&(y.urlHandlingStrategy=d),f&&(y.routeReuseStrategy=f),function mv(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(c,y),c.enableTracing&&y.events.subscribe(w=>{var T,x;null===(T=console.group)||void 0===T||T.call(console,`Router Event: ${w.constructor.name}`),console.log(w.toString()),console.log(w),null===(x=console.groupEnd)||void 0===x||x.call(console)}),y},deps:[oe,ed,we,l.zs3,l.Sil,Ge,zc,[class Tt{},new l.FiY],[class P{},new l.FiY]]},ed,{provide:Vc,useFactory:function SE(n){return n.routerState.root},deps:[zn]},wE,Bm,class Lm{preload(e,t){return t().pipe(ur(()=>ct(null)))}},{provide:zc,useValue:{enableTracing:!1}}];function CE(){return new l.PXZ("Router",zn)}let TE=(()=>{class n{constructor(t,i){}static forRoot(t,i){return{ngModule:n,providers:[EE,gv(t),{provide:qc,useFactory:DE,deps:[[zn,new l.FiY,new l.tp0]]},{provide:zc,useValue:i||{}},{provide:ye,useFactory:SS,deps:[he,[new l.tBr(Je),new l.FiY],zc]},{provide:pv,useFactory:Um,deps:[zn,ku,zc]},{provide:Wc,useExisting:i&&i.preloadingStrategy?i.preloadingStrategy:Bm},{provide:l.PXZ,multi:!0,useFactory:CE},[Ph,{provide:l.ip1,multi:!0,useFactory:Vm,deps:[Ph]},{provide:jm,useFactory:AE,deps:[Ph]},{provide:l.tb,multi:!0,useExisting:jm}]]}}static forChild(t){return{ngModule:n,providers:[gv(t)]}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(qc,8),l.LFG(zn,8))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();function Um(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new pv(n,e,t)}function SS(n,e,t={}){return t.useHash?new Le(n,e):new st(n,e)}function DE(n){return"guarded"}function gv(n){return[{provide:l.deG,multi:!0,useValue:n},{provide:Ge,multi:!0,useValue:n}]}let Ph=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Dn.x}appInitializer(){return this.injector.get($,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let i=null;const r=new Promise(d=>i=d),s=this.injector.get(zn),c=this.injector.get(zc);return"disabled"===c.initialNavigation?(s.setUpLocationChangeListener(),i(!0)):"enabled"===c.initialNavigation||"enabledBlocking"===c.initialNavigation?(s.hooks.afterPreactivation=()=>this.initNavigation?ct(null):(this.initNavigation=!0,i(!0),this.resultOfPreactivationDone),s.initialNavigation()):i(!0),r})}bootstrapListener(t){const i=this.injector.get(zc),r=this.injector.get(wE),s=this.injector.get(pv),c=this.injector.get(zn),d=this.injector.get(l.z2F);t===d.components[0]&&(("enabledNonBlocking"===i.initialNavigation||void 0===i.initialNavigation)&&c.initialNavigation(),r.setUpPreloading(),s.init(),c.resetRootComponentType(d.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();function Vm(n){return n.appInitializer.bind(n)}function AE(n){return n.bootstrapListener.bind(n)}const jm=new l.OlP("Router Initializer");let Fh=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-error404"]],decls:2,vars:0,template:function(t,i){1&t&&(l.TgZ(0,"p"),l._uU(1,"Ups! la p\xe1gina a la que quieres acceder no est\xe1 disponible"),l.qZA())},styles:[""]}),n})();const ad_firebase={apiKey:"AIzaSyByIbkJT-aN81VRDsRjgOyvy17vZeALmbw",authDomain:"perrotta-vicente.firebaseapp.com",projectId:"perrotta-vicente",storageBucket:"perrotta-vicente.appspot.com",messagingSenderId:"695663752848",appId:"1:695663752848:web:af7e9611e6ad9deb95ca15"},ad_apiUrl="https://portfolio-perrottavicente.koyeb.app/";class _v{}class NE{}class ql{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const i=t.indexOf(":");if(i>0){const r=t.slice(0,i),s=r.toLowerCase(),c=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(c):this.headers.set(s,[c])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let i=e[t];const r=t.toLowerCase();"string"==typeof i&&(i=[i]),i.length>0&&(this.headers.set(r,i),this.maybeSetNormalizedName(t,r))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof ql?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new ql;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof ql?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if("string"==typeof i&&(i=[i]),0===i.length)return;this.maybeSetNormalizedName(e.name,t);const r=("a"===e.op?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":const s=e.value;if(s){let c=this.headers.get(t);if(!c)return;c=c.filter(d=>-1===s.indexOf(d)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class OE{encodeKey(e){return vv(e)}encodeValue(e){return vv(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const kE=/%(\d[a-f0-9])/gi,hF={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function vv(n){return encodeURIComponent(n).replace(kE,(e,t)=>{var i;return null!==(i=hF[t])&&void 0!==i?i:e})}function RE(n){return`${n}`}class Zl{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new OE,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function yv(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{const s=r.indexOf("="),[c,d]=-1==s?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],f=t.get(c)||[];f.push(d),t.set(c,f)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const i=e.fromObject[t];this.map.set(t,Array.isArray(i)?i:[i])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(i=>{const r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Zl({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(RE(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let i=this.map.get(e.param)||[];const r=i.indexOf(RE(e.value));-1!==r&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class AS{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function PE(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function bv(n){return"undefined"!=typeof Blob&&n instanceof Blob}function FE(n){return"undefined"!=typeof FormData&&n instanceof FormData}class yp{constructor(e,t,i,r){let s;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Ca(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==i?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params)),this.headers||(this.headers=new ql),this.context||(this.context=new AS),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const d=t.indexOf("?");this.urlWithParams=t+(-1===d?"?":d<t.length-1?"&":"")+c}}else this.params=new Zl,this.urlWithParams=t}serializeBody(){return null===this.body?null:PE(this.body)||bv(this.body)||FE(this.body)||function xS(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Zl?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||FE(this.body)?null:bv(this.body)?this.body.type||null:PE(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Zl?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const i=e.method||this.method,r=e.url||this.url,s=e.responseType||this.responseType,c=void 0!==e.body?e.body:this.body,d=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,f=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let y=e.headers||this.headers,w=e.params||this.params;const T=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(y=Object.keys(e.setHeaders).reduce((x,O)=>x.set(O,e.setHeaders[O]),y)),e.setParams&&(w=Object.keys(e.setParams).reduce((x,O)=>x.set(O,e.setParams[O]),w)),new yp(i,r,c,{params:w,headers:y,context:T,reportProgress:f,responseType:s,withCredentials:d})}}var Fi=(()=>((Fi=Fi||{})[Fi.Sent=0]="Sent",Fi[Fi.UploadProgress=1]="UploadProgress",Fi[Fi.ResponseHeader=2]="ResponseHeader",Fi[Fi.DownloadProgress=3]="DownloadProgress",Fi[Fi.Response=4]="Response",Fi[Fi.User=5]="User",Fi))();class Hm{constructor(e,t=200,i="OK"){this.headers=e.headers||new ql,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class wv extends Hm{constructor(e={}){super(e),this.type=Fi.ResponseHeader}clone(e={}){return new wv({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Gm extends Hm{constructor(e={}){super(e),this.type=Fi.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Gm({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class LE extends Hm{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function jt(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let ld=(()=>{class n{constructor(t){this.handler=t}request(t,i,r={}){let s;if(t instanceof yp)s=t;else{let f,y;f=r.headers instanceof ql?r.headers:new ql(r.headers),r.params&&(y=r.params instanceof Zl?r.params:new Zl({fromObject:r.params})),s=new yp(t,i,void 0!==r.body?r.body:null,{headers:f,context:r.context,params:y,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials})}const c=ct(s).pipe(ts(f=>this.handler.handle(f)));if(t instanceof yp||"events"===r.observe)return c;const d=c.pipe(tn(f=>f instanceof Gm));switch(r.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return d.pipe((0,ut.U)(f=>{if(null!==f.body&&!(f.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return f.body}));case"blob":return d.pipe((0,ut.U)(f=>{if(null!==f.body&&!(f.body instanceof Blob))throw new Error("Response is not a Blob.");return f.body}));case"text":return d.pipe((0,ut.U)(f=>{if(null!==f.body&&"string"!=typeof f.body)throw new Error("Response is not a string.");return f.body}));default:return d.pipe((0,ut.U)(f=>f.body))}case"response":return d;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(t,i={}){return this.request("DELETE",t,i)}get(t,i={}){return this.request("GET",t,i)}head(t,i={}){return this.request("HEAD",t,i)}jsonp(t,i){return this.request("JSONP",t,{params:(new Zl).append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,i={}){return this.request("OPTIONS",t,i)}patch(t,i,r={}){return this.request("PATCH",t,jt(r,i))}post(t,i,r={}){return this.request("POST",t,jt(r,i))}put(t,i,r={}){return this.request("PUT",t,jt(r,i))}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(_v))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class Ev{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const Cv=new l.OlP("HTTP_INTERCEPTORS");let $m=(()=>{class n{intercept(t,i){return i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gF=/^\)\]\}',?\n/;let OS=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new yn.y(i=>{const r=this.xhrFactory.build();if(r.open(t.method,t.urlWithParams),t.withCredentials&&(r.withCredentials=!0),t.headers.forEach((O,F)=>r.setRequestHeader(O,F.join(","))),t.headers.has("Accept")||r.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const O=t.detectContentTypeHeader();null!==O&&r.setRequestHeader("Content-Type",O)}if(t.responseType){const O=t.responseType.toLowerCase();r.responseType="json"!==O?O:"text"}const s=t.serializeBody();let c=null;const d=()=>{if(null!==c)return c;const O=r.statusText||"OK",F=new ql(r.getAllResponseHeaders()),G=function jE(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(r)||t.url;return c=new wv({headers:F,status:r.status,statusText:O,url:G}),c},f=()=>{let{headers:O,status:F,statusText:G,url:Q}=d(),pe=null;204!==F&&(pe=void 0===r.response?r.responseText:r.response),0===F&&(F=pe?200:0);let Se=F>=200&&F<300;if("json"===t.responseType&&"string"==typeof pe){const ke=pe;pe=pe.replace(gF,"");try{pe=""!==pe?JSON.parse(pe):null}catch(Ae){pe=ke,Se&&(Se=!1,pe={error:Ae,text:pe})}}Se?(i.next(new Gm({body:pe,headers:O,status:F,statusText:G,url:Q||void 0})),i.complete()):i.error(new LE({error:pe,headers:O,status:F,statusText:G,url:Q||void 0}))},y=O=>{const{url:F}=d(),G=new LE({error:O,status:r.status||0,statusText:r.statusText||"Unknown Error",url:F||void 0});i.error(G)};let w=!1;const T=O=>{w||(i.next(d()),w=!0);let F={type:Fi.DownloadProgress,loaded:O.loaded};O.lengthComputable&&(F.total=O.total),"text"===t.responseType&&!!r.responseText&&(F.partialText=r.responseText),i.next(F)},x=O=>{let F={type:Fi.UploadProgress,loaded:O.loaded};O.lengthComputable&&(F.total=O.total),i.next(F)};return r.addEventListener("load",f),r.addEventListener("error",y),r.addEventListener("timeout",y),r.addEventListener("abort",y),t.reportProgress&&(r.addEventListener("progress",T),null!==s&&r.upload&&r.upload.addEventListener("progress",x)),r.send(s),i.next({type:Fi.Sent}),()=>{r.removeEventListener("error",y),r.removeEventListener("abort",y),r.removeEventListener("load",f),r.removeEventListener("timeout",y),t.reportProgress&&(r.removeEventListener("progress",T),null!==s&&r.upload&&r.upload.removeEventListener("progress",x)),r.readyState!==r.DONE&&r.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Tn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const Lh=new l.OlP("XSRF_COOKIE_NAME"),Bh=new l.OlP("XSRF_HEADER_NAME");class Wm{}let Tv=(()=>{class n{constructor(t,i,r){this.doc=t,this.platform=i,this.cookieName=r,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=$a(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(l.Lbi),l.LFG(Lh))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),vp=(()=>{class n{constructor(t,i){this.tokenService=t,this.headerName=i}intercept(t,i){const r=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||r.startsWith("http://")||r.startsWith("https://"))return i.handle(t);const s=this.tokenService.getToken();return null!==s&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,s)})),i.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Wm),l.LFG(Bh))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),mF=(()=>{class n{constructor(t,i){this.backend=t,this.injector=i,this.chain=null}handle(t){if(null===this.chain){const i=this.injector.get(Cv,[]);this.chain=i.reduceRight((r,s)=>new Ev(r,s),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(NE),l.LFG(l.zs3))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),kS=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:vp,useClass:$m}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:Lh,useValue:t.cookieName}:[],t.headerName?{provide:Bh,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[vp,{provide:Cv,useExisting:vp,multi:!0},{provide:Wm,useClass:Tv},{provide:Lh,useValue:"XSRF-TOKEN"},{provide:Bh,useValue:"X-XSRF-TOKEN"}]}),n})(),RS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[ld,{provide:_v,useClass:mF},OS,{provide:NE,useExisting:OS}],imports:[[kS.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})(),to=(()=>{class n{constructor(t,i){this.httpClient=t,this.router=i,this.URL=ad_apiUrl+"auth/",this.estaLogeado=!1}nuevo(t){return this.httpClient.post(this.URL+"nuevo",t)}login(t){return this.httpClient.post(this.URL+"login",t)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ld),l.LFG(zn))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HE=(()=>{class n{constructor(t){this.http=t,this.apiHerokuUrl=ad_apiUrl}obtenerDatosExperiencia(){return this.http.get(`${this.apiHerokuUrl}experiencia/todas`)}addExperiencia(t){return this.http.post(`${this.apiHerokuUrl}experiencia`,t)}modificarExperiencia(t){return this.http.put(this.apiHerokuUrl+"experiencia/update",t)}borrarExperiencia(t){return this.http.delete(`${this.apiHerokuUrl}experiencia/${t}`)}getExperiencia(){return this.http.get(`${this.apiHerokuUrl}experiencia/todas`)}updateExperiencia(t){return this.http.put(`${this.apiHerokuUrl}modifica/experiencia`,t)}obtenerUnaExperiencia(){return this.http.get(this.apiHerokuUrl+"experiencia/1")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ld))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var GE=B(1144);const $E=["addListener","removeListener"],FS=["addEventListener","removeEventListener"],Dv=["on","off"];function xs(n,e,t,i){if((0,Yi.m)(t)&&(i=t,t=void 0),i)return xs(n,e,t).pipe(xc(i));const[r,s]=function wF(n){return(0,Yi.m)(n.addEventListener)&&(0,Yi.m)(n.removeEventListener)}(n)?FS.map(c=>d=>n[c](e,d,t)):function vF(n){return(0,Yi.m)(n.addListener)&&(0,Yi.m)(n.removeListener)}(n)?$E.map(LS(n,e)):function bF(n){return(0,Yi.m)(n.on)&&(0,Yi.m)(n.off)}(n)?Dv.map(LS(n,e)):[];if(!r&&(0,GE.z)(n))return(0,ti.z)(c=>xs(c,e,t))((0,es.Xf)(n));if(!r)throw new TypeError("Invalid event target");return new yn.y(c=>{const d=(...f)=>c.next(1<f.length?f:f[0]);return r(d),()=>s(d)})}function LS(n,e){return t=>i=>n[t](e,i)}var zm=B(4986),EF=B(3532);function bp(n=0,e,t=zm.P){let i=-1;return null!=e&&((0,EF.K)(e)?t=e:i=e),new yn.y(r=>{let s=function CF(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let c=0;return t.schedule(function(){r.closed||(r.next(c++),0<=i?this.schedule(void 0,i):r.complete())},s)})}const{isArray:TF}=Array;function Kl(n){return 1===n.length&&TF(n[0])?n[0]:n}function qm(...n){return 1===(n=Kl(n)).length?(0,es.Xf)(n[0]):new yn.y(function BS(n){return e=>{let t=[];for(let i=0;t&&!e.closed&&i<n.length;i++)t.push((0,es.Xf)(n[i]).subscribe((0,Un.x)(e,r=>{if(t){for(let s=0;s<t.length;s++)s!==i&&t[s].unsubscribe();t=null}e.next(r)})))}}(n))}var wp=B(5032);function Uh(...n){const e=(0,la.jO)(n),t=Kl(n);return t.length?new yn.y(i=>{let r=t.map(()=>[]),s=t.map(()=>!1);i.add(()=>{r=s=null});for(let c=0;!i.closed&&c<t.length;c++)(0,es.Xf)(t[c]).subscribe((0,Un.x)(i,d=>{if(r[c].push(d),r.every(f=>f.length)){const f=r.map(y=>y.shift());i.next(e?e(...f):f),r.some((y,w)=>!y.length&&s[w])&&i.complete()}},()=>{s[c]=!0,!r[c].length&&i.complete()}));return()=>{r=s=null}}):lr.E}new yn.y(wp.Z);var Km=B(6451);function Li(n){return(0,$n.e)((e,t)=>{(0,es.Xf)(n).subscribe((0,Un.x)(t,()=>t.complete(),wp.Z)),!t.closed&&e.subscribe(t)})}function Ep(n,e=Xr.y){return n=null!=n?n:Iv,(0,$n.e)((t,i)=>{let r,s=!0;t.subscribe((0,Un.x)(i,c=>{const d=e(c);(s||!n(r,d))&&(s=!1,r=d,i.next(c))}))})}function Iv(n,e){return n===e}function Ym(...n){const e=(0,la.jO)(n);return(0,$n.e)((t,i)=>{const r=n.length,s=new Array(r);let c=n.map(()=>!1),d=!1;for(let f=0;f<r;f++)(0,es.Xf)(n[f]).subscribe((0,Un.x)(i,y=>{s[f]=y,!d&&!c[f]&&(c[f]=!0,(d=c.every(Xr.y))&&(c=null))},wp.Z));t.subscribe((0,Un.x)(i,f=>{if(d){const y=[f,...s];i.next(e?e(...y):y)}}))})}function zE(n,e){return e?t=>da(e.pipe(ai(1),function WE(){return(0,$n.e)((n,e)=>{n.subscribe((0,Un.x)(e,wp.Z))})}()),t.pipe(zE(n))):(0,ti.z)((t,i)=>n(t,i).pipe(ai(1),function VS(n){return(0,ut.U)(()=>n)}(t)))}function Vh(n,e=zm.z){const t=bp(n,e);return zE(()=>t)}var Cp=B(3099);let Gh=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq))},n.\u0275dir=l.lG2({type:n}),n})(),Lo=(()=>{class n extends Gh{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,features:[l.qOj]}),n})();const Bo=new l.OlP("NgValueAccessor"),Av={provide:Bo,useExisting:(0,l.Gpc)(()=>fl),multi:!0},ZE=new l.OlP("CompositionEventMode");let fl=(()=>{class n extends Gh{constructor(t,i,r){super(t,i),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function xv(){const n=U()?U().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.Qsj),l.Y36(l.SBq),l.Y36(ZE,8))},n.\u0275dir=l.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&l.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[l._Bn([Av]),l.qOj]}),n})();const rs=new l.OlP("NgValidators"),Yl=new l.OlP("NgAsyncValidators");function QE(n){return function Yc(n){return null==n||0===n.length}(n.value)?{required:!0}:null}function Tp(n){return null}function GS(n){return null!=n}function eC(n){const e=(0,l.QGY)(n)?(0,An.D)(n):n;return(0,l.CqO)(e),e}function Qm(n){let e={};return n.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function Ov(n,e){return e.map(t=>t(n))}function tC(n){return n.map(e=>function $S(n){return!n.validate}(e)?e:t=>e.validate(t))}function Jm(n){return null!=n?function nC(n){if(!n)return null;const e=n.filter(GS);return 0==e.length?null:function(t){return Qm(Ov(t,e))}}(tC(n)):null}function Xm(n){return null!=n?function iC(n){if(!n)return null;const e=n.filter(GS);return 0==e.length?null:function(t){return function Hh(...n){const e=(0,la.jO)(n),{args:t,keys:i}=ei(n),r=new yn.y(s=>{const{length:c}=t;if(!c)return void s.complete();const d=new Array(c);let f=c,y=c;for(let w=0;w<c;w++){let T=!1;(0,es.Xf)(t[w]).subscribe((0,Un.x)(s,x=>{T||(T=!0,y--),d[w]=x},()=>f--,void 0,()=>{(!f||!T)&&(y||s.next(i?Bl(i,d):d),s.complete())}))}});return e?r.pipe(xc(e)):r}(Ov(t,e).map(eC)).pipe((0,ut.U)(Qm))}}(tC(n)):null}function rC(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function e_(n){return n?Array.isArray(n)?n:[n]:[]}function t_(n,e){return Array.isArray(n)?n.includes(e):n===e}function Ta(n,e){const t=e_(e);return e_(n).forEach(r=>{t_(t,r)||t.push(r)}),t}function n_(n,e){return e_(e).filter(t=>!t_(n,t))}class oC{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Jm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Xm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Qc extends oC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Ns extends oC{get formDirective(){return null}get path(){return null}}class Rv{constructor(e){this._cd=e}is(e){var t,i,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(i=this._cd)||void 0===i?void 0:i.control)||void 0===r?void 0:r[e])}}let Dp=(()=>{class n extends Rv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Qc,2))},n.\u0275dir=l.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))},features:[l.qOj]}),n})(),cd=(()=>{class n extends Rv{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ns,10))},n.\u0275dir=l.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&l.ekj("ng-untouched",i.is("untouched"))("ng-touched",i.is("touched"))("ng-pristine",i.is("pristine"))("ng-dirty",i.is("dirty"))("ng-valid",i.is("valid"))("ng-invalid",i.is("invalid"))("ng-pending",i.is("pending"))("ng-submitted",i.is("submitted"))},features:[l.qOj]}),n})();function $h(n,e){Fv(n,e),e.valueAccessor.writeValue(n.value),function Bv(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&s_(n,e)})}(n,e),function Ap(n,e){const t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function pC(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&s_(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function qS(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ud(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Fv(n,e){const t=function sC(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rC(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=function kv(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rC(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const r=()=>n.updateValueAndValidity();ud(e._rawValidators,r),ud(e._rawAsyncValidators,r)}function s_(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Jc(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}const Mp="VALID",Ql="INVALID",Wh="PENDING",Np="DISABLED";function Hv(n){return(kp(n)?n.validators:n)||null}function Da(n){return Array.isArray(n)?Jm(n):n||null}function Op(n,e){return(kp(e)?e.asyncValidators:n)||null}function Gv(n){return Array.isArray(n)?Xm(n):n||null}function kp(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}const a_=n=>n instanceof c_;function yC(n){return(n=>n instanceof XS)(n)?n.value:n.getRawValue()}function vC(n,e){const t=a_(n),i=n.controls;if(!(t?Object.keys(i):i).length)throw new l.vHH(1e3,"");if(!i[e])throw new l.vHH(1001,"")}function bC(n,e){a_(n),n._forEachChild((i,r)=>{if(void 0===e[r])throw new l.vHH(1002,"")})}class l_{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Da(this._rawValidators),this._composedAsyncValidatorFn=Gv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Mp}get invalid(){return this.status===Ql}get pending(){return this.status==Wh}get disabled(){return this.status===Np}get enabled(){return this.status!==Np}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Da(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Gv(e)}addValidators(e){this.setValidators(Ta(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Ta(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(n_(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(n_(e,this._rawAsyncValidators))}hasValidator(e){return t_(this._rawValidators,e)}hasAsyncValidator(e){return t_(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Wh,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Np,this.errors=null,this._forEachChild(i=>{i.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Mp,this._forEachChild(i=>{i.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Mp||this.status===Wh)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Np:Mp}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Wh,this._hasOwnPendingAsyncValidator=!0;const t=eC(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function QS(n,e,t){if(null==e||(Array.isArray(e)||(e=e.split(t)),Array.isArray(e)&&0===e.length))return null;let i=n;return e.forEach(r=>{i=a_(i)?i.controls.hasOwnProperty(r)?i.controls[r]:null:(n=>n instanceof eA)(i)&&i.at(r)||null}),i}(this,e,".")}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new l.vpe,this.statusChanges=new l.vpe}_calculateStatus(){return this._allControlsDisabled()?Np:this.errors?Ql:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Wh)?Wh:this._anyControlsHaveStatus(Ql)?Ql:Mp}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){kp(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class XS extends l_{constructor(e=null,t,i){super(Hv(t),Op(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),kp(t)&&t.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Jc(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Jc(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class c_ extends l_{constructor(e,t,i){super(Hv(t),Op(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){bC(this,e),Object.keys(e).forEach(i=>{vC(this,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{this.controls[i]&&this.controls[i].patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=yC(t),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const i=this.controls[t];if(this.contains(t)&&e(i))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,i)=>((t.enabled||this.disabled)&&(e[i]=t.value),e))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class eA extends l_{constructor(e,t,i){super(Hv(t),Op(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,i={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){bC(this,e),e.forEach((i,r)=>{vC(this,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>yC(e))}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((t,i)=>!!i._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,i)=>{e(t,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const tA={provide:Ns,useExisting:(0,l.Gpc)(()=>zh)},u_=(()=>Promise.resolve(null))();let zh=(()=>{class n extends Ns{constructor(t,i){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new l.vpe,this.form=new c_({},Jm(t),Xm(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){u_.then(()=>{const i=this._findContainer(t.path);t.control=i.registerControl(t.name,t.control),$h(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){u_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){u_.then(()=>{const i=this._findContainer(t.path),r=new c_({});(function gC(n,e){Fv(n,e)})(r,t),i.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){u_.then(()=>{const i=this._findContainer(t.path);i&&i.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,i){u_.then(()=>{this.form.get(t.path).setValue(i)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function _C(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(rs,10),l.Y36(Yl,10))},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,i){1&t&&l.NdJ("submit",function(s){return i.onSubmit(s)})("reset",function(){return i.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[l._Bn([tA]),l.qOj]}),n})();const NF={provide:Qc,useExisting:(0,l.Gpc)(()=>dd)},Wv=(()=>Promise.resolve(null))();let dd=(()=>{class n extends Qc{constructor(t,i,r,s,c){super(),this._changeDetectorRef=c,this.control=new XS,this._registered=!1,this.update=new l.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(r),this.valueAccessor=function o_(n,e){if(!e)return null;let t,i,r;return Array.isArray(e),e.forEach(s=>{s.constructor===fl?t=s:function KS(n){return Object.getPrototypeOf(n.constructor)===Lo}(s)?i=s:r=s}),r||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function xp(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){$h(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Wv.then(()=>{var i;this.control.setValue(t,{emitViewToModelChange:!1}),null===(i=this._changeDetectorRef)||void 0===i||i.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,r=""===i||i&&"false"!==i;Wv.then(()=>{var s;r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),null===(s=this._changeDetectorRef)||void 0===s||s.markForCheck()})}_getPath(t){return this._parent?function Sp(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Ns,9),l.Y36(rs,10),l.Y36(Yl,10),l.Y36(Bo,10),l.Y36(l.sBO,8))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[l._Bn([NF]),l.qOj,l.TTD]}),n})(),qh=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const sA={provide:Bo,useExisting:(0,l.Gpc)(()=>h_),multi:!0};let h_=(()=>{class n extends Lo{writeValue(t){this.setProperty("value",null==t?"":t)}registerOnChange(t){this.onChange=i=>{t(""==i?null:parseFloat(i))}}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,i){1&t&&l.NdJ("input",function(s){return i.onChange(s.target.value)})("blur",function(){return i.onTouched()})},features:[l._Bn([sA]),l.qOj]}),n})(),CC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const qv=new l.OlP("NgModelWithFormControlWarning");let Jl=(()=>{class n{constructor(){this._validator=Tp}ngOnChanges(t){if(this.inputName in t){const i=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):Tp,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=l.lG2({type:n,features:[l.TTD]}),n})();const xC={provide:rs,useExisting:(0,l.Gpc)(()=>Pp),multi:!0};let Pp=(()=>{class n extends Jl{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=t=>function Jh(n){return null!=n&&!1!==n&&"false"!=`${n}`}(t),this.createValidator=t=>QE}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=l.n5z(n)))(i||n)}}(),n.\u0275dir=l.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,i){2&t&&l.uIk("required",i._enabled?"":null)},inputs:{required:"required"},features:[l._Bn([xC]),l.qOj]}),n})(),kC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[CC]]}),n})(),pA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[kC]}),n})(),gA=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:qv,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[kC]}),n})();var PF={left:"right",right:"left",bottom:"top",top:"bottom"};function n0(n){return n.replace(/left|right|bottom|top/g,function(e){return PF[e]})}function Xl(n){return n.split("-")[0]}var mA={start:"end",end:"start"};function r0(n){return n.replace(/start|end/g,function(e){return mA[e]})}var Vo="top",Sa="bottom",Br="right",no="left",m_="auto",Fp=[Vo,Sa,Br,no],md="start",nu="end",s0="viewport",Lp="popper",FC=Fp.reduce(function(n,e){return n.concat([e+"-"+md,e+"-"+nu])},[]),LC=[].concat(Fp,[m_]).reduce(function(n,e){return n.concat([e,e+"-"+md,e+"-"+nu])},[]),LF=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ur(n){if(null==n)return window;if("[object Window]"!==n.toString()){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function iu(n){return n instanceof Ur(n).Element||n instanceof Element}function ks(n){return n instanceof Ur(n).HTMLElement||n instanceof HTMLElement}function Bp(n){return"undefined"!=typeof ShadowRoot&&(n instanceof Ur(n).ShadowRoot||n instanceof ShadowRoot)}function ru(n){return((iu(n)?n.ownerDocument:n.document)||window.document).documentElement}var gl=Math.max,_d=Math.min,su=Math.round;function jC(){var n=navigator.userAgentData;return null!=n&&n.brands?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function HC(){return!/^((?!chrome|android).)*safari/i.test(jC())}function ec(n,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=n.getBoundingClientRect(),r=1,s=1;e&&ks(n)&&(r=n.offsetWidth>0&&su(i.width)/n.offsetWidth||1,s=n.offsetHeight>0&&su(i.height)/n.offsetHeight||1);var d=(iu(n)?Ur(n):window).visualViewport,f=!HC()&&t,y=(i.left+(f&&d?d.offsetLeft:0))/r,w=(i.top+(f&&d?d.offsetTop:0))/s,T=i.width/r,x=i.height/s;return{width:T,height:x,top:w,right:y+T,bottom:w+x,left:y,x:y,y:w}}function Xh(n){var e=Ur(n);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function __(n){return ec(ru(n)).left+Xh(n).scrollLeft}function Aa(n){return Ur(n).getComputedStyle(n)}function xa(n){return n?(n.nodeName||"").toLowerCase():null}function ef(n){return"html"===xa(n)?n:n.assignedSlot||n.parentNode||(Bp(n)?n.host:null)||ru(n)}function y_(n){var e=Aa(n);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function WC(n){return["html","body","#document"].indexOf(xa(n))>=0?n.ownerDocument.body:ks(n)&&y_(n)?n:WC(ef(n))}function tf(n,e){var t;void 0===e&&(e=[]);var i=WC(n),r=i===(null==(t=n.ownerDocument)?void 0:t.body),s=Ur(i),c=r?[s].concat(s.visualViewport||[],y_(i)?i:[]):i,d=e.concat(c);return r?d:d.concat(tf(ef(c)))}function zC(n){return["table","td","th"].indexOf(xa(n))>=0}function v_(n){return ks(n)&&"fixed"!==Aa(n).position?n.offsetParent:null}function Up(n){for(var e=Ur(n),t=v_(n);t&&zC(t)&&"static"===Aa(t).position;)t=v_(t);return t&&("html"===xa(t)||"body"===xa(t)&&"static"===Aa(t).position)?e:t||function qC(n){var e=/firefox/i.test(jC());if(/Trident/i.test(jC())&&ks(n)&&"fixed"===Aa(n).position)return null;var r=ef(n);for(Bp(r)&&(r=r.host);ks(r)&&["html","body"].indexOf(xa(r))<0;){var s=Aa(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}(n)||e}function l0(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Bp(t)){var i=e;do{if(i&&n.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function b_(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function Vp(n,e,t){return e===s0?b_(function GC(n,e){var t=Ur(n),i=ru(n),r=t.visualViewport,s=i.clientWidth,c=i.clientHeight,d=0,f=0;if(r){s=r.width,c=r.height;var y=HC();(y||!y&&"fixed"===e)&&(d=r.offsetLeft,f=r.offsetTop)}return{width:s,height:c,x:d+__(n),y:f}}(n,t)):iu(e)?function c0(n,e){var t=ec(n,!1,"fixed"===e);return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):b_(function $C(n){var e,t=ru(n),i=Xh(n),r=null==(e=n.ownerDocument)?void 0:e.body,s=gl(t.scrollWidth,t.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),c=gl(t.scrollHeight,t.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),d=-i.scrollLeft+__(n),f=-i.scrollTop;return"rtl"===Aa(r||t).direction&&(d+=gl(t.clientWidth,r?r.clientWidth:0)-s),{width:s,height:c,x:d,y:f}}(ru(n)))}function yd(n){return n.split("-")[1]}function w_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function u0(n){var f,e=n.reference,t=n.element,i=n.placement,r=i?Xl(i):null,s=i?yd(i):null,c=e.x+e.width/2-t.width/2,d=e.y+e.height/2-t.height/2;switch(r){case Vo:f={x:c,y:e.y-t.height};break;case Sa:f={x:c,y:e.y+e.height};break;case Br:f={x:e.x+e.width,y:d};break;case no:f={x:e.x-t.width,y:d};break;default:f={x:e.x,y:e.y}}var y=r?w_(r):null;if(null!=y){var w="y"===y?"height":"width";switch(s){case md:f[y]=f[y]-(e[w]/2-t[w]/2);break;case nu:f[y]=f[y]+(e[w]/2-t[w]/2)}}return f}function h0(n){return Object.assign({},{top:0,right:0,bottom:0,left:0},n)}function f0(n,e){return e.reduce(function(t,i){return t[i]=n,t},{})}function YC(n,e){void 0===e&&(e={});var i=e.placement,r=void 0===i?n.placement:i,s=e.strategy,c=void 0===s?n.strategy:s,d=e.boundary,f=void 0===d?"clippingParents":d,y=e.rootBoundary,w=void 0===y?s0:y,T=e.elementContext,x=void 0===T?Lp:T,O=e.altBoundary,F=void 0!==O&&O,G=e.padding,Q=void 0===G?0:G,pe=h0("number"!=typeof Q?Q:f0(Q,Fp)),ke=n.rects.popper,Ae=n.elements[F?x===Lp?"reference":Lp:x],Be=function KC(n,e,t,i){var r="clippingParents"===e?function ZC(n){var e=tf(ef(n)),i=["absolute","fixed"].indexOf(Aa(n).position)>=0&&ks(n)?Up(n):n;return iu(i)?e.filter(function(r){return iu(r)&&l0(r,i)&&"body"!==xa(r)}):[]}(n):[].concat(e),s=[].concat(r,[t]),d=s.reduce(function(f,y){var w=Vp(n,y,i);return f.top=gl(w.top,f.top),f.right=_d(w.right,f.right),f.bottom=_d(w.bottom,f.bottom),f.left=gl(w.left,f.left),f},Vp(n,s[0],i));return d.width=d.right-d.left,d.height=d.bottom-d.top,d.x=d.left,d.y=d.top,d}(iu(Ae)?Ae:Ae.contextElement||ru(n.elements.popper),f,w,c),We=ec(n.elements.reference),ft=u0({reference:We,element:ke,strategy:"absolute",placement:r}),Bt=b_(Object.assign({},ke,ft)),In=x===Lp?Bt:We,jn={top:Be.top-In.top+pe.top,bottom:In.bottom-Be.bottom+pe.bottom,left:Be.left-In.left+pe.left,right:In.right-Be.right+pe.right},Ei=n.modifiersData.offset;if(x===Lp&&Ei){var hs=Ei[r];Object.keys(jn).forEach(function(Ai){var Au=[Br,Sa].indexOf(Ai)>=0?1:-1,xu=[Vo,Sa].indexOf(Ai)>=0?"y":"x";jn[Ai]+=hs[xu]*Au})}return jn}const TA={name:"flip",enabled:!0,phase:"main",fn:function QC(n){var e=n.state,t=n.options,i=n.name;if(!e.modifiersData[i]._skip){for(var r=t.mainAxis,s=void 0===r||r,c=t.altAxis,d=void 0===c||c,f=t.fallbackPlacements,y=t.padding,w=t.boundary,T=t.rootBoundary,x=t.altBoundary,O=t.flipVariations,F=void 0===O||O,G=t.allowedAutoPlacements,Q=e.options.placement,pe=Xl(Q),ke=f||(pe!==Q&&F?function CA(n){if(Xl(n)===m_)return[];var e=n0(n);return[r0(n),e,r0(e)]}(Q):[n0(Q)]),Ae=[Q].concat(ke).reduce(function(Fn,cc){return Fn.concat(Xl(cc)===m_?function EA(n,e){void 0===e&&(e={});var r=e.boundary,s=e.rootBoundary,c=e.padding,d=e.flipVariations,f=e.allowedAutoPlacements,y=void 0===f?LC:f,w=yd(e.placement),T=w?d?FC:FC.filter(function(F){return yd(F)===w}):Fp,x=T.filter(function(F){return y.indexOf(F)>=0});0===x.length&&(x=T);var O=x.reduce(function(F,G){return F[G]=YC(n,{placement:G,boundary:r,rootBoundary:s,padding:c})[Xl(G)],F},{});return Object.keys(O).sort(function(F,G){return O[F]-O[G]})}(e,{placement:cc,boundary:w,rootBoundary:T,padding:y,flipVariations:F,allowedAutoPlacements:G}):cc)},[]),Be=e.rects.reference,We=e.rects.popper,ft=new Map,Bt=!0,In=Ae[0],jn=0;jn<Ae.length;jn++){var Ei=Ae[jn],hs=Xl(Ei),Ai=yd(Ei)===md,Au=[Vo,Sa].indexOf(hs)>=0,xu=Au?"width":"height",it=YC(e,{placement:Ei,boundary:w,rootBoundary:T,altBoundary:x,padding:y}),mt=Au?Ai?Br:no:Ai?Sa:Vo;Be[xu]>We[xu]&&(mt=n0(mt));var kt=n0(mt),Jt=[];if(s&&Jt.push(it[hs]<=0),d&&Jt.push(it[mt]<=0,it[kt]<=0),Jt.every(function(Fn){return Fn})){In=Ei,Bt=!1;break}ft.set(Ei,Jt)}if(Bt)for(var qo=function(cc){var Yg=Ae.find(function(vr){var go=ft.get(vr);if(go)return go.slice(0,cc).every(function(Al){return Al})});if(Yg)return In=Yg,"break"},Mr=F?3:1;Mr>0&&"break"!==qo(Mr);Mr--);e.placement!==In&&(e.modifiersData[i]._skip=!0,e.placement=In,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function nf(n,e,t){return gl(n,_d(e,t))}function p0(n){var e=ec(n),t=n.offsetWidth,i=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:i}}const IA={name:"preventOverflow",enabled:!0,phase:"main",fn:function JC(n){var e=n.state,t=n.options,i=n.name,r=t.mainAxis,s=void 0===r||r,c=t.altAxis,d=void 0!==c&&c,x=t.tether,O=void 0===x||x,F=t.tetherOffset,G=void 0===F?0:F,Q=YC(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),pe=Xl(e.placement),Se=yd(e.placement),ke=!Se,Ae=w_(pe),Be=function Ji(n){return"x"===n?"y":"x"}(Ae),We=e.modifiersData.popperOffsets,ft=e.rects.reference,Bt=e.rects.popper,In="function"==typeof G?G(Object.assign({},e.rects,{placement:e.placement})):G,jn="number"==typeof In?{mainAxis:In,altAxis:In}:Object.assign({mainAxis:0,altAxis:0},In),Ei=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,hs={x:0,y:0};if(We){if(s){var Ai,Au="y"===Ae?Vo:no,xu="y"===Ae?Sa:Br,it="y"===Ae?"height":"width",mt=We[Ae],kt=mt+Q[Au],Jt=mt-Q[xu],xi=O?-Bt[it]/2:0,qo=Se===md?ft[it]:Bt[it],Mr=Se===md?-Bt[it]:-ft[it],Ha=e.elements.arrow,Fn=O&&Ha?p0(Ha):{width:0,height:0},cc=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Yg=cc[Au],vr=cc[xu],go=nf(0,ft[it],Fn[it]),Al=ke?ft[it]/2-xi-go-Yg-jn.mainAxis:qo-go-Yg-jn.mainAxis,Bd=ke?-ft[it]/2+xi+go+vr+jn.mainAxis:Mr+go+vr+jn.mainAxis,Qg=e.elements.arrow&&Up(e.elements.arrow),Z6=null!=(Ai=null==Ei?void 0:Ei[Ae])?Ai:0,kte=mt+Bd-Z6,K6=nf(O?_d(kt,mt+Al-Z6-(Qg?"y"===Ae?Qg.clientTop||0:Qg.clientLeft||0:0)):kt,mt,O?gl(Jt,kte):Jt);We[Ae]=K6,hs[Ae]=K6-mt}if(d){var Y6,Jg=We[Be],DS="y"===Be?"height":"width",Q6=Jg+Q["x"===Ae?Vo:no],J6=Jg-Q["x"===Ae?Sa:Br],dF=-1!==[Vo,no].indexOf(pe),X6=null!=(Y6=null==Ei?void 0:Ei[Be])?Y6:0,e5=dF?Q6:Jg-ft[DS]-Bt[DS]-X6+jn.altAxis,t5=dF?Jg+ft[DS]+Bt[DS]-X6-jn.altAxis:J6,n5=O&&dF?function DA(n,e,t){var i=nf(n,e,t);return i>t?t:i}(e5,Jg,t5):nf(O?e5:Q6,Jg,O?t5:J6);We[Be]=n5,hs[Be]=n5-Jg}e.modifiersData[i]=hs}},requiresIfExists:["offset"]},SA={name:"arrow",enabled:!0,phase:"main",fn:function e1(n){var e,t=n.state,i=n.name,r=n.options,s=t.elements.arrow,c=t.modifiersData.popperOffsets,d=Xl(t.placement),f=w_(d),w=[no,Br].indexOf(d)>=0?"height":"width";if(s&&c){var T=function(e,t){return h0("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:f0(e,Fp))}(r.padding,t),x=p0(s),O="y"===f?Vo:no,F="y"===f?Sa:Br,G=t.rects.reference[w]+t.rects.reference[f]-c[f]-t.rects.popper[w],Q=c[f]-t.rects.reference[f],pe=Up(s),Se=pe?"y"===f?pe.clientHeight||0:pe.clientWidth||0:0,We=Se/2-x[w]/2+(G/2-Q/2),ft=nf(T[O],We,Se-x[w]-T[F]);t.modifiersData[i]=((e={})[f]=ft,e.centerOffset=ft-We,e)}},effect:function rf(n){var e=n.state,i=n.options.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"==typeof r&&!(r=e.elements.popper.querySelector(r))||!l0(e.elements.popper,r)||(e.elements.arrow=r))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function n1(n,e,t){void 0===t&&(t=!1);var i=ks(e),r=ks(e)&&function xA(n){var e=n.getBoundingClientRect(),t=su(e.width)/n.offsetWidth||1,i=su(e.height)/n.offsetHeight||1;return 1!==t||1!==i}(e),s=ru(e),c=ec(n,r,t),d={scrollLeft:0,scrollTop:0},f={x:0,y:0};return(i||!i&&!t)&&(("body"!==xa(e)||y_(s))&&(d=function t1(n){return n!==Ur(n)&&ks(n)?function AA(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}(n):Xh(n)}(e)),ks(e)?((f=ec(e,!0)).x+=e.clientLeft,f.y+=e.clientTop):s&&(f.x=__(s))),{x:c.left+d.scrollLeft-f.x,y:c.top+d.scrollTop-f.y,width:c.width,height:c.height}}function BF(n){var e=new Map,t=new Set,i=[];function r(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(d){if(!t.has(d)){var f=e.get(d);f&&r(f)}}),i.push(s)}return n.forEach(function(s){e.set(s.name,s)}),n.forEach(function(s){t.has(s.name)||r(s)}),i}function m0(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}var Ma={placement:"bottom",modifiers:[],strategy:"absolute"};function jo(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function Na(n){void 0===n&&(n={});var t=n.defaultModifiers,i=void 0===t?[]:t,r=n.defaultOptions,s=void 0===r?Ma:r;return function(d,f,y){void 0===y&&(y=s);var w={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ma,s),modifiersData:{},elements:{reference:d,popper:f},attributes:{},styles:{}},T=[],x=!1,O={state:w,setOptions:function(pe){var Se="function"==typeof pe?pe(w.options):pe;G(),w.options=Object.assign({},s,w.options,Se),w.scrollParents={reference:iu(d)?tf(d):d.contextElement?tf(d.contextElement):[],popper:tf(f)};var ke=function g0(n){var e=BF(n);return LF.reduce(function(t,i){return t.concat(e.filter(function(r){return r.phase===i}))},[])}(function ml(n){var e=n.reduce(function(t,i){var r=t[i.name];return t[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(i,w.options.modifiers)));return w.orderedModifiers=ke.filter(function(Ei){return Ei.enabled}),function F(){w.orderedModifiers.forEach(function(Q){var Se=Q.options,Ae=Q.effect;if("function"==typeof Ae){var Be=Ae({state:w,name:Q.name,instance:O,options:void 0===Se?{}:Se});T.push(Be||function(){})}})}(),O.update()},forceUpdate:function(){if(!x){var pe=w.elements,Se=pe.reference,ke=pe.popper;if(jo(Se,ke)){w.rects={reference:n1(Se,Up(ke),"fixed"===w.options.strategy),popper:p0(ke)},w.reset=!1,w.placement=w.options.placement,w.orderedModifiers.forEach(function(Ei){return w.modifiersData[Ei.name]=Object.assign({},Ei.data)});for(var Be=0;Be<w.orderedModifiers.length;Be++)if(!0!==w.reset){var We=w.orderedModifiers[Be],ft=We.fn,Bt=We.options;"function"==typeof ft&&(w=ft({state:w,options:void 0===Bt?{}:Bt,name:We.name,instance:O})||w)}else w.reset=!1,Be=-1}}},update:m0(function(){return new Promise(function(Q){O.forceUpdate(),Q(w)})}),destroy:function(){G(),x=!0}};if(!jo(d,f))return O;function G(){T.forEach(function(Q){return Q()}),T=[]}return O.setOptions(y).then(function(Q){!x&&y.onFirstUpdate&&y.onFirstUpdate(Q)}),O}}var jp={passive:!0};const kA={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function OA(n){var e=n.state,t=n.instance,i=n.options,r=i.scroll,s=void 0===r||r,c=i.resize,d=void 0===c||c,f=Ur(e.elements.popper),y=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&y.forEach(function(w){w.addEventListener("scroll",t.update,jp)}),d&&f.addEventListener("resize",t.update,jp),function(){s&&y.forEach(function(w){w.removeEventListener("scroll",t.update,jp)}),d&&f.removeEventListener("resize",t.update,jp)}},data:{}},PA={name:"popperOffsets",enabled:!0,phase:"read",fn:function RA(n){var e=n.state;e.modifiersData[n.name]=u0({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var _0={top:"auto",right:"auto",bottom:"auto",left:"auto"};function r1(n){var e,t=n.popper,i=n.popperRect,r=n.placement,s=n.variation,c=n.offsets,d=n.position,f=n.gpuAcceleration,y=n.adaptive,w=n.roundOffsets,T=n.isFixed,x=c.x,O=void 0===x?0:x,F=c.y,G=void 0===F?0:F,Q="function"==typeof w?w({x:O,y:G}):{x:O,y:G};O=Q.x,G=Q.y;var pe=c.hasOwnProperty("x"),Se=c.hasOwnProperty("y"),ke=no,Ae=Vo,Be=window;if(y){var We=Up(t),ft="clientHeight",Bt="clientWidth";We===Ur(t)&&"static"!==Aa(We=ru(t)).position&&"absolute"===d&&(ft="scrollHeight",Bt="scrollWidth"),(r===Vo||(r===no||r===Br)&&s===nu)&&(Ae=Sa,G-=(T&&We===Be&&Be.visualViewport?Be.visualViewport.height:We[ft])-i.height,G*=f?1:-1),r!==no&&(r!==Vo&&r!==Sa||s!==nu)||(ke=Br,O-=(T&&We===Be&&Be.visualViewport?Be.visualViewport.width:We[Bt])-i.width,O*=f?1:-1)}var Ai,Ei=Object.assign({position:d},y&&_0),hs=!0===w?function Hp(n){var t=n.y,r=window.devicePixelRatio||1;return{x:su(n.x*r)/r||0,y:su(t*r)/r||0}}({x:O,y:G}):{x:O,y:G};return O=hs.x,G=hs.y,Object.assign({},Ei,f?((Ai={})[Ae]=Se?"0":"",Ai[ke]=pe?"0":"",Ai.transform=(Be.devicePixelRatio||1)<=1?"translate("+O+"px, "+G+"px)":"translate3d("+O+"px, "+G+"px, 0)",Ai):((e={})[Ae]=Se?G+"px":"",e[ke]=pe?O+"px":"",e.transform="",e))}const FA={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function s1(n){var e=n.state,t=n.options,i=t.gpuAcceleration,r=void 0===i||i,s=t.adaptive,c=void 0===s||s,d=t.roundOffsets,f=void 0===d||d,w={placement:Xl(e.placement),variation:yd(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,r1(Object.assign({},w,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:c,roundOffsets:f})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,r1(Object.assign({},w,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:f})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var LA=[kA,PA,FA,{name:"applyStyles",enabled:!0,phase:"write",fn:function o1(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},r=e.attributes[t]||{},s=e.elements[t];!ks(s)||!xa(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(c){var d=r[c];!1===d?s.removeAttribute(c):s.setAttribute(c,!0===d?"":d)}))})},effect:function a1(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},d=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]).reduce(function(f,y){return f[y]="",f},{});!ks(r)||!xa(r)||(Object.assign(r.style,d),Object.keys(s).forEach(function(f){r.removeAttribute(f)}))})}},requires:["computeStyles"]}],l1=Na({defaultModifiers:LA});const m1=["*"],w0=["dialog"];function T0(n){return"string"==typeof n}function ou(n){return null!=n}function bd(n){return(n||document.body).getBoundingClientRect()}const L1={animation:!0,transitionTimerDelayMs:5},I0=()=>{},{transitionTimerDelayMs:Sx}=L1,lf=new Map,ss=(n,e,t,i)=>{let r=i.context||{};const s=lf.get(e);if(s)switch(i.runningTransition){case"continue":return lr.E;case"stop":n.run(()=>s.transition$.complete()),r=Object.assign(s.context,r),lf.delete(e)}const c=t(e,i.animation,r)||I0;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>c()),ct(void 0).pipe(function F1(n){return e=>new yn.y(t=>e.subscribe({next:c=>n.run(()=>t.next(c)),error:c=>n.run(()=>t.error(c)),complete:()=>n.run(()=>t.complete())}))}(n));const d=new Dn.x,f=new Dn.x,y=d.pipe(function Kc(...n){return e=>da(e,ct(...n))}(!0));lf.set(e,{transition$:d,complete:()=>{f.next(),f.complete()},context:r});const w=function Ix(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const T=xs(e,"transitionend").pipe(Li(y),tn(({target:O})=>O===e));qm(bp(w+Sx).pipe(Li(y)),T,f).pipe(Li(y)).subscribe(()=>{lf.delete(e),n.run(()=>{c(),d.next(),d.complete()})})}),d.asObservable()};let au=(()=>{class n{constructor(){this.animation=L1.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),U1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),N_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),k0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),$1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),P0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();var Xi=(()=>{return(n=Xi||(Xi={}))[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown",Xi;var n})();const Yp=(n,e)=>!!e&&e.some(t=>t.contains(n)),L0=(n,e)=>!e||null!=function Dx(n,e){return e&&void 0!==n.closest?n.closest(e):null}(n,e),Q1="undefined"!=typeof navigator&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const U0=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function X1(n){const e=Array.from(n.querySelectorAll(U0)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const Wx=/\s+/,zx=/  +/gi,qx=/^start/,Zx=/^end/,Qp=/-(top|left)$/,Kx=/-(bottom|right)$/,yl=/^left/,Yx=/^right/,j0=/^start/,Jp=/^end/;function tT({placement:n,baseClass:e}){let t=Array.isArray(n)?n:n.split(Wx),r=t.findIndex(f=>"auto"===f);r>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(f){null==t.find(y=>-1!==y.search("^"+f))&&t.splice(r++,1,f)});const s=t.map(f=>function V0(n){return n.replace(qx,"left").replace(Zx,"right").replace(Qp,"-start").replace(Kx,"-end")}(f));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:f}){const y=new RegExp(e+"(-[a-z]+)*","gi"),w=f.elements.popper,T=f.placement;let x=w.className;x=x.replace(y,""),x+=` ${function Qx(n,e){let[t,i]=e.split("-");const r=t.replace(yl,"start").replace(Yx,"end");let s=[r];if(i){let c=i;("left"===t||"right"===t)&&(c=c.replace(j0,"top").replace(Jp,"bottom")),s.push(`${r}-${c}`)}return n&&(s=s.map(c=>`${n}-${c}`)),s.join(" ")}(e,T)}`,x=x.trim().replace(zx," "),w.className=x}},TA,IA,SA,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function nT(n){return n}new Date(1882,10,12),new Date(2174,10,25);let q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni,pA]]}),n})(),Q0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();class hf{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}class jL{constructor(e,t,i,r,s,c){this._type=e,this._injector=t,this._viewContainerRef=i,this._renderer=r,this._ngZone=s,this._applicationRef=c,this._windowRef=null,this._contentRef=null}open(e,t,i=!1){this._windowRef||(this._contentRef=this._getContentRef(e,t),this._windowRef=this._viewContainerRef.createComponent(this._type,{index:this._viewContainerRef.length,injector:this._injector,projectableNodes:this._contentRef.nodes}));const{nativeElement:r}=this._windowRef.location,s=this._ngZone.onStable.pipe(ai(1),(0,ti.z)(()=>ss(this._ngZone,r,({classList:c})=>c.add("show"),{animation:i,runningTransition:"continue"})));return{windowRef:this._windowRef,transition$:s}}close(e=!1){return this._windowRef?ss(this._ngZone,this._windowRef.location.nativeElement,({classList:t})=>t.remove("show"),{animation:e,runningTransition:"stop"}).pipe((0,dr.b)(()=>{var t;this._windowRef&&(this._viewContainerRef.remove(this._viewContainerRef.indexOf(this._windowRef.hostView)),this._windowRef=null),(null===(t=this._contentRef)||void 0===t?void 0:t.viewRef)&&(this._applicationRef.detachView(this._contentRef.viewRef),this._contentRef.viewRef.destroy(),this._contentRef=null)})):ct(void 0)}_getContentRef(e,t){if(e){if(e instanceof l.Rgc){const i=e.createEmbeddedView(t);return this._applicationRef.attachView(i),new hf([i.rootNodes],i)}return new hf([[this._renderer.createText(`${e}`)]])}return new hf([])}}let HL=(()=>{class n{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{ss(this._zone,this._el.nativeElement,(t,i)=>{i&&bd(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return ss(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(l.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),l.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),n})();class vM{close(e){}dismiss(e){}}class GL{constructor(e,t,i,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=r,this._closed=new Dn.x,this._dismissed=new Dn.x,this._hidden=new Dn.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,c)=>{this._resolve=s,this._reject=c}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(Li(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(Li(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function R1(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ct(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),Uh(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var U_=(()=>{return(n=U_||(U_={}))[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC",U_;var n})();let $L=(()=>{class n{constructor(t,i,r){this._document=t,this._elRef=i,this._zone=r,this._closed$=new Dn.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new l.vpe,this.shown=new Dn.x,this.hidden=new Dn.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":T0(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ai(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},c=Uh(ss(this._zone,t,()=>t.classList.remove("show"),i),ss(this._zone,this._dialogEl.nativeElement,()=>{},i));return c.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),c}_show(){const t={animation:this.animation,runningTransition:"continue"};Uh(ss(this._zone,this._elRef.nativeElement,(s,c)=>{c&&bd(s),s.classList.add("show")},t),ss(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{xs(t,"keydown").pipe(Li(this._closed$),tn(r=>r.which===Xi.Escape)).subscribe(r=>{this.keyboard?requestAnimationFrame(()=>{r.defaultPrevented||this._zone.run(()=>this.dismiss(U_.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;xs(this._dialogEl.nativeElement,"mousedown").pipe(Li(this._closed$),(0,dr.b)(()=>i=!1),Rn(()=>xs(t,"mouseup").pipe(Li(this._closed$),ai(1))),tn(({target:r})=>t===r)).subscribe(()=>{i=!0}),xs(t,"click").pipe(Li(this._closed$)).subscribe(({target:r})=>{t===r&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(U_.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),r=X1(t)[0];(i||r||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let r;r=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>r.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&ss(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(ce),l.Y36(l.SBq),l.Y36(l.R0b))},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&l.Gf(w0,7),2&t){let r;l.iGM(r=l.CRH())&&(i._dialogEl=r.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(l.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),l.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),l.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:m1,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(l.F$t(),l.TgZ(0,"div",0,1)(2,"div",2),l.Hsn(3),l.qZA()()),2&t&&l.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),WL=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,r=i.style,{overflow:s,paddingRight:c}=r;if(t>0){const d=parseFloat(window.getComputedStyle(i).paddingRight);r.paddingRight=`${d+t}px`}return r.overflow="hidden",()=>{t>0&&(r.paddingRight=c),r.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),V_=(()=>{class n{constructor(t,i,r,s,c,d){this._applicationRef=t,this._injector=i,this._document=r,this._scrollBar=s,this._rendererFactory=c,this._ngZone=d,this._activeWindowCmptHasChanged=new Dn.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new l.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const f=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const r=xs(e,"focusin").pipe(Li(t),(0,ut.U)(s=>s.target));xs(e,"keydown").pipe(Li(t),tn(s=>s.which===Xi.Tab),Ym(r)).subscribe(([s,c])=>{const[d,f]=X1(e);(c===d||c===e)&&s.shiftKey&&(f.focus(),s.preventDefault()),c===f&&!s.shiftKey&&(d.focus(),s.preventDefault())}),i&&xs(e,"click").pipe(Li(t),Ym(r),(0,ut.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,f.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(f.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,r,s){const c=s.container instanceof HTMLElement?s.container:ou(s.container)?this._document.querySelector(s.container):this._document.body,d=this._rendererFactory.createRenderer(null,null);if(!c)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const f=new vM,y=this._getContentRef(t,s.injector||i,r,f,s);let w=!1!==s.backdrop?this._attachBackdrop(t,c):void 0,T=this._attachWindowComponent(t,c,y),x=new GL(T,y,w,s.beforeDismiss);return this._registerModalRef(x),this._registerWindowCmpt(T),x.hidden.pipe(ai(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(d.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),f.close=O=>{x.close(O)},f.dismiss=O=>{x.dismiss(O)},this._applyWindowOptions(T.instance,s),1===this._modalRefs.length&&d.addClass(this._document.body,"modal-open"),w&&w.instance&&(this._applyBackdropOptions(w.instance,s),w.changeDetectorRef.detectChanges()),T.changeDetectorRef.detectChanges(),x}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,i){let s=t.resolveComponentFactory(HL).create(this._injector);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(t,i,r){let c=t.resolveComponentFactory($L).create(this._injector,r.nodes);return this._applicationRef.attachView(c.hostView),i.appendChild(c.location.nativeElement),c}_applyWindowOptions(t,i){this._windowAttributes.forEach(r=>{ou(i[r])&&(t[r]=i[r])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(r=>{ou(i[r])&&(t[r]=i[r])})}_getContentRef(t,i,r,s,c){return r?r instanceof l.Rgc?this._createFromTemplateRef(r,s):T0(r)?this._createFromString(r):this._createFromComponent(t,i,r,s,c):new hf([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(c){i.close(c)},dismiss(c){i.dismiss(c)}});return this._applicationRef.attachView(s),new hf([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new hf([[i]])}_createFromComponent(t,i,r,s,c){const d=t.resolveComponentFactory(r),f=l.zs3.create({providers:[{provide:vM,useValue:s}],parent:i}),y=d.create(f),w=y.location.nativeElement;return c.scrollable&&w.classList.add("component-host-scrollable"),this._applicationRef.attachView(y.hostView),new hf([[w]],y.hostView,y)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(r=>{r!==t&&"SCRIPT"!==r.nodeName&&(this._ariaHiddenValues.set(r,r.getAttribute("aria-hidden")),r.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const r=this._modalRefs.indexOf(t);r>-1&&(this._modalRefs.splice(r,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.z2F),l.LFG(l.zs3),l.LFG(ce),l.LFG(WL),l.LFG(l.FYo),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),zL=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(au))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),mT=(()=>{class n{constructor(t,i,r,s){this._moduleCFR=t,this._injector=i,this._modalStack=r,this._config=s}open(t,i={}){const r=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),i);return this._modalStack.open(this._moduleCFR,this._injector,t,r)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l._Vd),l.LFG(l.zs3),l.LFG(V_),l.LFG(zL))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),j_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[mT]}),n})(),wM=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),CT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})();class nb{constructor(e,t){this.open=e,this.close=t,t||(this.close=e)}isManual(){return"manual"===this.open||"manual"===this.close}}const TM={hover:["mouseenter","mouseleave"],focus:["focusin","focusout"]},rb=n=>n>0?Vh(n):e=>e;let W_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),sb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),DT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),ob=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),ab=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),kM=(()=>{class n{constructor(t){this._ngbConfig=t,this.autoClose=!0,this.placement="auto",this.triggers="hover focus",this.disableTooltip=!1,this.openDelay=0,this.closeDelay=0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(au))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),RM=0,c2=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["ngb-tooltip-window"]],hostAttrs:["role","tooltip"],hostVars:5,hostBindings:function(t,i){2&t&&(l.Ikx("id",i.id),l.Tol("tooltip"+(i.tooltipClass?" "+i.tooltipClass:"")),l.ekj("fade",i.animation))},inputs:{animation:"animation",id:"id",tooltipClass:"tooltipClass"},ngContentSelectors:m1,decls:3,vars:0,consts:[["data-popper-arrow","",1,"tooltip-arrow"],[1,"tooltip-inner"]],template:function(t,i){1&t&&(l.F$t(),l._UZ(0,"div",0),l.TgZ(1,"div",1),l.Hsn(2),l.qZA())},encapsulation:2,changeDetection:0}),n})(),MT=(()=>{class n{constructor(t,i,r,s,c,d,f,y,w){this._elementRef=t,this._renderer=i,this._ngZone=d,this._document=f,this._changeDetector=y,this.shown=new l.vpe,this.hidden=new l.vpe,this._ngbTooltipWindowId="ngb-tooltip-"+RM++,this._windowRef=null,this._positioning=function Xp(){let n=null;return{createPopper(e){if(!n){let i=(e.updatePopperOptions||nT)(tT(e));n=l1(e.hostElement,e.targetElement,i)}},update(){n&&n.update()},setOptions(e){if(n){let i=(e.updatePopperOptions||nT)(tT(e));n.setOptions(i)}},destroy(){n&&(n.destroy(),n=null)}}}(),this.animation=c.animation,this.autoClose=c.autoClose,this.placement=c.placement,this.triggers=c.triggers,this.container=c.container,this.disableTooltip=c.disableTooltip,this.tooltipClass=c.tooltipClass,this.openDelay=c.openDelay,this.closeDelay=c.closeDelay,this._popupService=new jL(c2,r,s,i,this._ngZone,w)}set ngbTooltip(t){this._ngbTooltip=t,!t&&this._windowRef&&this.close()}get ngbTooltip(){return this._ngbTooltip}open(t){if(!this._windowRef&&this._ngbTooltip&&!this.disableTooltip){const{windowRef:i,transition$:r}=this._popupService.open(this._ngbTooltip,t,this.animation);this._windowRef=i,this._windowRef.instance.animation=this.animation,this._windowRef.instance.tooltipClass=this.tooltipClass,this._windowRef.instance.id=this._ngbTooltipWindowId,this._renderer.setAttribute(this._elementRef.nativeElement,"aria-describedby",this._ngbTooltipWindowId),"body"===this.container&&this._document.querySelector(this.container).appendChild(this._windowRef.location.nativeElement),this._windowRef.changeDetectorRef.detectChanges(),this._windowRef.changeDetectorRef.markForCheck(),this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._elementRef.nativeElement,targetElement:this._windowRef.location.nativeElement,placement:this.placement,appendToBody:"body"===this.container,baseClass:"bs-tooltip"}),Promise.resolve().then(()=>{this._positioning.update(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update())})}),function B0(n,e,t,i,r,s,c,d){t&&n.runOutsideAngular((n=>Q1?()=>setTimeout(()=>n(),100):n)(()=>{const y=xs(e,"keydown").pipe(Li(r),tn(x=>x.which===Xi.Escape),(0,dr.b)(x=>x.preventDefault())),w=xs(e,"mousedown").pipe((0,ut.U)(x=>{const O=x.target;return 2!==x.button&&!Yp(O,c)&&("inside"===t?Yp(O,s)&&L0(O,d):"outside"===t?!Yp(O,s):L0(O,d)||!Yp(O,s))}),Li(r)),T=xs(e,"mouseup").pipe(Ym(w),tn(([x,O])=>O),Vh(0),Li(r));qm([y.pipe((0,ut.U)(x=>0)),T.pipe((0,ut.U)(x=>1))]).subscribe(x=>n.run(()=>i(x)))}))}(this._ngZone,this._document,this.autoClose,()=>this.close(),this.hidden,[this._windowRef.location.nativeElement]),r.subscribe(()=>this.shown.emit())}}close(t=this.animation){null!=this._windowRef&&(this._renderer.removeAttribute(this._elementRef.nativeElement,"aria-describedby"),this._popupService.close(t).subscribe(()=>{var i;this._windowRef=null,this._positioning.destroy(),null===(i=this._zoneSubscription)||void 0===i||i.unsubscribe(),this.hidden.emit(),this._changeDetector.markForCheck()}))}toggle(){this._windowRef?this.close():this.open()}isOpen(){return null!=this._windowRef}ngOnInit(){this._unregisterListenersFn=function IM(n,e,t,i,r,s,c=0,d=0){const f=function DM(n,e=TM){const t=(n||"").trim();if(0===t.length)return[];const i=t.split(/\s+/).map(s=>s.split(":")).map(s=>{let c=e[s[0]]||s;return new nb(c[0],c[1])}),r=i.filter(s=>s.isManual());if(r.length>1)throw"Triggers parse error: only one manual trigger is allowed";if(1===r.length&&i.length>1)throw"Triggers parse error: manual trigger can't be mixed with other triggers";return i}(t);if(1===f.length&&f[0].isManual())return()=>{};const y=function ib(n,e,t,i){return new yn.y(r=>{const s=[],c=()=>r.next(!0),d=()=>r.next(!1),f=()=>r.next(!i());return t.forEach(y=>{y.open===y.close?s.push(n.listen(e,y.open,f)):s.push(n.listen(e,y.open,c),n.listen(e,y.close,d))}),()=>{s.forEach(y=>y())}})}(n,e,f,i).pipe(function TT(n,e,t){return i=>{let r=null;const s=i.pipe((0,ut.U)(f=>({open:f})),tn(f=>{const y=t();return y===f.open||r&&r.open!==y?(r&&r.open!==f.open&&(r=null),!1):(r=f,!0)}),(0,Cp.B)()),c=s.pipe(tn(f=>f.open),rb(n)),d=s.pipe(tn(f=>!f.open),rb(e));return(0,Km.T)(c,d).pipe(tn(f=>f===r&&(r=null,f.open!==t())),(0,ut.U)(f=>f.open))}}(c,d,i)).subscribe(w=>w?r():s());return()=>y.unsubscribe()}(this._renderer,this._elementRef.nativeElement,this.triggers,this.isOpen.bind(this),this.open.bind(this),this.close.bind(this),+this.openDelay,+this.closeDelay)}ngOnChanges({tooltipClass:t}){t&&this.isOpen()&&(this._windowRef.instance.tooltipClass=t.currentValue)}ngOnDestroy(){var t;this.close(!1),null===(t=this._unregisterListenersFn)||void 0===t||t.call(this)}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(l.SBq),l.Y36(l.Qsj),l.Y36(l.zs3),l.Y36(l.s_b),l.Y36(kM),l.Y36(l.R0b),l.Y36(ce),l.Y36(l.sBO),l.Y36(l.z2F))},n.\u0275dir=l.lG2({type:n,selectors:[["","ngbTooltip",""]],inputs:{animation:"animation",autoClose:"autoClose",placement:"placement",triggers:"triggers",container:"container",disableTooltip:"disableTooltip",tooltipClass:"tooltipClass",openDelay:"openDelay",closeDelay:"closeDelay",ngbTooltip:"ngbTooltip"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbTooltip"],features:[l.TTD]}),n})(),lb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();new l.OlP("live announcer delay",{providedIn:"root",factory:function f2(){return 100}});let ig=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})(),z_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();const cb=[U1,N_,k0,$1,P0,q0,Q0,j_,wM,z_,CT,W_,sb,DT,ob,ab,lb,ig];let q_=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[cb,U1,N_,k0,$1,P0,q0,Q0,j_,wM,z_,CT,W_,sb,DT,ob,ab,lb,ig]}),n})();const kT="AuthToken",RT="AuthUsername",ub="Authorities";let db=(()=>{class n{constructor(){this.roles=[]}setToken(t){window.sessionStorage.removeItem(kT),window.sessionStorage.setItem(kT,t)}getToken(){return sessionStorage.getItem(kT)}setUserName(t){window.sessionStorage.removeItem(RT),window.sessionStorage.setItem(RT,t)}getUserName(){return sessionStorage.getItem(RT)}setAuthorities(t){window.sessionStorage.removeItem(ub),window.sessionStorage.setItem(ub,JSON.stringify(t))}getAuthorities(){return this.roles=[],sessionStorage.getItem(ub)&&JSON.parse(sessionStorage.getItem(ub)).forEach(t=>{this.roles.push(t.authority)}),this.roles}logOut(){window.sessionStorage.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function PT(n,e){1&n&&(l.TgZ(0,"button",17),l._uU(1,"Logueado"),l.qZA())}let Z_=(()=>{class n{constructor(t,i,r){this.router=t,this.authService=i,this.tokenService=r}ngOnInit(){}ruta(){this.router.navigate(["login"])}Salir(){this.tokenService.logOut()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(zn),l.Y36(to),l.Y36(db))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-header"]],decls:26,vars:0,consts:[["role","banner",1,"toolbar"],["width","80","alt","Argentina Programa","src","\\assets\\images\\APLogo-20-20.png"],[1,"spacer"],["aria-label","Angular on twitter","target","_blank","rel","noopener","href","https://twitter.com/TECNO_IA","title","Twitter"],["id","twitter-logo","height","40","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 400 400"],["width","400","height","400","fill","none"],["d","M153.62,301.59c94.34,0,145.94-78.16,145.94-145.94,0-2.22,0-4.43-.15-6.63A104.36,104.36,0,0,0,325,122.47a102.38,102.38,0,0,1-29.46,8.07,51.47,51.47,0,0,0,22.55-28.37,102.79,102.79,0,0,1-32.57,12.45,51.34,51.34,0,0,0-87.41,46.78A145.62,145.62,0,0,1,92.4,107.81a51.33,51.33,0,0,0,15.88,68.47A50.91,50.91,0,0,1,85,169.86c0,.21,0,.43,0,.65a51.31,51.31,0,0,0,41.15,50.28,51.21,51.21,0,0,1-23.16.88,51.35,51.35,0,0,0,47.92,35.62,102.92,102.92,0,0,1-63.7,22A104.41,104.41,0,0,1,75,278.55a145.21,145.21,0,0,0,78.62,23","fill","#fff"],["aria-label","Angular on YouTube","target","_blank","rel","noopener","href","https://www.youtube.com/channel/UCd8NSH98i3tO4BPEaRFqidA","title","YouTube"],["id","youtube-logo","height","40","width","40","data-name","Logo","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","fill","#fff"],["d","M0 0h24v24H0V0z","fill","none"],["d","M21.58 7.19c-.23-.86-.91-1.54-1.77-1.77C18.25 5 12 5 12 5s-6.25 0-7.81.42c-.86.23-1.54.91-1.77 1.77C2 8.75 2 12 2 12s0 3.25.42 4.81c.23.86.91 1.54 1.77 1.77C5.75 19 12 19 12 19s6.25 0 7.81-.42c.86-.23 1.54-.91 1.77-1.77C22 15.25 22 12 22 12s0-3.25-.42-4.81zM10 15V9l5.2 3-5.2 3z"],["class","btn btn-success m-2",4,"ngIf"],[1,"btn","btn-light","m-2",3,"click"],[1,"container-fluid","acerca","sizeacerca",2,"background-color","#6c63ff"],[1,"container","engranajes"],["src","../../../assets/images/engranaje.png","alt","banner",1,"engranaje"],["src","../../../assets/images/engranaje2.png","alt","banner",1,"engranaje","engranaje2"],[1,"btn","btn-success","m-2"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0),l._UZ(1,"img",1),l.TgZ(2,"span"),l._uU(3,"Argentina Programa"),l.qZA(),l._UZ(4,"div",2),l.TgZ(5,"a",3),l.O4$(),l.TgZ(6,"svg",4),l._UZ(7,"rect",5)(8,"path",6),l.qZA()(),l.kcU(),l.TgZ(9,"a",7),l.O4$(),l.TgZ(10,"svg",8),l._UZ(11,"path",9)(12,"path",10),l.qZA()(),l.kcU(),l.TgZ(13,"div"),l.YNc(14,PT,2,0,"button",11),l.qZA(),l.TgZ(15,"div")(16,"button",12),l.NdJ("click",function(){return i.ruta()}),l._uU(17,"Login"),l.qZA()(),l.TgZ(18,"div")(19,"button",12),l.NdJ("click",function(){return i.Salir()}),l._uU(20,"Sign Out"),l.qZA()(),l._UZ(21,"div"),l.qZA(),l._UZ(22,"div",13),l.TgZ(23,"div",14),l._UZ(24,"img",15)(25,"img",16),l.qZA())},directives:[dn],styles:[".toolbar[_ngcontent-%COMP%]{position:relative;top:0;left:0;right:0;height:60px;display:flex;align-items:center;background-color:#474747;color:#fff;font-weight:600}.spacer[_ngcontent-%COMP%]{flex:1}a.btn-social[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]{border-radius:50%;color:#fff!important;display:inline-block;height:54px;line-height:54px;margin:8px 4px;text-align:center;text-decoration:none;transition:background-color .3s;-webkit-transition:background-color .3s;width:54px}.btn-social[_ngcontent-%COMP%]   .fa[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{backface-visibility:hidden;-moz-backface-visibility:hidden;transform:scale(1);transition:all .25s;-webkit-backface-visibility:hidden;-webkit-transform:scale(1);-webkit-transition:all .25s}.btn-social[_ngcontent-%COMP%]:hover, .btn-social[_ngcontent-%COMP%]:focus{color:#fff;outline:none;text-decoration:none}.btn-social[_ngcontent-%COMP%]:hover   .fa[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]:focus   .fa[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%], .btn-social[_ngcontent-%COMP%]:focus   i[_ngcontent-%COMP%]{transform:scale(1.3);-webkit-transform:scale(1.3)}.btn-behance[_ngcontent-%COMP%]{background-color:#1769ff}.btn-behance[_ngcontent-%COMP%]:hover{background-color:#4a8aff}.btn-bitbucket[_ngcontent-%COMP%]{background-color:#205081}.btn-bitbucket[_ngcontent-%COMP%]:hover{background-color:#2a69aa}.acerca[_ngcontent-%COMP%]{background-image:url(fondobanner.207547ace90b5aa6.svg);height:300px;width:auto;background-repeat:no-repeat;background-position:center;background-size:contain}#sizeacerca[_ngcontent-%COMP%]{height:250px}@keyframes rotate{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.engranaje[_ngcontent-%COMP%]{animation:8s rotate linear infinite;transform-origin:50% 50%}.engranaje2[_ngcontent-%COMP%]{animation-direction:reverse;margin-left:-6px}.engranajes[_ngcontent-%COMP%]{opacity:.2;filter:grayscale(100%);margin-top:-110px;margin-right:10px;max-height:150px;position:absolute;float:right}"]}),n})(),hb=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}ngOnInit(){}home(){this.router.navigate(["portfolio"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-home-button"]],decls:4,vars:0,consts:[[1,"container"],[1,"btn","btn-primary",3,"click"],[1,"glyphicon","glyphicon-pencil"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"button",1),l.NdJ("click",function(){return i.home()}),l._UZ(2,"span",2),l._uU(3," Ver Portfolio"),l.qZA()())},styles:[""]}),n})();function LM(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",48),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).onOpenExperiencia(null,"add")}),l._UZ(1,"span",49),l._uU(2," Agregar Experiencia"),l.qZA()}}function BM(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",54)(1,"button",55),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenExperiencia(r,"edit")}),l._UZ(2,"i",56),l._uU(3,"Editar "),l.qZA(),l.TgZ(4,"button",57),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenExperiencia(r,"delete")}),l._UZ(5,"i",58),l._uU(6," borrar "),l.qZA()()}}function FT(n,e){if(1&n&&(l.TgZ(0,"div",50)(1,"div",51)(2,"p")(3,"span",52),l._uU(4),l.qZA()(),l._UZ(5,"br")(6,"br"),l.TgZ(7,"p"),l._uU(8),l.qZA(),l._UZ(9,"br"),l.TgZ(10,"p"),l._uU(11),l.qZA(),l.YNc(12,BM,7,0,"span",53),l.qZA()()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(4),l.Oqu(t.nombre_experiencia),l.xp6(4),l.Oqu(t.descripcion_experiencia),l.xp6(3),l.hij(" ",t.duracion_experiencia," "),l.xp6(1),l.Q6J("ngIf",i.isUserLogged)}}function LT(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"div")(2,"div",2)(3,"div",3)(4,"h4",4),l._uU(5," EXPERIENCIA "),l.YNc(6,LM,3,0,"button",5),l.qZA(),l.TgZ(7,"div",6),l.YNc(8,FT,13,4,"div",7),l.qZA()()(),l.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"h5",12),l._uU(14,"Agregar Experiencia"),l.qZA(),l.TgZ(15,"button",13)(16,"span",14),l._uU(17,"\xd7"),l.qZA()()(),l.TgZ(18,"div",15)(19,"form",16,17),l.NdJ("ngSubmit",function(){l.CHM(t);const r=l.MAs(20);return l.oxw().onAddExperiencia(r)}),l.TgZ(21,"label",18),l._uU(22,"Id"),l.qZA(),l._UZ(23,"br")(24,"input",19),l.TgZ(25,"label",20),l._uU(26,"Nombre Experiencia"),l.qZA(),l._UZ(27,"br")(28,"input",21),l.TgZ(29,"label",22),l._uU(30,"Descripci\xf3n experiencia"),l.qZA(),l._UZ(31,"br")(32,"input",23),l.TgZ(33,"label",24),l._uU(34,"Duraci\xf3n experiencia"),l.qZA(),l._UZ(35,"br")(36,"input",25),l.TgZ(37,"label",26),l._uU(38,"Persona ID"),l.qZA(),l._UZ(39,"br")(40,"input",27),l.TgZ(41,"div",28)(42,"button",29),l._uU(43,"Cancelar"),l.qZA(),l.TgZ(44,"button",30),l._uU(45,"Agregar"),l.qZA()()(),l.TgZ(46,"pre"),l._uU(47),l.ALo(48,"json"),l.qZA()()()()(),l.TgZ(49,"div",31)(50,"div",9)(51,"div",10)(52,"div",11)(53,"h5",12),l._uU(54,"Editar"),l.qZA(),l.TgZ(55,"button",13)(56,"span",14),l._uU(57,"\xd7"),l.qZA()()(),l.TgZ(58,"div",15)(59,"form",null,32)(61,"label",33),l._uU(62,"ID"),l.qZA(),l._UZ(63,"br")(64,"input",34),l.TgZ(65,"label",35),l._uU(66,"Nombre experiencia"),l.qZA(),l._UZ(67,"br")(68,"input",36),l.TgZ(69,"label",37),l._uU(70,"Descripci\xf3n experiencia"),l.qZA(),l._UZ(71,"br")(72,"input",38),l.TgZ(73,"label",39),l._uU(74,"Duraci\xf3n experiencia"),l.qZA(),l._UZ(75,"br")(76,"input",40),l.TgZ(77,"label",41),l._uU(78,"Persona ID"),l.qZA(),l._UZ(79,"br")(80,"input",42),l.TgZ(81,"div",28)(82,"button",43),l._uU(83,"Cancelar"),l.qZA(),l.TgZ(84,"button",44),l.NdJ("click",function(){l.CHM(t);const r=l.MAs(60);return l.oxw().onUpdateExperiencia(r.value)}),l._uU(85,"Guardar cambios"),l.qZA()()(),l.TgZ(86,"pre"),l._uU(87),l.ALo(88,"json"),l.qZA()()()()(),l.TgZ(89,"div",45)(90,"div",9)(91,"div",10)(92,"div",11)(93,"h5",12),l._uU(94,"Eliminar Item"),l.qZA(),l.TgZ(95,"button",13)(96,"span",14),l._uU(97,"\xd7"),l.qZA()()(),l.TgZ(98,"div",15)(99,"p"),l._uU(100,"El \xedtem se eliminar\xe1 permanentemente. \xbfDesea borrarlo?"),l.qZA()(),l.TgZ(101,"div",28)(102,"div",46)(103,"button",47),l._uU(104,"No"),l.qZA(),l.TgZ(105,"button",44),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.onDeleteExperiencia(r.deleteExperiencia.id)}),l._uU(106,"S\xed"),l.qZA()()()()()()()()}if(2&n){const t=l.MAs(20),i=l.MAs(60),r=l.oxw();l.xp6(6),l.Q6J("ngIf",r.isUserLogged),l.xp6(2),l.Q6J("ngForOf",r.experienciaList),l.xp6(36),l.Q6J("disabled",t.invalid),l.xp6(3),l.Oqu(l.lcZ(48,10,t.value)),l.xp6(17),l.MGl("ngModel","",null==r.editExperiencia?null:r.editExperiencia.id," "),l.xp6(4),l.MGl("ngModel","",null==r.editExperiencia?null:r.editExperiencia.nombre_experiencia," "),l.xp6(4),l.s9C("ngModel",null==r.editExperiencia?null:r.editExperiencia.descripcion_experiencia),l.xp6(4),l.s9C("ngModel",null==r.editExperiencia?null:r.editExperiencia.duracion_experiencia),l.xp6(4),l.s9C("ngModel",null==r.editExperiencia?null:r.editExperiencia.persona_id),l.xp6(7),l.Oqu(l.lcZ(88,12,i.value))}}let BT=(()=>{class n{constructor(t,i,r){this.authService=t,this.experienciaService=i,this.experienciaList=[]}ngOnInit(){this.isUserLogged=this.authService.estaLogeado,this.getExperiencia()}getExperiencia(){this.experienciaService.getExperiencia().subscribe(t=>{this.experienciaList=t},t=>{alert(t.message)})}onAddExperiencia(t){var i;null===(i=document.getElementById("add-experiencia-modal"))||void 0===i||i.click(),this.experienciaService.addExperiencia(t.value).subscribe(r=>{console.log(r),this.getExperiencia(),t.reset(),alert("Experiencia ha sido agregada correctamente")},r=>{alert(r.message),t.reset()})}onUpdateExperiencia(t){this.experienciaService.updateExperiencia(t).subscribe(i=>{console.log(i),this.getExperiencia(),alert("Experiencia ha sido actualizada correctamente")},i=>{alert(i.message)})}onDeleteExperiencia(t){this.experienciaService.borrarExperiencia(t).subscribe(i=>{console.log(i),this.getExperiencia(),alert("Experiencia eliminada correctamente")},i=>{console.log(i.message)})}onOpenExperiencia(t,i){const r=document.getElementById("main-container"),s=document.createElement("button");s.type="button2",s.style.display="none",s.setAttribute("data-toggle","modal"),"add"===i&&s.setAttribute("data-target","#addExperienciaModal"),"edit"===i&&(this.editExperiencia=t,s.setAttribute("data-target","#updateExperienciaModal")),"delete"===i&&(this.deleteExperiencia=t,s.setAttribute("data-target","#deleteExperienciaModal")),null==r||r.appendChild(s),s.click()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(HE),l.Y36(au))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-modifica-experiencia"]],decls:4,vars:1,consts:[[1,"image"],[4,"ngIf"],["id","main-container",1,"contenido"],["id","experiencia"],[1,"experiencia"],["ngbTooltip","Agregar experiencia","class","btn btn-success",3,"click",4,"ngIf"],[1,"container"],["class","columnas",4,"ngFor","ngForOf"],["id","addExperienciaModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","addExperienciaModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["addForm2","ngForm"],["for","id","type","hidden",1,"oculto"],["ngModel","","type","number","id","id","name","id",1,"form-control","oculto"],["for","nombre_experiencia"],["ngModel","","type","text","id","nombre_experiencia","name","nombre_experiencia",1,"form-control"],["for","descripcion_experiencia"],["ngModel","","type","text","id","descripcion_experiencia","name","descripcion_experiencia",1,"form-control"],["for","duracion_experiencia"],["ngModel","","type","text","placeholder","5 a\xf1os","id","duracion_experiencia","name","duracion_experiencia",1,"form-control"],["for","persona_id"],["ngModel","","type","number","id","persona_id","name","persona_id",1,"form-control"],[1,"modal-footer"],["type","button","id","add-experiencia-modal","data-dismiss","modal",1,"btn","btn-primary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","updateExperienciaModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","updateExperienciaModal","aria-hidden","true",1,"modal","fade"],["editForm","ngForm"],["type","hidden","for","id",1,"pt-1"],["type","hidden","type","number","id","id","name","id",1,"form-control",3,"ngModel"],["for","nombre_experiencia",1,"pt-3"],["type","text","id","nombre_experiencia","name","nombre_experiencia",1,"form-control",3,"ngModel"],["for","descripcion_experiencia",1,"pt-3"],["type","text","id","descripcion_experiencia","name","descripcion_experiencia",1,"form-control",3,"ngModel"],["for","duracion_experiencia",1,"pt-3"],["type","text","id","duracion_experiencia","name","duracion_experiencia",1,"form-control",3,"ngModel"],["for","persona_id",1,"pt-3"],["type","number","id","persona_id","name","persona_id",1,"form-control",3,"ngModel"],["id","update-experiencia-modal","type","button","data-dismiss","modal",1,"btn","btn-light"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","deleteExperienciaModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteExperienciaModal","aria-hidden","true",1,"modal","fade"],[1,"col-md-4","container"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["ngbTooltip","Agregar experiencia",1,"btn","btn-success",3,"click"],[1,"btn-primary"],[1,"columnas"],[1,"datosexperiencia"],[1,"titulo"],["id","eliminar-editar-experiencia",4,"ngIf"],["id","eliminar-editar-experiencia"],["ngbTooltip","Editar experiencia","type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-pen"],["type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-eraser"]],template:function(t,i){1&t&&(l._UZ(0,"app-header",0),l.TgZ(1,"div"),l._UZ(2,"app-home-button"),l.qZA(),l.YNc(3,LT,107,14,"div",1)),2&t&&(l.xp6(3),l.Q6J("ngIf",i.isUserLogged))},directives:[Z_,hb,dn,MT,Cn,qh,cd,zh,fl,h_,Dp,dd],pipes:[pc],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.fondo[_ngcontent-%COMP%]{background-color:#a5c8f7}.contenido[_ngcontent-%COMP%]{font-size:20px;width:100%;height:auto;padding:40px}#experiencia[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#experiencia[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:#6c63ff;border-bottom:1px #6C63FF solid;text-transform:uppercase;text-align:center;width:100%;justify-content:center;justify-self:center}#experiencia[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right}.experiencia[_ngcontent-%COMP%]{justify-items:right;padding:5px;width:90%}.container[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr;place-content:center;justify-content:center;grid-row-gap:1px;row-gap:1px}.columnas[_ngcontent-%COMP%]{padding:20px;width:90%}.datosexperiencia[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-items:center;align-items:center;background-color:#d9dfe6;padding:10px;border-radius:10px;transition:.4s}.datosexperiencia[_ngcontent-%COMP%]:hover{box-shadow:2px 14px 15px #6c63ff;transition:.2s}.datosexperiencia[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;height:80%;text-align:center;padding:7px 7px 0;line-height:18px;font-size:15px;justify-items:flex-end;align-items:center}.logoexperiencia[_ngcontent-%COMP%]{width:25%;border-radius:50%}.titulo[_ngcontent-%COMP%]{font-weight:700;font-size:17px}#eliminar-editar-experiencia[_ngcontent-%COMP%]{display:flex;font-size:10px;height:100%;align-self:flex-end;justify-self:flex-start}i[_ngcontent-%COMP%]{color:#6c63ff;font-size:10px}.botones_contenido[_ngcontent-%COMP%]{border:#0a66c2;background:#d9dfe6;padding:5px}.botones_editar_borrar[_ngcontent-%COMP%]{font-size:larger;border:#0a66c2;background:#d9dfe6;padding:5px;text-align:end}.botones_contenido[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:end}.boton_edicion_texto[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.close[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:none;background:#a5c8f7;color:#938aec}.boton_eliminar[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.modal-dialog[_ngcontent-%COMP%]{width:50%;padding:15px;justify-content:center;align-self:center;top:10%;left:25%}.modal-body[_ngcontent-%COMP%]{padding:10px}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#fffefe}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#060525;text-transform:uppercase;font-weight:700}.modal-content[_ngcontent-%COMP%]{padding:20px;background-color:#f8f5f7}.form[_ngcontent-%COMP%]{line-height:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:7px;margin-top:5px;color:#060525}.modal-footer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;padding:15px 10px 0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#ededf5;margin:5px;padding:2px 5px;border-color:none}.modal-footer[_ngcontent-%COMP%]   .boton-editar[_ngcontent-%COMP%]{border:none;color:#060525;margin:5px;padding:2px 5px;border-color:none}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}#update-experiencia-modal[_ngcontent-%COMP%]{padding:3px 5px;color:#060525}"]}),n})(),K_=(()=>{class n{constructor(t){this.http=t,this.apiHerokuUrl=ad_apiUrl,this.url="https://floating-chamber-24100.herokuapp.com/"}obtenerDatosSkill(){return this.http.get(`${this.apiHerokuUrl}skill/todas`)}addSkill(t){return this.http.post(`${this.apiHerokuUrl}skill`,t)}modificarSkill(t){return this.http.put(this.apiHerokuUrl+"skill/update",t)}borrarSkill(t){return this.http.delete(`${this.apiHerokuUrl}skill/${t}`)}getSkill(){return this.http.get(`${this.apiHerokuUrl}skill/todas`)}updateSkill(t){return this.http.put(`${this.apiHerokuUrl}modifica/skill`,t)}obtenerUnaSkill(){return this.http.get(this.apiHerokuUrl+"skill/1")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ld))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function UM(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",41),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).onOpenSkill(null,"add")}),l._UZ(1,"span",42),l._uU(2," Agregar Skills"),l.qZA()}}function UT(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",47)(1,"button",48),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenSkill(r,"edit")}),l._UZ(2,"i",49),l._uU(3,"Editar "),l.qZA(),l.TgZ(4,"button",50),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenSkill(r,"delete")}),l._UZ(5,"i",51),l._uU(6," borrar "),l.qZA()()}}function fb(n,e){if(1&n&&(l.TgZ(0,"div",43)(1,"div",44)(2,"p")(3,"span",45),l._uU(4),l.qZA(),l._UZ(5,"br")(6,"br"),l._uU(7),l._UZ(8,"br"),l.qZA(),l.YNc(9,UT,7,0,"span",46),l.qZA()()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(4),l.Oqu(t.nombre_skill),l.xp6(3),l.hij(" ",t.porcentaje_skill," "),l.xp6(2),l.Q6J("ngIf",i.isUserLogged)}}function y2(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"div")(2,"div",2)(3,"div",3)(4,"h4",4),l._uU(5," SKILLS "),l.YNc(6,UM,3,0,"button",5),l.qZA(),l.TgZ(7,"div",6),l.YNc(8,fb,10,3,"div",7),l.qZA()()(),l.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"h5",12),l._uU(14,"Agregar Skill"),l.qZA(),l.TgZ(15,"button",13)(16,"span",14),l._uU(17,"\xd7"),l.qZA()()(),l.TgZ(18,"div",15)(19,"form",16,17),l.NdJ("ngSubmit",function(){l.CHM(t);const r=l.MAs(20);return l.oxw().onAddSkill(r)}),l.TgZ(21,"label",18),l._uU(22,"Id"),l.qZA(),l._UZ(23,"br")(24,"input",19),l.TgZ(25,"label",20),l._uU(26,"Nombre Skill"),l.qZA(),l._UZ(27,"br")(28,"input",21),l.TgZ(29,"label",22),l._uU(30,"Porcentaje Skill"),l.qZA(),l._UZ(31,"br")(32,"input",23),l.TgZ(33,"label",24),l._uU(34,"Persona ID"),l.qZA(),l._UZ(35,"br")(36,"input",25),l.TgZ(37,"div",26)(38,"button",27),l._uU(39,"Cancelar"),l.qZA(),l.TgZ(40,"button",28),l._uU(41,"Agregar"),l.qZA()()(),l.TgZ(42,"pre"),l._uU(43),l.ALo(44,"json"),l.qZA()()()()(),l.TgZ(45,"div",29)(46,"div",9)(47,"div",10)(48,"div",11)(49,"h5",12),l._uU(50,"Editar"),l.qZA(),l.TgZ(51,"button",13)(52,"span",14),l._uU(53,"\xd7"),l.qZA()()(),l.TgZ(54,"div",15)(55,"form",null,30)(57,"label",31),l._uU(58,"ID"),l.qZA(),l._UZ(59,"br")(60,"input",32),l.TgZ(61,"label",20),l._uU(62,"Nombre skill"),l.qZA(),l._UZ(63,"br")(64,"input",33),l.TgZ(65,"label",22),l._uU(66,"Porcentaje en n\xfamero entero"),l.qZA(),l._UZ(67,"br")(68,"input",34),l.TgZ(69,"label",24),l._uU(70,"Persona ID"),l.qZA(),l._UZ(71,"br")(72,"input",35),l.TgZ(73,"div",26)(74,"button",36),l._uU(75,"Cancelar"),l.qZA(),l.TgZ(76,"button",37),l.NdJ("click",function(){l.CHM(t);const r=l.MAs(56);return l.oxw().onUpdateSkill(r.value)}),l._uU(77,"Guardar cambios"),l.qZA()()(),l.TgZ(78,"pre"),l._uU(79),l.ALo(80,"json"),l.qZA()()()()(),l.TgZ(81,"div",38)(82,"div",9)(83,"div",10)(84,"div",11)(85,"h5",12),l._uU(86,"Eliminar Item"),l.qZA(),l.TgZ(87,"button",13)(88,"span",14),l._uU(89,"\xd7"),l.qZA()()(),l.TgZ(90,"div",15)(91,"p"),l._uU(92,"El \xedtem se eliminar\xe1 permanentemente. \xbfDesea borrarlo?"),l.qZA()(),l.TgZ(93,"div",26)(94,"div",39)(95,"button",40),l._uU(96,"No"),l.qZA(),l.TgZ(97,"button",37),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.onDeleteSkill(r.deleteSkill.id)}),l._uU(98,"S\xed"),l.qZA()()()()()()()()}if(2&n){const t=l.MAs(20),i=l.MAs(56),r=l.oxw();l.xp6(6),l.Q6J("ngIf",r.isUserLogged),l.xp6(2),l.Q6J("ngForOf",r.skillList),l.xp6(32),l.Q6J("disabled",t.invalid),l.xp6(3),l.Oqu(l.lcZ(44,9,t.value)),l.xp6(17),l.MGl("ngModel","",null==r.editSkill?null:r.editSkill.id," "),l.xp6(4),l.MGl("ngModel","",null==r.editSkill?null:r.editSkill.nombre_skill," "),l.xp6(4),l.s9C("ngModel",null==r.editSkill?null:r.editSkill.porcentaje_skill),l.xp6(4),l.s9C("ngModel",null==r.editSkill?null:r.editSkill.persona_id),l.xp6(7),l.Oqu(l.lcZ(80,11,i.value))}}let VT=(()=>{class n{constructor(t,i,r){this.authService=t,this.skillService=i,this.skillList=[]}ngOnInit(){this.isUserLogged=this.authService.estaLogeado,this.getSkill()}getSkill(){this.skillService.getSkill().subscribe(t=>{this.skillList=t},t=>{alert(t.message)})}onAddSkill(t){var i;null===(i=document.getElementById("add-skill-modal"))||void 0===i||i.click(),this.skillService.addSkill(t.value).subscribe(r=>{console.log(r),this.getSkill(),t.reset(),alert("Skill ha sido agregada correctamente")},r=>{alert(r.message),t.reset()})}onUpdateSkill(t){this.skillService.updateSkill(t).subscribe(i=>{console.log(i),this.getSkill(),alert("Skill ha sido actualizada correctamente")},i=>{alert(i.message)})}onDeleteSkill(t){this.skillService.borrarSkill(t).subscribe(i=>{console.log(i),this.getSkill(),alert("Skill eliminada correctamente")},i=>{console.log(i.message)})}onOpenSkill(t,i){const r=document.getElementById("main-container"),s=document.createElement("button");s.type="button2",s.style.display="none",s.setAttribute("data-toggle","modal"),"add"===i&&s.setAttribute("data-target","#addSkillModal"),"edit"===i&&(this.editSkill=t,s.setAttribute("data-target","#updateSkillModal")),"delete"===i&&(this.deleteSkill=t,s.setAttribute("data-target","#deleteSkillModal")),null==r||r.appendChild(s),s.click()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(K_),l.Y36(au))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-modifica-skill"]],features:[l._Bn([K_])],decls:4,vars:1,consts:[[1,"image"],[4,"ngIf"],["id","main-container",1,"contenido"],["id","skill"],[1,"skill"],["ngbTooltip","Agregar skill","class","btn btn-success",3,"click",4,"ngIf"],[1,"container"],["class","columnas",4,"ngFor","ngForOf"],["id","addSkillModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","addExperienciaModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["addForm2","ngForm"],["for","id","type","hidden",1,"oculto"],["ngModel","","type","number","id","id","name","id",1,"form-control","oculto"],["for","nombre_skill"],["ngModel","","type","text","id","nombre_skill","name","nombre_skill",1,"form-control"],["for","porcentaje_skill"],["ngModel","","type","number","id","porcentaje_skill","name","porcentaje_skill",1,"form-control"],["for","persona_id"],["ngModel","","type","number","id","persona_id","name","persona_id",1,"form-control"],[1,"modal-footer"],["type","button","id","add-skill-modal","data-dismiss","modal",1,"btn","btn-primary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","updateSkillModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","updateSkillModal","aria-hidden","true",1,"modal","fade"],["editForm","ngForm"],["type","hidden","for","id"],["type","hidden","type","number","id","id","name","id",1,"form-control",3,"ngModel"],["type","text","id","nombre_skill","name","nombre_skill",1,"form-control",3,"ngModel"],["type","number","id","porcentaje_skill","name","porcentaje_skill",1,"form-control",3,"ngModel"],["type","number","id","persona_id","name","persona_id",1,"form-control",3,"ngModel"],["id","update-skill-modal","type","button","data-dismiss","modal",1,"btn","btn-light"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","deleteSkillModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteSkillModal","aria-hidden","true",1,"modal","fade"],[1,"col-md-4","container"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["ngbTooltip","Agregar skill",1,"btn","btn-success",3,"click"],[1,"btn-primary"],[1,"columnas"],[1,"datosskill"],[1,"titulo"],["id","eliminar-editar-skill",4,"ngIf"],["id","eliminar-editar-skill"],["ngbTooltip","Editar skill","type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-pen"],["type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-eraser"]],template:function(t,i){1&t&&(l._UZ(0,"app-header",0),l.TgZ(1,"div"),l._UZ(2,"app-home-button"),l.qZA(),l.YNc(3,y2,99,13,"div",1)),2&t&&(l.xp6(3),l.Q6J("ngIf",i.isUserLogged))},directives:[Z_,hb,dn,MT,Cn,qh,cd,zh,fl,h_,Dp,dd],pipes:[pc],styles:["*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.fondo[_ngcontent-%COMP%]{background-color:#a5c8f7}.contenido[_ngcontent-%COMP%]{font-size:20px;width:100%;height:auto;padding:40px}#skill[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#skill[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:#6c63ff;border-bottom:1px #6C63FF solid;text-transform:uppercase;text-align:center;width:100%;justify-content:center;justify-self:center}#skill[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right}.skill[_ngcontent-%COMP%]{justify-items:right;padding:5px;width:90%}.container[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr;place-content:center;justify-content:center;grid-row-gap:1px;row-gap:1px}.columnas[_ngcontent-%COMP%]{padding:20px;width:90%}.datosskill[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-items:center;align-items:center;background-color:#d9dfe6;padding:10px;border-radius:10px;transition:.4s}.datosskill[_ngcontent-%COMP%]:hover{box-shadow:2px 14px 15px #6c63ff;transition:.2s}.datosskill[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;height:80%;text-align:center;padding:7px 7px 0;line-height:18px;font-size:15px;justify-items:flex-end;align-items:center}.logoskill[_ngcontent-%COMP%]{width:25%;border-radius:50%}.titulo[_ngcontent-%COMP%]{font-weight:700;font-size:17px}#eliminar-editar-skill[_ngcontent-%COMP%]{display:flex;font-size:10px;height:100%;align-self:flex-end;justify-self:flex-start}i[_ngcontent-%COMP%]{color:#6c63ff;font-size:10px}.botones_contenido[_ngcontent-%COMP%]{border:#0a66c2;background:#d9dfe6;padding:5px}.botones_editar_borrar[_ngcontent-%COMP%]{font-size:larger;border:#0a66c2;background:#d9dfe6;padding:5px;text-align:end}.botones_contenido[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:end}.boton_edicion_texto[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.close[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:none;background:#a5c8f7;color:#938aec}.boton_eliminar[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.modal-dialog[_ngcontent-%COMP%]{width:50%;padding:15px;justify-content:center;align-self:center;top:10%;left:25%}.modal-body[_ngcontent-%COMP%]{padding:10px}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#fffefe}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#060525;text-transform:uppercase;font-weight:700}.modal-content[_ngcontent-%COMP%]{padding:20px;background-color:#f8f5f7}.form[_ngcontent-%COMP%]{line-height:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:7px;margin-top:5px;color:#060525}.modal-footer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;padding:15px 10px 0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#ededf5;margin:5px;padding:2px 5px;border-color:none}.modal-footer[_ngcontent-%COMP%]   .boton-editar[_ngcontent-%COMP%]{border:none;color:#060525;margin:5px;padding:2px 5px;border-color:none}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}#update-skill-modal[_ngcontent-%COMP%]{padding:3px 5px;color:#060525}"]}),n})(),gf=(()=>{class n{constructor(t){this.http=t,this.apiHerokuUrl=ad_apiUrl,this.url="https://floating-chamber-24100.herokuapp.com/"}obtenerDatosEducacion(){return this.http.get(`${this.apiHerokuUrl}educacion/all`)}addEducacion(t){return this.http.post(`${this.apiHerokuUrl}educacion`,t)}updateEducacion(t){return this.http.put(`${this.apiHerokuUrl}educacion/update`,t)}borrarEducacion(t){return this.http.delete(`${this.apiHerokuUrl}educacion/${t}`)}getEducacion(){return this.http.get(`${this.apiHerokuUrl}educacion/all`)}editarDatosEducacion(t){return this.http.put(this.url,t)}obtenerUnaEducacion(){return this.http.get(this.apiHerokuUrl+"educacion/1")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ld))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function VM(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",48),l.NdJ("click",function(){return l.CHM(t),l.oxw(2).onOpenModal(null,"add")}),l._UZ(1,"span",49),l._uU(2," Agregar educacion"),l.qZA()}}function jM(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"span",54)(1,"button",55),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenModal(r,"edit")}),l._UZ(2,"i",56),l._uU(3,"Editar "),l.qZA(),l.TgZ(4,"button",57),l.NdJ("click",function(){l.CHM(t);const r=l.oxw().$implicit;return l.oxw(2).onOpenModal(r,"delete")}),l._UZ(5,"i",58),l._uU(6," borrar "),l.qZA()()}}function v2(n,e){if(1&n&&(l.TgZ(0,"div",50)(1,"div",51)(2,"p")(3,"span",52),l._uU(4),l.qZA(),l._UZ(5,"br")(6,"br"),l._uU(7),l._UZ(8,"br")(9,"br"),l._uU(10),l._UZ(11,"br"),l._uU(12),l.qZA(),l.YNc(13,jM,7,0,"span",53),l.qZA()()),2&n){const t=e.$implicit,i=l.oxw(2);l.xp6(4),l.Oqu(t.titulo),l.xp6(3),l.hij(" ",t.institucion," "),l.xp6(3),l.hij(" ",t.fecha_egreso," "),l.xp6(2),l.hij(" ",t.fecha_inicio," "),l.xp6(1),l.Q6J("ngIf",i.isUserLogged)}}function b2(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"div")(2,"div",2)(3,"div",3)(4,"h4",4),l._uU(5," Educacion "),l.YNc(6,VM,3,0,"button",5),l.qZA(),l.TgZ(7,"div",6),l.YNc(8,v2,14,5,"div",7),l.qZA()()()(),l.TgZ(9,"div",8)(10,"div",9)(11,"div",10)(12,"div",11)(13,"h5",12),l._uU(14,"Agregar Educacion"),l.qZA(),l.TgZ(15,"button",13)(16,"span",14),l._uU(17,"\xd7"),l.qZA()()(),l.TgZ(18,"div",15)(19,"form",16,17),l.NdJ("ngSubmit",function(){l.CHM(t);const r=l.MAs(20);return l.oxw().onAddEducacion(r)}),l.TgZ(21,"label",18),l._uU(22,"Id"),l.qZA(),l._UZ(23,"br")(24,"input",19),l.TgZ(25,"label",20),l._uU(26,"Fecha Inicio"),l.qZA(),l._UZ(27,"br")(28,"input",21),l.TgZ(29,"label",22),l._uU(30,"Fecha egreso"),l.qZA(),l._UZ(31,"br")(32,"input",23),l.TgZ(33,"label",24),l._uU(34,"T\xedtulo"),l.qZA(),l._UZ(35,"br")(36,"input",25),l.TgZ(37,"label",26),l._uU(38,"Institucion"),l.qZA(),l._UZ(39,"br")(40,"input",27),l.TgZ(41,"label",28),l._uU(42,"Id Persona"),l.qZA(),l._UZ(43,"br")(44,"input",29),l.TgZ(45,"div",30)(46,"button",31),l._uU(47,"Cancelar"),l.qZA(),l.TgZ(48,"button",32),l._uU(49,"Agregar"),l.qZA()()(),l.TgZ(50,"pre"),l._uU(51),l.ALo(52,"json"),l.qZA()()()()(),l.TgZ(53,"div",33)(54,"div",9)(55,"div",10)(56,"div",11)(57,"h5",12),l._uU(58,"Editar"),l.qZA(),l.TgZ(59,"button",13)(60,"span",14),l._uU(61,"\xd7"),l.qZA()()(),l.TgZ(62,"div",15)(63,"form",null,34)(65,"label",35),l._uU(66,"ID"),l.qZA(),l._UZ(67,"br")(68,"input",36),l.TgZ(69,"label",20),l._uU(70,"Fecha inicio"),l.qZA(),l._UZ(71,"br")(72,"input",37),l.TgZ(73,"label",22),l._uU(74,"Fecha egreso"),l.qZA(),l._UZ(75,"br")(76,"input",38),l.TgZ(77,"label",24),l._uU(78,"T\xedtulo"),l.qZA(),l._UZ(79,"br")(80,"input",39),l.TgZ(81,"label",26),l._uU(82,"Institucion"),l.qZA(),l._UZ(83,"br")(84,"input",40),l.TgZ(85,"label",28),l._uU(86,"Id Persona"),l.qZA(),l._UZ(87,"br")(88,"input",41)(89,"input",42)(90,"br"),l.TgZ(91,"div",30)(92,"button",43),l._uU(93,"Cancelar"),l.qZA(),l.TgZ(94,"button",44),l.NdJ("click",function(){l.CHM(t);const r=l.MAs(64);return l.oxw().onUpdateEducacion(r.value)}),l._uU(95,"Guardar cambios"),l.qZA()()(),l.TgZ(96,"pre"),l._uU(97),l.ALo(98,"json"),l.qZA()()()()(),l.TgZ(99,"div",45)(100,"div",9)(101,"div",10)(102,"div",11)(103,"h5",12),l._uU(104,"Eliminar Item"),l.qZA(),l.TgZ(105,"button",13)(106,"span",14),l._uU(107,"\xd7"),l.qZA()()(),l.TgZ(108,"div",15)(109,"p"),l._uU(110,"El \xedtem se eliminar\xe1 permanentemente. \xbfDesea borrarlo?"),l.qZA()(),l.TgZ(111,"div",30)(112,"div",46)(113,"button",47),l._uU(114,"No"),l.qZA(),l.TgZ(115,"button",44),l.NdJ("click",function(){l.CHM(t);const r=l.oxw();return r.onDeleteEducacion(r.deleteEducacion.id)}),l._uU(116,"S\xed"),l.qZA()()()()()()()}if(2&n){const t=l.MAs(20),i=l.MAs(64),r=l.oxw();l.xp6(6),l.Q6J("ngIf",r.isUserLogged),l.xp6(2),l.Q6J("ngForOf",r.educacionList),l.xp6(40),l.Q6J("disabled",t.invalid),l.xp6(3),l.Oqu(l.lcZ(52,12,t.value)),l.xp6(17),l.MGl("ngModel","",null==r.editEducacion?null:r.editEducacion.id," "),l.xp6(4),l.MGl("ngModel","",null==r.editEducacion?null:r.editEducacion.fecha_inicio," "),l.xp6(4),l.s9C("ngModel",null==r.editEducacion?null:r.editEducacion.fecha_egreso),l.xp6(4),l.s9C("ngModel",null==r.editEducacion?null:r.editEducacion.titulo),l.xp6(4),l.s9C("ngModel",null==r.editEducacion?null:r.editEducacion.institucion),l.xp6(4),l.s9C("ngModel",null==r.editEducacion?null:r.editEducacion.persona_id),l.xp6(1),l.MGl("ngModel","",null==r.editEducacion?null:r.editEducacion.id," "),l.xp6(8),l.Oqu(l.lcZ(98,14,i.value))}}let HM=(()=>{class n{constructor(t,i,r){this.authService=t,this.educacionService=i,this.educacionList=[]}ngOnInit(){this.isUserLogged=this.authService.estaLogeado,this.getEducacion()}getEducacion(){this.educacionService.getEducacion().subscribe(t=>{this.educacionList=t},t=>{alert(t.message)})}onAddEducacion(t){var i;null===(i=document.getElementById("add-educacion-modal"))||void 0===i||i.click(),this.educacionService.addEducacion(t.value).subscribe(r=>{console.log(r),this.getEducacion(),t.reset(),alert("Educacion ha sido agregada correctamente")},r=>{alert(r.message),t.reset()})}onUpdateEducacion(t){this.educacionService.updateEducacion(t).subscribe(i=>{console.log(i),this.getEducacion(),alert("Educacion ha sido actualizada correctamente")},i=>{alert(i.message)})}onDeleteEducacion(t){this.educacionService.borrarEducacion(t).subscribe(i=>{console.log(i),this.getEducacion(),alert("Educacion ha sido eliminada correctamente")},i=>{console.log(i.message)})}onOpenModal(t,i){const r=document.getElementById("main-container"),s=document.createElement("button");s.type="button",s.style.display="none",s.setAttribute("data-toggle","modal"),"add"===i&&s.setAttribute("data-target","#addEducacionModal"),"edit"===i&&(this.editEducacion=t,s.setAttribute("data-target","#updateEducacionModal")),"delete"===i&&(this.deleteEducacion=t,s.setAttribute("data-target","#deleteEducacionModal")),null==r||r.appendChild(s),s.click()}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(gf),l.Y36(au))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-modifica"]],features:[l._Bn([gf])],decls:5,vars:1,consts:[[1,"image"],[4,"ngIf"],["id","main-container",1,"contenido"],["id","educacion"],[1,"educacion"],["ngbTooltip","Agregar educaci\xf3n","class","btn btn-success",3,"click",4,"ngIf"],[1,"container"],["class","columnas",4,"ngFor","ngForOf"],["id","addEducacionModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","addExperienciaModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],["id","staticBackdropLabel",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],["aria-hidden","true"],[1,"modal-body"],[3,"ngSubmit"],["addForm","ngForm"],["for","id","type","hidden",1,"oculto"],["ngModel","","type","number","id","id","name","id",1,"form-control","oculto"],["for","fecha_inicio"],["ngModel","","type","text","id","fecha_inicio","name","fecha_inicio","placeholder","yyyy-mm-dd",1,"form-control"],["for","fecha_egreso"],["ngModel","","type","text","id","fecha_egreso","name","fecha_egreso","placeholder","yyyy-mm-dd",1,"form-control"],["for","titulo"],["ngModel","","type","text","id","titulo","name","titulo",1,"form-control"],["for","institucion"],["ngModel","","type","text","id","institucion","name","institucion",1,"form-control"],["for","persona_id"],["ngModel","","type","number","name","persona_id","id","persona_id",1,"form-control"],[1,"modal-footer"],["type","button","id","add-educacion-modal","data-dismiss","modal",1,"btn","btn-primary"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","updateEducacionModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","updateEducacionModal","aria-hidden","true",1,"modal","fade"],["editForm","ngForm"],["type","hidden","for","id"],["type","hidden","type","number","id","id","name","id",1,"form-control",3,"ngModel"],["type","text","id","fecha_inicio","name","fecha_inicio",1,"form-control",3,"ngModel"],["type","text","id","fecha_egreso","name","fecha_egreso",1,"form-control",3,"ngModel"],["type","text","id","titulo","name","titulo",1,"form-control",3,"ngModel"],["type","text","id","institucion","name","institucion",1,"form-control",3,"ngModel"],["type","number","id","persona_id","name","persona_id",1,"form-control",3,"ngModel"],["type","hidden","name","id",3,"ngModel"],["id","update-educacion-modal","type","button","data-dismiss","modal",1,"btn","btn-light"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"click"],["id","deleteEducacionModal","data-backdrop","static","data-keyboard","false","tabindex","-1","aria-labelledby","deleteEducacionModal","aria-hidden","true",1,"modal","fade"],[1,"col-md-4","container"],["type","button","data-dismiss","modal",1,"btn","btn-secondary"],["ngbTooltip","Agregar educaci\xf3n",1,"btn","btn-success",3,"click"],[1,"btn-primary"],[1,"columnas"],[1,"datoseducacion"],[1,"titulo"],["id","eliminar-editar-educacion",4,"ngIf"],["id","eliminar-editar-educacion"],["ngbTooltip","Editar educaci\xf3n","type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-pen"],["type","button",1,"botones_editar_borrar",3,"click"],[1,"fa-solid","fa-eraser"]],template:function(t,i){1&t&&(l.TgZ(0,"app-header",0),l._UZ(1,"app-home-button"),l.qZA(),l.TgZ(2,"div"),l._UZ(3,"app-home-button"),l.qZA(),l.YNc(4,b2,117,16,"div",1)),2&t&&(l.xp6(4),l.Q6J("ngIf",i.isUserLogged))},directives:[Z_,hb,dn,MT,Cn,qh,cd,zh,fl,h_,Dp,dd],pipes:[pc],styles:[".oculto[_ngcontent-%COMP%]{visibility:hidden}*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}.fondo[_ngcontent-%COMP%]{background-color:#a5c8f7}.contenido[_ngcontent-%COMP%]{font-size:20px;width:100%;height:auto;padding:40px}#educacion[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}#educacion[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:25px;font-weight:bolder;color:#6c63ff;border-bottom:1px #6C63FF solid;text-transform:uppercase;text-align:center;width:100%;justify-content:center;justify-self:center}#educacion[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:right}.educacion[_ngcontent-%COMP%]{justify-items:right;padding:5px;width:90%}.container[_ngcontent-%COMP%]{width:100%;display:grid;grid-template-columns:1fr 1fr;place-content:center;justify-content:center;grid-row-gap:1px;row-gap:1px}.columnas[_ngcontent-%COMP%]{padding:20px;width:100%}.datoseducacion[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-items:center;align-items:center;background-color:#d9dfe6;padding:10px;border-radius:10px;transition:.4s}.datoseducacion[_ngcontent-%COMP%]:hover{box-shadow:2px 14px 15px #6c63ff;transition:.2s}.datoseducacion[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;height:80%;text-align:center;padding:7px 7px 0;line-height:18px;font-size:15px;justify-items:flex-end;align-items:center}.logoeducacion[_ngcontent-%COMP%]{width:25%;border-radius:50%}.titulo[_ngcontent-%COMP%]{font-weight:700;font-size:17px}#eliminar-editar-educacion[_ngcontent-%COMP%]{display:flex;font-size:10px;height:100%;align-self:flex-end;justify-self:flex-start}i[_ngcontent-%COMP%]{color:#6c63ff;font-size:10px}.botones_contenido[_ngcontent-%COMP%]{border:#0a66c2;background:#d9dfe6;padding:5px}.botones_editar_borrar[_ngcontent-%COMP%]{font-size:larger;border:#0a66c2;background:#d9dfe6;padding:5px;text-align:end}.botones_contenido[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{text-align:end}.boton_edicion_texto[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.close[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;border:none;background:#a5c8f7;color:#938aec}.boton_eliminar[_ngcontent-%COMP%]{padding:2px 10px;margin-top:10px;background:#938aec;color:#a5c8f7;border-radius:5px;font-size:10px;border:none}.modal-dialog[_ngcontent-%COMP%]{width:50%;padding:15px;justify-content:center;align-self:center;top:10%;left:25%}.modal-body[_ngcontent-%COMP%]{padding:10px}.modal-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#fffefe}.modal-header[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%]{color:#060525;text-transform:uppercase;font-weight:700}.modal-content[_ngcontent-%COMP%]{padding:20px;background-color:#f8f5f7}.form[_ngcontent-%COMP%]{line-height:20px}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{line-height:7px;margin-top:5px;color:#060525}.modal-footer[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:space-around;padding:15px 10px 0}.modal-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;color:#ededf5;margin:5px;padding:2px 5px;border-color:none}.modal-footer[_ngcontent-%COMP%]   .boton-editar[_ngcontent-%COMP%]{border:none;color:#060525;margin:5px;padding:2px 5px;border-color:none}.modal-body[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}#update-educacion-modal[_ngcontent-%COMP%]{padding:3px 5px;color:#060525}"]}),n})(),GM=(()=>{class n{constructor(t){this.authService=t,this.name="Perrotta Vicente",this.iam=" Full Stack Developer"}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-acerca"]],decls:8,vars:2,consts:[[1,"perfil"],["src","../../../assets/images/perfil.png","alt","banner",1,"img-fluid","fotoperfil"],["position","relative",1,"line","anim-typewriter","nombre"]],template:function(t,i){1&t&&(l.TgZ(0,"div")(1,"div")(2,"div",0)(3,"div"),l._UZ(4,"img",1),l.qZA(),l.TgZ(5,"h1",2),l._uU(6),l.qZA()()()(),l._UZ(7,"div")),2&t&&(l.xp6(6),l.AsE("",i.name," | ",i.iam,""))},styles:["#inferior[_ngcontent-%COMP%]{color:#fff;background:#000;position:absolute;left:0;right:0;bottom:0;height:50px;z-index:0}section[_ngcontent-%COMP%]{display:table}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:14px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell;width:490px}.example-button-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}.example-flex-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;flex-wrap:wrap}.example-button-container[_ngcontent-%COMP%]{display:flex;justify-content:center;width:120px}.img-fluid[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:2rem}.content[_ngcontent-%COMP%]{width:auto}.banner[_ngcontent-%COMP%]{position:relative;background-size:contain}.nombre[_ngcontent-%COMP%]{bottom:-25px;left:10px;font-family:Open Sans,sans-serif;color:#272829}.fotoperfil[_ngcontent-%COMP%]{border-width:.5rem;border-style:solid;border-color:#f0f6fb;border-radius:50%;filter:grayscale(100%);margin-top:-120px;margin-left:10px;position:absolute;max-height:150px}.perfil[_ngcontent-%COMP%]{position:unset;width:15%;height:15%;background-color:transparent}.arriba[_ngcontent-%COMP%]{position:relative;padding-right:15px;padding-left:15px}.abajo[_ngcontent-%COMP%]{position:relative;padding-right:15px;padding-left:15px;border-radius:2rem;z-index:1}.line[_ngcontent-%COMP%]{position:relative;margin-top:20px;margin-bottom:15px;border-width:15px;width:16em;color:#474747;border-right:2px solid rgba(255,255,255,.75);text-align:initial;white-space:nowrap;overflow:hidden}.anim-typewriter[_ngcontent-%COMP%]{animation:typewriter 4s steps(38) 1s 1 normal both,blinkTextCursor .5s steps(38) infinite normal}@keyframes typewriter{0%{width:0}to{width:18em}}@keyframes blinkTextCursor{0%{border-right-color:#ffffffbf}to{border-right-color:transparent}}.container-fluid[_ngcontent-%COMP%]{background-color:#6c63ff;border-radius:2rem;height:70%}"]}),n})();function w2(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"button",1),l.NdJ("click",function(){return l.CHM(t),l.oxw().Editar()}),l._UZ(2,"span",2),l._uU(3," Editar experiencia"),l.qZA()()}}let E2=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}ngOnInit(){}Editar(){this.router.navigate(this.authService.estaLogeado?["modifica-experiencia"]:["login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-experiencia-button"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-secondary","bi","bi-pencil","m-2",3,"click"],[1,"glyphicon","glyphicon-pencil"]],template:function(t,i){1&t&&l.YNc(0,w2,4,0,"div",0),2&t&&l.Q6J("ngIf",i.authService.estaLogeado)},directives:[dn],styles:[""]}),n})();function C2(n,e){if(1&n&&(l.TgZ(0,"div",8)(1,"div",9)(2,"div",10)(3,"span",11),l._UZ(4,"i",12),l.qZA()(),l.TgZ(5,"div",13)(6,"h2",5),l._uU(7),l.qZA(),l.TgZ(8,"h3",14),l._uU(9),l.qZA(),l.TgZ(10,"p",15),l._uU(11),l.qZA()()()()),2&n){const t=e.$implicit;l.xp6(7),l.Oqu(t.nombre_experiencia),l.xp6(2),l.Oqu(t.duracion_experiencia),l.xp6(2),l.hij(" ",t.descripcion_experiencia," ")}}let T2=(()=>{class n{constructor(t,i,r){this.authService=t,this.expService=i,this.tokenService=r,this.exp="Experiencia",this.experiencia=[],this.isLogged=!1}ngOnInit(){this.tokenService.getToken()?this.expService.obtenerDatosExperiencia().subscribe(t=>{this.experiencia=t,console.log("DataExperiencia ",t)}):this.isLogged=!1}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(HE),l.Y36(db))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-experience"]],features:[l._Bn([HE])],decls:11,vars:2,consts:[["id","services",1,"services-mf","pt-5","route"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"title-box","text-center"],[1,"titulos"],[1,"line-mf"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"service-box"],[1,"service-ico"],[1,"ico-circle"],[1,"bi","bi-bag-check"],[1,"service-content"],[1,"text-muted"],[1,"s-description","text-center"]],template:function(t,i){1&t&&(l.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1",5),l._uU(6),l.qZA(),l._UZ(7,"app-edit-experiencia-button")(8,"div",6),l.qZA()()(),l.TgZ(9,"div",2),l.YNc(10,C2,12,3,"div",7),l.qZA()()()),2&t&&(l.xp6(6),l.hij(" ",i.exp," "),l.xp6(4),l.Q6J("ngForOf",i.experiencia))},directives:[E2,Cn],styles:[".ico-circle[_ngcontent-%COMP%]{height:100px;width:100px;font-size:2rem;border-radius:50%;line-height:1.55;margin:0 auto;text-align:center;box-shadow:0 0 0 10px #6c63ff;display:block}.service-box[_ngcontent-%COMP%]{background-color:#fff;padding:2.5rem 1.3rem;border-radius:1rem;margin-bottom:3rem;text-align:center}.service-box[_ngcontent-%COMP%]:hover   .ico-circle[_ngcontent-%COMP%]{transition:all .5s ease;color:#fff;background-color:#0078ff;box-shadow:0 0 0 10px #cde1f8}.service-box[_ngcontent-%COMP%]   .service-ico[_ngcontent-%COMP%]{margin-bottom:1rem;color:#1e1e1e}.service-box[_ngcontent-%COMP%]   .ico-circle[_ngcontent-%COMP%]{transition:all .5s ease;display:inline-flex;align-items:center;justify-content:center}.service-box[_ngcontent-%COMP%]   .ico-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:0;font-size:40px}.service-box[_ngcontent-%COMP%]   .s-title[_ngcontent-%COMP%]{font-size:1.4rem;text-transform:uppercase;text-align:center;padding:.4rem 0}.service-box[_ngcontent-%COMP%]   .s-description[_ngcontent-%COMP%]{color:#4e4e4e}"]}),n})();function D2(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"button",1),l.NdJ("click",function(){return l.CHM(t),l.oxw().Editar()}),l._UZ(2,"span",2),l._uU(3," Editar Educaci\xf3n"),l.qZA()()}}let $M=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}ngOnInit(){}Editar(){this.router.navigate(this.authService.estaLogeado?["modifica"]:["login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-button"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-secondary","bi","bi-pencil","m-2",3,"click"],[1,"glyphicon","glyphicon-pencil"]],template:function(t,i){1&t&&l.YNc(0,D2,4,0,"div",0),2&t&&l.Q6J("ngIf",i.authService.estaLogeado)},directives:[dn],styles:[""]}),n})();function I2(n,e){if(1&n&&(l.TgZ(0,"div",7)(1,"div",8)(2,"div",9)(3,"span",10),l._UZ(4,"i",11),l.qZA()(),l.TgZ(5,"div")(6,"h2"),l._uU(7),l.qZA(),l.TgZ(8,"h3",12),l._uU(9),l.qZA(),l.TgZ(10,"h4",12),l._uU(11),l.qZA()()()()),2&n){const t=e.$implicit;l.xp6(7),l.Oqu(t.titulo),l.xp6(2),l.Oqu(t.institucion),l.xp6(2),l.Oqu(t.fecha_egreso)}}let S2=(()=>{class n{constructor(t){this.eService=t,this.educacion=[]}ngOnInit(){this.eService.obtenerDatosEducacion().subscribe(t=>{this.educacion=t,console.log("Data2 ",t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(gf))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-education"]],features:[l._Bn([gf])],decls:11,vars:1,consts:[["id","services",1,"services-mf","pt-5","route"],[1,"container"],[1,"row"],[1,"col-sm-12"],[1,"title-box","text-center"],[1,"line-mf"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"service-box"],[1,"service-ico"],[1,"ico-circle"],[1,"fondo"],[1,"text-muted"]],template:function(t,i){1&t&&(l.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h1"),l._uU(6," Educaci\xf3n "),l.qZA(),l._UZ(7,"app-edit-button")(8,"div",5),l.qZA()()(),l.TgZ(9,"div",2),l.YNc(10,I2,12,3,"div",6),l.qZA()()()),2&t&&(l.xp6(10),l.Q6J("ngForOf",i.educacion))},directives:[$M,Cn],styles:[".ico-circle[_ngcontent-%COMP%]{height:100px;width:100px;font-size:2rem;border-radius:50%;line-height:1.55;margin:0 auto;text-align:center;box-shadow:0 0 0 5px #29292b;display:block;background-image:url(education.afc1707aba6d36ba.png);background-repeat:no-repeat;background-position:50%;background-size:contain}.service-box[_ngcontent-%COMP%]{background-color:#fff;padding:2.5rem 1.3rem;border-radius:1rem;margin-bottom:3rem;text-align:center}.service-box[_ngcontent-%COMP%]:hover   .ico-circle[_ngcontent-%COMP%]{transition:all .5s ease;color:#fff;background-color:#d0dae6;box-shadow:0 0 0 5px #cde1f8}.service-box[_ngcontent-%COMP%]   .service-ico[_ngcontent-%COMP%]{margin-bottom:1rem;color:#1e1e1e}.service-box[_ngcontent-%COMP%]   .ico-circle[_ngcontent-%COMP%]{transition:all .5s ease;display:inline-flex;align-items:center;justify-content:center}.service-box[_ngcontent-%COMP%]   .ico-circle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{line-height:0;font-size:40px}.service-box[_ngcontent-%COMP%]   .s-title[_ngcontent-%COMP%]{font-size:1.4rem;text-transform:uppercase;text-align:center;padding:.4rem 0}.service-box[_ngcontent-%COMP%]   .s-description[_ngcontent-%COMP%]{color:#4e4e4e}"]}),n})();function A2(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"div")(1,"button",1),l.NdJ("click",function(){return l.CHM(t),l.oxw().Editar()}),l._UZ(2,"span",2),l._uU(3," Editar Skill"),l.qZA()()}}let x2=(()=>{class n{constructor(t,i){this.authService=t,this.router=i}ngOnInit(){}Editar(){this.router.navigate(this.authService.estaLogeado?["modifica-skill"]:["login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-edit-skill-button"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"btn","btn-secondary","bi","bi-pencil","m-2",3,"click"],[1,"glyphicon","glyphicon-pencil"]],template:function(t,i){1&t&&l.YNc(0,A2,4,0,"div",0),2&t&&l.Q6J("ngIf",i.authService.estaLogeado)},directives:[dn],styles:[""]}),n})();function o(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"linearGradient"),l._UZ(1,"stop",5)(2,"stop",6),l.qZA()),2&n){const t=l.oxw(2);l.uIk("id",t.svg.outerLinearGradient.id),l.xp6(1),l.uIk("stop-color",t.svg.outerLinearGradient.colorStop1)("stop-opacity",1),l.xp6(1),l.uIk("stop-color",t.svg.outerLinearGradient.colorStop2)("stop-opacity",1)}}function a(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"radialGradient"),l._UZ(1,"stop",5)(2,"stop",6),l.qZA()),2&n){const t=l.oxw(2);l.uIk("id",t.svg.radialGradient.id),l.xp6(1),l.uIk("stop-color",t.svg.radialGradient.colorStop1)("stop-opacity",1),l.xp6(1),l.uIk("stop-color",t.svg.radialGradient.colorStop2)("stop-opacity",1)}}function u(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(3);l.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill",t.svg.backgroundCircle.fill)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function h(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(3);l.Q2q("fill","url(#",t.svg.radialGradient.id,")"),l.uIk("cx",t.svg.backgroundCircle.cx)("cy",t.svg.backgroundCircle.cy)("r",t.svg.backgroundCircle.r)("fill-opacity",t.svg.backgroundCircle.fillOpacity)("stroke",t.svg.backgroundCircle.stroke)("stroke-width",t.svg.backgroundCircle.strokeWidth)}}function p(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,u,1,7,"circle",2),l.YNc(2,h,1,7,"circle",2),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!t.options.backgroundGradient),l.xp6(1),l.Q6J("ngIf",t.options.backgroundGradient)}}function _(n,e){if(1&n&&(l.O4$(),l._UZ(0,"circle")),2&n){const t=l.oxw(2);l.uIk("cx",t.svg.circle.cx)("cy",t.svg.circle.cy)("r",t.svg.circle.r)("fill",t.svg.circle.fill)("stroke",t.svg.circle.stroke)("stroke-width",t.svg.circle.strokeWidth)}}function b(n,e){if(1&n&&(l.O4$(),l._UZ(0,"path")),2&n){const t=l.oxw(3);l.uIk("d",t.svg.path.d)("stroke",t.svg.path.stroke)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function C(n,e){if(1&n&&(l.O4$(),l._UZ(0,"path")),2&n){const t=l.oxw(3);l.Q2q("stroke","url(#",t.svg.outerLinearGradient.id,")"),l.uIk("d",t.svg.path.d)("stroke-width",t.svg.path.strokeWidth)("stroke-linecap",t.svg.path.strokeLinecap)("fill",t.svg.path.fill)}}function I(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,b,1,5,"path",2),l.YNc(2,C,1,5,"path",2),l.BQk()),2&n){const t=l.oxw(2);l.xp6(1),l.Q6J("ngIf",!t.options.outerStrokeGradient),l.xp6(1),l.Q6J("ngIf",t.options.outerStrokeGradient)}}function N(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=e.$implicit,i=l.oxw(4);l.uIk("x",i.svg.title.x)("y",i.svg.title.y)("dy",t.dy)("font-size",i.svg.title.fontSize)("font-weight",i.svg.title.fontWeight)("fill",i.svg.title.color),l.xp6(1),l.Oqu(t.span)}}function R(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,N,2,7,"tspan",8),l.BQk()),2&n){const t=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",t.svg.title.tspans)}}function V(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=l.oxw(3);l.uIk("font-size",t.svg.units.fontSize)("font-weight",t.svg.units.fontWeight)("fill",t.svg.units.color),l.xp6(1),l.Oqu(t.svg.units.text)}}function q(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"tspan"),l._uU(1),l.qZA()),2&n){const t=e.$implicit,i=l.oxw(4);l.uIk("x",i.svg.subtitle.x)("y",i.svg.subtitle.y)("dy",t.dy)("font-size",i.svg.subtitle.fontSize)("font-weight",i.svg.subtitle.fontWeight)("fill",i.svg.subtitle.color),l.xp6(1),l.Oqu(t.span)}}function te(n,e){if(1&n&&(l.O4$(),l.ynx(0),l.YNc(1,q,2,7,"tspan",8),l.BQk()),2&n){const t=l.oxw(3);l.xp6(1),l.Q6J("ngForOf",t.svg.subtitle.tspans)}}function Ce(n,e){if(1&n&&(l.O4$(),l.TgZ(0,"text",7),l.YNc(1,R,2,1,"ng-container",2),l.YNc(2,V,2,4,"tspan",2),l.YNc(3,te,2,1,"ng-container",2),l.qZA()),2&n){const t=l.oxw(2);l.uIk("x",t.svg.circle.cx)("y",t.svg.circle.cy)("text-anchor",t.svg.title.textAnchor),l.xp6(1),l.Q6J("ngIf",t.options.showTitle),l.xp6(1),l.Q6J("ngIf",t.options.showUnits),l.xp6(1),l.Q6J("ngIf",t.options.showSubtitle)}}function $e(n,e){if(1&n&&(l.O4$(),l._UZ(0,"image",9)),2&n){const t=l.oxw(2);l.uIk("height",t.svg.image.height)("width",t.svg.image.width)("href",t.svg.image.src,null,"xlink")("x",t.svg.image.x)("y",t.svg.image.y)}}function Qe(n,e){if(1&n){const t=l.EpF();l.O4$(),l.TgZ(0,"svg",1),l.NdJ("click",function(r){return l.CHM(t),l.oxw().emitClickEvent(r)}),l.TgZ(1,"defs"),l.YNc(2,o,3,5,"linearGradient",2),l.YNc(3,a,3,5,"radialGradient",2),l.qZA(),l.YNc(4,p,3,2,"ng-container",2),l.YNc(5,_,1,6,"circle",2),l.YNc(6,I,3,2,"ng-container",2),l.YNc(7,Ce,4,6,"text",3),l.YNc(8,$e,1,5,"image",4),l.qZA()}if(2&n){const t=l.oxw();l.uIk("viewBox",t.svg.viewBox)("height",t.svg.height)("width",t.svg.width)("class",t.options.class),l.xp6(2),l.Q6J("ngIf",t.options.outerStrokeGradient),l.xp6(1),l.Q6J("ngIf",t.options.backgroundGradient),l.xp6(1),l.Q6J("ngIf",t.options.showBackground),l.xp6(1),l.Q6J("ngIf",t.options.showInnerStroke),l.xp6(1),l.Q6J("ngIf",0!=+t.options.percent||t.options.showZeroOuterStroke),l.xp6(1),l.Q6J("ngIf",!t.options.showImage&&(t.options.showTitle||t.options.showUnits||t.options.showSubtitle)),l.xp6(1),l.Q6J("ngIf",t.options.showImage)}}class dt{constructor(){this.class="",this.backgroundGradient=!1,this.backgroundColor="transparent",this.backgroundGradientStopColor="transparent",this.backgroundOpacity=1,this.backgroundStroke="transparent",this.backgroundStrokeWidth=0,this.backgroundPadding=5,this.percent=0,this.radius=90,this.space=4,this.toFixed=0,this.maxPercent=1e3,this.renderOnClick=!0,this.units="%",this.unitsFontSize="10",this.unitsFontWeight="normal",this.unitsColor="#444444",this.outerStrokeGradient=!1,this.outerStrokeWidth=8,this.outerStrokeColor="#78C000",this.outerStrokeGradientStopColor="transparent",this.outerStrokeLinecap="round",this.innerStrokeColor="#C7E596",this.innerStrokeWidth=4,this.titleFormat=void 0,this.title="auto",this.titleColor="#444444",this.titleFontSize="20",this.titleFontWeight="normal",this.subtitleFormat=void 0,this.subtitle="progress",this.subtitleColor="#A9A9A9",this.subtitleFontSize="10",this.subtitleFontWeight="normal",this.imageSrc=void 0,this.imageHeight=void 0,this.imageWidth=void 0,this.animation=!0,this.animateTitle=!0,this.animateSubtitle=!1,this.animationDuration=500,this.showTitle=!0,this.showSubtitle=!0,this.showUnits=!0,this.showImage=!1,this.showBackground=!0,this.showInnerStroke=!0,this.clockwise=!0,this.responsive=!1,this.startFromZero=!0,this.showZeroOuterStroke=!0,this.lazy=!1}}let Fe=(()=>{class n{constructor(t,i,r){this.elRef=i,this.document=r,this.onClick=new l.vpe,this.svgElement=null,this.isInViewport=!1,this.onViewportChanged=new l.vpe,this._viewportChangedSubscriber=null,this.options=new dt,this.defaultOptions=new dt,this._lastPercent=0,this._gradientUUID=null,this.render=()=>{this.applyOptions(),this.options.lazy?(null===this.svgElement&&this.draw(this._lastPercent),this.isInViewport&&(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)):(this.options.animation&&this.options.animationDuration>0?this.animate(this._lastPercent,this.options.percent):this.draw(this.options.percent),this._lastPercent=this.options.percent)},this.polarToCartesian=(s,c,d,f)=>{let y=f*Math.PI/180;return{x:s+Math.sin(y)*d,y:c-Math.cos(y)*d}},this.draw=s=>{let c=(s=void 0===s?this.options.percent:Math.abs(s))>100?100:s,d=2*this.options.radius+2*this.options.outerStrokeWidth;this.options.showBackground&&(d+=2*this.options.backgroundStrokeWidth+this.max(0,2*this.options.backgroundPadding));let T,x,f={x:d/2,y:d/2},y_x=f.x,y_y=f.y-this.options.radius,w=this.polarToCartesian(f.x,f.y,this.options.radius,360*(this.options.clockwise?c:100-c)/100);100===c&&(w.x=w.x+(this.options.clockwise?-.01:.01)),[T,x]=c>50?this.options.clockwise?[1,1]:[1,0]:this.options.clockwise?[0,1]:[0,0];let O=this.options.animateTitle?s:this.options.percent,F=O>this.options.maxPercent?`${this.options.maxPercent.toFixed(this.options.toFixed)}+`:O.toFixed(this.options.toFixed),G=this.options.animateSubtitle?s:this.options.percent,Q={x:f.x,y:f.y,textAnchor:"middle",color:this.options.titleColor,fontSize:this.options.titleFontSize,fontWeight:this.options.titleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.titleFormat&&"Function"===this.options.titleFormat.constructor.name){let Be=this.options.titleFormat(O);Be instanceof Array?Q.texts=[...Be]:Q.texts.push(Be.toString())}else"auto"===this.options.title?Q.texts.push(F):this.options.title instanceof Array?Q.texts=[...this.options.title]:Q.texts.push(this.options.title.toString());let pe={x:f.x,y:f.y,textAnchor:"middle",color:this.options.subtitleColor,fontSize:this.options.subtitleFontSize,fontWeight:this.options.subtitleFontWeight,texts:[],tspans:[]};if(void 0!==this.options.subtitleFormat&&"Function"===this.options.subtitleFormat.constructor.name){let Be=this.options.subtitleFormat(G);Be instanceof Array?pe.texts=[...Be]:pe.texts.push(Be.toString())}else this.options.subtitle instanceof Array?pe.texts=[...this.options.subtitle]:pe.texts.push(this.options.subtitle.toString());let Se={text:`${this.options.units}`,fontSize:this.options.unitsFontSize,fontWeight:this.options.unitsFontWeight,color:this.options.unitsColor},ke=0,Ae=1;if(this.options.showTitle&&(ke+=Q.texts.length),this.options.showSubtitle&&(ke+=pe.texts.length),this.options.showTitle)for(let Be of Q.texts)Q.tspans.push({span:Be,dy:this.getRelativeY(Ae,ke)}),Ae++;if(this.options.showSubtitle)for(let Be of pe.texts)pe.tspans.push({span:Be,dy:this.getRelativeY(Ae,ke)}),Ae++;null===this._gradientUUID&&(this._gradientUUID=this.uuid()),this.svg={viewBox:`0 0 ${d} ${d}`,width:this.options.responsive?"100%":d,height:this.options.responsive?"100%":d,backgroundCircle:{cx:f.x,cy:f.y,r:this.options.radius+this.options.outerStrokeWidth/2+this.options.backgroundPadding,fill:this.options.backgroundColor,fillOpacity:this.options.backgroundOpacity,stroke:this.options.backgroundStroke,strokeWidth:this.options.backgroundStrokeWidth},path:{d:`M ${y_x} ${y_y}\n        A ${this.options.radius} ${this.options.radius} 0 ${T} ${x} ${w.x} ${w.y}`,stroke:this.options.outerStrokeColor,strokeWidth:this.options.outerStrokeWidth,strokeLinecap:this.options.outerStrokeLinecap,fill:"none"},circle:{cx:f.x,cy:f.y,r:this.options.radius-this.options.space-this.options.outerStrokeWidth/2-this.options.innerStrokeWidth/2,fill:"none",stroke:this.options.innerStrokeColor,strokeWidth:this.options.innerStrokeWidth},title:Q,units:Se,subtitle:pe,image:{x:f.x-this.options.imageWidth/2,y:f.y-this.options.imageHeight/2,src:this.options.imageSrc,width:this.options.imageWidth,height:this.options.imageHeight},outerLinearGradient:{id:"outer-linear-"+this._gradientUUID,colorStop1:this.options.outerStrokeColor,colorStop2:"transparent"===this.options.outerStrokeGradientStopColor?"#FFF":this.options.outerStrokeGradientStopColor},radialGradient:{id:"radial-"+this._gradientUUID,colorStop1:this.options.backgroundColor,colorStop2:"transparent"===this.options.backgroundGradientStopColor?"#FFF":this.options.backgroundGradientStopColor}}},this.getAnimationParameters=(s,c)=>{let f,y,w,T=this.options.startFromZero||s<0?0:s,x=c<0?0:this.min(c,this.options.maxPercent),O=Math.abs(Math.round(x-T));return O>=100?(f=100,y=this.options.animateTitle||this.options.animateSubtitle?Math.round(O/f):1):(f=O,y=1),w=Math.round(this.options.animationDuration/f),w<10&&(w=10,f=this.options.animationDuration/w,y=!this.options.animateTitle&&!this.options.animateSubtitle&&O>100?Math.round(100/f):Math.round(O/f)),y<1&&(y=1),{times:f,step:y,interval:w}},this.animate=(s,c)=>{this._timerSubscription&&!this._timerSubscription.closed&&this._timerSubscription.unsubscribe();let d=this.options.startFromZero?0:s,f=c,{step:y,interval:w}=this.getAnimationParameters(d,f),T=d;this._timerSubscription=d<f?bp(0,w).subscribe(()=>{T+=y,T<=f?!this.options.animateTitle&&!this.options.animateSubtitle&&T>=100?(this.draw(f),this._timerSubscription.unsubscribe()):this.draw(T):(this.draw(f),this._timerSubscription.unsubscribe())}):bp(0,w).subscribe(()=>{T-=y,T>=f?!this.options.animateTitle&&!this.options.animateSubtitle&&f>=100?(this.draw(f),this._timerSubscription.unsubscribe()):this.draw(T):(this.draw(f),this._timerSubscription.unsubscribe())})},this.emitClickEvent=s=>{this.options.renderOnClick&&this.animate(0,this.options.percent),this.onClick.emit(s)},this.applyOptions=()=>{for(let s of Object.keys(this.options))this.hasOwnProperty(s)&&void 0!==this[s]?this.options[s]=this[s]:this.templateOptions&&void 0!==this.templateOptions[s]&&(this.options[s]=this.templateOptions[s]);this.options.radius=Math.abs(+this.options.radius),this.options.space=+this.options.space,this.options.percent=+this.options.percent>0?+this.options.percent:0,this.options.maxPercent=Math.abs(+this.options.maxPercent),this.options.animationDuration=Math.abs(this.options.animationDuration),this.options.outerStrokeWidth=Math.abs(+this.options.outerStrokeWidth),this.options.innerStrokeWidth=Math.abs(+this.options.innerStrokeWidth),this.options.backgroundPadding=+this.options.backgroundPadding},this.getRelativeY=(s,c)=>(1*(s-c/2)-.18).toFixed(2)+"em",this.min=(s,c)=>s<c?s:c,this.max=(s,c)=>s>c?s:c,this.uuid=()=>{var s=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(d){var f=(s+16*Math.random())%16|0;return s=Math.floor(s/16),("x"==d?f:3&f|8).toString(16)})},this.findSvgElement=function(){if(null===this.svgElement){let s=this.elRef.nativeElement.getElementsByTagName("svg");s.length>0&&(this.svgElement=s[0])}},this.checkViewport=()=>{this.findSvgElement();let s=this.isInViewport;this.isInViewport=this.isElementInViewport(this.svgElement),s!==this.isInViewport&&this.onViewportChanged.emit({oldValue:s,newValue:this.isInViewport})},this.onScroll=s=>{this.checkViewport()},this.loadEventsForLazyMode=()=>{if(this.options.lazy){this.document.addEventListener("scroll",this.onScroll,!0),this.window.addEventListener("resize",this.onScroll,!0),null===this._viewportChangedSubscriber&&(this._viewportChangedSubscriber=this.onViewportChanged.subscribe(({newValue:d})=>{d&&this.render()}));let s=bp(0,50).subscribe(()=>{null===this.svgElement?this.checkViewport():s.unsubscribe()})}},this.unloadEventsForLazyMode=()=>{this.document.removeEventListener("scroll",this.onScroll,!0),this.window.removeEventListener("resize",this.onScroll,!0),null!==this._viewportChangedSubscriber&&(this._viewportChangedSubscriber.unsubscribe(),this._viewportChangedSubscriber=null)},this.document=r,this.window=this.document.defaultView,Object.assign(this.options,t),Object.assign(this.defaultOptions,t)}isDrawing(){return this._timerSubscription&&!this._timerSubscription.closed}isElementInViewport(t){if(null==t)return!1;let s,i=t.getBoundingClientRect(),r=t.parentNode;do{if(s=r.getBoundingClientRect(),i.top>=s.bottom||i.bottom<=s.top||i.left>=s.right||i.right<=s.left)return!1;r=r.parentNode}while(r!=this.document.body);return!(i.top>=(this.window.innerHeight||this.document.documentElement.clientHeight)||i.bottom<=0||i.left>=(this.window.innerWidth||this.document.documentElement.clientWidth)||i.right<=0)}ngOnInit(){this.loadEventsForLazyMode()}ngOnDestroy(){this.unloadEventsForLazyMode()}ngOnChanges(t){this.render(),"lazy"in t&&(t.lazy.currentValue?this.loadEventsForLazyMode():this.unloadEventsForLazyMode())}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(dt),l.Y36(l.SBq),l.Y36(ce))},n.\u0275cmp=l.Xpm({type:n,selectors:[["circle-progress"]],inputs:{name:"name",class:"class",backgroundGradient:"backgroundGradient",backgroundColor:"backgroundColor",backgroundGradientStopColor:"backgroundGradientStopColor",backgroundOpacity:"backgroundOpacity",backgroundStroke:"backgroundStroke",backgroundStrokeWidth:"backgroundStrokeWidth",backgroundPadding:"backgroundPadding",radius:"radius",space:"space",percent:"percent",toFixed:"toFixed",maxPercent:"maxPercent",renderOnClick:"renderOnClick",units:"units",unitsFontSize:"unitsFontSize",unitsFontWeight:"unitsFontWeight",unitsColor:"unitsColor",outerStrokeGradient:"outerStrokeGradient",outerStrokeWidth:"outerStrokeWidth",outerStrokeColor:"outerStrokeColor",outerStrokeGradientStopColor:"outerStrokeGradientStopColor",outerStrokeLinecap:"outerStrokeLinecap",innerStrokeColor:"innerStrokeColor",innerStrokeWidth:"innerStrokeWidth",titleFormat:"titleFormat",title:"title",titleColor:"titleColor",titleFontSize:"titleFontSize",titleFontWeight:"titleFontWeight",subtitleFormat:"subtitleFormat",subtitle:"subtitle",subtitleColor:"subtitleColor",subtitleFontSize:"subtitleFontSize",subtitleFontWeight:"subtitleFontWeight",imageSrc:"imageSrc",imageHeight:"imageHeight",imageWidth:"imageWidth",animation:"animation",animateTitle:"animateTitle",animateSubtitle:"animateSubtitle",animationDuration:"animationDuration",showTitle:"showTitle",showSubtitle:"showSubtitle",showUnits:"showUnits",showImage:"showImage",showBackground:"showBackground",showInnerStroke:"showInnerStroke",clockwise:"clockwise",responsive:"responsive",startFromZero:"startFromZero",showZeroOuterStroke:"showZeroOuterStroke",lazy:"lazy",templateOptions:["options","templateOptions"]},outputs:{onClick:"onClick"},features:[l.TTD],decls:1,vars:1,consts:[["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","preserveAspectRatio","xMidYMid meet",3,"click"],[4,"ngIf"],["alignment-baseline","baseline",4,"ngIf"],["preserveAspectRatio","none",4,"ngIf"],["offset","5%"],["offset","95%"],["alignment-baseline","baseline"],[4,"ngFor","ngForOf"],["preserveAspectRatio","none"]],template:function(t,i){1&t&&l.YNc(0,Qe,9,11,"svg",0),2&t&&l.Q6J("ngIf",i.svg)},directives:[dn,Cn],encapsulation:2}),n})(),Dt=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[{provide:dt,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni]]}),n})();function nn(n,e){if(1&n&&(l.TgZ(0,"div",9)(1,"div",2)(2,"h2",10),l._uU(3),l.qZA(),l.TgZ(4,"div",1),l._UZ(5,"circle-progress",11),l.qZA()()()),2&n){const t=e.$implicit;l.xp6(3),l.Oqu(t.nombre_skill),l.xp6(2),l.Q6J("percent",t.porcentaje_skill)("radius",100)("outerStrokeWidth",16)("innerStrokeWidth",8)("outerStrokeColor","#6C63FF")("innerStrokeColor","#8ba9bc")("animation",!0)("animationDuration",300)}}let xn=(()=>{class n{constructor(t){this.skService=t,this.skill=[]}ngOnInit(){this.skService.obtenerDatosSkill().subscribe(t=>{this.skill=t,console.log("DataSkill ",t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(K_))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-skills"]],features:[l._Bn([K_])],decls:12,vars:1,consts:[["id","services",1,"services-mf","pt-5","route"],[1,"container"],[1,"service-box"],[1,"row"],[1,"col-sm-12"],[1,"title-box","text-center"],[1,"line-mf"],[1,"row","mt-3"],["class"," col-md-4  ",4,"ngFor","ngForOf"],[1,"col-md-4"],[1,"texto"],[3,"percent","radius","outerStrokeWidth","innerStrokeWidth","outerStrokeColor","innerStrokeColor","animation","animationDuration"]],template:function(t,i){1&t&&(l.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h1"),l._uU(7," Skills "),l.qZA(),l._UZ(8,"app-edit-skill-button")(9,"div",6),l.qZA()()()(),l.TgZ(10,"div",7),l.YNc(11,nn,6,9,"div",8),l.qZA()()()),2&t&&(l.xp6(11),l.Q6J("ngForOf",i.skill))},directives:[x2,Cn,Fe],styles:[""]}),n})(),io=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-projects"]],decls:0,vars:0,template:function(t,i){},styles:[""]}),n})(),Cd=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-footer"]],decls:3,vars:0,consts:[[1,"row","container-fluid"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"p"),l._uU(2,"Perrotta Vicente | Argentina Programa"),l.qZA()())},styles:[".container-fluid[_ngcontent-%COMP%]{background-color:#6c63ff;border-radius:2rem;height:20px;width:100%;align-items:center;text-align:center;padding:auto}"]}),n})(),Y_=(()=>{class n{constructor(t){this.http=t,this.apiHerokuUrl=ad_apiUrl,this.cargada=!1,this.url="https://floating-chamber-24100.herokuapp.com",console.log("El servicio est\xe1 corriendo")}obtenerDatosPersona(t){return this.http.get(this.url+"/"+t)}getPersonas(){return this.http.get(`${this.apiHerokuUrl}/personas/all`)}editarDatosPersona(t){return this.http.put(this.url,t)}obtenerUnaPersona(){return this.http.get(this.apiHerokuUrl+"persona/1")}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ld))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function pb(n,e){if(1&n&&(l.TgZ(0,"p"),l._uU(1,"\nDatos de Autor para Argentina Programa grupo 141:"),l._UZ(2,"br"),l._uU(3),l._UZ(4,"br"),l._uU(5),l._UZ(6,"br"),l._uU(7),l._UZ(8,"br"),l.TgZ(9,"a",1),l._uU(10,"Contactar por email"),l.qZA()()),2&n){const t=l.oxw();l.xp6(3),l.hij("\nNombre: ",t.persona.nombre,""),l.xp6(2),l.hij("\nApellido: ",t.persona.apellido,""),l.xp6(2),l.hij("\nDocumento: ",t.persona.dni,""),l.xp6(2),l.MGl("href","mailto:",t.email,"",l.LSH)}}function gb(n,e){1&n&&(l.TgZ(0,"p")(1,"span",2),l._uU(2,"...Esperando datos del servidor"),l.qZA()())}let mb=(()=>{class n{constructor(t){this.service=t,this.email="perrottavicente@gmail.com"}ngOnInit(){this.service.obtenerUnaPersona().subscribe(t=>{this.persona=t,console.log("Data ",t)})}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(Y_))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-contact"]],features:[l._Bn([Y_])],decls:2,vars:2,consts:[[4,"ngIf"],[3,"href"],[2,"border","4px solid red","color","red","font-size","large"]],template:function(t,i){1&t&&(l.YNc(0,pb,11,4,"p",0),l.YNc(1,gb,3,0,"p",0)),2&t&&(l.Q6J("ngIf",i.persona),l.xp6(1),l.Q6J("ngIf",!i.persona))},directives:[dn],styles:[""]}),n})();function _b(n,e){1&n&&(l.TgZ(0,"p"),l._uU(1,"usuario Admin Activo"),l.qZA())}function yb(n,e){1&n&&(l.TgZ(0,"p"),l._uU(1,"usuario NOAdmin"),l.qZA())}let vb=(()=>{class n{constructor(t,i,r){this.tokenService=t,this.authService=i,this.router=r,this.title="Perrotta Vicente",this.subtitle=" Full Stack Developer",this.exp="Experiencia",this.edu="Educaci\xf3n",this.hys="Hard & Soft Skills",this.proy="Proyectos",this.isAdmin=!1}ngOnInit(){this.roles=this.tokenService.getAuthorities(),this.roles.forEach(t=>{"ROLE_ADMIN"===t?(this.isAdmin=!0,console.log("El usuario es admin")):console.log("El usuario NO ES admin"),this.router.navigate(["portfolio"])})}logout(){this.tokenService.logOut(),window.location.reload(),this.router.navigate(["login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(db),l.Y36(to),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-portfolio"]],decls:24,vars:2,consts:[["role","main",1,"container-fluid"],[1,"content"],[1,"container-fluid","margin"],[1,"row"],[1,"col-md-12"],[1,"container"],[1,"btn-danger",3,"click"],[4,"ngIf"]],template:function(t,i){1&t&&(l.TgZ(0,"div",0)(1,"div",1),l._UZ(2,"app-header"),l.qZA(),l.TgZ(3,"div",1),l._UZ(4,"app-acerca"),l.qZA(),l.TgZ(5,"div",2)(6,"div",3)(7,"div",4)(8,"div"),l._UZ(9,"app-experience"),l.qZA(),l._UZ(10,"app-education"),l._uU(11," \xa0 "),l._UZ(12,"app-skills"),l._uU(13," \xa0 "),l._UZ(14,"app-projects"),l._uU(15," \xa0 "),l._UZ(16,"app-footer")(17,"app-contact"),l.qZA()()(),l.TgZ(18,"div",5),l._uU(19," hola ac\xe1 un bot\xf3n para logout "),l.TgZ(20,"button",6),l.NdJ("click",function(){return i.logout()}),l._uU(21,"Logout"),l.qZA(),l.YNc(22,_b,2,0,"p",7),l.YNc(23,yb,2,0,"p",7),l.qZA()()),2&t&&(l.xp6(22),l.Q6J("ngIf",i.isAdmin),l.xp6(1),l.Q6J("ngIf",!i.isAdmin))},directives:[Z_,GM,T2,S2,xn,io,Cd,mb,dn],styles:[".content2[_ngcontent-%COMP%]{display:flex;margin:40px auto 12px;padding:0 16px;height:auto;flex-direction:column;align-items:center}"]}),n})();class bb{constructor(e,t){this.nombreUsuario=e,this.password=t}}function wb(n,e){1&n&&(l.TgZ(0,"p",22),l._uU(1,"login component Por favor, ingresar usuario y clave"),l.qZA())}function S5(n,e){1&n&&(l.TgZ(0,"p",23),l._uU(1,"Nombre de usuario incorrecto, intente nuevamente. "),l.qZA())}function A5(n,e){1&n&&(l.TgZ(0,"button",24),l._uU(1,"Login"),l.qZA())}function x5(n,e){if(1&n){const t=l.EpF();l.TgZ(0,"button",25),l.NdJ("click",function(){return l.CHM(t),l.oxw().logout()}),l._uU(1,"Logout"),l.qZA()}}const M5=[{path:"login",component:(()=>{class n{constructor(t,i,r){this.authService=t,this.tokenService=i,this.router=r,this.isLogged=!1,this.isLogginFail=!1,this.roles=[]}ngOnInit(){this.tokenService.getToken()&&(this.isLogged=!0,this.isLogginFail=!1,this.roles=this.tokenService.getAuthorities())}onLogin(){this.loginUsuario=new bb(this.nombreUsuario,this.password),this.authService.login(this.loginUsuario).subscribe(t=>{this.isLogged=!0,this.isLogginFail=!1,this.tokenService.setToken(t.token),this.tokenService.setUserName(t.nombreUsuario),this.tokenService.setAuthorities(t.authorities),this.roles=t.authorities,this.router.navigate(["portfolio"])},t=>{this.isLogged=!1,this.isLogginFail=!0,this.errMsj=t.error.mensaje,console.log(this.errMsj)})}logout(){this.tokenService.logOut(),window.location.reload(),this.router.navigate(["login"])}}return n.\u0275fac=function(t){return new(t||n)(l.Y36(to),l.Y36(db),l.Y36(zn))},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-login"]],decls:26,vars:6,consts:[[1,"vh-100","gradient-custom"],[1,"container","py-5","h-100"],[1,"row","d-flex","justify-content-center","align-items-center","h-100"],[1,"col-12","col-md-8","col-lg-6","col-xl-5"],[1,"backTrasnp","card","bg-dark","text-white",2,"border-radius","1rem"],[1,"d-flex","justify-content-center"],[1,"brand_logo_container"],["src","https://cdn-icons-png.flaticon.com/512/1946/1946429.png","alt","Logo",1,"brand_logo"],[1,"card-body","p-5","text-center"],[1,"mb-md-5","mt-md-4","pb-5"],[1,"pt-5","fw-bold","mb-3","text-uppercase"],["class","text-white-50 mb-5",4,"ngIf"],["class","text-warning mb-5",4,"ngIf"],["novalidate","",3,"ngSubmit"],["f","ngForm"],[1,"form-outline","form-white","mb-4"],["type","email","id","nombreUsuario","name","nombreUsuario","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","nombreUsuario",1,"form-label"],["type","password","id","password","name","password","required","",1,"form-control","form-control-lg",3,"ngModel","ngModelChange"],["for","password",1,"form-label"],["class","btn btn-outline-light btn-lg px-5","type","submit",4,"ngIf"],["class","btn btn-danger btn-lg px-5",3,"click",4,"ngIf"],[1,"text-white-50","mb-5"],[1,"text-warning","mb-5"],["type","submit",1,"btn","btn-outline-light","btn-lg","px-5"],[1,"btn","btn-danger","btn-lg","px-5",3,"click"]],template:function(t,i){1&t&&(l.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6),l._UZ(7,"img",7),l.qZA()(),l.TgZ(8,"div",8)(9,"div",9)(10,"h2",10),l._uU(11,"Login"),l.qZA(),l.YNc(12,wb,2,0,"p",11),l.YNc(13,S5,2,0,"p",12),l.TgZ(14,"form",13,14),l.NdJ("ngSubmit",function(){return i.onLogin()}),l.TgZ(16,"div",15)(17,"input",16),l.NdJ("ngModelChange",function(s){return i.nombreUsuario=s}),l.qZA(),l.TgZ(18,"label",17),l._uU(19,"Usuario"),l.qZA()(),l.TgZ(20,"div",15)(21,"input",18),l.NdJ("ngModelChange",function(s){return i.password=s}),l.qZA(),l.TgZ(22,"label",19),l._uU(23,"Password"),l.qZA()(),l.YNc(24,A5,2,0,"button",20),l.YNc(25,x5,2,0,"button",21),l.qZA()()()()()()()()),2&t&&(l.xp6(12),l.Q6J("ngIf",!i.isLogginFail),l.xp6(1),l.Q6J("ngIf",i.isLogginFail),l.xp6(4),l.Q6J("ngModel",i.nombreUsuario),l.xp6(4),l.Q6J("ngModel",i.password),l.xp6(3),l.Q6J("ngIf",!i.isLogged),l.xp6(1),l.Q6J("ngIf",i.isLogged))},directives:[dn,qh,cd,zh,fl,Pp,Dp,dd],styles:[".container[_ngcontent-%COMP%]{background:rgb(2,0,36);background:linear-gradient(to top,#7028e4 0%,#e5b2ca 100%)}.backTrasnp[_ngcontent-%COMP%]{background-color:#000!important}.brand_logo_container[_ngcontent-%COMP%]{position:absolute;height:150px;width:150px;top:-80px;border-radius:50%;background:#ffffff;padding:10px;text-align:center}.brand_logo[_ngcontent-%COMP%]{height:130px;width:130px;border-radius:50%;border:2px solid white}"]}),n})()},{path:"portfolio",component:vb},{path:"modifica",component:HM},{path:"modifica-skill",component:VT},{path:"modifica-experiencia",component:BT},{path:"",redirectTo:"login",pathMatch:"full"},{path:" ",component:Fh},{path:"**",component:Fh}];let N5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[TE.forRoot(M5)],TE]}),n})(),O5=(()=>{class n{constructor(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=l.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){1&t&&l._UZ(0,"router-outlet")},directives:[ap],styles:[".content2[_ngcontent-%COMP%]{display:flex;margin:40px auto 12px;padding:0 16px;height:auto;flex-direction:column;align-items:center}"]}),n})();class M2{}const Td="*";function N2(n,e=null){return{type:2,steps:n,options:e}}function jT(n){return{type:6,styles:n,offset:null}}function O2(n){Promise.resolve(null).then(n)}class Eb{constructor(e=0,t=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=e+t}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){O2(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(e=>e()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(e){this._position=this.totalTime?e*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class k2{constructor(e){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=e;let t=0,i=0,r=0;const s=this.players.length;0==s?O2(()=>this._onFinish()):this.players.forEach(c=>{c.onDone(()=>{++t==s&&this._onFinish()}),c.onDestroy(()=>{++i==s&&this._onDestroy()}),c.onStart(()=>{++r==s&&this._onStart()})}),this.totalTime=this.players.reduce((c,d)=>Math.max(c,d.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this.players.forEach(e=>e.init())}onStart(e){this._onStartFns.push(e)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(e=>e()),this._onStartFns=[])}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(e=>e.play())}pause(){this.players.forEach(e=>e.pause())}restart(){this.players.forEach(e=>e.restart())}finish(){this._onFinish(),this.players.forEach(e=>e.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(e=>e.destroy()),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}reset(){this.players.forEach(e=>e.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(e){const t=e*this.totalTime;this.players.forEach(i=>{const r=i.totalTime?Math.min(1,t/i.totalTime):1;i.setPosition(r)})}getPosition(){const e=this.players.reduce((t,i)=>null===t||i.totalTime>t.totalTime?i:t,null);return null!=e?e.getPosition():0}beforeDestroy(){this.players.forEach(e=>{e.beforeDestroy&&e.beforeDestroy()})}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}const hn=!1;function R2(n){return new l.vHH(3e3,hn)}function y4(){return"undefined"!=typeof window&&void 0!==window.document}function zM(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function mf(n){switch(n.length){case 0:return new Eb;case 1:return n[0];default:return new k2(n)}}function P2(n,e,t,i,r={},s={}){const c=[],d=[];let f=-1,y=null;if(i.forEach(w=>{const T=w.offset,x=T==f,O=x&&y||{};Object.keys(w).forEach(F=>{let G=F,Q=w[F];if("offset"!==F)switch(G=e.normalizePropertyName(G,c),Q){case"!":Q=r[F];break;case Td:Q=s[F];break;default:Q=e.normalizeStyleValue(F,G,Q,c)}O[G]=Q}),x||d.push(O),y=O,f=T}),c.length)throw function a4(n){return new l.vHH(3502,hn)}();return d}function qM(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&ZM(t,"start",n)));break;case"done":n.onDone(()=>i(t&&ZM(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&ZM(t,"destroy",n)))}}function ZM(n,e,t){const i=t.totalTime,s=KM(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,null==i?n.totalTime:i,!!t.disabled),c=n._data;return null!=c&&(s._data=c),s}function KM(n,e,t,i,r="",s=0,c){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!c}}function Ra(n,e,t){let i;return n instanceof Map?(i=n.get(e),i||n.set(e,i=t)):(i=n[e],i||(i=n[e]=t)),i}function F2(n){const e=n.indexOf(":");return[n.substring(1,e),n.substr(e+1)]}let YM=(n,e)=>!1,L2=(n,e,t)=>[],B2=null;function QM(n){const e=n.parentNode||n.host;return e===B2?null:e}(zM()||"undefined"!=typeof Element)&&(y4()?(B2=(()=>document.documentElement)(),YM=(n,e)=>{for(;e;){if(e===n)return!0;e=QM(e)}return!1}):YM=(n,e)=>n.contains(e),L2=(n,e,t)=>{if(t)return Array.from(n.querySelectorAll(e));const i=n.querySelector(e);return i?[i]:[]});let rg=null,U2=!1;function V2(n){rg||(rg=function b4(){return"undefined"!=typeof document?document.body:null}()||{},U2=!!rg.style&&"WebkitAppearance"in rg.style);let e=!0;return rg.style&&!function v4(n){return"ebkit"==n.substring(1,6)}(n)&&(e=n in rg.style,!e&&U2&&(e="Webkit"+n.charAt(0).toUpperCase()+n.substr(1)in rg.style)),e}const j2=YM,H2=L2;let G2=(()=>{class n{validateStyleProperty(t){return V2(t)}matchesElement(t,i){return!1}containsElement(t,i){return j2(t,i)}getParentElement(t){return QM(t)}query(t,i,r){return H2(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,c,d=[],f){return new Eb(r,s)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})(),JM=(()=>{class n{}return n.NOOP=new G2,n})();const XM="ng-enter",GT="ng-leave",$T="ng-trigger",WT=".ng-trigger",W2="ng-animating",eN=".ng-animating";function sg(n){if("number"==typeof n)return n;const e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:tN(parseFloat(e[1]),e[2])}function tN(n,e){return"s"===e?1e3*n:n}function zT(n,e,t){return n.hasOwnProperty("duration")?n:function C4(n,e,t){let r,s=0,c="";if("string"==typeof n){const d=n.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===d)return e.push(R2()),{duration:0,delay:0,easing:""};r=tN(parseFloat(d[1]),d[2]);const f=d[3];null!=f&&(s=tN(parseFloat(f),d[4]));const y=d[5];y&&(c=y)}else r=n;if(!t){let d=!1,f=e.length;r<0&&(e.push(function B5(){return new l.vHH(3100,hn)}()),d=!0),s<0&&(e.push(function U5(){return new l.vHH(3101,hn)}()),d=!0),d&&e.splice(f,0,R2())}return{duration:r,delay:s,easing:c}}(n,e,t)}function Q_(n,e={}){return Object.keys(n).forEach(t=>{e[t]=n[t]}),e}function _f(n,e,t={}){if(e)for(let i in n)t[i]=n[i];else Q_(n,t);return t}function q2(n,e,t){return t?e+":"+t+";":""}function Z2(n){let e="";for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e+=q2(0,i,n.style.getPropertyValue(i))}for(const t in n.style)n.style.hasOwnProperty(t)&&!t.startsWith("_")&&(e+=q2(0,I4(t),n.style[t]));n.setAttribute("style",e)}function fu(n,e,t){n.style&&(Object.keys(e).forEach(i=>{const r=iN(i);t&&!t.hasOwnProperty(i)&&(t[i]=n.style[r]),n.style[r]=e[i]}),zM()&&Z2(n))}function og(n,e){n.style&&(Object.keys(e).forEach(t=>{const i=iN(t);n.style[i]=""}),zM()&&Z2(n))}function Cb(n){return Array.isArray(n)?1==n.length?n[0]:N2(n):n}const nN=new RegExp("{{\\s*(.+?)\\s*}}","g");function K2(n){let e=[];if("string"==typeof n){let t;for(;t=nN.exec(n);)e.push(t[1]);nN.lastIndex=0}return e}function qT(n,e,t){const i=n.toString(),r=i.replace(nN,(s,c)=>{let d=e[c];return e.hasOwnProperty(c)||(t.push(function j5(n){return new l.vHH(3003,hn)}()),d=""),d.toString()});return r==i?n:r}function ZT(n){const e=[];let t=n.next();for(;!t.done;)e.push(t.value),t=n.next();return e}const D4=/-+([a-z0-9])/g;function iN(n){return n.replace(D4,(...e)=>e[1].toUpperCase())}function I4(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function Pa(n,e,t){switch(e.type){case 7:return n.visitTrigger(e,t);case 0:return n.visitState(e,t);case 1:return n.visitTransition(e,t);case 2:return n.visitSequence(e,t);case 3:return n.visitGroup(e,t);case 4:return n.visitAnimate(e,t);case 5:return n.visitKeyframes(e,t);case 6:return n.visitStyle(e,t);case 8:return n.visitReference(e,t);case 9:return n.visitAnimateChild(e,t);case 10:return n.visitAnimateRef(e,t);case 11:return n.visitQuery(e,t);case 12:return n.visitStagger(e,t);default:throw function H5(n){return new l.vHH(3004,hn)}()}}function Y2(n,e){return window.getComputedStyle(n)[e]}function O4(n,e){const t=[];return"string"==typeof n?n.split(/\s*,\s*/).forEach(i=>function k4(n,e,t){if(":"==n[0]){const f=function R4(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(function n4(n){return new l.vHH(3016,hn)}()),"* => *"}}(n,t);if("function"==typeof f)return void e.push(f);n=f}const i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return t.push(function t4(n){return new l.vHH(3015,hn)}()),e;const r=i[1],s=i[2],c=i[3];e.push(Q2(r,c));"<"==s[0]&&!("*"==r&&"*"==c)&&e.push(Q2(c,r))}(i,t,e)):t.push(n),t}const JT=new Set(["true","1"]),XT=new Set(["false","0"]);function Q2(n,e){const t=JT.has(n)||XT.has(n),i=JT.has(e)||XT.has(e);return(r,s)=>{let c="*"==n||n==r,d="*"==e||e==s;return!c&&t&&"boolean"==typeof r&&(c=r?JT.has(n):XT.has(n)),!d&&i&&"boolean"==typeof s&&(d=s?JT.has(e):XT.has(e)),c&&d}}const P4=new RegExp("s*:selfs*,?","g");function rN(n,e,t,i){return new F4(n).build(e,t,i)}class F4{constructor(e){this._driver=e}build(e,t,i){const r=new U4(t);this._resetContextStyleTimingState(r);const s=Pa(this,Cb(e),r);return r.unsupportedCSSPropertiesFound.size&&r.unsupportedCSSPropertiesFound.keys(),s}_resetContextStyleTimingState(e){e.currentQuerySelector="",e.collectedStyles={},e.collectedStyles[""]={},e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0;const s=[],c=[];return"@"==e.name.charAt(0)&&t.errors.push(function $5(){return new l.vHH(3006,hn)}()),e.definitions.forEach(d=>{if(this._resetContextStyleTimingState(t),0==d.type){const f=d,y=f.name;y.toString().split(/\s*,\s*/).forEach(w=>{f.name=w,s.push(this.visitState(f,t))}),f.name=y}else if(1==d.type){const f=this.visitTransition(d,t);i+=f.queryCount,r+=f.depCount,c.push(f)}else t.errors.push(function W5(){return new l.vHH(3007,hn)}())}),{type:7,name:e.name,states:s,transitions:c,queryCount:i,depCount:r,options:null}}visitState(e,t){const i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){const s=new Set,c=r||{};i.styles.forEach(d=>{if(eD(d)){const f=d;Object.keys(f).forEach(y=>{K2(f[y]).forEach(w=>{c.hasOwnProperty(w)||s.add(w)})})}}),s.size&&(ZT(s.values()),t.errors.push(function z5(n,e){return new l.vHH(3008,hn)}()))}return{type:0,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;const i=Pa(this,Cb(e.animation),t);return{type:1,matchers:O4(e.expr,t.errors),animation:i,queryCount:t.queryCount,depCount:t.depCount,options:ag(e.options)}}visitSequence(e,t){return{type:2,steps:e.steps.map(i=>Pa(this,i,t)),options:ag(e.options)}}visitGroup(e,t){const i=t.currentTime;let r=0;const s=e.steps.map(c=>{t.currentTime=i;const d=Pa(this,c,t);return r=Math.max(r,t.currentTime),d});return t.currentTime=r,{type:3,steps:s,options:ag(e.options)}}visitAnimate(e,t){const i=function j4(n,e){if(n.hasOwnProperty("duration"))return n;if("number"==typeof n)return sN(zT(n,e).duration,0,"");const t=n;if(t.split(/\s+/).some(s=>"{"==s.charAt(0)&&"{"==s.charAt(1))){const s=sN(0,0,"");return s.dynamic=!0,s.strValue=t,s}const r=zT(t,e);return sN(r.duration,r.delay,r.easing)}(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:jT({});if(5==s.type)r=this.visitKeyframes(s,t);else{let c=e.styles,d=!1;if(!c){d=!0;const y={};i.easing&&(y.easing=i.easing),c=jT(y)}t.currentTime+=i.duration+i.delay;const f=this.visitStyle(c,t);f.isEmptyStep=d,r=f}return t.currentAnimateTimings=null,{type:4,timings:i,style:r,options:null}}visitStyle(e,t){const i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){const i=[];Array.isArray(e.styles)?e.styles.forEach(c=>{"string"==typeof c?c==Td?i.push(c):t.errors.push(function q5(n){return new l.vHH(3002,hn)}()):i.push(c)}):i.push(e.styles);let r=!1,s=null;return i.forEach(c=>{if(eD(c)){const d=c,f=d.easing;if(f&&(s=f,delete d.easing),!r)for(let y in d)if(d[y].toString().indexOf("{{")>=0){r=!0;break}}}),{type:6,styles:i,easing:s,offset:e.offset,containsDynamicStyles:r,options:null}}_validateStyleAst(e,t){const i=t.currentAnimateTimings;let r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(c=>{"string"!=typeof c&&Object.keys(c).forEach(d=>{if(!this._driver.validateStyleProperty(d))return delete c[d],void t.unsupportedCSSPropertiesFound.add(d);const f=t.collectedStyles[t.currentQuerySelector],y=f[d];let w=!0;y&&(s!=r&&s>=y.startTime&&r<=y.endTime&&(t.errors.push(function Z5(n,e,t,i,r){return new l.vHH(3010,hn)}()),w=!1),s=y.startTime),w&&(f[d]={startTime:s,endTime:r}),t.options&&function T4(n,e,t){const i=e.params||{},r=K2(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(function V5(n){return new l.vHH(3001,hn)}())})}(c[d],t.options,t.errors)})})}visitKeyframes(e,t){const i={type:5,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(function K5(){return new l.vHH(3011,hn)}()),i;let s=0;const c=[];let d=!1,f=!1,y=0;const w=e.steps.map(pe=>{const Se=this._makeStyleAst(pe,t);let ke=null!=Se.offset?Se.offset:function V4(n){if("string"==typeof n)return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(eD(t)&&t.hasOwnProperty("offset")){const i=t;e=parseFloat(i.offset),delete i.offset}});else if(eD(n)&&n.hasOwnProperty("offset")){const t=n;e=parseFloat(t.offset),delete t.offset}return e}(Se.styles),Ae=0;return null!=ke&&(s++,Ae=Se.offset=ke),f=f||Ae<0||Ae>1,d=d||Ae<y,y=Ae,c.push(Ae),Se});f&&t.errors.push(function Y5(){return new l.vHH(3012,hn)}()),d&&t.errors.push(function Q5(){return new l.vHH(3200,hn)}());const T=e.steps.length;let x=0;s>0&&s<T?t.errors.push(function J5(){return new l.vHH(3202,hn)}()):0==s&&(x=1/(T-1));const O=T-1,F=t.currentTime,G=t.currentAnimateTimings,Q=G.duration;return w.forEach((pe,Se)=>{const ke=x>0?Se==O?1:x*Se:c[Se],Ae=ke*Q;t.currentTime=F+G.delay+Ae,G.duration=Ae,this._validateStyleAst(pe,t),pe.offset=ke,i.styles.push(pe)}),i}visitReference(e,t){return{type:8,animation:Pa(this,Cb(e.animation),t),options:ag(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:9,options:ag(e.options)}}visitAnimateRef(e,t){return{type:10,animation:this.visitReference(e.animation,t),options:ag(e.options)}}visitQuery(e,t){const i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;const[s,c]=function L4(n){const e=!!n.split(/\s*,\s*/).find(t=>":self"==t);return e&&(n=n.replace(P4,"")),n=n.replace(/@\*/g,WT).replace(/@\w+/g,t=>WT+"-"+t.substr(1)).replace(/:animating/g,eN),[n,e]}(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,Ra(t.collectedStyles,t.currentQuerySelector,{});const d=Pa(this,Cb(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:11,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:c,animation:d,originalSelector:e.selector,options:ag(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push(function X5(){return new l.vHH(3013,hn)}());const i="full"===e.timings?{duration:0,delay:0,easing:"full"}:zT(e.timings,t.errors,!0);return{type:12,animation:Pa(this,Cb(e.animation),t),timings:i,options:null}}}class U4{constructor(e){this.errors=e,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function eD(n){return!Array.isArray(n)&&"object"==typeof n}function ag(n){return n?(n=Q_(n)).params&&(n.params=function B4(n){return n?Q_(n):null}(n.params)):n={},n}function sN(n,e,t){return{duration:n,delay:e,easing:t}}function oN(n,e,t,i,r,s,c=null,d=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:c,subTimeline:d}}class tD{constructor(){this._map=new Map}get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}}const $4=new RegExp(":enter","g"),z4=new RegExp(":leave","g");function aN(n,e,t,i,r,s={},c={},d,f,y=[]){return(new q4).buildKeyframes(n,e,t,i,r,s,c,d,f,y)}class q4{buildKeyframes(e,t,i,r,s,c,d,f,y,w=[]){y=y||new tD;const T=new lN(e,t,y,r,s,w,[]);T.options=f,T.currentTimeline.setStyles([c],null,T.errors,f),Pa(this,i,T);const x=T.timelines.filter(O=>O.containsAnimation());if(Object.keys(d).length){let O;for(let F=x.length-1;F>=0;F--){const G=x[F];if(G.element===t){O=G;break}}O&&!O.allowOnlyTimelineStyles()&&O.setStyles([d],null,T.errors,f)}return x.length?x.map(O=>O.buildKeyframes()):[oN(t,[],[],[],0,0,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){const i=t.subInstructions.get(t.element);if(i){const r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,c=this._visitSubInstructions(i,r,r.options);s!=c&&t.transformIntoNewTimeline(c)}t.previousNode=e}visitAnimateRef(e,t){const i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime;const c=null!=i.duration?sg(i.duration):null,d=null!=i.delay?sg(i.delay):null;return 0!==c&&e.forEach(f=>{const y=t.appendInstructionToTimeline(f,c,d);s=Math.max(s,y.duration+y.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Pa(this,e.animation,t),t.previousNode=e}visitSequence(e,t){const i=t.subContextCount;let r=t;const s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),null!=s.delay)){6==r.previousNode.type&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=nD);const c=sg(s.delay);r.delayNextStep(c)}e.steps.length&&(e.steps.forEach(c=>Pa(this,c,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){const i=[];let r=t.currentTimeline.currentTime;const s=e.options&&e.options.delay?sg(e.options.delay):0;e.steps.forEach(c=>{const d=t.createSubContext(e.options);s&&d.delayNextStep(s),Pa(this,c,d),r=Math.max(r,d.currentTimeline.currentTime),i.push(d.currentTimeline)}),i.forEach(c=>t.currentTimeline.mergeTimelineCollectedStyles(c)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){const i=e.strValue;return zT(t.params?qT(i,t.params,t.errors):i,t.errors)}return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){const i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());const s=e.style;5==s.type?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){const i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.getCurrentStyleProperties().length&&i.forwardFrame();const s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){const i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,d=t.createSubContext().currentTimeline;d.easing=i.easing,e.styles.forEach(f=>{d.forwardTime((f.offset||0)*s),d.setStyles(f.styles,f.easing,t.errors,t.options),d.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(d),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){const i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?sg(r.delay):0;s&&(6===t.previousNode.type||0==i&&t.currentTimeline.getCurrentStyleProperties().length)&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=nD);let c=i;const d=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=d.length;let f=null;d.forEach((y,w)=>{t.currentQueryIndex=w;const T=t.createSubContext(e.options,y);s&&T.delayNextStep(s),y===t.element&&(f=T.currentTimeline),Pa(this,e.animation,T),T.currentTimeline.applyStylesToKeyframe(),c=Math.max(c,T.currentTimeline.currentTime)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(c),f&&(t.currentTimeline.mergeTimelineCollectedStyles(f),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){const i=t.parentContext,r=t.currentTimeline,s=e.timings,c=Math.abs(s.duration),d=c*(t.currentQueryTotal-1);let f=c*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":f=d-f;break;case"full":f=i.currentStaggerTime}const w=t.currentTimeline;f&&w.delayNextStep(f);const T=w.currentTime;Pa(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-T+(r.startTime-i.currentTimeline.startTime)}}const nD={};class lN{constructor(e,t,i,r,s,c,d,f){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=c,this.timelines=d,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=nD,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=f||new iD(this._driver,t,0),d.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;const i=e;let r=this.options;null!=i.duration&&(r.duration=sg(i.duration)),null!=i.delay&&(r.delay=sg(i.delay));const s=i.params;if(s){let c=r.params;c||(c=this.options.params={}),Object.keys(s).forEach(d=>{(!t||!c.hasOwnProperty(d))&&(c[d]=qT(s[d],c,this.errors))})}}_copyOptions(){const e={};if(this.options){const t=this.options.params;if(t){const i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){const r=t||this.element,s=new lN(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=nD,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){const r={duration:null!=t?t:e.duration,delay:this.currentTimeline.currentTime+(null!=i?i:0)+e.delay,easing:""},s=new Z4(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,c){let d=[];if(r&&d.push(this.element),e.length>0){e=(e=e.replace($4,"."+this._enterClassName)).replace(z4,"."+this._leaveClassName);let y=this._driver.query(this.element,e,1!=i);0!==i&&(y=i<0?y.slice(y.length+i,y.length):y.slice(0,i)),d.push(...y)}return!s&&0==d.length&&c.push(function e4(n){return new l.vHH(3014,hn)}()),d}}class iD{constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(e){const t=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new iD(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles[e]=t,this._globalTimelineStyles[e]=t,this._styleSummary[e]={time:this.currentTime,value:t}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&(this._previousKeyframe.easing=e),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||Td,this._currentKeyframe[t]=Td}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&(this._previousKeyframe.easing=t);const s=r&&r.params||{},c=function K4(n,e){const t={};let i;return n.forEach(r=>{"*"===r?(i=i||Object.keys(e),i.forEach(s=>{t[s]=Td})):_f(r,!1,t)}),t}(e,this._globalTimelineStyles);Object.keys(c).forEach(d=>{const f=qT(c[d],s,i);this._pendingStyles[d]=f,this._localTimelineStyles.hasOwnProperty(d)||(this._backFill[d]=this._globalTimelineStyles.hasOwnProperty(d)?this._globalTimelineStyles[d]:Td),this._updateStyle(d,f)})}applyStylesToKeyframe(){const e=this._pendingStyles,t=Object.keys(e);0!=t.length&&(this._pendingStyles={},t.forEach(i=>{this._currentKeyframe[i]=e[i]}),Object.keys(this._localTimelineStyles).forEach(i=>{this._currentKeyframe.hasOwnProperty(i)||(this._currentKeyframe[i]=this._localTimelineStyles[i])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(e=>{const t=this._localTimelineStyles[e];this._pendingStyles[e]=t,this._updateStyle(e,t)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){Object.keys(e._styleSummary).forEach(t=>{const i=this._styleSummary[t],r=e._styleSummary[t];(!i||r.time>i.time)&&this._updateStyle(t,r.value)})}buildKeyframes(){this.applyStylesToKeyframe();const e=new Set,t=new Set,i=1===this._keyframes.size&&0===this.duration;let r=[];this._keyframes.forEach((d,f)=>{const y=_f(d,!0);Object.keys(y).forEach(w=>{const T=y[w];"!"==T?e.add(w):T==Td&&t.add(w)}),i||(y.offset=f/this.duration),r.push(y)});const s=e.size?ZT(e.values()):[],c=t.size?ZT(t.values()):[];if(i){const d=r[0],f=Q_(d);d.offset=0,f.offset=1,r=[d,f]}return oN(this.element,r,s,c,this.duration,this.startTime,this.easing,!1)}}class Z4 extends iD{constructor(e,t,i,r,s,c,d=!1){super(e,t,c.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=d,this.timings={duration:c.duration,delay:c.delay,easing:c.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){const s=[],c=i+t,d=t/c,f=_f(e[0],!1);f.offset=0,s.push(f);const y=_f(e[0],!1);y.offset=eB(d),s.push(y);const w=e.length-1;for(let T=1;T<=w;T++){let x=_f(e[T],!1);x.offset=eB((t+x.offset*i)/c),s.push(x)}i=c,t=0,r="",e=s}return oN(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}}function eB(n,e=3){const t=Math.pow(10,e-1);return Math.round(n*t)/t}class cN{}class Y4 extends cN{normalizePropertyName(e,t){return iN(e)}normalizeStyleValue(e,t,i,r){let s="";const c=i.toString().trim();if(Q4[t]&&0!==i&&"0"!==i)if("number"==typeof i)s="px";else{const d=i.match(/^[+-]?[\d\.]+([a-z]*)$/);d&&0==d[1].length&&r.push(function G5(n,e){return new l.vHH(3005,hn)}())}return c+s}}const Q4=(()=>function J4(n){const e={};return n.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function tB(n,e,t,i,r,s,c,d,f,y,w,T,x){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:c,timelines:d,queriedElements:f,preStyleProps:y,postStyleProps:w,totalTime:T,errors:x}}const uN={};class nB{constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return function X4(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){const r=this._stateStyles["*"],s=this._stateStyles[e],c=r?r.buildStyles(t,i):{};return s?s.buildStyles(t,i):c}build(e,t,i,r,s,c,d,f,y,w){const T=[],x=this.ast.options&&this.ast.options.params||uN,F=this.buildStyles(i,d&&d.params||uN,T),G=f&&f.params||uN,Q=this.buildStyles(r,G,T),pe=new Set,Se=new Map,ke=new Map,Ae="void"===r,Be={params:Object.assign(Object.assign({},x),G)},We=w?[]:aN(e,t,this.ast.animation,s,c,F,Q,Be,y,T);let ft=0;if(We.forEach(In=>{ft=Math.max(In.duration+In.delay,ft)}),T.length)return tB(t,this._triggerName,i,r,Ae,F,Q,[],[],Se,ke,ft,T);We.forEach(In=>{const jn=In.element,Ei=Ra(Se,jn,{});In.preStyleProps.forEach(Ai=>Ei[Ai]=!0);const hs=Ra(ke,jn,{});In.postStyleProps.forEach(Ai=>hs[Ai]=!0),jn!==t&&pe.add(jn)});const Bt=ZT(pe.values());return tB(t,this._triggerName,i,r,Ae,F,Q,We,Bt,Se,ke,ft)}}class e8{constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){const i={},r=Q_(this.defaultParams);return Object.keys(e).forEach(s=>{const c=e[s];null!=c&&(r[s]=c)}),this.styles.styles.forEach(s=>{if("string"!=typeof s){const c=s;Object.keys(c).forEach(d=>{let f=c[d];f.length>1&&(f=qT(f,r,t));const y=this.normalizer.normalizePropertyName(d,t);f=this.normalizer.normalizeStyleValue(d,y,f,t),i[y]=f})}}),i}}class n8{constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,this.transitionFactories=[],this.states={},t.states.forEach(r=>{this.states[r.name]=new e8(r.style,r.options&&r.options.params||{},i)}),iB(this.states,"true","1"),iB(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new nB(e,r,this.states))}),this.fallbackTransition=function i8(n,e,t){return new nB(n,{type:1,animation:{type:2,steps:[],options:null},matchers:[(c,d)=>!0],options:null,queryCount:0,depCount:0},e)}(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(c=>c.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}}function iB(n,e,t){n.hasOwnProperty(e)?n.hasOwnProperty(t)||(n[t]=n[e]):n.hasOwnProperty(t)&&(n[e]=n[t])}const r8=new tD;class s8{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._animations={},this._playersById={},this.players=[]}register(e,t){const i=[],s=rN(this._driver,t,i,[]);if(i.length)throw function l4(n){return new l.vHH(3503,hn)}();this._animations[e]=s}_buildPlayer(e,t,i){const r=e.element,s=P2(0,this._normalizer,0,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){const r=[],s=this._animations[e];let c;const d=new Map;if(s?(c=aN(this._driver,t,s,XM,GT,{},{},i,r8,r),c.forEach(w=>{const T=Ra(d,w.element,{});w.postStyleProps.forEach(x=>T[x]=null)})):(r.push(function c4(){return new l.vHH(3300,hn)}()),c=[]),r.length)throw function u4(n){return new l.vHH(3504,hn)}();d.forEach((w,T)=>{Object.keys(w).forEach(x=>{w[x]=this._driver.computeStyle(T,x,Td)})});const y=mf(c.map(w=>{const T=d.get(w.element);return this._buildPlayer(w,{},T)}));return this._playersById[e]=y,y.onDestroy(()=>this.destroy(e)),this.players.push(y),y}destroy(e){const t=this._getPlayer(e);t.destroy(),delete this._playersById[e];const i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){const t=this._playersById[e];if(!t)throw function d4(n){return new l.vHH(3301,hn)}();return t}listen(e,t,i,r){const s=KM(t,"","","");return qM(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if("register"==i)return void this.register(e,r[0]);if("create"==i)return void this.create(e,t,r[0]||{});const s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e)}}}const rB="ng-animate-queued",dN="ng-animate-disabled",u8=[],sB={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},d8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},bl="__ng_removed";class hN{constructor(e,t=""){this.namespaceId=t;const i=e&&e.hasOwnProperty("value");if(this.value=function g8(n){return null!=n?n:null}(i?e.value:e),i){const s=Q_(e);delete s.value,this.options=s}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(e){const t=e.params;if(t){const i=this.options.params;Object.keys(t).forEach(r=>{null==i[r]&&(i[r]=t[r])})}}}const Tb="void",fN=new hN(Tb);class h8{constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+e,wl(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.hasOwnProperty(t))throw function h4(n,e){return new l.vHH(3302,hn)}();if(null==i||0==i.length)throw function f4(n){return new l.vHH(3303,hn)}();if(!function m8(n){return"start"==n||"done"==n}(i))throw function p4(n,e){return new l.vHH(3400,hn)}();const s=Ra(this._elementListeners,e,[]),c={name:t,phase:i,callback:r};s.push(c);const d=Ra(this._engine.statesByElement,e,{});return d.hasOwnProperty(t)||(wl(e,$T),wl(e,$T+"-"+t),d[t]=fN),()=>{this._engine.afterFlush(()=>{const f=s.indexOf(c);f>=0&&s.splice(f,1),this._triggers[t]||delete d[t]})}}register(e,t){return!this._triggers[e]&&(this._triggers[e]=t,!0)}_getTrigger(e){const t=this._triggers[e];if(!t)throw function g4(n){return new l.vHH(3401,hn)}();return t}trigger(e,t,i,r=!0){const s=this._getTrigger(t),c=new pN(this.id,t,e);let d=this._engine.statesByElement.get(e);d||(wl(e,$T),wl(e,$T+"-"+t),this._engine.statesByElement.set(e,d={}));let f=d[t];const y=new hN(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&f&&y.absorbOptions(f.options),d[t]=y,f||(f=fN),y.value!==Tb&&f.value===y.value){if(!function v8(n,e){const t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){const s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}(f.params,y.params)){const G=[],Q=s.matchStyles(f.value,f.params,G),pe=s.matchStyles(y.value,y.params,G);G.length?this._engine.reportError(G):this._engine.afterFlush(()=>{og(e,Q),fu(e,pe)})}return}const x=Ra(this._engine.playersByElement,e,[]);x.forEach(G=>{G.namespaceId==this.id&&G.triggerName==t&&G.queued&&G.destroy()});let O=s.matchTransition(f.value,y.value,e,y.params),F=!1;if(!O){if(!r)return;O=s.fallbackTransition,F=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:O,fromState:f,toState:y,player:c,isFallbackTransition:F}),F||(wl(e,rB),c.onStart(()=>{J_(e,rB)})),c.onDone(()=>{let G=this.players.indexOf(c);G>=0&&this.players.splice(G,1);const Q=this._engine.playersByElement.get(e);if(Q){let pe=Q.indexOf(c);pe>=0&&Q.splice(pe,1)}}),this.players.push(c),x.push(c),c}deregister(e){delete this._triggers[e],this._engine.statesByElement.forEach((t,i)=>{delete t[e]}),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);const t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){const i=this._engine.driver.query(e,WT,!0);i.forEach(r=>{if(r[bl])return;const s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(c=>c.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){const s=this._engine.statesByElement.get(e),c=new Map;if(s){const d=[];if(Object.keys(s).forEach(f=>{if(c.set(f,s[f].value),this._triggers[f]){const y=this.trigger(e,f,Tb,r);y&&d.push(y)}}),d.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,c),i&&mf(d).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){const t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){const r=new Set;t.forEach(s=>{const c=s.name;if(r.has(c))return;r.add(c);const f=this._triggers[c].fallbackTransition,y=i[c]||fN,w=new hN(Tb),T=new pN(this.id,c,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:c,transition:f,fromState:y,toState:w,player:T,isFallbackTransition:!0})})}}removeNode(e,t){const i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){const s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let c=e;for(;c=c.parentNode;)if(i.statesByElement.get(c)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{const s=e[bl];(!s||s===sB)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){wl(e,this._hostClassName)}drainQueuedTransitions(e){const t=[];return this._queue.forEach(i=>{const r=i.player;if(r.destroyed)return;const s=i.element,c=this._elementListeners.get(s);c&&c.forEach(d=>{if(d.name==i.triggerName){const f=KM(s,i.triggerName,i.fromState.value,i.toState.value);f._data=e,qM(i.player,d.phase,f,d.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{const s=i.transition.ast.depCount,c=r.transition.ast.depCount;return 0==s||0==c?s-c:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}elementContainsData(e){let t=!1;return this._elementListeners.has(e)&&(t=!0),t=!!this._queue.find(i=>i.element===e)||t,t}}class f8{constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(r,s)=>{}}_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}get queuedPlayers(){const e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){const i=new h8(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){const i=this._namespaceList,r=this.namespacesByHostElement,s=i.length-1;if(s>=0){let c=!1;if(void 0!==this.driver.getParentElement){let d=this.driver.getParentElement(t);for(;d;){const f=r.get(d);if(f){const y=i.indexOf(f);i.splice(y+1,0,e),c=!0;break}d=this.driver.getParentElement(d)}}else for(let d=s;d>=0;d--)if(this.driver.containsElement(i[d].hostElement,t)){i.splice(d+1,0,e),c=!0;break}c||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){if(!e)return;const i=this._fetchNamespace(e);this.afterFlush(()=>{this.namespacesByHostElement.delete(i.hostElement),delete this._namespaceLookup[e];const r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1)}),this.afterFlushAnimationsDone(()=>i.destroy(t))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){const t=new Set,i=this.statesByElement.get(e);if(i){const r=Object.keys(i);for(let s=0;s<r.length;s++){const c=i[r[s]].namespaceId;if(c){const d=this._fetchNamespace(c);d&&t.add(d)}}}return t}trigger(e,t,i,r){if(rD(t)){const s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!rD(t))return;const s=t[bl];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;const c=this.collectedLeaveElements.indexOf(t);c>=0&&this.collectedLeaveElements.splice(c,1)}if(e){const c=this._fetchNamespace(e);c&&c.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),wl(e,dN)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),J_(e,dN))}removeNode(e,t,i,r){if(rD(t)){const s=e?this._fetchNamespace(e):null;if(s?s.removeNode(t,r):this.markElementAsRemoved(e,t,!1,r),i){const c=this.namespacesByHostElement.get(t);c&&c.id!==e&&c.removeNode(t,r)}}else this._onRemovalComplete(t,r)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[bl]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return rD(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,WT,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),0!=this.playersByQueriedElement.size&&(t=this.driver.query(e,eN,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){const t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){const t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return mf(this.players).onDone(()=>e());e()})}processLeaveNode(e){var t;const i=e[bl];if(i&&i.setForRemoval){if(e[bl]=sB,i.namespaceId){this.destroyInnerAnimations(e);const r=this._fetchNamespace(i.namespaceId);r&&r.clearElementCache(e)}this._onRemovalComplete(e,i.setForRemoval)}(null===(t=e.classList)||void 0===t?void 0:t.contains(dN))&&this.markElementAsDisabled(e,!1),this.driver.query(e,".ng-animate-disabled",!0).forEach(r=>{this.markElementAsDisabled(r,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++)wl(this.collectedEnterElements[i],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++)this.processLeaveNode(this.collectedLeaveElements[i]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){const i=this._whenQuietFns;this._whenQuietFns=[],t.length?mf(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw function m4(n){return new l.vHH(3402,hn)}()}_flushAnimations(e,t){const i=new tD,r=[],s=new Map,c=[],d=new Map,f=new Map,y=new Map,w=new Set;this.disabledNodes.forEach(it=>{w.add(it);const mt=this.driver.query(it,".ng-animate-queued",!0);for(let kt=0;kt<mt.length;kt++)w.add(mt[kt])});const T=this.bodyNode,x=Array.from(this.statesByElement.keys()),O=lB(x,this.collectedEnterElements),F=new Map;let G=0;O.forEach((it,mt)=>{const kt=XM+G++;F.set(mt,kt),it.forEach(Jt=>wl(Jt,kt))});const Q=[],pe=new Set,Se=new Set;for(let it=0;it<this.collectedLeaveElements.length;it++){const mt=this.collectedLeaveElements[it],kt=mt[bl];kt&&kt.setForRemoval&&(Q.push(mt),pe.add(mt),kt.hasAnimation?this.driver.query(mt,".ng-star-inserted",!0).forEach(Jt=>pe.add(Jt)):Se.add(mt))}const ke=new Map,Ae=lB(x,Array.from(pe));Ae.forEach((it,mt)=>{const kt=GT+G++;ke.set(mt,kt),it.forEach(Jt=>wl(Jt,kt))}),e.push(()=>{O.forEach((it,mt)=>{const kt=F.get(mt);it.forEach(Jt=>J_(Jt,kt))}),Ae.forEach((it,mt)=>{const kt=ke.get(mt);it.forEach(Jt=>J_(Jt,kt))}),Q.forEach(it=>{this.processLeaveNode(it)})});const Be=[],We=[];for(let it=this._namespaceList.length-1;it>=0;it--)this._namespaceList[it].drainQueuedTransitions(t).forEach(kt=>{const Jt=kt.player,xi=kt.element;if(Be.push(Jt),this.collectedEnterElements.length){const vr=xi[bl];if(vr&&vr.setForMove){if(vr.previousTriggersValues&&vr.previousTriggersValues.has(kt.triggerName)){const go=vr.previousTriggersValues.get(kt.triggerName),Al=this.statesByElement.get(kt.element);Al&&Al[kt.triggerName]&&(Al[kt.triggerName].value=go)}return void Jt.destroy()}}const qo=!T||!this.driver.containsElement(T,xi),Mr=ke.get(xi),Ha=F.get(xi),Fn=this._buildInstruction(kt,i,Ha,Mr,qo);if(Fn.errors&&Fn.errors.length)return void We.push(Fn);if(qo)return Jt.onStart(()=>og(xi,Fn.fromStyles)),Jt.onDestroy(()=>fu(xi,Fn.toStyles)),void r.push(Jt);if(kt.isFallbackTransition)return Jt.onStart(()=>og(xi,Fn.fromStyles)),Jt.onDestroy(()=>fu(xi,Fn.toStyles)),void r.push(Jt);const cc=[];Fn.timelines.forEach(vr=>{vr.stretchStartingKeyframe=!0,this.disabledNodes.has(vr.element)||cc.push(vr)}),Fn.timelines=cc,i.append(xi,Fn.timelines),c.push({instruction:Fn,player:Jt,element:xi}),Fn.queriedElements.forEach(vr=>Ra(d,vr,[]).push(Jt)),Fn.preStyleProps.forEach((vr,go)=>{const Al=Object.keys(vr);if(Al.length){let Bd=f.get(go);Bd||f.set(go,Bd=new Set),Al.forEach(Qg=>Bd.add(Qg))}}),Fn.postStyleProps.forEach((vr,go)=>{const Al=Object.keys(vr);let Bd=y.get(go);Bd||y.set(go,Bd=new Set),Al.forEach(Qg=>Bd.add(Qg))})});if(We.length){const it=[];We.forEach(mt=>{it.push(function _4(n,e){return new l.vHH(3505,hn)}())}),Be.forEach(mt=>mt.destroy()),this.reportError(it)}const ft=new Map,Bt=new Map;c.forEach(it=>{const mt=it.element;i.has(mt)&&(Bt.set(mt,mt),this._beforeAnimationBuild(it.player.namespaceId,it.instruction,ft))}),r.forEach(it=>{const mt=it.element;this._getPreviousPlayers(mt,!1,it.namespaceId,it.triggerName,null).forEach(Jt=>{Ra(ft,mt,[]).push(Jt),Jt.destroy()})});const In=Q.filter(it=>uB(it,f,y)),jn=new Map;aB(jn,this.driver,Se,y,Td).forEach(it=>{uB(it,f,y)&&In.push(it)});const hs=new Map;O.forEach((it,mt)=>{aB(hs,this.driver,new Set(it),f,"!")}),In.forEach(it=>{const mt=jn.get(it),kt=hs.get(it);jn.set(it,Object.assign(Object.assign({},mt),kt))});const Ai=[],Au=[],xu={};c.forEach(it=>{const{element:mt,player:kt,instruction:Jt}=it;if(i.has(mt)){if(w.has(mt))return kt.onDestroy(()=>fu(mt,Jt.toStyles)),kt.disabled=!0,kt.overrideTotalTime(Jt.totalTime),void r.push(kt);let xi=xu;if(Bt.size>1){let Mr=mt;const Ha=[];for(;Mr=Mr.parentNode;){const Fn=Bt.get(Mr);if(Fn){xi=Fn;break}Ha.push(Mr)}Ha.forEach(Fn=>Bt.set(Fn,xi))}const qo=this._buildAnimation(kt.namespaceId,Jt,ft,s,hs,jn);if(kt.setRealPlayer(qo),xi===xu)Ai.push(kt);else{const Mr=this.playersByElement.get(xi);Mr&&Mr.length&&(kt.parentPlayer=mf(Mr)),r.push(kt)}}else og(mt,Jt.fromStyles),kt.onDestroy(()=>fu(mt,Jt.toStyles)),Au.push(kt),w.has(mt)&&r.push(kt)}),Au.forEach(it=>{const mt=s.get(it.element);if(mt&&mt.length){const kt=mf(mt);it.setRealPlayer(kt)}}),r.forEach(it=>{it.parentPlayer?it.syncPlayerEvents(it.parentPlayer):it.destroy()});for(let it=0;it<Q.length;it++){const mt=Q[it],kt=mt[bl];if(J_(mt,GT),kt&&kt.hasAnimation)continue;let Jt=[];if(d.size){let qo=d.get(mt);qo&&qo.length&&Jt.push(...qo);let Mr=this.driver.query(mt,eN,!0);for(let Ha=0;Ha<Mr.length;Ha++){let Fn=d.get(Mr[Ha]);Fn&&Fn.length&&Jt.push(...Fn)}}const xi=Jt.filter(qo=>!qo.destroyed);xi.length?_8(this,mt,xi):this.processLeaveNode(mt)}return Q.length=0,Ai.forEach(it=>{this.players.push(it),it.onDone(()=>{it.destroy();const mt=this.players.indexOf(it);this.players.splice(mt,1)}),it.play()}),Ai}elementContainsData(e,t){let i=!1;const r=t[bl];return r&&r.setForRemoval&&(i=!0),this.playersByElement.has(t)&&(i=!0),this.playersByQueriedElement.has(t)&&(i=!0),this.statesByElement.has(t)&&(i=!0),this._fetchNamespace(e).elementContainsData(t)||i}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let c=[];if(t){const d=this.playersByQueriedElement.get(e);d&&(c=d)}else{const d=this.playersByElement.get(e);if(d){const f=!s||s==Tb;d.forEach(y=>{y.queued||!f&&y.triggerName!=r||c.push(y)})}}return(i||r)&&(c=c.filter(d=>!(i&&i!=d.namespaceId||r&&r!=d.triggerName))),c}_beforeAnimationBuild(e,t,i){const s=t.element,c=t.isRemovalTransition?void 0:e,d=t.isRemovalTransition?void 0:t.triggerName;for(const f of t.timelines){const y=f.element,w=y!==s,T=Ra(i,y,[]);this._getPreviousPlayers(y,w,c,d,t.toState).forEach(O=>{const F=O.getRealPlayer();F.beforeDestroy&&F.beforeDestroy(),O.destroy(),T.push(O)})}og(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,c){const d=t.triggerName,f=t.element,y=[],w=new Set,T=new Set,x=t.timelines.map(F=>{const G=F.element;w.add(G);const Q=G[bl];if(Q&&Q.removedBeforeQueried)return new Eb(F.duration,F.delay);const pe=G!==f,Se=function y8(n){const e=[];return cB(n,e),e}((i.get(G)||u8).map(ft=>ft.getRealPlayer())).filter(ft=>!!ft.element&&ft.element===G),ke=s.get(G),Ae=c.get(G),Be=P2(0,this._normalizer,0,F.keyframes,ke,Ae),We=this._buildPlayer(F,Be,Se);if(F.subTimeline&&r&&T.add(G),pe){const ft=new pN(e,d,G);ft.setRealPlayer(We),y.push(ft)}return We});y.forEach(F=>{Ra(this.playersByQueriedElement,F.element,[]).push(F),F.onDone(()=>function p8(n,e,t){let i;if(n instanceof Map){if(i=n.get(e),i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&n.delete(e)}}else if(i=n[e],i){if(i.length){const r=i.indexOf(t);i.splice(r,1)}0==i.length&&delete n[e]}return i}(this.playersByQueriedElement,F.element,F))}),w.forEach(F=>wl(F,W2));const O=mf(x);return O.onDestroy(()=>{w.forEach(F=>J_(F,W2)),fu(f,t.toStyles)}),T.forEach(F=>{Ra(r,F,[]).push(O)}),O}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new Eb(e.duration,e.delay)}}class pN{constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i,this._player=new Eb,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(e){this._containsRealPlayer||(this._player=e,Object.keys(this._queuedCallbacks).forEach(t=>{this._queuedCallbacks[t].forEach(i=>qM(e,t,void 0,i))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){const t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){Ra(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){const t=this._player;t.triggerCallback&&t.triggerCallback(e)}}function rD(n){return n&&1===n.nodeType}function oB(n,e){const t=n.style.display;return n.style.display=null!=e?e:"none",t}function aB(n,e,t,i,r){const s=[];t.forEach(f=>s.push(oB(f)));const c=[];i.forEach((f,y)=>{const w={};f.forEach(T=>{const x=w[T]=e.computeStyle(y,T,r);(!x||0==x.length)&&(y[bl]=d8,c.push(y))}),n.set(y,w)});let d=0;return t.forEach(f=>oB(f,s[d++])),c}function lB(n,e){const t=new Map;if(n.forEach(d=>t.set(d,[])),0==e.length)return t;const r=new Set(e),s=new Map;function c(d){if(!d)return 1;let f=s.get(d);if(f)return f;const y=d.parentNode;return f=t.has(y)?y:r.has(y)?1:c(y),s.set(d,f),f}return e.forEach(d=>{const f=c(d);1!==f&&t.get(f).push(d)}),t}function wl(n,e){var t;null===(t=n.classList)||void 0===t||t.add(e)}function J_(n,e){var t;null===(t=n.classList)||void 0===t||t.remove(e)}function _8(n,e,t){mf(t).onDone(()=>n.processLeaveNode(e))}function cB(n,e){for(let t=0;t<n.length;t++){const i=n[t];i instanceof k2?cB(i.players,e):e.push(i)}}function uB(n,e,t){const i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}class sD{constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i,this._triggerCache={},this.onRemovalComplete=(r,s)=>{},this._transitionEngine=new f8(e,t,i),this._timelineEngine=new s8(e,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){const c=e+"-"+r;let d=this._triggerCache[c];if(!d){const f=[],w=rN(this._driver,s,f,[]);if(f.length)throw function o4(n,e){return new l.vHH(3404,hn)}();d=function t8(n,e,t){return new n8(n,e,t)}(r,w,this._normalizer),this._triggerCache[c]=d}this._transitionEngine.registerTrigger(t,r,d)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i,r){this._transitionEngine.removeNode(e,t,r||!1,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if("@"==i.charAt(0)){const[s,c]=F2(i);this._timelineEngine.command(s,t,c,r)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if("@"==i.charAt(0)){const[c,d]=F2(i);return this._timelineEngine.listen(c,t,d,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let w8=(()=>{class n{constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r,this._state=0;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s={}),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&fu(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(fu(this._element,this._initialStyles),this._endStyles&&(fu(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(og(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(og(this._element,this._endStyles),this._endStyles=null),fu(this._element,this._initialStyles),this._state=3)}}return n.initialStylesByElement=new WeakMap,n})();function gN(n){let e=null;const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=t[i];E8(r)&&(e=e||{},e[r]=n[r])}return e}function E8(n){return"display"===n||"position"===n}class dB{constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(e,t,i){return e.animate(t,i)}onStart(e){this._onStartFns.push(e)}onDone(e){this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const e={};if(this.hasStarted()){const t=this._finalKeyframe;Object.keys(t).forEach(i=>{"offset"!=i&&(e[i]=this._finished?t[i]:Y2(this.element,i))})}this.currentSnapshot=e}triggerCallback(e){const t="start"==e?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}}class C8{validateStyleProperty(e){return V2(e)}matchesElement(e,t){return!1}containsElement(e,t){return j2(e,t)}getParentElement(e){return QM(e)}query(e,t,i){return H2(e,t,i)}computeStyle(e,t,i){return window.getComputedStyle(e)[t]}animate(e,t,i,r,s,c=[]){const f={duration:i,delay:r,fill:0==r?"both":"forwards"};s&&(f.easing=s);const y={},w=c.filter(x=>x instanceof dB);(function S4(n,e){return 0===n||0===e})(i,r)&&w.forEach(x=>{let O=x.currentSnapshot;Object.keys(O).forEach(F=>y[F]=O[F])}),t=function A4(n,e,t){const i=Object.keys(t);if(i.length&&e.length){let s=e[0],c=[];if(i.forEach(d=>{s.hasOwnProperty(d)||c.push(d),s[d]=t[d]}),c.length)for(var r=1;r<e.length;r++){let d=e[r];c.forEach(function(f){d[f]=Y2(n,f)})}}return e}(e,t=t.map(x=>_f(x,!1)),y);const T=function b8(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=gN(e[0]),e.length>1&&(i=gN(e[e.length-1]))):e&&(t=gN(e)),t||i?new w8(n,t,i):null}(e,t);return new dB(e,t,f,T)}}let T8=(()=>{class n extends M2{constructor(t,i){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(i.body,{id:"0",encapsulation:l.ifc.None,styles:[],data:{animation:[]}})}build(t){const i=this._nextAnimationId.toString();this._nextAnimationId++;const r=Array.isArray(t)?N2(t):t;return hB(this._renderer,null,i,"register",[r]),new D8(i,this._renderer)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class D8 extends class k5{}{constructor(e,t){super(),this._id=e,this._renderer=t}create(e,t){return new I8(this._id,e,t||{},this._renderer)}}class I8{constructor(e,t,i,r){this.id=e,this.element=t,this._renderer=r,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",i)}_listen(e,t){return this._renderer.listen(this.element,`@@${this.id}:${e}`,t)}_command(e,...t){return hB(this._renderer,this.element,this.id,e,t)}onDone(e){this._listen("done",e)}onStart(e){this._listen("start",e)}onDestroy(e){this._listen("destroy",e)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(e){this._command("setPosition",e)}getPosition(){var e,t;return null!==(t=null===(e=this._renderer.engine.players[+this.id])||void 0===e?void 0:e.getPosition())&&void 0!==t?t:0}}function hB(n,e,t,i,r){return n.setProperty(e,`@@${t}:${i}`,r)}const fB="@.disabled";let S8=(()=>{class n{constructor(t,i,r){this.delegate=t,this.engine=i,this._zone=r,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),i.onRemovalComplete=(s,c)=>{const d=null==c?void 0:c.parentNode(s);d&&c.removeChild(d,s)}}createRenderer(t,i){const s=this.delegate.createRenderer(t,i);if(!(t&&i&&i.data&&i.data.animation)){let w=this._rendererCache.get(s);return w||(w=new pB("",s,this.engine),this._rendererCache.set(s,w)),w}const c=i.id,d=i.id+"-"+this._currentId;this._currentId++,this.engine.register(d,t);const f=w=>{Array.isArray(w)?w.forEach(f):this.engine.registerTrigger(c,d,t,w.name,w)};return i.data.animation.forEach(f),new A8(this,d,s,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,i,r){t>=0&&t<this._microtaskId?this._zone.run(()=>i(r)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(s=>{const[c,d]=s;c(d)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([i,r]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.FYo),l.LFG(sD),l.LFG(l.R0b))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();class pB{constructor(e,t,i){this.namespaceId=e,this.delegate=t,this.engine=i,this.destroyNode=this.delegate.destroyNode?r=>t.destroyNode(r):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i){this.engine.onRemove(this.namespaceId,t,this.delegate,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){"@"==t.charAt(0)&&t==fB?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.delegate.listen(e,t,i)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}}class A8 extends pB{constructor(e,t,i,r){super(t,i,r),this.factory=e,this.namespaceId=t}setProperty(e,t,i){"@"==t.charAt(0)?"."==t.charAt(1)&&t==fB?this.disableAnimations(e,i=void 0===i||!!i):this.engine.process(this.namespaceId,e,t.substr(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i){if("@"==t.charAt(0)){const r=function x8(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}(e);let s=t.substr(1),c="";return"@"!=s.charAt(0)&&([s,c]=function M8(n){const e=n.indexOf(".");return[n.substring(0,e),n.substr(e+1)]}(s)),this.engine.listen(this.namespaceId,r,s,c,d=>{this.factory.scheduleListenerCallback(d._data||-1,i,d)})}return this.delegate.listen(e,t,i)}}let N8=(()=>{class n extends sD{constructor(t,i,r){super(t.body,i,r)}ngOnDestroy(){this.flush()}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(ce),l.LFG(JM),l.LFG(cN))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac}),n})();const gB=new l.OlP("AnimationModuleType"),mB=[{provide:M2,useClass:T8},{provide:cN,useFactory:function O8(){return new Y4}},{provide:sD,useClass:N8},{provide:l.FYo,useFactory:function k8(n,e,t){return new S8(n,e,t)},deps:[na,sD,l.R0b]}],_B=[{provide:JM,useFactory:()=>new C8},{provide:gB,useValue:"BrowserAnimations"},...mB],R8=[{provide:JM,useClass:G2},{provide:gB,useValue:"NoopAnimations"},...mB];let mN,P8=(()=>{class n{static withConfig(t){return{ngModule:n,providers:t.disableAnimations?R8:_B}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:_B,imports:[Ja]}),n})(),F8=(()=>{class n{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),L8=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[F8]}),n})(),yB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})();try{mN="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(n){mN=!1}let V8=(()=>{class n{constructor(t){this._platformId=t,this.isBrowser=this._platformId?function Oi(n){return n===Xo}(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!mN)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(l.Lbi))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const TB="cdk-high-contrast-black-on-white",DB="cdk-high-contrast-white-on-black",yN="cdk-high-contrast-active";let iW=(()=>{class n{constructor(t,i){this._platform=t,this._document=i}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,r=i&&i.getComputedStyle?i.getComputedStyle(t):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(t.remove(),s){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(yN),t.remove(TB),t.remove(DB),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?(t.add(yN),t.add(TB)):2===i&&(t.add(yN),t.add(DB))}}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(V8),l.LFG(ce))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const sW=new l.OlP("mat-sanity-checks",{providedIn:"root",factory:function rW(){return!0}});let vN=(()=>{class n{constructor(t,i,r){this._sanityChecks=i,this._document=r,this._hasDoneGlobalChecks=!1,t._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(t){return!function G8(){return"undefined"!=typeof __karma__&&!!__karma__||"undefined"!=typeof jasmine&&!!jasmine||"undefined"!=typeof jest&&!!jest||"undefined"!=typeof Mocha&&!!Mocha}()&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[t])}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(iW),l.LFG(sW,8),l.LFG(ce))},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[yB],yB]}),n})(),aW=(()=>{class n{isErrorState(t,i){return!!(t&&t.invalid&&(t.touched||i&&i.submitted))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),wN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({imports:[[Ni,vN,L8],vN]}),n})(),MB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),mW=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[aW],imports:[[MB,wN,vN],MB,wN]}),n})();var Sr=B(2011),cD=B(5363),_W=B(6063);class yW extends Dn.x{constructor(e=1/0,t=1/0,i=_W.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:r,_timestampProvider:s,_windowTime:c}=this;t||(i.push(e),!r&&i.push(s.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:r}=this,s=r.slice();for(let c=0;c<s.length&&!e.closed;c+=i?1:2)e.next(s[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:r}=this,s=(r?1:2)*e;if(e<1/0&&s<i.length&&i.splice(0,i.length-s),!r){const c=t.now();let d=0;for(let f=1;f<i.length&&i[f]<=c;f+=2)d=f;d&&i.splice(0,d+1)}}}function NB(n,e,t){let i,r=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:r=!1,scheduler:t}=n):i=null!=n?n:1/0,(0,Cp.B)({connector:()=>new yW(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function OB(n,e){return(0,Yi.m)(e)?Rn(()=>n,e):Rn(()=>n)}var EN=B(9468),Mn=B(5813);B(5867);var Ee=B(5861),ro=B(9681),tc=B(4859),L=B(2090),nc=B(1877);const RB=new Map,CW={activated:!1,tokenObservers:[]},TW={initialized:!1,enabled:!1};function jr(n){return RB.get(n)||CW}function El(n,e){RB.set(n,e)}function dD(){return TW}class xW{constructor(e,t,i,r,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new L.BH,yield function MW(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new L.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const so=new L.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function FB(n){if(!jr(n).activated)throw so.create("use-before-activation",{appName:n.name})}function IN(n,e){return SN.apply(this,arguments)}function SN(){return(SN=(0,Ee.Z)(function*({url:n,body:e},t){var i,r;const s={"Content-Type":"application/json"},c=t.getImmediate({optional:!0});if(c){const O=yield c.getHeartbeatsHeader();O&&(s["X-Firebase-Client"]=O)}const d={method:"POST",body:JSON.stringify(e),headers:s};let f,y;try{f=yield fetch(n,d)}catch(O){throw so.create("fetch-network-error",{originalErrorMessage:null===(i=O)||void 0===i?void 0:i.message})}if(200!==f.status)throw so.create("fetch-status-error",{httpStatus:f.status});try{y=yield f.json()}catch(O){throw so.create("fetch-parse-error",{originalErrorMessage:null===(r=O)||void 0===r?void 0:r.message})}const w=y.ttl.match(/^([\d.]+)(s)$/);if(!w||!w[2]||isNaN(Number(w[1])))throw so.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${y.ttl}`});const T=1e3*Number(w[1]),x=Date.now();return{token:y.token,expireTimeMillis:x+T,issuedAtTimeMillis:x}})).apply(this,arguments)}function RW(n,e){const{projectId:t,appId:i,apiKey:r}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${r}`,body:{debug_token:e}}}const Sb="firebase-app-check-store";let pD=null;function BB(){return pD||(pD=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=r=>{n(r.target.result)},i.onerror=r=>{var s;e(so.create("storage-open",{originalErrorMessage:null===(s=r.target.error)||void 0===s?void 0:s.message}))},i.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Sb,{keyPath:"compositeKey"})}}catch(i){e(so.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),pD)}function AN(){return(AN=(0,Ee.Z)(function*(n,e){const i=(yield BB()).transaction(Sb,"readwrite"),s=i.objectStore(Sb).put({compositeKey:n,value:e});return new Promise((c,d)=>{s.onsuccess=f=>{c()},i.onerror=f=>{var y;d(so.create("storage-set",{originalErrorMessage:null===(y=f.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const Ab=new nc.Yd("@firebase/app-check");function NN(n,e){return(0,L.hl)()?function BW(n,e){return function UB(n,e){return AN.apply(this,arguments)}(function jB(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Ab.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function HB(){return dD().enabled}function GB(){return kN.apply(this,arguments)}function kN(){return(kN=(0,Ee.Z)(function*(){const n=dD();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $W={error:"UNKNOWN_ERROR"};function WW(n){return L.US.encodeString(JSON.stringify(n),!1)}function gD(n){return RN.apply(this,arguments)}function RN(){return(RN=(0,Ee.Z)(function*(n,e=!1){const t=n.app;FB(t);const i=jr(t);let s,r=i.token;if(r&&!ey(r)&&(El(t,Object.assign(Object.assign({},i),{token:void 0})),r=void 0),!r){const f=yield i.cachedTokenPromise;f&&(ey(f)?r=f:yield NN(t,void 0))}if(!e&&r&&ey(r))return{token:r.token};let d,c=!1;if(HB()){i.exchangeTokenPromise||(i.exchangeTokenPromise=IN(RW(t,yield GB()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),c=!0);const f=yield i.exchangeTokenPromise;return yield NN(t,f),El(t,Object.assign(Object.assign({},i),{token:f})),{token:f.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),c=!0),r=yield i.exchangeTokenPromise}catch(f){"appCheck/throttled"===f.code?Ab.warn(f.message):Ab.error(f),s=f}return r?s?d=ey(r)?{token:r.token,internalError:s}:zB(s):(d={token:r.token},El(t,Object.assign(Object.assign({},i),{token:r})),yield NN(t,r)):d=zB(s),c&&WB(t,d),d})).apply(this,arguments)}function FN(n,e){const t=jr(n),i=t.tokenObservers.filter(r=>r.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),El(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function $B(n){const{app:e}=n,t=jr(e);let i=t.tokenRefresher;i||(i=function zW(n){const{app:e}=n;return new xW((0,Ee.Z)(function*(){let i;if(i=jr(e).token?yield gD(n,!0):yield gD(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=jr(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),El(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function WB(n,e){const t=jr(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(r){}}function ey(n){return n.expireTimeMillis-Date.now()>0}function zB(n){return{token:WW($W),error:n}}class qW{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=jr(this.app);for(const t of e)FN(this.app,t.next);return Promise.resolve()}}const eU="app-check-internal";!function az(){(0,ro._registerComponent)(new tc.wA("app-check",n=>function ZW(n,e){return new qW(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(eU).initialize()})),(0,ro._registerComponent)(new tc.wA(eU,n=>function KW(n){return{getToken:e=>gD(n,e),addTokenListener:e=>function PN(n,e,t,i){const{app:r}=n,s=jr(r),c={next:t,error:i,type:e};if(El(r,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,c]})),s.token&&ey(s.token)){const d=s.token;Promise.resolve().then(()=>{t({token:d.token}),$B(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>$B(n))}(n,"INTERNAL",e),removeTokenListener:e=>FN(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ro.registerVersion)("@firebase/app-check","0.5.16")}();class xb{constructor(){return(0,Mn.vb)("app-check")}}"undefined"!=typeof window&&window;var _D=B(127);const jN=new l.OlP("angularfire2.auth.use-emulator"),HN=new l.OlP("angularfire2.auth.settings"),GN=new l.OlP("angularfire2.auth.tenant-id"),$N=new l.OlP("angularfire2.auth.langugage-code"),WN=new l.OlP("angularfire2.auth.use-device-language"),zN=new l.OlP("angularfire.auth.persistence"),qN=(n,e,t,i,r,s,c,d)=>(0,Sr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const f=e.runOutsideAngular(()=>n.auth());if(t&&f.useEmulator(...t),i&&(f.tenantId=i),f.languageCode=r,s&&f.useDeviceLanguage(),c)for(const[y,w]of Object.entries(c))f.settings[y]=w;return d&&f.setPersistence(d),f},[t,i,r,s,c,d]);let yD=(()=>{class n{constructor(t,i,r,s,c,d,f,y,w,T,x,O){const F=new Dn.x,G=ct(void 0).pipe((0,cD.Q)(c.outsideAngular),Rn(()=>s.runOutsideAngular(()=>Promise.resolve().then(B.bind(B,1277)))),(0,ut.U)(()=>(0,Sr.on)(t,s,i)),(0,ut.U)(Q=>qN(Q,s,d,y,w,T,f,x)),NB({bufferSize:1,refCount:!1}));if(Za(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{G.pipe(jl()).subscribe();const pe=G.pipe(Rn(Ae=>Ae.getRedirectResult().then(Be=>Be,()=>null)),Mn.iC,NB({bufferSize:1,refCount:!1})),Se=G.pipe(Rn(Ae=>new yn.y(Be=>({unsubscribe:s.runOutsideAngular(()=>Ae.onAuthStateChanged(We=>Be.next(We),We=>Be.error(We),()=>Be.complete()))})))),ke=G.pipe(Rn(Ae=>new yn.y(Be=>({unsubscribe:s.runOutsideAngular(()=>Ae.onIdTokenChanged(We=>Be.next(We),We=>Be.error(We),()=>Be.complete()))}))));this.authState=pe.pipe(OB(Se),(0,EN.R)(c.outsideAngular),(0,cD.Q)(c.insideAngular)),this.user=pe.pipe(OB(ke),(0,EN.R)(c.outsideAngular),(0,cD.Q)(c.insideAngular)),this.idToken=this.user.pipe(Rn(Ae=>Ae?(0,An.D)(Ae.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Rn(Ae=>Ae?(0,An.D)(Ae.getIdTokenResult()):ct(null))),this.credential=(0,Km.T)(pe,F,this.authState.pipe(tn(Ae=>!Ae))).pipe((0,ut.U)(Ae=>(null==Ae?void 0:Ae.user)?Ae:null),(0,EN.R)(c.outsideAngular),(0,cD.Q)(c.insideAngular))}return(0,Sr.pX)(this,G,s,{spy:{apply:(Q,pe,Se)=>{(Q.startsWith("signIn")||Q.startsWith("createUser"))&&Se.then(ke=>F.next(ke))}}})}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Sr.Dh),l.LFG(Sr.xv,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(jN,8),l.LFG(HN,8),l.LFG(GN,8),l.LFG($N,8),l.LFG(WN,8),l.LFG(zN,8),l.LFG(xb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),fz=(()=>{class n{constructor(){_D.Z.registerVersion("angularfire",Mn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[yD]}),n})();var ZN=B(3942);const nU="firebasestorage.googleapis.com",iU="storageBucket";class Bi extends L.ZR{constructor(e,t,i=0){super(KN(e),`Firebase Storage: ${t} (${KN(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return KN(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function KN(n){return"storage/"+n}function YN(){return new Bi("unknown","An unknown error occurred, please check the error payload for server response.")}function rU(){return new Bi("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function sU(){return new Bi("canceled","User canceled the upload/download.")}function oU(){return new Bi("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function ty(n){return new Bi("invalid-argument",n)}function aU(){return new Bi("app-deleted","The Firebase app was deleted.")}function lU(n){return new Bi("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Mb(n,e){return new Bi("invalid-format","String does not match format '"+n+"': "+e)}function Nb(n){throw new Bi("internal-error","Internal error: "+n)}class Rs{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Rs.makeFromUrl(e,t)}catch(r){return new Rs(e,"")}if(""===i.path)return i;throw function Tz(n){return new Bi("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let i=null;const r="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+r+"(/(.*))?$","i");function y(Ae){Ae.path_=decodeURIComponent(Ae.path)}const T=t.replace(/[.]/g,"\\."),ke=[{regex:d,indices:{bucket:1,path:3},postModify:function s(Ae){"/"===Ae.path.charAt(Ae.path.length-1)&&(Ae.path_=Ae.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${T}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:y},{regex:new RegExp(`^https?://${t===nU?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:y}];for(let Ae=0;Ae<ke.length;Ae++){const Be=ke[Ae],We=Be.regex.exec(e);if(We){let Bt=We[Be.indices.path];Bt||(Bt=""),i=new Rs(We[Be.indices.bucket],Bt),Be.postModify(i);break}}if(null==i)throw function Cz(n){return new Bi("invalid-url","Invalid URL '"+n+"'.")}(e);return i}}class Az{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function vD(n){return"string"==typeof n||n instanceof String}function cU(n){return QN()&&n instanceof Blob}function QN(){return"undefined"!=typeof Blob&&!(0,L.UG)()}function JN(n,e,t,i){if(i<e)throw ty(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw ty(`Invalid value for '${n}'. Expected ${t} or less.`)}function Dd(n,e,t){let i=e;return null==t&&(i=`https://${e}`),`${t}://${i}/v0${n}`}function uU(n){const e=encodeURIComponent;let t="?";for(const i in n)n.hasOwnProperty(i)&&(t=t+(e(i)+"=")+e(n[i])+"&");return t=t.slice(0,-1),t}var yf=(()=>{return(n=yf||(yf={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",yf;var n})();function dU(n,e){const t=n>=500&&n<600,r=-1!==[408,429].indexOf(n),s=-1!==e.indexOf(n);return t||r||s}class Rz{constructor(e,t,i,r,s,c,d,f,y,w,T,x=!0){this.url_=e,this.method_=t,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=c,this.callback_=d,this.errorCallback_=f,this.timeout_=y,this.progressCallback_=w,this.connectionFactory_=T,this.retry=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((O,F)=>{this.resolve_=O,this.reject_=F,this.start_()})}start_(){const t=(i,r)=>{const s=this.resolve_,c=this.reject_,d=r.connection;if(r.wasSuccessCode)try{const f=this.callback_(d,d.getResponse());!function Nz(n){return void 0!==n}(f)?s():s(f)}catch(f){c(f)}else if(null!==d){const f=YN();f.serverResponse=d.getErrorText(),c(this.errorCallback_?this.errorCallback_(d,f):f)}else c(r.canceled?this.appDelete_?aU():sU():rU())};this.canceled_?t(0,new bD(!1,null,!0)):this.backoffId_=function xz(n,e,t){let i=1,r=null,s=null,c=!1,d=0;function f(){return 2===d}let y=!1;function w(...Q){y||(y=!0,e.apply(null,Q))}function T(Q){r=setTimeout(()=>{r=null,n(O,f())},Q)}function x(){s&&clearTimeout(s)}function O(Q,...pe){if(y)return void x();if(Q)return x(),void w.call(null,Q,...pe);if(f()||c)return x(),void w.call(null,Q,...pe);let ke;i<64&&(i*=2),1===d?(d=2,ke=0):ke=1e3*(i+Math.random()),T(ke)}let F=!1;function G(Q){F||(F=!0,x(),!y&&(null!==r?(Q||(d=2),clearTimeout(r),T(0)):Q||(d=1)))}return T(0),s=setTimeout(()=>{c=!0,G(!0)},t),G}((i,r)=>{if(r)return void i(!1,new bD(!1,null,!0));const s=this.connectionFactory_();this.pendingConnection_=s;const c=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&s.addUploadProgressListener(c),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&s.removeUploadProgressListener(c),this.pendingConnection_=null;const d=s.getErrorCode()===yf.NO_ERROR,f=s.getStatus();if((!d||dU(f,this.additionalRetryCodes_))&&this.retry){const w=s.getErrorCode()===yf.ABORT;return void i(!1,new bD(!1,null,w))}const y=-1!==this.successCodes_.indexOf(f);i(!0,new bD(y,s))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function Mz(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class bD{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function jz(...n){const e=function Vz(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let i=0;i<n.length;i++)t.append(n[i]);return t.getBlob()}if(QN())return new Blob(n);throw new Bi("unsupported-environment","This browser doesn't seem to support creating Blobs")}const Fa={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class XN{constructor(e,t){this.data=e,this.contentType=t||null}}function eO(n,e){switch(n){case Fa.RAW:return new XN(hU(e));case Fa.BASE64:case Fa.BASE64URL:return new XN(fU(n,e));case Fa.DATA_URL:return new XN(function Wz(n){const e=new pU(n);return e.base64?fU(Fa.BASE64,e.rest):function $z(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Mb(Fa.DATA_URL,"Malformed data URL.")}return hU(e)}(e.rest)}(e),function zz(n){return new pU(n).contentType}(e))}throw YN()}function hU(n){const e=[];for(let t=0;t<n.length;t++){let i=n.charCodeAt(t);i<=127?e.push(i):i<=2047?e.push(192|i>>6,128|63&i):55296==(64512&i)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(i=65536|(1023&i)<<10|1023&n.charCodeAt(++t),e.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|63&i)):e.push(239,191,189):56320==(64512&i)?e.push(239,191,189):e.push(224|i>>12,128|i>>6&63,128|63&i)}return new Uint8Array(e)}function fU(n,e){switch(n){case Fa.BASE64:{const r=-1!==e.indexOf("-"),s=-1!==e.indexOf("_");if(r||s)throw Mb(n,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case Fa.BASE64URL:{const r=-1!==e.indexOf("+"),s=-1!==e.indexOf("/");if(r||s)throw Mb(n,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function Gz(n){return atob(n)}(e)}catch(r){throw Mb(n,"Invalid character found")}const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}class pU{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Mb(Fa.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=t[1]||null;null!=i&&(this.base64=function qz(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=e.substring(e.indexOf(",")+1)}}class pu{constructor(e,t){let i=0,r="";cU(e)?(this.data_=e,i=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),i=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),i=e.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(cU(this.data_)){const r=function Hz(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===r?null:new pu(r)}{const i=new Uint8Array(this.data_.buffer,e,t-e);return new pu(i,!0)}}static getBlob(...e){if(QN()){const t=e.map(i=>i instanceof pu?i.data_:i);return new pu(jz.apply(null,t))}{const t=e.map(c=>vD(c)?eO(Fa.RAW,c).data:c.data_);let i=0;t.forEach(c=>{i+=c.byteLength});const r=new Uint8Array(i);let s=0;return t.forEach(c=>{for(let d=0;d<c.length;d++)r[s++]=c[d]}),new pu(r,!0)}}uploadData(){return this.data_}}function tO(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function kz(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function gU(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Yz(n,e){return e}class oo{constructor(e,t,i,r){this.server=e,this.local=t||e,this.writable=!!i,this.xform=r||Yz}}let wD=null;function Ob(){if(wD)return wD;const n=[];n.push(new oo("bucket")),n.push(new oo("generation")),n.push(new oo("metageneration")),n.push(new oo("name","fullPath",!0));const t=new oo("name");t.xform=function e(s,c){return function Qz(n){return!vD(n)||n.length<2?n:gU(n)}(c)},n.push(t);const r=new oo("size");return r.xform=function i(s,c){return void 0!==c?Number(c):c},n.push(r),n.push(new oo("timeCreated")),n.push(new oo("updated")),n.push(new oo("md5Hash",null,!0)),n.push(new oo("cacheControl",null,!0)),n.push(new oo("contentDisposition",null,!0)),n.push(new oo("contentEncoding",null,!0)),n.push(new oo("contentLanguage",null,!0)),n.push(new oo("contentType",null,!0)),n.push(new oo("metadata","customMetadata",!0)),wD=n,wD}function mU(n,e,t){const i=tO(e);return null===i?null:function Xz(n,e,t){const i={type:"file"},r=t.length;for(let s=0;s<r;s++){const c=t[s];i[c.local]=c.xform(i,e[c.server])}return function Jz(n,e){Object.defineProperty(n,"ref",{get:function t(){const s=new Rs(n.bucket,n.fullPath);return e._makeStorageReference(s)}})}(i,n),i}(n,i,t)}function nO(n,e){const t={},i=e.length;for(let r=0;r<i;r++){const s=e[r];s.writable&&(t[s.server]=n[s.local])}return JSON.stringify(t)}const _U="prefixes";class gu{constructor(e,t,i,r){this.url=e,this.method=t,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mu(n){if(!n)throw YN()}function ED(n,e){return function t(i,r){const s=mU(n,r,e);return mu(null!==s),s}}function ny(n){return function e(t,i){let r;return r=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function wz(){return new Bi("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function bz(){return new Bi("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function vz(n){return new Bi("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function Ez(n){return new Bi("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):i,r.status=t.getStatus(),r.serverResponse=i.serverResponse,r}}function kb(n){const e=ny(n);return function t(i,r){let s=e(i,r);return 404===i.getStatus()&&(s=function yz(n){return new Bi("object-not-found","Object '"+n+"' does not exist.")}(n.path)),s.serverResponse=r.serverResponse,s}}function vU(n,e,t){const r=Dd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new gu(r,"GET",ED(n,t),c);return d.errorHandler=kb(e),d}function sq(n,e,t,i,r){const s={};s.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(s.delimiter=t),i&&(s.pageToken=i),r&&(s.maxResults=r);const d=Dd(e.bucketOnlyServerUrl(),n.host,n._protocol),y=n.maxOperationRetryTime,w=new gu(d,"GET",function iq(n,e){return function t(i,r){const s=function nq(n,e,t){const i=tO(t);return null===i?null:function tq(n,e,t){const i={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[_U])for(const r of t[_U]){const s=r.replace(/\/$/,""),c=n._makeStorageReference(new Rs(e,s));i.prefixes.push(c)}if(t.items)for(const r of t.items){const s=n._makeStorageReference(new Rs(e,r.name));i.items.push(s)}return i}(n,e,i)}(n,e,r);return mu(null!==s),s}}(n,e.bucket),y);return w.urlParams=s,w.errorHandler=ny(e),w}function wU(n,e,t){const i=Object.assign({},t);return i.fullPath=n.path,i.size=e.size(),i.contentType||(i.contentType=function cq(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),i}class CD{constructor(e,t,i,r){this.current=e,this.total=t,this.finalized=!!i,this.metadata=r||null}}function iO(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(r){mu(!1)}return mu(!!t&&-1!==(e||["active"]).indexOf(t)),t}const fq={STATE_CHANGED:"state_changed"},ao={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function rO(n){switch(n){case"running":case"pausing":case"canceling":return ao.RUNNING;case"paused":return ao.PAUSED;case"success":return ao.SUCCESS;case"canceled":return ao.CANCELED;default:return ao.ERROR}}class pq{constructor(e,t,i){if(function Oz(n){return"function"==typeof n}(e)||null!=t||null!=i)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=i?i:void 0;else{const s=e;this.next=s.next,this.error=s.error,this.complete=s.complete}}}function iy(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class mq extends class gq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=yf.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=yf.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=yf.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,i,r){if(this.sent_)throw Nb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return void 0!==i?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Nb("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Nb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Nb("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Nb("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function ic(){return new mq}class DU{constructor(e,t,i=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=i,this._mappings=Ob(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=r=>{if(this._request=void 0,this._chunkMultiplier=1,r._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const s=this.isExponentialBackoffExpired();if(dU(r.status,[])){if(!s)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();r=rU()}this._error=r,this._transition("error")}},this._metadataErrorHandler=r=>{this._request=void 0,r._codeEquals("canceled")?this.completeTransitions_():(this._error=r,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((r,s)=>{this._resolve=r,this._reject=s,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,i])=>{switch(this._state){case"running":e(t,i);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const i=function uq(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c=wU(e,i,r),d={name:c.fullPath},f=Dd(s,n.host,n._protocol),w={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${i.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},T=nO(c,t),F=new gu(f,"POST",function O(G){let Q;iO(G);try{Q=G.getResponseHeader("X-Goog-Upload-URL")}catch(pe){mu(!1)}return mu(vD(Q)),Q},n.maxUploadRetryTime);return F.urlParams=d,F.headers=w,F.body=T,F.errorHandler=ny(e),F}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ic,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._uploadUrl=s,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,i)=>{const r=function dq(n,e,t,i){const f=new gu(t,"POST",function s(y){const w=iO(y,["active","final"]);let T=null;try{T=y.getResponseHeader("X-Goog-Upload-Size-Received")}catch(O){mu(!1)}T||mu(!1);const x=Number(T);return mu(!isNaN(x)),new CD(x,i.size(),"final"===w)},n.maxUploadRetryTime);return f.headers={"X-Goog-Upload-Command":"query"},f.errorHandler=ny(e),f}(this._ref.storage,this._ref._location,e,this._blob),s=this._ref.storage._makeRequest(r,ic,t,i);this._request=s,s.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new CD(this._transferred,this._blob.size()),i=this._uploadUrl;this._resolveToken((r,s)=>{let c;try{c=function hq(n,e,t,i,r,s,c,d){const f=new CD(0,0);if(c?(f.current=c.current,f.total=c.total):(f.current=0,f.total=i.size()),i.size()!==f.total)throw function Iz(){return new Bi("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const y=f.total-f.current;let w=y;r>0&&(w=Math.min(w,r));const T=f.current;let O="";O=0===w?"finalize":y===w?"upload, finalize":"upload";const F={"X-Goog-Upload-Command":O,"X-Goog-Upload-Offset":`${f.current}`},G=i.slice(T,T+w);if(null===G)throw oU();const ke=new gu(t,"POST",function Q(Ae,Be){const We=iO(Ae,["active","final"]),ft=f.current+w,Bt=i.size();let In;return In="final"===We?ED(e,s)(Ae,Be):null,new CD(ft,Bt,"final"===We,In)},e.maxUploadRetryTime);return ke.headers=F,ke.body=G.uploadData(),ke.progressCallback=d||null,ke.errorHandler=ny(n),ke}(this._ref._location,this._ref.storage,i,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(f){return this._error=f,void this._transition("error")}const d=this._ref.storage._makeRequest(c,ic,r,s,!1);this._request=d,d.getPromise().then(f=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(f.current),f.finalized?(this._metadata=f.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const i=vU(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(i,ic,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const i=function EU(n,e,t,i,r){const s=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},f=function d(){let ke="";for(let Ae=0;Ae<2;Ae++)ke+=Math.random().toString().slice(2);return ke}();c["Content-Type"]="multipart/related; boundary="+f;const y=wU(e,i,r),w=nO(y,t),O=pu.getBlob("--"+f+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+w+"\r\n--"+f+"\r\nContent-Type: "+y.contentType+"\r\n\r\n",i,"\r\n--"+f+"--");if(null===O)throw oU();const F={name:y.fullPath},G=Dd(s,n.host,n._protocol),pe=n.maxUploadRetryTime,Se=new gu(G,"POST",ED(n,t),pe);return Se.urlParams=F,Se.headers=c,Se.body=O.uploadData(),Se.errorHandler=ny(e),Se}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(i,ic,e,t);this._request=r,r.getPromise().then(s=>{this._request=void 0,this._metadata=s,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=sU(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=rO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,i,r){const s=new pq(t||void 0,i||void 0,r||void 0);return this._addObserver(s),()=>{this._removeObserver(s)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(rO(this._state)){case ao.SUCCESS:iy(this._resolve.bind(null,this.snapshot))();break;case ao.CANCELED:case ao.ERROR:iy(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(rO(this._state)){case ao.RUNNING:case ao.PAUSED:e.next&&iy(e.next.bind(e,this.snapshot))();break;case ao.SUCCESS:e.complete&&iy(e.complete.bind(e))();break;default:e.error&&iy(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class cg{constructor(e,t){this._service=e,this._location=t instanceof Rs?t:Rs.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new cg(e,t)}get root(){const e=new Rs(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return gU(this._location.path)}get storage(){return this._service}get parent(){const e=function Zz(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Rs(this._location.bucket,e);return new cg(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw lU(e)}}function SU(n,e,t){return sO.apply(this,arguments)}function sO(){return(sO=(0,Ee.Z)(function*(n,e,t){const r=yield AU(n,{pageToken:t});e.prefixes.push(...r.prefixes),e.items.push(...r.items),null!=r.nextPageToken&&(yield SU(n,e,r.nextPageToken))})).apply(this,arguments)}function AU(n,e){null!=e&&"number"==typeof e.maxResults&&JN("options.maxResults",1,1e3,e.maxResults);const t=e||{},i=sq(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(i,ic)}function Aq(n){n._throwIfRoot("getDownloadURL");const e=function oq(n,e,t){const r=Dd(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,d=new gu(r,"GET",function rq(n,e){return function t(i,r){const s=mU(n,r,e);return mu(null!==s),function eq(n,e,t,i){const r=tO(e);if(null===r||!vD(r.downloadTokens))return null;const s=r.downloadTokens;if(0===s.length)return null;const c=encodeURIComponent;return s.split(",").map(y=>{const T=n.fullPath;return Dd("/b/"+c(n.bucket)+"/o/"+c(T),t,i)+uU({alt:"media",token:y})})[0]}(s,r,n.host,n._protocol)}}(n,t),c);return d.errorHandler=kb(e),d}(n.storage,n._location,Ob());return n.storage.makeRequestWithTokens(e,ic).then(t=>{if(null===t)throw function Sz(){return new Bi("no-download-url","The given file does not have any download URLs.")}();return t})}function xU(n,e){const t=function Kz(n,e){const t=e.split("/").filter(i=>i.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),i=new Rs(n._location.bucket,t);return new cg(n.storage,i)}function MU(n,e){if(n instanceof oO){const t=n;if(null==t._bucket)throw function Dz(){return new Bi("no-default-bucket","No default bucket found. Did you set the '"+iU+"' property when initializing the app?")}();const i=new cg(t,t._bucket);return null!=e?MU(i,e):i}return void 0!==e?xU(n,e):n}function Oq(n,e){if(e&&function Mq(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof oO)return function Nq(n,e){return new cg(n,e)}(n,e);throw ty("To use ref(service, url), the first argument must be a Storage instance.")}return MU(n,e)}function NU(n,e){const t=null==e?void 0:e[iU];return null==t?null:Rs.makeFromBucketSpec(t,n)}class oO{constructor(e,t,i,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=nU,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Rs.makeFromBucketSpec(r,this._host):NU(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Rs.makeFromBucketSpec(this._url,e):NU(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){JN("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const i=yield t.getToken();if(null!==i)return i.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cg(this,e)}_makeRequest(e,t,i,r,s=!0){if(this._deleted)return new Az(aU());{const c=function Uz(n,e,t,i,r,s,c=!0){const d=uU(n.urlParams),f=n.url+d,y=Object.assign({},n.headers);return function Lz(n,e){e&&(n["X-Firebase-GMPID"]=e)}(y,e),function Pz(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(y,t),function Fz(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(y,s),function Bz(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(y,i),new Rz(f,n.method,y,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,r,c)}(e,this._appId,i,r,t,this._firebaseVersion,s);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var i=this;return(0,Ee.Z)(function*(){const[r,s]=yield Promise.all([i._getAuthToken(),i._getAppCheckToken()]);return i._makeRequest(e,t,r,s).getPromise()})()}}const OU="@firebase/storage";function PU(n,e){return Oq(n=(0,L.m9)(n),e)}function Hq(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),r=n.getProvider("app-check-internal");return new oO(t,i,r,e,ro.SDK_VERSION)}!function Gq(){(0,ro._registerComponent)(new tc.wA("storage",Hq,"PUBLIC").setMultipleInstances(!0)),(0,ro.registerVersion)(OU,"0.9.13",""),(0,ro.registerVersion)(OU,"0.9.13","esm2017")}();class TD{constructor(e,t,i){this._delegate=e,this.task=t,this.ref=i}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class LU{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new TD(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(i=>{if(e)return e(new TD(i,this,this._ref))},t)}on(e,t,i,r){let s;return t&&(s="function"==typeof t?c=>t(new TD(c,this,this._ref)):{next:t.next?c=>t.next(new TD(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,s,i||void 0,r||void 0)}}class BU{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Id(e,this._service))}get items(){return this._delegate.items.map(e=>new Id(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Id{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function jq(n,e){return xU(n,e)}(this._delegate,e);return new Id(t,this.storage)}get root(){return new Id(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Id(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new LU(function Rq(n,e,t){return function Cq(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new DU(n,new pu(e),t)}(n=(0,L.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=Fa.RAW,i){this._throwIfRoot("putString");const r=eO(t,e),s=Object.assign({},i);return null==s.contentType&&null!=r.contentType&&(s.contentType=r.contentType),new LU(new DU(this._delegate,new pu(r.data,!0),s),this)}listAll(){return function Bq(n){return function Dq(n){const e={prefixes:[],items:[]};return SU(n,e).then(()=>e)}(n=(0,L.m9)(n))}(this._delegate).then(e=>new BU(e,this.storage))}list(e){return function Lq(n,e){return AU(n=(0,L.m9)(n),e)}(this._delegate,e||void 0).then(t=>new BU(t,this.storage))}getMetadata(){return function Pq(n){return function Iq(n){n._throwIfRoot("getMetadata");const e=vU(n.storage,n._location,Ob());return n.storage.makeRequestWithTokens(e,ic)}(n=(0,L.m9)(n))}(this._delegate)}updateMetadata(e){return function Fq(n,e){return function Sq(n,e){n._throwIfRoot("updateMetadata");const t=function aq(n,e,t,i){const s=Dd(e.fullServerUrl(),n.host,n._protocol),d=nO(t,i),y=n.maxOperationRetryTime,w=new gu(s,"PATCH",ED(n,i),y);return w.headers={"Content-Type":"application/json; charset=utf-8"},w.body=d,w.errorHandler=kb(e),w}(n.storage,n._location,e,Ob());return n.storage.makeRequestWithTokens(t,ic)}(n=(0,L.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function Uq(n){return Aq(n=(0,L.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Vq(n){return function xq(n){n._throwIfRoot("deleteObject");const e=function lq(n,e){const i=Dd(e.fullServerUrl(),n.host,n._protocol),d=new gu(i,"DELETE",function c(f,y){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=kb(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,ic)}(n=(0,L.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw lU(e)}}class UU{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(VU(e))throw ty("ref() expected a child path but got a URL, use refFromURL instead.");return new Id(PU(this._delegate,e),this)}refFromURL(e){if(!VU(e))throw ty("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Rs.makeFromUrl(e,this._delegate.host)}catch(t){throw ty("refFromUrl() expected a valid full URL but got an invalid one.")}return new Id(PU(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,i={}){!function FU(n,e,t,i={}){!function kq(n,e,t,i={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken="string"==typeof r?r:(0,L.Sg)(r,n.app.options.projectId))}(n,e,t,i)}(this._delegate,e,t,i)}}function VU(n){return/^[A-Za-z]+:\/\//.test(n)}function qq(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),i=n.getProvider("storage").getImmediate({identifier:e});return new UU(t,i)}function jU(n){const e=function Kq(n){return new yn.y(e=>{const t=c=>e.next(c);t(n.snapshot);const s=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){s()}}).pipe(function pz(n,e=zm.z){return(0,$n.e)((t,i)=>{let r=null,s=null,c=null;const d=()=>{if(r){r.unsubscribe(),r=null;const y=s;s=null,i.next(y)}};function f(){const y=c+n,w=e.now();if(w<y)return r=this.schedule(void 0,y-w),void i.add(r);d()}t.subscribe((0,Un.x)(i,y=>{s=y,c=e.now(),r||(r=e.schedule(f,n),i.add(r))},()=>{d(),i.complete()},void 0,()=>{s=r=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,ut.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function DD(n){return{getDownloadURL:()=>ct(void 0).pipe(Mn.fc,Rn(()=>n.getDownloadURL()),Mn.iC),getMetadata:()=>ct(void 0).pipe(Mn.fc,Rn(()=>n.getMetadata()),Mn.iC),delete:()=>(0,An.D)(n.delete()),child:e=>DD(n.child(e)),updateMetadata:e=>(0,An.D)(n.updateMetadata(e)),put:(e,t)=>jU(n.put(e,t)),putString:(e,t,i)=>jU(n.putString(e,t,i)),list:e=>(0,An.D)(n.list(e)),listAll:()=>(0,An.D)(n.listAll())}}!function Zq(n){const e={TaskState:ao,TaskEvent:fq,StringFormat:Fa,Storage:UU,Reference:Id};n.INTERNAL.registerComponent(new tc.wA("storage-compat",qq,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.21")}(ZN.Z);const Yq=new l.OlP("angularfire2.storageBucket"),Qq=new l.OlP("angularfire2.storage.maxUploadRetryTime"),Jq=new l.OlP("angularfire2.storage.maxOperationRetryTime"),Xq=new l.OlP("angularfire2.storage.use-emulator");let eZ=(()=>{class n{constructor(t,i,r,s,c,d,f,y,w,T){const x=(0,Sr.on)(t,c,i);this.storage=(0,Sr.cc)(`${x.name}.storage.${r}`,"AngularFireStorage",x.name,()=>{const O=c.runOutsideAngular(()=>x.storage(r||void 0)),F=w;return F&&O.useEmulator(...F),f&&O.setMaxUploadRetryTime(f),y&&O.setMaxOperationRetryTime(y),O},[f,y])}ref(t){return DD(this.storage.ref(t))}refFromURL(t){return DD(this.storage.refFromURL(t))}upload(t,i,r){return DD(this.storage.ref(t)).put(i,r)}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Sr.Dh),l.LFG(Sr.xv,8),l.LFG(Yq,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(Qq,8),l.LFG(Jq,8),l.LFG(Xq,8),l.LFG(xb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),tZ=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({}),n})(),nZ=(()=>{class n{constructor(){_D.Z.registerVersion("angularfire",Mn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[eZ],imports:[tZ]}),n})();function aO(){return(0,$n.e)((n,e)=>{let t,i=!1;n.subscribe((0,Un.x)(e,r=>{const s=t;t=r,i&&e.next([s,r]),i=!0}))})}B(1277);var Ct,iZ="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Sd={},lO=lO||{},Ht=iZ||self;function ID(){}function SD(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function Rb(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var cO="closure_uid_"+(1e9*Math.random()>>>0),sZ=0;function oZ(n,e,t){return n.call.apply(n.bind,arguments)}function aZ(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,i),n.apply(e,r)}}return function(){return n.apply(e,arguments)}}function Ps(n,e,t){return(Ps=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?oZ:aZ).apply(null,arguments)}function AD(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function os(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,r,s){for(var c=Array(arguments.length-2),d=2;d<arguments.length;d++)c[d-2]=arguments[d];return e.prototype[r].apply(i,c)}}function vf(){this.s=this.s,this.o=this.o}vf.prototype.s=!1,vf.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function rZ(n){Object.prototype.hasOwnProperty.call(n,cO)&&n[cO]||(n[cO]=++sZ)}(this)},vf.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const HU=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function uO(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function GU(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(SD(i)){const r=n.length||0,s=i.length||0;n.length=r+s;for(let c=0;c<s;c++)n[r+c]=i[c]}else n.push(i)}}function Fs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Fs.prototype.h=function(){this.defaultPrevented=!0};var cZ=function(){if(!Ht.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Ht.addEventListener("test",ID,e),Ht.removeEventListener("test",ID,e)}catch(t){}return n}();function xD(n){return/^[\s\xa0]*$/.test(n)}var $U=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function dO(n,e){return n<e?-1:n>e?1:0}function MD(){var n=Ht.navigator;return n&&(n=n.userAgent)?n:""}function _u(n){return-1!=MD().indexOf(n)}function hO(n){return hO[" "](n),n}hO[" "]=ID;var ND,n,dZ=_u("Opera"),ry=_u("Trident")||_u("MSIE"),WU=_u("Edge"),fO=WU||ry,zU=_u("Gecko")&&!(-1!=MD().toLowerCase().indexOf("webkit")&&!_u("Edge"))&&!(_u("Trident")||_u("MSIE"))&&!_u("Edge"),hZ=-1!=MD().toLowerCase().indexOf("webkit")&&!_u("Edge");function qU(){var n=Ht.document;return n?n.documentMode:void 0}e:{var pO="",gO=(n=MD(),zU?/rv:([^\);]+)(\)|;)/.exec(n):WU?/Edge\/([\d\.]+)/.exec(n):ry?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):hZ?/WebKit\/(\S+)/.exec(n):dZ?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(gO&&(pO=gO?gO[1]:""),ry){var mO=qU();if(null!=mO&&mO>parseFloat(pO)){ND=String(mO);break e}}ND=pO}var fZ={};var gZ=Ht.document&&ry&&(qU()||parseInt(ND,10))||void 0;function Pb(n,e){if(Fs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zU){e:{try{hO(e.nodeName);var r=!0;break e}catch(s){}r=!1}r||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:mZ[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Pb.X.h.call(this)}}os(Pb,Fs);var mZ={2:"touch",3:"pen",4:"mouse"};Pb.prototype.h=function(){Pb.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fb="closure_listenable_"+(1e6*Math.random()|0),_Z=0;function yZ(n,e,t,i,r){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=r,this.key=++_Z,this.ba=this.ea=!1}function OD(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function yO(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function KU(n){const e={};for(const t in n)e[t]=n[t];return e}const YU="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function QU(n,e){let t,i;for(let r=1;r<arguments.length;r++){for(t in i=arguments[r],i)n[t]=i[t];for(let s=0;s<YU.length;s++)t=YU[s],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function kD(n){this.src=n,this.g={},this.h=0}function vO(n,e){var t=e.type;if(t in n.g){var s,i=n.g[t],r=HU(i,e);(s=0<=r)&&Array.prototype.splice.call(i,r,1),s&&(OD(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function bO(n,e,t,i){for(var r=0;r<n.length;++r){var s=n[r];if(!s.ba&&s.listener==e&&s.capture==!!t&&s.ha==i)return r}return-1}kD.prototype.add=function(n,e,t,i,r){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var c=bO(n,e,i,r);return-1<c?(e=n[c],t||(e.ea=!1)):((e=new yZ(e,this.src,s,!!i,r)).ea=t,n.push(e)),e};var wO="closure_lm_"+(1e6*Math.random()|0),EO={};function JU(n,e,t,i,r){if(i&&i.once)return eV(n,e,t,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)JU(n,e[s],t,i,r);return null}return t=IO(t),n&&n[Fb]?n.N(e,t,Rb(i)?!!i.capture:!!i,r):XU(n,e,t,!1,i,r)}function XU(n,e,t,i,r,s){if(!e)throw Error("Invalid event type");var c=Rb(r)?!!r.capture:!!r,d=TO(n);if(d||(n[wO]=d=new kD(n)),(t=d.add(e,t,i,c,s)).proxy)return t;if(i=function vZ(){const e=bZ;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)cZ||(r=c),void 0===r&&(r=!1),n.addEventListener(e.toString(),i,r);else if(n.attachEvent)n.attachEvent(nV(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function eV(n,e,t,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)eV(n,e[s],t,i,r);return null}return t=IO(t),n&&n[Fb]?n.O(e,t,Rb(i)?!!i.capture:!!i,r):XU(n,e,t,!0,i,r)}function tV(n,e,t,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)tV(n,e[s],t,i,r);else i=Rb(i)?!!i.capture:!!i,t=IO(t),n&&n[Fb]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=bO(s=n.g[e],t,i,r))&&(OD(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=TO(n))&&(e=n.g[e.toString()],n=-1,e&&(n=bO(e,t,i,r)),(t=-1<n?e[n]:null)&&CO(t))}function CO(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Fb])vO(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(nV(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=TO(e))?(vO(t,n),0==t.h&&(t.src=null,e[wO]=null)):OD(n)}}}function nV(n){return n in EO?EO[n]:EO[n]="on"+n}function bZ(n,e){if(n.ba)n=!0;else{e=new Pb(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&CO(n),n=t.call(i,e)}return n}function TO(n){return(n=n[wO])instanceof kD?n:null}var DO="__closure_events_fn_"+(1e9*Math.random()>>>0);function IO(n){return"function"==typeof n?n:(n[DO]||(n[DO]=function(e){return n.handleEvent(e)}),n[DO])}function Hr(){vf.call(this),this.i=new kD(this),this.P=this,this.I=null}function as(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Fs(e,n);else if(e instanceof Fs)e.target=e.target||n;else{var r=e;QU(e=new Fs(i,n),r)}if(r=!0,t)for(var s=t.length-1;0<=s;s--){var c=e.g=t[s];r=RD(c,i,!0,e)&&r}if(r=RD(c=e.g=n,i,!0,e)&&r,r=RD(c,i,!1,e)&&r,t)for(s=0;s<t.length;s++)r=RD(c=e.g=t[s],i,!1,e)&&r}function RD(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var c=e[s];if(c&&!c.ba&&c.capture==t){var d=c.listener,f=c.ha||c.src;c.ea&&vO(n.i,c),r=!1!==d.call(f,i)&&r}}return r&&!i.defaultPrevented}os(Hr,vf),Hr.prototype[Fb]=!0,Hr.prototype.removeEventListener=function(n,e,t,i){tV(this,n,e,t,i)},Hr.prototype.M=function(){if(Hr.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)OD(t[i]);delete n.g[e],n.h--}}this.I=null},Hr.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},Hr.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var SO=Ht.JSON.stringify;function wZ(){var n=sV;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var AO,iV=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new CZ,n=>n.reset());class CZ{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function TZ(n){Ht.setTimeout(()=>{throw n},0)}function rV(n,e){AO||function DZ(){var n=Ht.Promise.resolve(void 0);AO=function(){n.then(IZ)}}(),xO||(AO(),xO=!0),sV.add(n,e)}var xO=!1,sV=new class EZ{constructor(){this.h=this.g=null}add(e,t){const i=iV.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function IZ(){for(var n;n=wZ();){try{n.h.call(n.g)}catch(t){TZ(t)}var e=iV;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}xO=!1}function PD(n,e){Hr.call(this),this.h=n||1,this.g=e||Ht,this.j=Ps(this.lb,this),this.l=Date.now()}function MO(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function NO(n,e,t){if("function"==typeof n)t&&(n=Ps(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ps(n.handleEvent,n)}return 2147483647<Number(e)?-1:Ht.setTimeout(n,e||0)}function oV(n){n.g=NO(()=>{n.g=null,n.i&&(n.i=!1,oV(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}os(PD,Hr),(Ct=PD.prototype).ca=!1,Ct.R=null,Ct.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),as(this,"tick"),this.ca&&(MO(this),this.start()))}},Ct.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ct.M=function(){PD.X.M.call(this),MO(this),delete this.g};class SZ extends vf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:oV(this)}M(){super.M(),this.g&&(Ht.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Lb(n){vf.call(this),this.h=n,this.g={}}os(Lb,vf);var aV=[];function lV(n,e,t,i){Array.isArray(t)||(t&&(aV[0]=t.toString()),t=aV);for(var r=0;r<t.length;r++){var s=JU(e,t[r],i||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function cV(n){yO(n.g,function(e,t){this.g.hasOwnProperty(t)&&CO(e)},n),n.g={}}function FD(){this.g=!0}function sy(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function NZ(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var c=1;c<r.length;c++)r[c]=""}}}return SO(t)}catch(d){return e}}(n,t)+(i?" "+i:"")})}Lb.prototype.M=function(){Lb.X.M.call(this),cV(this)},Lb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},FD.prototype.Aa=function(){this.g=!1},FD.prototype.info=function(){};var ug={},uV=null;function LD(){return uV=uV||new Hr}function dV(n){Fs.call(this,ug.Pa,n)}function Bb(n){const e=LD();as(e,new dV(e))}function hV(n,e){Fs.call(this,ug.STAT_EVENT,n),this.stat=e}function lo(n){const e=LD();as(e,new hV(e,n))}function fV(n,e){Fs.call(this,ug.Qa,n),this.size=e}function Ub(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Ht.setTimeout(function(){n()},e)}ug.Pa="serverreachability",os(dV,Fs),ug.STAT_EVENT="statevent",os(hV,Fs),ug.Qa="timingevent",os(fV,Fs);var BD={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},pV={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function OO(){}function mV(){}OO.prototype.h=null;var PO,Vb={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function kO(){Fs.call(this,"d")}function RO(){Fs.call(this,"c")}function UD(){}function jb(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new Lb(this),this.O=OZ,this.T=new PD(n=fO?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new _V}function _V(){this.i=null,this.g="",this.h=!1}os(kO,Fs),os(RO,Fs),os(UD,OO),UD.prototype.g=function(){return new XMLHttpRequest},UD.prototype.i=function(){return{}},PO=new UD;var OZ=45e3,FO={},VD={};function LO(n,e,t){n.K=1,n.v=$D(Ad(e)),n.s=t,n.P=!0,yV(n,null)}function yV(n,e){n.F=Date.now(),Hb(n),n.A=Ad(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),AV(t.i,"t",i),n.C=0,t=n.l.H,n.h=new _V,n.g=JV(n.l,t?e:null,!n.s),0<n.N&&(n.L=new SZ(Ps(n.La,n,n.g),n.N)),lV(n.S,n.g,"readystatechange",n.ib),e=n.H?KU(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Bb(),function AZ(n,e,t,i,r,s){n.info(function(){if(n.g)if(s)for(var c="",d=s.split("&"),f=0;f<d.length;f++){var y=d[f].split("=");if(1<y.length){var w=y[0];y=y[1];var T=w.split("_");c=2<=T.length&&"type"==T[1]?c+(w+"=")+y+"&":c+(w+"=redacted&")}}else c=null;else c=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.U,n.s)}function vV(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function bV(n,e,t){let r,i=!0;for(;!n.I&&n.C<t.length;){if(r=kZ(n,t),r==VD){4==e&&(n.o=4,lo(14),i=!1),sy(n.j,n.m,null,"[Incomplete Response]");break}if(r==FO){n.o=4,lo(15),sy(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}sy(n.j,n.m,r,null),BO(n,r)}vV(n)&&r!=VD&&r!=FO&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,lo(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),zO(e),e.K=!0,lo(11))):(sy(n.j,n.m,t,"[Invalid Chunked Response]"),dg(n),Gb(n))}function kZ(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?VD:(t=Number(e.substring(t,i)),isNaN(t)?FO:(i+=1)+t>e.length?VD:(e=e.substr(i,t),n.C=i+t,e))}function Hb(n){n.V=Date.now()+n.O,wV(n,n.O)}function wV(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Ub(Ps(n.gb,n),e)}function jD(n){n.B&&(Ht.clearTimeout(n.B),n.B=null)}function Gb(n){0==n.l.G||n.I||ZV(n.l,n)}function dg(n){jD(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,MO(n.T),cV(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function BO(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||UO(t.h,n)))if(!n.J&&UO(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch(y){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0])e:if(t.u)t.Ba=r[1],0<t.Ba-t.T&&37500>r[2]&&t.L&&0==t.A&&!t.v&&(t.v=Ub(Ps(t.cb,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;YD(t),ZD(t)}WO(t),lo(18)}if(1>=NV(t.h)&&t.ja){try{t.ja()}catch(y){}t.ja=void 0}}else fg(t,11)}else if((n.J||t.g==n)&&YD(t),!xD(e))for(r=t.Fa.g.parse(e),e=0;e<r.length;e++){let y=r[e];if(t.T=y[0],y=y[1],2==t.G)if("c"==y[0]){t.I=y[1],t.ka=y[2];const w=y[3];null!=w&&(t.ma=w,t.j.info("VER="+t.ma));const T=y[4];null!=T&&(t.Ca=T,t.j.info("SVER="+t.Ca));const x=y[5];null!=x&&"number"==typeof x&&0<x&&(t.J=i=1.5*x,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const O=n.g;if(O){const F=O.g?O.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(F){var s=i.h;s.g||-1==F.indexOf("spdy")&&-1==F.indexOf("quic")&&-1==F.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(VO(s,s.h),s.h=null))}if(i.D){const G=O.g?O.g.getResponseHeader("X-HTTP-Session-Id"):null;G&&(i.za=G,yi(i.F,i.D,G))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var c=n;if((i=t).sa=QV(i,i.H?i.ka:null,i.V),c.J){OV(i.h,c);var d=c,f=i.J;f&&d.setTimeout(f),d.B&&(jD(d),Hb(d)),i.g=c}else zV(i);0<t.i.length&&KD(t)}else"stop"!=y[0]&&"close"!=y[0]||fg(t,7);else 3==t.G&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?fg(t,7):$O(t):"noop"!=y[0]&&t.l&&t.l.wa(y),t.A=0)}Bb()}catch(y){}}function EV(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(SD(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function PZ(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if("undefined"!=typeof Map&&n instanceof Map)return Array.from(n.keys());if(!("undefined"!=typeof Set&&n instanceof Set)){if(SD(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function RZ(n){if(n.W&&"function"==typeof n.W)return n.W();if("undefined"!=typeof Map&&n instanceof Map||"undefined"!=typeof Set&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(SD(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],t&&t[s],n)}(Ct=jb.prototype).setTimeout=function(n){this.O=n},Ct.ib=function(n){n=n.target;const e=this.L;e&&3==xd(n)?e.l():this.La(n)},Ct.La=function(n){try{if(n==this.g)e:{const w=xd(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>w)&&(3!=w||fO||this.g&&(this.h.h||this.g.fa()||VV(this.g)))){this.I||4!=w||7==e||Bb(),jD(this);var t=this.g.aa();this.Y=t;t:if(vV(this)){var i=VV(this.g);n="";var r=i.length,s=4==xd(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){dg(this),Gb(this);var c="";break t}this.h.i=new Ht.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.splice(0,r),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.fa();if(this.i=200==t,function xZ(n,e,t,i,r,s,c){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+t+"\n"+s+" "+c})}(this.j,this.u,this.A,this.m,this.U,w,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var d,f=this.g;if((d=f.g?f.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!xD(d)){var y=d;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,lo(12),dg(this),Gb(this);break e}sy(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,BO(this,t)}this.P?(bV(this,w,c),fO&&this.i&&3==w&&(lV(this.S,this.T,"tick",this.hb),this.T.start())):(sy(this.j,this.m,c,null),BO(this,c)),4==w&&dg(this),this.i&&!this.I&&(4==w?ZV(this.l,this):(this.i=!1,Hb(this)))}else 400==t&&0<c.indexOf("Unknown SID")?(this.o=3,lo(12)):(this.o=0,lo(13)),dg(this),Gb(this)}}}catch(w){}},Ct.hb=function(){if(this.g){var n=xd(this.g),e=this.g.fa();this.C<e.length&&(jD(this),bV(this,n,e),this.i&&4!=n&&Hb(this))}},Ct.cancel=function(){this.I=!0,dg(this)},Ct.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function MZ(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Bb(),lo(17)),dg(this),this.o=2,Gb(this)):wV(this,this.V-n)};var CV=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hg(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof hg){this.h=void 0!==e?e:n.h,HD(this,n.j),this.s=n.s,this.g=n.g,GD(this,n.m),this.l=n.l,e=n.i;var t=new zb;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),TV(this,t),this.o=n.o}else n&&(t=String(n).match(CV))?(this.h=!!e,HD(this,t[1]||"",!0),this.s=$b(t[2]||""),this.g=$b(t[3]||"",!0),GD(this,t[4]),this.l=$b(t[5]||"",!0),TV(this,t[6]||"",!0),this.o=$b(t[7]||"")):(this.h=!!e,this.i=new zb(null,this.h))}function Ad(n){return new hg(n)}function HD(n,e,t){n.j=t?$b(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function GD(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function TV(n,e,t){e instanceof zb?(n.i=e,function HZ(n,e){e&&!n.j&&(bf(n),n.i=null,n.g.forEach(function(t,i){var r=i.toLowerCase();i!=r&&(IV(this,i),AV(this,r,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Wb(e,VZ)),n.i=new zb(e,n.h))}function yi(n,e,t){n.i.set(e,t)}function $D(n){return yi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function $b(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Wb(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,LZ),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function LZ(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}hg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Wb(e,DV,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Wb(e,DV,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Wb(t,"/"==t.charAt(0)?UZ:BZ,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Wb(t,jZ)),n.join("")};var DV=/[#\/\?@]/g,BZ=/[#\?:]/g,UZ=/[#\?]/g,VZ=/[#\?@]/g,jZ=/#/g;function zb(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bf(n){n.g||(n.g=new Map,n.h=0,n.i&&function FZ(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),r=null;if(0<=i){var s=n[t].substring(0,i);r=n[t].substring(i+1)}else s=n[t];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function IV(n,e){bf(n),e=oy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function SV(n,e){return bf(n),e=oy(n,e),n.g.has(e)}function AV(n,e,t){IV(n,e),0<t.length&&(n.i=null,n.g.set(oy(n,e),uO(t)),n.h+=t.length)}function oy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function xV(n){this.l=n||$Z,n=Ht.PerformanceNavigationTiming?0<(n=Ht.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Ht.g&&Ht.g.Ga&&Ht.g.Ga()&&Ht.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ct=zb.prototype).add=function(n,e){bf(this),this.i=null,n=oy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ct.forEach=function(n,e){bf(this),this.g.forEach(function(t,i){t.forEach(function(r){n.call(e,r,i,this)},this)},this)},Ct.oa=function(){bf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const r=n[i];for(let s=0;s<r.length;s++)t.push(e[i])}return t},Ct.W=function(n){bf(this);let e=[];if("string"==typeof n)SV(this,n)&&(e=e.concat(this.g.get(oy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ct.set=function(n,e){return bf(this),this.i=null,SV(this,n=oy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ct.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},Ct.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const s=encodeURIComponent(String(i)),c=this.W(i);for(i=0;i<c.length;i++){var r=s;""!==c[i]&&(r+="="+encodeURIComponent(String(c[i]))),n.push(r)}}return this.i=n.join("&")};var $Z=10;function MV(n){return!!n.h||!!n.g&&n.g.size>=n.j}function NV(n){return n.h?1:n.g?n.g.size:0}function UO(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function VO(n,e){n.g?n.g.add(e):n.h=e}function OV(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function kV(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return uO(n.i)}function jO(){}function WZ(){this.g=new jO}function zZ(n,e,t){const i=t||"";try{EV(n,function(r,s){let c=r;Rb(r)&&(c=SO(r)),e.push(i+s+"="+encodeURIComponent(c))})}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function WD(n,e,t,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function qb(n){this.l=n.ac||null,this.j=n.jb||!1}function zD(n,e){Hr.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=HO,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}xV.prototype.cancel=function(){if(this.i=kV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},jO.prototype.stringify=function(n){return Ht.JSON.stringify(n,void 0)},jO.prototype.parse=function(n){return Ht.JSON.parse(n,void 0)},os(qb,OO),qb.prototype.g=function(){return new zD(this.l,this.j)},qb.prototype.i=function(n){return function(){return n}}({}),os(zD,Hr);var HO=0;function RV(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Zb(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Kb(n)}function Kb(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ct=zD.prototype).open=function(n,e){if(this.readyState!=HO)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Kb(this)},Ct.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Ht).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Ct.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zb(this)),this.readyState=HO},Ct.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Kb(this)),this.g&&(this.readyState=3,Kb(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==Ht.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;RV(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},Ct.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zb(this):Kb(this),3==this.readyState&&RV(this)}},Ct.Va=function(n){this.g&&(this.response=this.responseText=n,Zb(this))},Ct.Ua=function(n){this.g&&(this.response=n,Zb(this))},Ct.ga=function(){this.g&&Zb(this)},Ct.setRequestHeader=function(n,e){this.v.append(n,e)},Ct.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ct.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(zD.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var ZZ=Ht.JSON.parse;function Ui(n){Hr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=PV,this.K=this.L=!1}os(Ui,Hr);var PV="",KZ=/^https?$/i,YZ=["POST","PUT"];function FV(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,LV(n),qD(n)}function LV(n){n.D||(n.D=!0,as(n,"complete"),as(n,"error"))}function BV(n){if(n.h&&void 0!==lO&&(!n.C[1]||4!=xd(n)||2!=n.aa()))if(n.v&&4==xd(n))NO(n.Ha,0,n);else if(as(n,"readystatechange"),4==xd(n)){n.h=!1;try{const d=n.aa();e:switch(d){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===d){var r=String(n.H).match(CV)[1]||null;if(!r&&Ht.self&&Ht.self.location){var s=Ht.self.location.protocol;r=s.substr(0,s.length-1)}i=!KZ.test(r?r.toLowerCase():"")}t=i}if(t)as(n,"complete"),as(n,"success");else{n.m=6;try{var c=2<xd(n)?n.g.statusText:""}catch(f){c=""}n.j=c+" ["+n.aa()+"]",LV(n)}}finally{qD(n)}}}function qD(n,e){if(n.g){UV(n);const t=n.g,i=n.C[0]?ID:null;n.g=null,n.C=null,e||as(n,"ready");try{t.onreadystatechange=i}catch(r){}}}function UV(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Ht.clearTimeout(n.A),n.A=null)}function xd(n){return n.g?n.g.readyState:0}function VV(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case PV:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function jV(n){let e="";return yO(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function GO(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=jV(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):yi(n,e,t))}function Yb(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function HV(n){this.Ca=0,this.i=[],this.j=new FD,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Yb("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Yb("baseRetryDelayMs",5e3,n),this.bb=Yb("retryDelaySeedMs",1e4,n),this.$a=Yb("forwardChannelMaxRetries",2,n),this.ta=Yb("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new xV(n&&n.concurrentRequestLimit),this.Fa=new WZ,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function $O(n){if(GV(n),3==n.G){var e=n.U++,t=Ad(n.F);yi(t,"SID",n.I),yi(t,"RID",e),yi(t,"TYPE","terminate"),Qb(n,t),(e=new jb(n,n.j,e,void 0)).K=2,e.v=$D(Ad(t)),t=!1,Ht.navigator&&Ht.navigator.sendBeacon&&(t=Ht.navigator.sendBeacon(e.v.toString(),"")),!t&&Ht.Image&&((new Image).src=e.v,t=!0),t||(e.g=JV(e.l,null),e.g.da(e.v)),e.F=Date.now(),Hb(e)}YV(n)}function ZD(n){n.g&&(zO(n),n.g.cancel(),n.g=null)}function GV(n){ZD(n),n.u&&(Ht.clearTimeout(n.u),n.u=null),YD(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Ht.clearTimeout(n.m),n.m=null)}function KD(n){MV(n.h)||n.m||(n.m=!0,rV(n.Ja,n),n.C=0)}function $V(n,e){var t;t=e?e.m:n.U++;const i=Ad(n.F);yi(i,"SID",n.I),yi(i,"RID",t),yi(i,"AID",n.T),Qb(n,i),n.o&&n.s&&GO(i,n.o,n.s),t=new jb(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=WV(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),VO(n.h,t),LO(t,i,e)}function Qb(n,e){n.ia&&yO(n.ia,function(t,i){yi(e,i,t)}),n.l&&EV({},function(t,i){yi(e,i,t)})}function WV(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Ps(n.l.Ra,n.l,n):null;e:{var r=n.i;let s=-1;for(;;){const c=["count="+t];-1==s?0<t?(s=r[0].h,c.push("ofs="+s)):s=0:c.push("ofs="+s);let d=!0;for(let f=0;f<t;f++){let y=r[f].h;const w=r[f].g;if(y-=s,0>y)s=Math.max(0,r[f].h-100),d=!1;else try{zZ(w,c,"req"+y+"_")}catch(T){i&&i(w)}}if(d){i=c.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function zV(n){n.g||n.u||(n.Z=1,rV(n.Ia,n),n.A=0)}function WO(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Ub(Ps(n.Ia,n),KV(n,n.A)),n.A++,0))}function zO(n){null!=n.B&&(Ht.clearTimeout(n.B),n.B=null)}function qV(n){n.g=new jb(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=Ad(n.sa);yi(e,"RID","rpc"),yi(e,"SID",n.I),yi(e,"CI",n.L?"0":"1"),yi(e,"AID",n.T),yi(e,"TYPE","xmlhttp"),Qb(n,e),n.o&&n.s&&GO(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=$D(Ad(e)),t.s=null,t.P=!0,yV(t,n)}function YD(n){null!=n.v&&(Ht.clearTimeout(n.v),n.v=null)}function ZV(n,e){var t=null;if(n.g==e){YD(n),zO(n),n.g=null;var i=2}else{if(!UO(n.h,e))return;t=e.D,OV(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var r=n.C;as(i=LD(),new fV(i,t)),KD(n)}else zV(n);else if(3==(r=e.o)||0==r&&0<n.pa||!(1==i&&function JZ(n,e){return!(NV(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Ub(Ps(n.Ja,n,e),KV(n,n.C)),n.C++,0)))}(n,e)||2==i&&WO(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),r){case 1:fg(n,5);break;case 4:fg(n,10);break;case 3:fg(n,6);break;default:fg(n,2)}}function KV(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function fg(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Ps(n.kb,n);t||(t=new hg("//www.google.com/images/cleardot.gif"),Ht.location&&"http"==Ht.location.protocol||HD(t,"https"),$D(t)),function qZ(n,e){const t=new FD;if(Ht.Image){const i=new Image;i.onload=AD(WD,t,i,"TestLoadImage: loaded",!0,e),i.onerror=AD(WD,t,i,"TestLoadImage: error",!1,e),i.onabort=AD(WD,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=AD(WD,t,i,"TestLoadImage: timeout",!1,e),Ht.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else lo(2);n.G=0,n.l&&n.l.va(e),YV(n),GV(n)}function YV(n){if(n.G=0,n.la=[],n.l){const e=kV(n.h);(0!=e.length||0!=n.i.length)&&(GU(n.la,e),GU(n.la,n.i),n.h.i.length=0,uO(n.i),n.i.length=0),n.l.ua()}}function QV(n,e,t){var i=t instanceof hg?Ad(t):new hg(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),GD(i,i.m);else{var r=Ht.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new hg(null,void 0);i&&HD(s,i),e&&(s.g=e),r&&GD(s,r),t&&(s.l=t),i=s}return e=n.za,(t=n.D)&&e&&yi(i,t,e),yi(i,"VER",n.ma),Qb(n,i),i}function JV(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Ui(t&&n.Da&&!n.ra?new qb({jb:!0}):n.ra)).Ka(n.H),e}function XV(){}function QD(){if(ry&&!(10<=Number(gZ)))throw Error("Environmental error: no available transport.")}function La(n,e){Hr.call(this),this.g=new HV(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!xD(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!xD(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ay(this)}function ej(n){kO.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function tj(){RO.call(this),this.status=1}function ay(n){this.g=n}(Ct=Ui.prototype).Ka=function(n){this.L=n},Ct.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():PO.g(),this.C=function gV(n){return n.h||(n.h=n.i())}(this.u?this.u:PO),this.g.onreadystatechange=Ps(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(s){return void FV(this,s)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)t.set(r,i[r]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const s of i.keys())t.set(s,i.get(s))}i=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),r=Ht.FormData&&n instanceof Ht.FormData,!(0<=HU(YZ,e))||i||r||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,c]of t)this.g.setRequestHeader(s,c);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{UV(this),0<this.B&&((this.K=function QZ(n){return ry&&function pZ(){return function uZ(n){var e=fZ;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=$U(String(ND)).split("."),t=$U("9").split("."),i=Math.max(e.length,t.length);for(let c=0;0==n&&c<i;c++){var r=e[c]||"",s=t[c]||"";do{if(r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==r[0].length&&0==s[0].length)break;n=dO(0==r[1].length?0:parseInt(r[1],10),0==s[1].length?0:parseInt(s[1],10))||dO(0==r[2].length,0==s[2].length)||dO(r[2],s[2]),r=r[3],s=s[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ps(this.qa,this)):this.A=NO(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){FV(this,s)}},Ct.qa=function(){void 0!==lO&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,as(this,"timeout"),this.abort(8))},Ct.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,as(this,"complete"),as(this,"abort"),qD(this))},Ct.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qD(this,!0)),Ui.X.M.call(this)},Ct.Ha=function(){this.s||(this.F||this.v||this.l?BV(this):this.fb())},Ct.fb=function(){BV(this)},Ct.aa=function(){try{return 2<xd(this)?this.g.status:-1}catch(n){return-1}},Ct.fa=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ct.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),ZZ(e)}},Ct.Ea=function(){return this.m},Ct.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ct=HV.prototype).ma=8,Ct.G=1,Ct.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const r=new jb(this,this.j,n,void 0);let s=this.s;if(this.S&&(s?(s=KU(s),QU(s,this.S)):s=this.S),null!==this.o||this.N||(r.H=s,s=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=WV(this,r,e),yi(t=Ad(this.F),"RID",n),yi(t,"CVER",22),this.D&&yi(t,"X-HTTP-Session-Id",this.D),Qb(this,t),s&&(this.N?e="headers="+encodeURIComponent(String(jV(s)))+"&"+e:this.o&&GO(t,this.o,s)),VO(this.h,r),this.Ya&&yi(t,"TYPE","init"),this.O?(yi(t,"$req",e),yi(t,"SID","null"),r.Z=!0,LO(r,t,null)):LO(r,t,e),this.G=2}}else 3==this.G&&(n?$V(this,n):0==this.i.length||MV(this.h)||$V(this))},Ct.Ia=function(){if(this.u=null,qV(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Ub(Ps(this.eb,this),n)}},Ct.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,lo(10),ZD(this),qV(this))},Ct.cb=function(){null!=this.v&&(this.v=null,ZD(this),WO(this),lo(19))},Ct.kb=function(n){n?(this.j.info("Successfully pinged google.com"),lo(2)):(this.j.info("Failed to ping google.com"),lo(1))},(Ct=XV.prototype).xa=function(){},Ct.wa=function(){},Ct.va=function(){},Ct.ua=function(){},Ct.Ra=function(){},QD.prototype.g=function(n,e){return new La(n,e)},os(La,Hr),La.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;lo(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=QV(n,null,n.V),KD(n)},La.prototype.close=function(){$O(this.g)},La.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=SO(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&KD(e)},La.prototype.M=function(){this.g.l=null,delete this.j,$O(this.g),delete this.g,La.X.M.call(this)},os(ej,kO),os(tj,RO),os(ay,XV),ay.prototype.xa=function(){as(this.g,"a")},ay.prototype.wa=function(n){as(this.g,new ej(n))},ay.prototype.va=function(n){as(this.g,new tj)},ay.prototype.ua=function(){as(this.g,"b")},QD.prototype.createWebChannel=QD.prototype.g,La.prototype.send=La.prototype.u,La.prototype.open=La.prototype.m,La.prototype.close=La.prototype.close,BD.NO_ERROR=0,BD.TIMEOUT=8,BD.HTTP_ERROR=6,pV.COMPLETE="complete",mV.EventType=Vb,Vb.OPEN="a",Vb.CLOSE="b",Vb.ERROR="c",Vb.MESSAGE="d",Hr.prototype.listen=Hr.prototype.N,Ui.prototype.listenOnce=Ui.prototype.O,Ui.prototype.getLastError=Ui.prototype.Oa,Ui.prototype.getLastErrorCode=Ui.prototype.Ea,Ui.prototype.getStatus=Ui.prototype.aa,Ui.prototype.getResponseJson=Ui.prototype.Sa,Ui.prototype.getResponseText=Ui.prototype.fa,Ui.prototype.send=Ui.prototype.da,Ui.prototype.setWithCredentials=Ui.prototype.Ka;var XZ=Sd.createWebChannelTransport=function(){return new QD},e7=Sd.getStatEventTarget=function(){return LD()},qO=Sd.ErrorCode=BD,t7=Sd.EventType=pV,n7=Sd.Event=ug,nj=Sd.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},i7=Sd.FetchXmlHttpFactory=qb,JD=Sd.WebChannel=mV,r7=Sd.XhrIo=Ui;const ij="@firebase/firestore";class Gr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gr.UNAUTHENTICATED=new Gr(null),Gr.GOOGLE_CREDENTIALS=new Gr("google-credentials-uid"),Gr.FIRST_PARTY=new Gr("first-party-uid"),Gr.MOCK_USER=new Gr("mock-user");let ly="9.13.0";const wf=new nc.Yd("@firebase/firestore");function ZO(){return wf.logLevel}function He(n,...e){if(wf.logLevel<=nc.in.DEBUG){const t=e.map(KO);wf.debug(`Firestore (${ly}): ${n}`,...t)}}function er(n,...e){if(wf.logLevel<=nc.in.ERROR){const t=e.map(KO);wf.error(`Firestore (${ly}): ${n}`,...t)}}function pg(n,...e){if(wf.logLevel<=nc.in.WARN){const t=e.map(KO);wf.warn(`Firestore (${ly}): ${n}`,...t)}}function KO(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function gt(n="Unexpected state"){const e=`FIRESTORE (${ly}) INTERNAL ASSERTION FAILED: `+n;throw er(e),new Error(e)}function Ft(n,e){n||gt()}function nt(n,e){return n}const me={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends L.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ar{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class rj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class a7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Gr.UNAUTHENTICATED))}shutdown(){}}class l7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class c7{constructor(e){this.t=e,this.currentUser=Gr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let r=this.i;const s=y=>this.i!==r?(r=this.i,t(y)):Promise.resolve();let c=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new Ar,e.enqueueRetryable(()=>s(this.currentUser))};const d=()=>{const y=c;e.enqueueRetryable((0,Ee.Z)(function*(){yield y.promise,yield s(i.currentUser)}))},f=y=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(y=>f(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?f(y):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new Ar)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ft("string"==typeof i.accessToken),new rj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ft(null===e||"string"==typeof e),new Gr(e)}}class u7{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r,this.type="FirstParty",this.user=Gr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(Ft(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class d7{constructor(e,t,i,r){this.h=e,this.l=t,this.m=i,this.g=r}getToken(){return Promise.resolve(new u7(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Gr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class h7{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=s=>{null!=s.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const c=s.token!==this.A;return this.A=s.token,He("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.T.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.T.getImmediate({optional:!0});s?r(s):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ft("string"==typeof t.token),this.A=t.token,new sj(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function f7(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class oj{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=f7(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function Gt(n,e){return n<e?-1:n>e?1:0}function cy(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}function aj(n){return n+"\0"}class vi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ue(me.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(me.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vi.fromMillis(Date.now())}static fromDate(e){return vi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new vi(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Gt(this.nanoseconds,e.nanoseconds):Gt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Lt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Lt(e)}static min(){return new Lt(new vi(0,0))}static max(){return new Lt(new vi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Jb{constructor(e,t,i){void 0===t?t=0:t>e.length&&gt(),void 0===i?i=e.length-t:i>e.length-t&&gt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Jb.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Jb?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),c=t.get(r);if(s<c)return-1;if(s>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class vn extends Jb{construct(e,t,i){return new vn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ue(me.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new vn(t)}static emptyPath(){return new vn([])}}const p7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vi extends Jb{construct(e,t,i){return new Vi(e,t,i)}static isValidIdentifier(e){return p7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Vi(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(0===i.length)throw new Ue(me.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let c=!1;for(;r<e.length;){const d=e[r];if("\\"===d){if(r+1===e.length)throw new Ue(me.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if("\\"!==f&&"."!==f&&"`"!==f)throw new Ue(me.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else"`"===d?(c=!c,r++):"."!==d||c?(i+=d,r++):(s(),r++)}if(s(),c)throw new Ue(me.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vi(t)}static emptyPath(){return new Vi([])}}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(vn.fromString(e))}static fromName(e){return new Xe(vn.fromString(e).popFirst(5))}static empty(){return new Xe(vn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===vn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return vn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new vn(e.slice()))}}class XD{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function YO(n){return n.fields.find(e=>2===e.kind)}function gg(n){return n.fields.filter(e=>2!==e.kind)}XD.UNKNOWN_ID=-1;class eI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Xb{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Xb(0,Ba.min())}}function lj(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Lt.fromTimestamp(1e9===i?new vi(t+1,0):new vi(t,i));return new Ba(r,Xe.empty(),e)}function cj(n){return new Ba(n.readTime,n.key,-1)}class Ba{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Ba(Lt.min(),Xe.empty(),-1)}static max(){return new Ba(Lt.max(),Xe.empty(),-1)}}function QO(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:Gt(n.largestBatchId,e.largestBatchId))}const uj="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class dj{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ef(n){return JO.apply(this,arguments)}function JO(){return JO=(0,Ee.Z)(function*(n){if(n.code!==me.FAILED_PRECONDITION||n.message!==uj)throw n;He("LocalStore","Unexpectedly lost primary lease")}),JO.apply(this,arguments)}class ue{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&gt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ue((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ue?t:ue.resolve(t)}catch(t){return ue.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ue.reject(t)}static resolve(e){return new ue((t,i)=>{t(e)})}static reject(e){return new ue((t,i)=>{i(e)})}static waitFor(e){return new ue((t,i)=>{let r=0,s=0,c=!1;e.forEach(d=>{++r,d.next(()=>{++s,c&&s===r&&t()},f=>i(f))}),c=!0,s===r&&t()})}static or(e){let t=ue.resolve(!1);for(const i of e)t=t.next(r=>r?ue.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new ue((i,r)=>{const s=e.length,c=new Array(s);let d=0;for(let f=0;f<s;f++){const y=f;t(e[y]).next(w=>{c[y]=w,++d,d===s&&i(c)},w=>r(w))}})}static doWhile(e,t){return new ue((i,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):i()};s()})}}class tI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ar,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new ew(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const r=XO(i.target.error);this.P.reject(new ew(e,r))}}static open(e,t,i,r){try{return new tI(t,e.transaction(r,i))}catch(s){throw new ew(t,s)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new y7(t)}}class rc{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===rc.D((0,L.z$)())&&er("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),mg(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,L.hl)())return!1;if(rc.N())return!0;const e=(0,L.z$)(),t=rc.D(e),i=0<t&&t<10,r=rc.k(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||s)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,r)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=c=>{i(c.target.result)},s.onblocked=()=>{r(new ew(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=c=>{const d=c.target.error;r("VersionError"===d.name?new Ue(me.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Ue(me.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new ew(e,d))},s.onupgradeneeded=c=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.S.$(c.target.result,s.transaction,c.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,r){var s=this;return(0,Ee.Z)(function*(){const c="readonly"===t;let d=0;for(;;){++d;try{s.db=yield s.F(e);const f=tI.open(s.db,e,c?"readonly":"readwrite",i),y=r(f).next(w=>(f.V(),w)).catch(w=>(f.abort(w),ue.reject(w))).toPromise();return y.catch(()=>{}),yield f.v,y}catch(f){const y=f,w="FirebaseError"!==y.name&&d<3;if(He("SimpleDb","Transaction failed with error:",y.message,"Retrying:",w),s.close(),!w)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _7{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return mg(this.U.delete())}}class ew extends Ue{constructor(e,t){super(me.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Cf(n){return"IndexedDbTransactionError"===n.name}class y7{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),mg(i)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),mg(this.store.add(e))}get(e){return mg(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),mg(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),mg(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const r=this.cursor(i),s=[];return this.H(r,(c,d)=>{s.push(d)}).next(()=>s)}{const r=this.store.getAll(i.range);return new ue((s,c)=>{r.onerror=d=>{c(d.target.error)},r.onsuccess=d=>{s(d.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new ue((r,s)=>{i.onerror=c=>{s(c.target.error)},i.onsuccess=c=>{r(c.target.result)}})}Y(e,t){He("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const r=this.cursor(i);return this.H(r,(s,c,d)=>d.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.H(r,t)}tt(e){const t=this.cursor({});return new ue((i,r)=>{t.onerror=s=>{const c=XO(s.target.error);r(c)},t.onsuccess=s=>{const c=s.target.result;c?e(c.primaryKey,c.value).next(d=>{d?c.continue():i()}):i()}})}H(e,t){const i=[];return new ue((r,s)=>{e.onerror=c=>{s(c.target.error)},e.onsuccess=c=>{const d=c.target.result;if(!d)return void r();const f=new _7(d),y=t(d.primaryKey,d.value,f);if(y instanceof ue){const w=y.catch(T=>(f.done(),ue.reject(T)));i.push(w)}f.isDone?r():null===f.G?d.continue():d.continue(f.G)}}).next(()=>ue.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function mg(n){return new ue((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const r=XO(i.target.error);t(r)}})}let hj=!1;function XO(n){const e=rc.D((0,L.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ue("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return hj||(hj=!0,setTimeout(()=>{throw i},0)),i}}return n}class v7{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ee.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Cf(i)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Ef(i)}yield t.nt(6e4)}))}}class b7{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ee.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let r=t,s=!0;return ue.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!i.has(c))return He("IndexBackiller",`Processing collection: ${c}`),this.rt(e,c,r).next(d=>{r-=d,i.add(c)});s=!1})).next(()=>t-r)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next(s=>{const c=s.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.ot(r,s)).next(d=>(He("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>c.size)}))}ot(e,t){let i=e;return t.changes.forEach((r,s)=>{const c=cj(s);QO(c,i)>0&&(i=c)}),new Ba(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ho{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function fj(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _g(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function pj(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Ho.at=-1;class ji{constructor(e,t){this.comparator=e,this.root=t||ls.EMPTY}insert(e,t){return new ji(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ls.BLACK,null,null))}remove(e){return new ji(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ls.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(0===r)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nI(this.root,e,this.comparator,!1)}getReverseIterator(){return new nI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nI(this.root,e,this.comparator,!0)}}class nI{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ls{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=null!=i?i:ls.RED,this.left=null!=r?r:ls.EMPTY,this.right=null!=s?s:ls.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new ls(null!=e?e:this.key,null!=t?t:this.value,null!=i?i:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ls.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ls.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ls.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ls.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw gt();const e=this.left.check();if(e!==this.right.check())throw gt();return e+(this.isRed()?0:1)}}ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new class{constructor(){this.size=0}get key(){throw gt()}get value(){throw gt()}get color(){throw gt()}get left(){throw gt()}get right(){throw gt()}copy(n,e,t,i,r){return this}insert(n,e,t){return new ls(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class qn{constructor(e){this.comparator=e,this.data=new ji(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gj(this.data.getIterator())}getIteratorFrom(e){return new gj(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof qn)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(0!==this.comparator(r,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qn(this.comparator);return t.data=e,t}}class gj{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function uy(n){return n.hasNext()?n.getNext():void 0}class Ua{constructor(e){this.fields=e,e.sort(Vi.comparator)}static empty(){return new Ua([])}unionWith(e){let t=new qn(Vi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ua(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return cy(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class xr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new xr(t)}static fromUint8Array(e){const t=function(i){let r="";for(let s=0;s<i.length;++s)r+=String.fromCharCode(i[s]);return r}(e);return new xr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Gt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}xr.EMPTY_BYTE_STRING=new xr("");const E7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Tf(n){if(Ft(!!n),"string"==typeof n){let e=0;const t=E7.exec(n);if(Ft(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Hi(n.seconds),nanos:Hi(n.nanos)}}function Hi(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function yg(n){return"string"==typeof n?xr.fromBase64String(n):xr.fromUint8Array(n)}function ek(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function mj(n){const e=n.mapValue.fields.__previous_value__;return ek(e)?mj(e):e}function tw(n){const e=Tf(n.mapValue.fields.__local_write_time__.timestampValue);return new vi(e.seconds,e.nanos)}class C7{constructor(e,t,i,r,s,c,d,f){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=c,this.autoDetectLongPolling=d,this.useFetchStreams=f}}class Df{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Df("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Df&&e.projectId===this.projectId&&e.database===this.database}}function nw(n){return null==n}function iw(n){return 0===n&&1/n==-1/0}function _j(n){return"number"==typeof n&&Number.isInteger(n)&&!iw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const If={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},iI={nullValue:"NULL_VALUE"};function vg(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ek(n)?4:wj(n)?9007199254740991:10:gt()}function yu(n,e){if(n===e)return!0;const t=vg(n);if(t!==vg(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return tw(n).isEqual(tw(e));case 3:return function(i,r){if("string"==typeof i.timestampValue&&"string"==typeof r.timestampValue&&i.timestampValue.length===r.timestampValue.length)return i.timestampValue===r.timestampValue;const s=Tf(i.timestampValue),c=Tf(r.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return r=e,yg(n.bytesValue).isEqual(yg(r.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,r){return Hi(i.geoPointValue.latitude)===Hi(r.geoPointValue.latitude)&&Hi(i.geoPointValue.longitude)===Hi(r.geoPointValue.longitude)}(n,e);case 2:return function(i,r){if("integerValue"in i&&"integerValue"in r)return Hi(i.integerValue)===Hi(r.integerValue);if("doubleValue"in i&&"doubleValue"in r){const s=Hi(i.doubleValue),c=Hi(r.doubleValue);return s===c?iw(s)===iw(c):isNaN(s)&&isNaN(c)}return!1}(n,e);case 9:return cy(n.arrayValue.values||[],e.arrayValue.values||[],yu);case 10:return function(i,r){const s=i.mapValue.fields||{},c=r.mapValue.fields||{};if(fj(s)!==fj(c))return!1;for(const d in s)if(s.hasOwnProperty(d)&&(void 0===c[d]||!yu(s[d],c[d])))return!1;return!0}(n,e);default:return gt()}var r}function rw(n,e){return void 0!==(n.values||[]).find(t=>yu(t,e))}function Sf(n,e){if(n===e)return 0;const t=vg(n),i=vg(e);if(t!==i)return Gt(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Gt(n.booleanValue,e.booleanValue);case 2:return function(r,s){const c=Hi(r.integerValue||r.doubleValue),d=Hi(s.integerValue||s.doubleValue);return c<d?-1:c>d?1:c===d?0:isNaN(c)?isNaN(d)?0:-1:1}(n,e);case 3:return yj(n.timestampValue,e.timestampValue);case 4:return yj(tw(n),tw(e));case 5:return Gt(n.stringValue,e.stringValue);case 6:return function(r,s){const c=yg(r),d=yg(s);return c.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(r,s){const c=r.split("/"),d=s.split("/");for(let f=0;f<c.length&&f<d.length;f++){const y=Gt(c[f],d[f]);if(0!==y)return y}return Gt(c.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(r,s){const c=Gt(Hi(r.latitude),Hi(s.latitude));return 0!==c?c:Gt(Hi(r.longitude),Hi(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(r,s){const c=r.values||[],d=s.values||[];for(let f=0;f<c.length&&f<d.length;++f){const y=Sf(c[f],d[f]);if(y)return y}return Gt(c.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(r,s){if(r===If.mapValue&&s===If.mapValue)return 0;if(r===If.mapValue)return 1;if(s===If.mapValue)return-1;const c=r.fields||{},d=Object.keys(c),f=s.fields||{},y=Object.keys(f);d.sort(),y.sort();for(let w=0;w<d.length&&w<y.length;++w){const T=Gt(d[w],y[w]);if(0!==T)return T;const x=Sf(c[d[w]],f[y[w]]);if(0!==x)return x}return Gt(d.length,y.length)}(n.mapValue,e.mapValue);default:throw gt()}}function yj(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Gt(n,e);const t=Tf(n),i=Tf(e),r=Gt(t.seconds,i.seconds);return 0!==r?r:Gt(t.nanos,i.nanos)}function dy(n){return tk(n)}function tk(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const r=Tf(i);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?yg(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let r="[",s=!0;for(const c of i.values||[])s?s=!1:r+=",",r+=tk(c);return r+"]"}(n.arrayValue):"mapValue"in n?function(i){const r=Object.keys(i.fields||{}).sort();let s="{",c=!0;for(const d of r)c?c=!1:s+=",",s+=`${d}:${tk(i.fields[d])}`;return s+"}"}(n.mapValue):gt();var e}function bg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function nk(n){return!!n&&"integerValue"in n}function sw(n){return!!n&&"arrayValue"in n}function vj(n){return!!n&&"nullValue"in n}function bj(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function rI(n){return!!n&&"mapValue"in n}function ow(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return _g(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ow(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ow(n.arrayValue.values[t]);return e}return Object.assign({},n)}function wj(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function T7(n){return"nullValue"in n?iI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?bg(Df.empty(),Xe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:gt()}function D7(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?bg(Df.empty(),Xe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?If:gt()}function Ej(n,e){const t=Sf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Cj(n,e){const t=Sf(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class cs{constructor(e){this.value=e}static empty(){return new cs({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!rI(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ow(t)}setAll(e){let t=Vi.emptyPath(),i={},r=[];e.forEach((c,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=d.popLast()}c?i[d.lastSegment()]=ow(c):r.push(d.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());rI(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return yu(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];rI(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_g(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new cs(ow(this.value))}}function Tj(n){const e=[];return _g(n.fields,(t,i)=>{const r=new Vi([t]);if(rI(i)){const s=Tj(i.mapValue).fields;if(0===s.length)e.push(r);else for(const c of s)e.push(r.child(c))}else e.push(r)}),new Ua(e)}class ii{constructor(e,t,i,r,s,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.data=s,this.documentState=c}static newInvalidDocument(e){return new ii(e,0,Lt.min(),Lt.min(),cs.empty(),0)}static newFoundDocument(e,t,i){return new ii(e,1,t,Lt.min(),i,0)}static newNoDocument(e,t){return new ii(e,2,t,Lt.min(),cs.empty(),0)}static newUnknownDocument(e,t){return new ii(e,3,t,Lt.min(),cs.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=cs.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=cs.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Lt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ii&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ii(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class I7{constructor(e,t=null,i=[],r=[],s=null,c=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=c,this.endAt=d,this.ht=null}}function Dj(n,e=null,t=[],i=[],r=null,s=null,c=null){return new I7(n,e,t,i,r,s,c)}function wg(n){const e=nt(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(r=i).field.canonicalString()+r.op.toString()+dy(r.value);var r}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(r=i).field.canonicalString()+r.dir;var r}).join(","),nw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>dy(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>dy(i)).join(",")),e.ht=t}return e.ht}function aw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<n.orderBy.length;r++)if(!P7(n.orderBy[r],e.orderBy[r]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let r=0;r<n.filters.length;r++)if((t=n.filters[r]).op!==(i=e.filters[r]).op||!t.field.isEqual(i.field)||!yu(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Mj(n.startAt,e.startAt)&&Mj(n.endAt,e.endAt)}function sI(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function oI(n,e){return n.filters.filter(t=>t instanceof us&&t.field.isEqual(e))}function Ij(n,e,t){let i=iI,r=!0;for(const s of oI(n,e)){let c=iI,d=!0;switch(s.op){case"<":case"<=":c=T7(s.value);break;case"==":case"in":case">=":c=s.value;break;case">":c=s.value,d=!1;break;case"!=":case"not-in":c=iI}Ej({value:i,inclusive:r},{value:c,inclusive:d})<0&&(i=c,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];Ej({value:i,inclusive:r},{value:c,inclusive:t.inclusive})<0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}function Sj(n,e,t){let i=If,r=!0;for(const s of oI(n,e)){let c=If,d=!0;switch(s.op){case">=":case">":c=D7(s.value),d=!1;break;case"==":case"in":case"<=":c=s.value;break;case"<":c=s.value,d=!1;break;case"!=":case"not-in":c=If}Cj({value:i,inclusive:r},{value:c,inclusive:d})>0&&(i=c,r=d)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const c=t.position[s];Cj({value:i,inclusive:r},{value:c,inclusive:t.inclusive})>0&&(i=c,r=t.inclusive);break}return{value:i,inclusive:r}}class us extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new A7(e,t,i):"array-contains"===t?new N7(e,i):"in"===t?new O7(e,i):"not-in"===t?new k7(e,i):"array-contains-any"===t?new R7(e,i):new us(e,t,i)}static lt(e,t,i){return"in"===t?new x7(e,i):new M7(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Sf(t,this.value)):null!==t&&vg(this.value)===vg(t)&&this.ft(Sf(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return gt()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class A7 extends us{constructor(e,t,i){super(e,t,i),this.key=Xe.fromName(i.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.ft(t)}}class x7 extends us{constructor(e,t){super(e,"in",t),this.keys=Aj(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class M7 extends us{constructor(e,t){super(e,"not-in",t),this.keys=Aj(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Aj(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>Xe.fromName(i.referenceValue))}class N7 extends us{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return sw(t)&&rw(t.arrayValue,this.value)}}class O7 extends us{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&rw(this.value.arrayValue,t)}}class k7 extends us{constructor(e,t){super(e,"not-in",t)}matches(e){if(rw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!rw(this.value.arrayValue,t)}}class R7 extends us{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!sw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>rw(this.value.arrayValue,i))}}class Af{constructor(e,t){this.position=e,this.inclusive=t}}class hy{constructor(e,t="asc"){this.field=e,this.dir=t}}function P7(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function xj(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],c=n.position[r];if(i=s.field.isKeyField()?Xe.comparator(Xe.fromName(c.referenceValue),t.key):Sf(c,t.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Mj(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!yu(n.position[t],e.position[t]))return!1;return!0}class Md{constructor(e,t=null,i=[],r=[],s=null,c="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=c,this.startAt=d,this.endAt=f,this._t=null,this.wt=null}}function Nj(n,e,t,i,r,s,c,d){return new Md(n,e,t,i,r,s,c,d)}function fy(n){return new Md(n)}function Oj(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function ik(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function rk(n){for(const e of n.filters)if(e.dt())return e.field;return null}function sk(n){return null!==n.collectionGroup}function py(n){const e=nt(n);if(null===e._t){e._t=[];const t=rk(e),i=ik(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new hy(t)),e._t.push(new hy(Vi.keyField(),"asc"));else{let r=!1;for(const s of e.explicitOrderBy)e._t.push(s),s.field.isKeyField()&&(r=!0);if(!r){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new hy(Vi.keyField(),s))}}}return e._t}function co(n){const e=nt(n);if(!e.wt)if("F"===e.limitType)e.wt=Dj(e.path,e.collectionGroup,py(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of py(e))t.push(new hy(s.field,"desc"===s.dir?"asc":"desc"));const i=e.endAt?new Af(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Af(e.startAt.position,e.startAt.inclusive):null;e.wt=Dj(e.path,e.collectionGroup,t,e.filters,e.limit,i,r)}return e.wt}function aI(n,e,t){return new Md(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function lw(n,e){return aw(co(n),co(e))&&n.limitType===e.limitType}function kj(n){return`${wg(co(n))}|lt:${n.limitType}`}function ok(n){return`Query(target=${function S7(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${dy(i.value)}`;var i}).join(", ")}]`),nw(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>dy(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>dy(t)).join(",")),`Target(${e})`}(co(n))}; limitType=${n.limitType})`}function ak(n,e){return e.isFoundDocument()&&function(t,i){const r=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(r):Xe.isDocumentKey(t.path)?t.path.isEqual(r):t.path.isImmediateParentOf(r)}(n,e)&&function(t,i){for(const r of t.explicitOrderBy)if(!r.field.isKeyField()&&null===i.data.field(r.field))return!1;return!0}(n,e)&&function(t,i){for(const r of t.filters)if(!r.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(r,s,c){const d=xj(r,s,c);return r.inclusive?d<=0:d<0}(t.startAt,py(t),i)||t.endAt&&!function(r,s,c){const d=xj(r,s,c);return r.inclusive?d>=0:d>0}(t.endAt,py(t),i)));var t,i}function Rj(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Pj(n){return(e,t)=>{let i=!1;for(const r of py(n)){const s=F7(r,e,t);if(0!==s)return s;i=i||r.field.isKeyField()}return 0}}function F7(n,e,t){const i=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(r,s,c){const d=s.data.field(r),f=c.data.field(r);return null!==d&&null!==f?Sf(d,f):gt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return gt()}}function Fj(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:iw(e)?"-0":e}}function Lj(n){return{integerValue:""+n}}function Bj(n,e){return _j(e)?Lj(e):Fj(n,e)}class lI{constructor(){this._=void 0}}function L7(n,e,t){return n instanceof gy?function(i,r){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return r&&(s.fields.__previous_value__=r),{mapValue:s}}(t,e):n instanceof Eg?Vj(n,e):n instanceof Cg?jj(n,e):function(i,r){const s=Uj(i,r),c=Hj(s)+Hj(i.yt);return nk(s)&&nk(i.yt)?Lj(c):Fj(i.It,c)}(n,e)}function B7(n,e,t){return n instanceof Eg?Vj(n,e):n instanceof Cg?jj(n,e):t}function Uj(n,e){return n instanceof my?nk(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class gy extends lI{}class Eg extends lI{constructor(e){super(),this.elements=e}}function Vj(n,e){const t=Gj(e);for(const i of n.elements)t.some(r=>yu(r,i))||t.push(i);return{arrayValue:{values:t}}}class Cg extends lI{constructor(e){super(),this.elements=e}}function jj(n,e){let t=Gj(e);for(const i of n.elements)t=t.filter(r=>!yu(r,i));return{arrayValue:{values:t}}}class my extends lI{constructor(e,t){super(),this.It=e,this.yt=t}}function Hj(n){return Hi(n.integerValue||n.doubleValue)}function Gj(n){return sw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class cw{constructor(e,t){this.field=e,this.transform=t}}class V7{constructor(e,t){this.version=e,this.transformResults=t}}class bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new bi}static exists(e){return new bi(void 0,e)}static updateTime(e){return new bi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class uI{}function $j(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new yy(n.key,bi.none()):new _y(n.key,n.data,bi.none());{const t=n.data,i=cs.empty();let r=new qn(Vi.comparator);for(let s of e.fields)if(!r.has(s)){let c=t.field(s);null===c&&s.length>1&&(s=s.popLast(),c=t.field(s)),null===c?i.delete(s):i.set(s,c),r=r.add(s)}return new Nd(n.key,i,new Ua(r.toArray()),bi.none())}}function j7(n,e,t){n instanceof _y?function(i,r,s){const c=i.value.clone(),d=qj(i.fieldTransforms,r,s.transformResults);c.setAll(d),r.convertToFoundDocument(s.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Nd?function(i,r,s){if(!cI(i.precondition,r))return void r.convertToUnknownDocument(s.version);const c=qj(i.fieldTransforms,r,s.transformResults),d=r.data;d.setAll(zj(i)),d.setAll(c),r.convertToFoundDocument(s.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function uw(n,e,t,i){return n instanceof _y?function(r,s,c,d){if(!cI(r.precondition,s))return c;const f=r.value.clone(),y=Zj(r.fieldTransforms,d,s);return f.setAll(y),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),null}(n,e,t,i):n instanceof Nd?function(r,s,c,d){if(!cI(r.precondition,s))return c;const f=Zj(r.fieldTransforms,d,s),y=s.data;return y.setAll(zj(r)),y.setAll(f),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===c?null:c.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map(w=>w.field))}(n,e,t,i):(c=t,cI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c);var s,c}function H7(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=Uj(i.transform,r||null);null!=s&&(null===t&&(t=cs.empty()),t.set(i.field,s))}return t||null}function Wj(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&cy(t,i,(r,s)=>function U7(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Eg&&i instanceof Eg||t instanceof Cg&&i instanceof Cg?cy(t.elements,i.elements,yu):t instanceof my&&i instanceof my?yu(t.yt,i.yt):t instanceof gy&&i instanceof gy);var t,i}(r,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class _y extends uI{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nd extends uI{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function zj(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function qj(n,e,t){const i=new Map;Ft(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],c=s.transform,d=e.data.field(s.field);i.set(s.field,B7(c,d,t[r]))}return i}function Zj(n,e,t){const i=new Map;for(const r of n){const s=r.transform,c=t.data.field(r.field);i.set(r.field,L7(s,c,e))}return i}class yy extends uI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class lk extends uI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class G7{constructor(e){this.count=e}}var yr,bn;function Kj(n){switch(n){default:return gt();case me.CANCELLED:case me.UNKNOWN:case me.DEADLINE_EXCEEDED:case me.RESOURCE_EXHAUSTED:case me.INTERNAL:case me.UNAVAILABLE:case me.UNAUTHENTICATED:return!1;case me.INVALID_ARGUMENT:case me.NOT_FOUND:case me.ALREADY_EXISTS:case me.PERMISSION_DENIED:case me.FAILED_PRECONDITION:case me.ABORTED:case me.OUT_OF_RANGE:case me.UNIMPLEMENTED:case me.DATA_LOSS:return!0}}function Yj(n){if(void 0===n)return er("GRPC error has no .code"),me.UNKNOWN;switch(n){case yr.OK:return me.OK;case yr.CANCELLED:return me.CANCELLED;case yr.UNKNOWN:return me.UNKNOWN;case yr.DEADLINE_EXCEEDED:return me.DEADLINE_EXCEEDED;case yr.RESOURCE_EXHAUSTED:return me.RESOURCE_EXHAUSTED;case yr.INTERNAL:return me.INTERNAL;case yr.UNAVAILABLE:return me.UNAVAILABLE;case yr.UNAUTHENTICATED:return me.UNAUTHENTICATED;case yr.INVALID_ARGUMENT:return me.INVALID_ARGUMENT;case yr.NOT_FOUND:return me.NOT_FOUND;case yr.ALREADY_EXISTS:return me.ALREADY_EXISTS;case yr.PERMISSION_DENIED:return me.PERMISSION_DENIED;case yr.FAILED_PRECONDITION:return me.FAILED_PRECONDITION;case yr.ABORTED:return me.ABORTED;case yr.OUT_OF_RANGE:return me.OUT_OF_RANGE;case yr.UNIMPLEMENTED:return me.UNIMPLEMENTED;case yr.DATA_LOSS:return me.DATA_LOSS;default:return gt()}}(bn=yr||(yr={}))[bn.OK=0]="OK",bn[bn.CANCELLED=1]="CANCELLED",bn[bn.UNKNOWN=2]="UNKNOWN",bn[bn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",bn[bn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",bn[bn.NOT_FOUND=5]="NOT_FOUND",bn[bn.ALREADY_EXISTS=6]="ALREADY_EXISTS",bn[bn.PERMISSION_DENIED=7]="PERMISSION_DENIED",bn[bn.UNAUTHENTICATED=16]="UNAUTHENTICATED",bn[bn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",bn[bn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",bn[bn.ABORTED=10]="ABORTED",bn[bn.OUT_OF_RANGE=11]="OUT_OF_RANGE",bn[bn.UNIMPLEMENTED=12]="UNIMPLEMENTED",bn[bn.INTERNAL=13]="INTERNAL",bn[bn.UNAVAILABLE=14]="UNAVAILABLE",bn[bn.DATA_LOSS=15]="DATA_LOSS";class xf{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[r,s]of i)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(void 0===r)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return 1===i.length?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_g(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return pj(this.inner)}size(){return this.innerSize}}const $7=new ji(Xe.comparator);function Go(){return $7}const Qj=new ji(Xe.comparator);function dw(...n){let e=Qj;for(const t of n)e=e.insert(t.key,t);return e}function Jj(n){let e=Qj;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function vu(){return hw()}function Xj(){return hw()}function hw(){return new xf(n=>n.toString(),(n,e)=>n.isEqual(e))}const W7=new ji(Xe.comparator),z7=new qn(Xe.comparator);function Qt(...n){let e=z7;for(const t of n)e=e.add(t);return e}const q7=new qn(Gt);function dI(){return q7}class fw{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,pw.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new fw(Lt.min(),r,dI(),Go(),Qt())}}class pw{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new pw(i,t,Qt(),Qt(),Qt())}}class hI{constructor(e,t,i,r){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=r}}class eH{constructor(e,t){this.targetId=e,this.At=t}}class tH{constructor(e,t,i=xr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class nH{constructor(){this.Rt=0,this.bt=rH(),this.Pt=xr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=Qt(),t=Qt(),i=Qt();return this.bt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:gt()}}),new pw(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=rH()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class Z7{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=Go(),this.qt=iH(),this.Kt=new qn(Gt)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:gt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,r)=>{this.Ht(r)&&t(r)})}Yt(e){const t=e.targetId,i=e.At.count,r=this.Xt(t);if(r){const s=r.target;if(sI(s))if(0===i){const c=new Xe(s.path);this.jt(t,c,ii.newNoDocument(c,Lt.min()))}else Ft(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((s,c)=>{const d=this.Xt(c);if(d){if(s.current&&sI(d.target)){const f=new Xe(d.target.path);null!==this.Ut.get(f)||this.ee(c,f)||this.jt(c,f,ii.newNoDocument(f,e))}s.Dt&&(t.set(c,s.xt()),s.Nt())}});let i=Qt();this.qt.forEach((s,c)=>{let d=!0;c.forEachWhile(f=>{const y=this.Xt(f);return!y||2===y.purpose||(d=!1,!1)}),d&&(i=i.add(s))}),this.Ut.forEach((s,c)=>c.setReadTime(e));const r=new fw(e,t,this.Kt,this.Ut,i);return this.Ut=Go(),this.qt=iH(),this.Kt=new qn(Gt),r}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const r=this.zt(e);this.ee(e,t)?r.kt(t,1):r.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new nH,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new qn(Gt),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new nH),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function iH(){return new ji(Xe.comparator)}function rH(){return new ji(Xe.comparator)}const K7={asc:"ASCENDING",desc:"DESCENDING"},Y7={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Q7{constructor(e,t){this.databaseId=e,this.gt=t}}function gw(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sH(n,e){return n.gt?e.toBase64():e.toUint8Array()}function J7(n,e){return gw(n,e.toTimestamp())}function $r(n){return Ft(!!n),Lt.fromTimestamp(function(e){const t=Tf(e);return new vi(t.seconds,t.nanos)}(n))}function ck(n,e){return(t=n,new vn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function oH(n){const e=vn.fromString(n);return Ft(pH(e)),e}function mw(n,e){return ck(n.databaseId,e.path)}function bu(n,e){const t=oH(e);if(t.get(1)!==n.databaseId.projectId)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ue(me.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(lH(t))}function uk(n,e){return ck(n.databaseId,e)}function aH(n){const e=oH(n);return 4===e.length?vn.emptyPath():lH(e)}function _w(n){return new vn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lH(n){return Ft(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function cH(n,e,t){return{name:mw(n,e),fields:t.value.mapValue.fields}}function uH(n,e,t){const i=bu(n,e.name),r=$r(e.updateTime),s=new cs({mapValue:{fields:e.fields}}),c=ii.newFoundDocument(i,r,s);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function yw(n,e){let t;if(e instanceof _y)t={update:cH(n,e.key,e.value)};else if(e instanceof yy)t={delete:mw(n,e.key)};else if(e instanceof Nd)t={update:cH(n,e.key,e.data),updateMask:aK(e.fieldMask)};else{if(!(e instanceof lk))return gt();t={verify:mw(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(r,s){const c=s.transform;if(c instanceof gy)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Eg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Cg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof my)return{fieldPath:s.field.canonicalString(),increment:c.yt};throw gt()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(r=e.precondition).updateTime?{updateTime:J7(n,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:gt()),t;var r}function dk(n,e){const t=e.currentDocument?void 0!==(r=e.currentDocument).updateTime?bi.updateTime($r(r.updateTime)):void 0!==r.exists?bi.exists(r.exists):bi.none():bi.none(),i=e.updateTransforms?e.updateTransforms.map(r=>function(s,c){let d=null;"setToServerValue"in c?(Ft("REQUEST_TIME"===c.setToServerValue),d=new gy):"appendMissingElements"in c?d=new Eg(c.appendMissingElements.values||[]):"removeAllFromArray"in c?d=new Cg(c.removeAllFromArray.values||[]):"increment"in c?d=new my(s,c.increment):gt();const f=Vi.fromServerFormat(c.fieldPath);return new cw(f,d)}(n,r)):[];var r;if(e.update){const r=bu(n,e.update.name),s=new cs({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Ua((e.updateMask.fieldPaths||[]).map(y=>Vi.fromServerFormat(y)));return new Nd(r,s,c,t,i)}return new _y(r,s,t,i)}if(e.delete){const r=bu(n,e.delete);return new yy(r,t)}if(e.verify){const r=bu(n,e.verify);return new lk(r,t)}return gt()}function dH(n,e){return{documents:[uk(n,e.path)]}}function hk(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=uk(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=uk(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const r=function(f){if(0===f.length)return;const y=f.map(w=>function(T){if("=="===T.op){if(bj(T.value))return{unaryFilter:{field:vy(T.field),op:"IS_NAN"}};if(vj(T.value))return{unaryFilter:{field:vy(T.field),op:"IS_NULL"}}}else if("!="===T.op){if(bj(T.value))return{unaryFilter:{field:vy(T.field),op:"IS_NOT_NAN"}};if(vj(T.value))return{unaryFilter:{field:vy(T.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:vy(T.field),op:rK(T.op),value:T.value}}}(w));return 1===y.length?y[0]:{compositeFilter:{op:"AND",filters:y}}}(e.filters);r&&(t.structuredQuery.where=r);const s=function(f){if(0!==f.length)return f.map(y=>{return{field:vy((w=y).field),direction:iK(w.dir)};var w})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const c=(y=e.limit,n.gt||nw(y)?y:{value:y});var y,d,f;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(f=e.endAt).inclusive,values:f.position}),t}function hH(n){let e=aH(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ft(1===i);const w=t.from[0];w.allDescendants?r=w.collectionId:e=e.child(w.collectionId)}let s=[];t.where&&(s=fH(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(w=>{return new hy(by((T=w).field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction));var T}));let d=null;t.limit&&(d=function(w){let T;return T="object"==typeof w?w.value:w,nw(T)?null:T}(t.limit));let f=null;var w;t.startAt&&(f=new Af((w=t.startAt).values||[],!!w.before));let y=null;return t.endAt&&(y=function(w){return new Af(w.values||[],!w.before)}(t.endAt)),Nj(e,r,c,s,d,"F",f,y)}function fH(n){return n?void 0!==n.unaryFilter?[oK(n)]:void 0!==n.fieldFilter?[sK(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>fH(e)).reduce((e,t)=>e.concat(t)):gt():[]}function iK(n){return K7[n]}function rK(n){return Y7[n]}function vy(n){return{fieldPath:n.canonicalString()}}function by(n){return Vi.fromServerFormat(n.fieldPath)}function sK(n){return us.create(by(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return gt()}}(n.fieldFilter.op),n.fieldFilter.value)}function oK(n){switch(n.unaryFilter.op){case"IS_NAN":const e=by(n.unaryFilter.field);return us.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=by(n.unaryFilter.field);return us.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=by(n.unaryFilter.field);return us.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=by(n.unaryFilter.field);return us.create(r,"!=",{nullValue:"NULL_VALUE"});default:return gt()}}function aK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function pH(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function uo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=gH(e)),e=lK(n.get(t),e);return gH(e)}function lK(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function gH(n){return n+"\x01\x01"}function wu(n){const e=n.length;if(Ft(e>=2),2===e)return Ft("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),vn.emptyPath();const t=e-2,i=[];let r="";for(let s=0;s<e;){const c=n.indexOf("\x01",s);switch((c<0||c>t)&&gt(),n.charAt(c+1)){case"\x01":const d=n.substring(s,c);let f;0===r.length?f=d:(r+=d,f=r,r=""),i.push(f);break;case"\x10":r+=n.substring(s,c),r+="\0";break;case"\x11":r+=n.substring(s,c+1);break;default:gt()}s=c+2}return new vn(i)}const mH=["userId","batchId"];function fI(n,e){return[n,uo(e)]}function _H(n,e,t){return[n,uo(e),t]}const cK={},uK=["prefixPath","collectionGroup","readTime","documentId"],dK=["prefixPath","collectionGroup","documentId"],hK=["collectionGroup","readTime","prefixPath","documentId"],fK=["canonicalId","targetId"],pK=["targetId","path"],gK=["path","targetId"],mK=["collectionId","parent"],_K=["indexId","uid"],yK=["uid","sequenceNumber"],vK=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],bK=["indexId","uid","orderedDocumentKey"],wK=["userId","collectionPath","documentId"],EK=["userId","collectionPath","largestBatchId"],CK=["userId","collectionGroup","largestBatchId"],yH=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],TK=[...yH,"documentOverlays"],vH=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],bH=vH,DK=[...bH,"indexConfiguration","indexState","indexEntries"];class fk extends dj{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Wr(n,e){const t=nt(n);return rc.M(t.ie,e)}class pk{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&j7(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=uw(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=uw(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Xj();return this.mutations.forEach(r=>{const s=e.get(r.key),c=s.overlayedDocument;let d=this.applyToLocalView(c,s.mutatedFields);d=t.has(r.key)?null:d;const f=$j(c,d);null!==f&&i.set(r.key,f),c.isValidDocument()||c.convertToNoDocument(Lt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qt())}isEqual(e){return this.batchId===e.batchId&&cy(this.mutations,e.mutations,(t,i)=>Wj(t,i))&&cy(this.baseMutations,e.baseMutations,(t,i)=>Wj(t,i))}}class gk{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ft(e.mutations.length===i.length);let r=W7;const s=e.mutations;for(let c=0;c<s.length;c++)r=r.insert(s[c].key,i[c].version);return new gk(e,t,i,r)}}class mk{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Mf{constructor(e,t,i,r,s=Lt.min(),c=Lt.min(),d=xr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=d}withSequenceNumber(e){return new Mf(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Mf(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class wH{constructor(e){this.re=e}}function EH(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:pI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:mw(r=n.re,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:gw(r,s.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:Tg(e.version)};else{if(!e.isUnknownDocument())return gt();i.unknownDocument={path:t.path.toArray(),version:Tg(e.version)}}var r,s;return i}function pI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Tg(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Dg(n){const e=new vi(n.seconds,n.nanoseconds);return Lt.fromTimestamp(e)}function Ig(n,e){const t=(e.baseMutations||[]).map(s=>dk(n.re,s));for(let s=0;s<e.mutations.length-1;++s){const c=e.mutations[s];s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(c.updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s)}const i=e.mutations.map(s=>dk(n.re,s)),r=vi.fromMillis(e.localWriteTimeMs);return new pk(e.batchId,r,t,i)}function vw(n){const e=Dg(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Dg(n.lastLimboFreeSnapshotVersion):Lt.min();let i;var r;return void 0!==n.query.documents?(Ft(1===(r=n.query).documents.length),i=co(fy(aH(r.documents[0])))):i=co(hH(n.query)),new Mf(i,n.targetId,0,n.lastListenSequenceNumber,e,t,xr.fromBase64String(n.resumeToken))}function CH(n,e){const t=Tg(e.snapshotVersion),i=Tg(e.lastLimboFreeSnapshotVersion);let r;r=sI(e.target)?dH(n.re,e.target):hk(n.re,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:wg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function _k(n){const e=hH({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?aI(e,e.limit,"L"):e}function yk(n,e){return new mk(e.largestBatchId,dk(n.re,e.overlayMutation))}function TH(n,e){const t=e.path.lastSegment();return[n,uo(e.path.popLast()),t]}function DH(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Tg(i.readTime),documentKey:uo(i.documentKey.path),largestBatchId:i.largestBatchId}}class SK{getBundleMetadata(e,t){return IH(e).get(t).next(i=>{if(i)return{id:(r=i).bundleId,createTime:Dg(r.createTime),version:r.version};var r})}saveBundleMetadata(e,t){return IH(e).put({bundleId:(i=t).id,createTime:Tg($r(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return SH(e).get(t).next(i=>{if(i)return{name:(r=i).name,query:_k(r.bundledQuery),readTime:Dg(r.readTime)};var r})}saveNamedQuery(e,t){return SH(e).put({name:(i=t).name,readTime:Tg($r(i.readTime)),bundledQuery:i.bundledQuery});var i}}function IH(n){return Wr(n,"bundles")}function SH(n){return Wr(n,"namedQueries")}class gI{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new gI(e,t.uid||"")}getOverlay(e,t){return bw(e).get(TH(this.userId,t)).next(i=>i?yk(this.It,i):null)}getOverlays(e,t){const i=vu();return ue.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){const r=[];return i.forEach((s,c)=>{const d=new mk(t,c);r.push(this.ue(e,d))}),ue.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach(c=>r.add(uo(c.getCollectionPath())));const s=[];return r.forEach(c=>{const d=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,i+1],!1,!0);s.push(bw(e).Y("collectionPathOverlayIndex",d))}),ue.waitFor(s)}getOverlaysForCollection(e,t,i){const r=vu(),s=uo(t),c=IDBKeyRange.bound([this.userId,s,i],[this.userId,s,Number.POSITIVE_INFINITY],!0);return bw(e).W("collectionPathOverlayIndex",c).next(d=>{for(const f of d){const y=yk(this.It,f);r.set(y.getKey(),y)}return r})}getOverlaysForCollectionGroup(e,t,i,r){const s=vu();let c;const d=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bw(e).Z({index:"collectionGroupOverlayIndex",range:d},(f,y,w)=>{const T=yk(this.It,y);s.size()<r||T.largestBatchId===c?(s.set(T.getKey(),T),c=T.largestBatchId):w.done()}).next(()=>s)}ue(e,t){return bw(e).put(function(i,r,s){const[c,d,f]=TH(r,s.mutation.key);return{userId:r,collectionPath:d,documentId:f,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:yw(i.re,s.mutation)}}(this.It,this.userId,t))}}function bw(n){return Wr(n,"documentOverlays")}class Sg{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Hi(e.integerValue));else if("doubleValue"in e){const i=Hi(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),iw(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(yg(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?wj(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):gt()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const r of Object.keys(i))this._e(r,t),this.ae(i[r],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const r of i)this.ae(r,t)}ge(e,t){this.le(t,37),Xe.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function AK(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function AH(n){const e=64-function(t){let i=0;for(let r=0;r<8;++r){const s=AK(255&t[r]);if(i+=s,8!==s)break}return i}(n);return Math.ceil(e/8)}Sg.Te=new Sg;class xK{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const r=t.codePointAt(0);this.Ae(240|r>>>18),this.Ae(128|63&r>>>12),this.Ae(128|63&r>>>6),this.Ae(128|63&r)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const r=t.codePointAt(0);this.Pe(240|r>>>18),this.Pe(128|63&r>>>12),this.Pe(128|63&r>>>6),this.Pe(128|63&r)}}this.ve()}De(e){const t=this.Ce(e),i=AH(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ne(e){const t=this.Ce(e),i=AH(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(r){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,r,!1),new Uint8Array(s.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class MK{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class NK{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class ww{constructor(){this.Be=new xK,this.Le=new MK(this.Be),this.Ue=new NK(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Ag{constructor(e,t,i,r){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=r}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new Ag(this.indexId,this.documentKey,this.arrayValue,i)}}function xg(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=xH(n.arrayValue,e.arrayValue),0!==t?t:(t=xH(n.directionalValue,e.directionalValue),0!==t?t:Xe.comparator(n.documentKey,e.documentKey)))}function xH(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class OK{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=YO(e);if(void 0!==t&&!this.ze(t))return!1;const i=gg(e);let r=0,s=0;for(;r<i.length&&this.ze(i[r]);++r);if(r===i.length)return!0;if(void 0!==this.je){const c=i[r];if(!this.He(this.je,c)||!this.Je(this.Ge[s++],c))return!1;++r}for(;r<i.length;++r){const c=i[r];if(s>=this.Ge.length||!this.Je(this.Ge[s++],c))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class kK{constructor(){this.Ye=new vk}addToCollectionParentIndex(e,t){return this.Ye.add(t),ue.resolve()}getCollectionParents(e,t){return ue.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return ue.resolve()}deleteFieldIndex(e,t){return ue.resolve()}getDocumentsMatchingTarget(e,t){return ue.resolve(null)}getIndexType(e,t){return ue.resolve(0)}getFieldIndexes(e,t){return ue.resolve([])}getNextCollectionGroupToUpdate(e){return ue.resolve(null)}getMinOffset(e,t){return ue.resolve(Ba.min())}getMinOffsetFromCollectionGroup(e,t){return ue.resolve(Ba.min())}updateCollectionGroup(e,t,i){return ue.resolve()}updateIndexEntries(e,t){return ue.resolve()}}class vk{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new qn(vn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new qn(vn.comparator)).toArray()}}const mI=new Uint8Array(0);class RK{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new vk,this.Ze=new xf(i=>wg(i),(i,r)=>aw(i,r)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const s={collectionId:i,parent:uo(r)};return MH(e).put(s)}return ue.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[aj(t),""],!1,!0);return MH(e).W(r).next(s=>{for(const c of s){if(c.collectionId!==t)break;i.push(wu(c.parent))}return i})}addFieldIndex(e,t){const i=_I(e),r={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var c;delete r.indexId;const s=i.add(r);if(t.indexState){const c=Cw(e);return s.next(d=>{c.put(DH(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const i=_I(e),r=Cw(e),s=Ew(e);return i.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Ew(e);let r=!0;const s=new Map;return ue.forEach(this.tn(t),c=>this.en(e,c).next(d=>{r&&(r=!!d),s.set(c,d)})).next(()=>{if(r){let c=Qt();const d=[];return ue.forEach(s,(f,y)=>{var w;He("IndexedDbIndexManager",`Using index ${w=f,`id=${w.indexId}|cg=${w.collectionGroup}|f=${w.fields.map(ke=>`${ke.fieldPath}:${ke.kind}`).join(",")}`} to execute ${wg(t)}`);const T=function(ke,Ae){const Be=YO(Ae);if(void 0===Be)return null;for(const We of oI(ke,Be.fieldPath))switch(We.op){case"array-contains-any":return We.value.arrayValue.values||[];case"array-contains":return[We.value]}return null}(y,f),x=function(ke,Ae){const Be=new Map;for(const We of gg(Ae))for(const ft of oI(ke,We.fieldPath))switch(ft.op){case"==":case"in":Be.set(We.fieldPath.canonicalString(),ft.value);break;case"not-in":case"!=":return Be.set(We.fieldPath.canonicalString(),ft.value),Array.from(Be.values())}return null}(y,f),O=function(ke,Ae){const Be=[];let We=!0;for(const ft of gg(Ae)){const Bt=0===ft.kind?Ij(ke,ft.fieldPath,ke.startAt):Sj(ke,ft.fieldPath,ke.startAt);Be.push(Bt.value),We&&(We=Bt.inclusive)}return new Af(Be,We)}(y,f),F=function(ke,Ae){const Be=[];let We=!0;for(const ft of gg(Ae)){const Bt=0===ft.kind?Sj(ke,ft.fieldPath,ke.endAt):Ij(ke,ft.fieldPath,ke.endAt);Be.push(Bt.value),We&&(We=Bt.inclusive)}return new Af(Be,We)}(y,f),G=this.nn(f,y,O),Q=this.nn(f,y,F),pe=this.sn(f,y,x),Se=this.rn(f.indexId,T,G,O.inclusive,Q,F.inclusive,pe);return ue.forEach(Se,ke=>i.J(ke,t.limit).next(Ae=>{Ae.forEach(Be=>{const We=Xe.fromSegments(Be.documentKey);c.has(We)||(c=c.add(We),d.push(We))})}))}).next(()=>d)}return ue.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,r,s,c,d){const f=(null!=t?t.length:1)*Math.max(i.length,s.length),y=f/(null!=t?t.length:1),w=[];for(let T=0;T<f;++T){const x=t?this.on(t[T/y]):mI,O=this.un(e,x,i[T%y],r),F=this.cn(e,x,s[T%y],c),G=d.map(Q=>this.un(e,x,Q,!0));w.push(...this.createRange(O,F,G))}return w}un(e,t,i,r){const s=new Ag(e,Xe.empty(),t,i);return r?s:s.Ke()}cn(e,t,i,r){const s=new Ag(e,Xe.empty(),t,i);return r?s.Ke():s}en(e,t){const i=new OK(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(s=>{let c=null;for(const d of s)i.We(d)&&(!c||d.fields.length>c.fields.length)&&(c=d);return c})}getIndexType(e,t){let i=2;return ue.forEach(this.tn(t),r=>this.en(e,r).next(s=>{s?0!==i&&s.fields.length<function(c){let d=new qn(Vi.comparator),f=!1;for(const y of c.filters){const w=y;w.field.isKeyField()||("array-contains"===w.op||"array-contains-any"===w.op?f=!0:d=d.add(w.field))}for(const y of c.orderBy)y.field.isKeyField()||(d=d.add(y.field));return d.size+(f?1:0)}(r)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new ww;for(const r of gg(e)){const s=t.data.field(r.fieldPath);if(null==s)return null;const c=i.qe(r.kind);Sg.Te.ce(s,c)}return i.$e()}on(e){const t=new ww;return Sg.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new ww;return Sg.Te.ce(bg(this.databaseId,t),i.qe(function(r){const s=gg(r);return 0===s.length?0:s[s.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let r=[];r.push(new ww);let s=0;for(const c of gg(e)){const d=i[s++];for(const f of r)if(this.ln(t,c.fieldPath)&&sw(d))r=this.fn(r,c,d);else{const y=f.qe(c.kind);Sg.Te.ce(d,y)}}return this.dn(r)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const r=[...e],s=[];for(const c of i.arrayValue.values||[])for(const d of r){const f=new ww;f.seed(d.$e()),Sg.Te.ce(c,f.qe(t.kind)),s.push(f)}return s}ln(e,t){return!!e.filters.find(i=>i instanceof us&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=_I(e),r=Cw(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(s=>{const c=[];return ue.forEach(s,d=>r.get([d.indexId,this.uid]).next(f=>{c.push(function(y,w){const T=w?new Xb(w.sequenceNumber,new Ba(Dg(w.readTime),new Xe(wu(w.documentKey)),w.largestBatchId)):Xb.empty(),x=y.fields.map(([O,F])=>new eI(Vi.fromServerFormat(O),F));return new XD(y.indexId,y.collectionGroup,x,T)}(d,f))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,r)=>{const s=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return 0!==s?s:Gt(i.collectionGroup,r.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const r=_I(e),s=Cw(e);return this._n(e).next(c=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>ue.forEach(d,f=>s.put(DH(f.indexId,this.user,c,i)))))}updateIndexEntries(e,t){const i=new Map;return ue.forEach(t,(r,s)=>{const c=i.get(r.collectionGroup);return(c?ue.resolve(c):this.getFieldIndexes(e,r.collectionGroup)).next(d=>(i.set(r.collectionGroup,d),ue.forEach(d,f=>this.wn(e,r,f).next(y=>{const w=this.mn(s,f);return y.isEqual(w)?ue.resolve():this.gn(e,s,f,y,w)}))))})}yn(e,t,i,r){return Ew(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,r){return Ew(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const r=Ew(e);let s=new qn(xg);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(c,d)=>{s=s.add(new Ag(i.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>s)}mn(e,t){let i=new qn(xg);const r=this.an(t,e);if(null==r)return i;const s=YO(t);if(null!=s){const c=e.data.field(s.fieldPath);if(sw(c))for(const d of c.arrayValue.values||[])i=i.add(new Ag(t.indexId,e.key,this.on(d),r))}else i=i.add(new Ag(t.indexId,e.key,mI,r));return i}gn(e,t,i,r,s){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(d,f,y,w,T){const x=d.getIterator(),O=f.getIterator();let F=uy(x),G=uy(O);for(;F||G;){let Q=!1,pe=!1;if(F&&G){const Se=y(F,G);Se<0?pe=!0:Se>0&&(Q=!0)}else null!=F?pe=!0:Q=!0;Q?(w(G),G=uy(O)):pe?(T(F),F=uy(x)):(F=uy(x),G=uy(O))}}(r,s,xg,d=>{c.push(this.yn(e,t,i,d))},d=>{c.push(this.pn(e,t,i,d))}),ue.waitFor(c)}_n(e){let t=1;return Cw(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,r,s)=>{s.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((c,d)=>xg(c,d)).filter((c,d,f)=>!d||0!==xg(c,f[d-1]));const r=[];r.push(e);for(const c of i){const d=xg(c,e),f=xg(c,t);if(0===d)r[0]=e.Ke();else if(d>0&&f<0)r.push(c),r.push(c.Ke());else if(f>0)break}r.push(t);const s=[];for(let c=0;c<r.length;c+=2)s.push(IDBKeyRange.bound([r[c].indexId,this.uid,r[c].arrayValue,r[c].directionalValue,mI,[]],[r[c+1].indexId,this.uid,r[c+1].arrayValue,r[c+1].directionalValue,mI,[]]));return s}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(NH)}getMinOffset(e,t){return ue.mapArray(this.tn(t),i=>this.en(e,i).next(r=>r||gt())).next(NH)}}function MH(n){return Wr(n,"collectionParents")}function Ew(n){return Wr(n,"indexEntries")}function _I(n){return Wr(n,"indexConfiguration")}function Cw(n){return Wr(n,"indexState")}function NH(n){Ft(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;QO(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Ba(e.readTime,e.documentKey,t)}const OH={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $o{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new $o(e,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function kH(n,e,t){const i=n.store("mutations"),r=n.store("documentMutations"),s=[],c=IDBKeyRange.only(t.batchId);let d=0;const f=i.Z({range:c},(w,T,x)=>(d++,x.delete()));s.push(f.next(()=>{Ft(1===d)}));const y=[];for(const w of t.mutations){const T=_H(e,w.key.path,t.batchId);s.push(r.delete(T)),y.push(w.key)}return ue.waitFor(s).next(()=>y)}function yI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw gt();e=n.noDocument}return JSON.stringify(e).length}$o.DEFAULT_COLLECTION_PERCENTILE=10,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$o.DEFAULT=new $o(41943040,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$o.DISABLED=new $o(-1,0,0);class vI{constructor(e,t,i,r){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=r,this.In={}}static oe(e,t,i,r){Ft(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new vI(s,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).Z({index:"userMutationsIndex",range:i},(r,s,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,i,r){const s=wy(e),c=Nf(e);return c.add({}).next(d=>{Ft("number"==typeof d);const f=new pk(d,t,i,r),y=function(x,O,F){const G=F.baseMutations.map(pe=>yw(x.re,pe)),Q=F.mutations.map(pe=>yw(x.re,pe));return{userId:O,batchId:F.batchId,localWriteTimeMs:F.localWriteTime.toMillis(),baseMutations:G,mutations:Q}}(this.It,this.userId,f),w=[];let T=new qn((x,O)=>Gt(x.canonicalString(),O.canonicalString()));for(const x of r){const O=_H(this.userId,x.key.path,d);T=T.add(x.key.path.popLast()),w.push(c.put(y)),w.push(s.put(O,cK))}return T.forEach(x=>{w.push(this.indexManager.addToCollectionParentIndex(e,x))}),e.addOnCommittedListener(()=>{this.In[d]=f.keys()}),ue.waitFor(w).next(()=>f)})}lookupMutationBatch(e,t){return Nf(e).get(t).next(i=>i?(Ft(i.userId===this.userId),Ig(this.It,i)):null)}Tn(e,t){return this.In[t]?ue.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const r=i.keys();return this.In[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let s=null;return Nf(e).Z({index:"userMutationsIndex",range:r},(c,d,f)=>{d.userId===this.userId&&(Ft(d.batchId>=i),s=Ig(this.It,d)),f.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Nf(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(r,s,c)=>{i=s.batchId,c.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Nf(e).W("userMutationsIndex",t).next(i=>i.map(r=>Ig(this.It,r)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=fI(this.userId,t.path),r=IDBKeyRange.lowerBound(i),s=[];return wy(e).Z({range:r},(c,d,f)=>{const[y,w,T]=c,x=wu(w);if(y===this.userId&&t.path.isEqual(x))return Nf(e).get(T).next(O=>{if(!O)throw gt();Ft(O.userId===this.userId),s.push(Ig(this.It,O))});f.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qn(Gt);const r=[];return t.forEach(s=>{const c=fI(this.userId,s.path),d=IDBKeyRange.lowerBound(c),f=wy(e).Z({range:d},(y,w,T)=>{const[x,O,F]=y,G=wu(O);x===this.userId&&s.path.isEqual(G)?i=i.add(F):T.done()});r.push(f)}),ue.waitFor(r).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,s=fI(this.userId,i),c=IDBKeyRange.lowerBound(s);let d=new qn(Gt);return wy(e).Z({range:c},(f,y,w)=>{const[T,x,O]=f,F=wu(x);T===this.userId&&i.isPrefixOf(F)?F.length===r&&(d=d.add(O)):w.done()}).next(()=>this.En(e,d))}En(e,t){const i=[],r=[];return t.forEach(s=>{r.push(Nf(e).get(s).next(c=>{if(null===c)throw gt();Ft(c.userId===this.userId),i.push(Ig(this.It,c))}))}),ue.waitFor(r).next(()=>i)}removeMutationBatch(e,t){return kH(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),ue.forEach(i,r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ue.resolve();const i=IDBKeyRange.lowerBound([this.userId]),r=[];return wy(e).Z({range:i},(s,c,d)=>{if(s[0]===this.userId){const f=wu(s[1]);r.push(f)}else d.done()}).next(()=>{Ft(0===r.length)})})}containsKey(e,t){return RH(e,this.userId,t)}Rn(e){return PH(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function RH(n,e,t){const i=fI(e,t.path),r=i[1],s=IDBKeyRange.lowerBound(i);let c=!1;return wy(n).Z({range:s,X:!0},(d,f,y)=>{const[w,T,x]=d;w===e&&T===r&&(c=!0),y.done()}).next(()=>c)}function Nf(n){return Wr(n,"mutations")}function wy(n){return Wr(n,"documentMutations")}function PH(n){return Wr(n,"mutationQueues")}class Mg{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Mg(0)}static vn(){return new Mg(-1)}}class PK{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new Mg(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Lt.fromTimestamp(new vi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.Sn(e,r)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ey(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(Ft(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let r=0;const s=[];return Ey(e).Z((c,d)=>{const f=vw(d);f.sequenceNumber<=t&&null===i.get(f.targetId)&&(r++,s.push(this.removeTargetData(e,f)))}).next(()=>ue.waitFor(s)).next(()=>r)}forEachTarget(e,t){return Ey(e).Z((i,r)=>{const s=vw(r);t(s)})}Vn(e){return FH(e).get("targetGlobalKey").next(t=>(Ft(null!==t),t))}Sn(e,t){return FH(e).put("targetGlobalKey",t)}Dn(e,t){return Ey(e).put(CH(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=wg(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let s=null;return Ey(e).Z({range:r,index:"queryTargetsIndex"},(c,d,f)=>{const y=vw(d);aw(t,y.target)&&(s=y,f.done())}).next(()=>s)}addMatchingKeys(e,t,i){const r=[],s=Of(e);return t.forEach(c=>{const d=uo(c.path);r.push(s.put({targetId:i,path:d})),r.push(this.referenceDelegate.addReference(e,i,c))}),ue.waitFor(r)}removeMatchingKeys(e,t,i){const r=Of(e);return ue.forEach(t,s=>{const c=uo(s.path);return ue.waitFor([r.delete([i,c]),this.referenceDelegate.removeReference(e,i,s)])})}removeMatchingKeysForTargetId(e,t){const i=Of(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Of(e);let s=Qt();return r.Z({range:i,X:!0},(c,d,f)=>{const y=wu(c[1]),w=new Xe(y);s=s.add(w)}).next(()=>s)}containsKey(e,t){const i=uo(t.path),r=IDBKeyRange.bound([i],[aj(i)],!1,!0);let s=0;return Of(e).Z({index:"documentTargetsIndex",X:!0,range:r},([c,d],f,y)=>{0!==c&&(s++,y.done())}).next(()=>s>0)}se(e,t){return Ey(e).get(t).next(i=>i?vw(i):null)}}function Ey(n){return Wr(n,"targets")}function FH(n){return Wr(n,"targetGlobal")}function Of(n){return Wr(n,"targetDocuments")}function LH([n,e],[t,i]){const r=Gt(n,t);return 0===r?Gt(e,i):r}class FK{constructor(e){this.xn=e,this.buffer=new qn(LH),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();LH(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LK{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ee.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Cf(i)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Ef(i)}yield t.Fn(3e5)}))}}class BK{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return ue.resolve(Ho.at);const i=new FK(t);return this.$n.forEachTarget(e,r=>i.On(r.sequenceNumber)).next(()=>this.$n.Ln(e,r=>i.On(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ue.resolve(OH)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),OH):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,r,s,c,d,f,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(T=>(T>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,c=Date.now(),this.nthSequenceNumber(e,r))).next(T=>(i=T,d=Date.now(),this.removeTargets(e,i,t))).next(T=>(s=T,f=Date.now(),this.removeOrphanedDocuments(e,i))).next(T=>(y=Date.now(),ZO()<=nc.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-w}ms\n\tDetermined least recently used ${r} in `+(d-c)+`ms\n\tRemoved ${s} targets in `+(f-d)+`ms\n\tRemoved ${T} documents in `+(y-f)+`ms\nTotal Duration: ${y-w}ms`),ue.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:T})))}}class UK{constructor(e,t){this.db=e,this.garbageCollector=new BK(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,r)=>t(r))}addReference(e,t,i){return bI(e,i)}removeReference(e,t,i){return bI(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return bI(e,t)}Gn(e,t){return function(i,r){let s=!1;return PH(i).tt(c=>RH(i,c,r).next(d=>(d&&(s=!0),ue.resolve(!d)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Kn(e,(c,d)=>{if(d<=t){const f=this.Gn(e,c).next(y=>{if(!y)return s++,i.getEntry(e,c).next(()=>(i.removeEntry(c,Lt.min()),Of(e).delete([0,uo(c.path)])))});r.push(f)}}).next(()=>ue.waitFor(r)).next(()=>i.apply(e)).next(()=>s)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return bI(e,t)}Kn(e,t){const i=Of(e);let r,s=Ho.at;return i.Z({index:"documentTargetsIndex"},([c,d],{path:f,sequenceNumber:y})=>{0===c?(s!==Ho.at&&t(new Xe(wu(r)),s),s=y,r=f):s=Ho.at}).next(()=>{s!==Ho.at&&t(new Xe(wu(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function bI(n,e){return Of(n).put((i=n.currentSequenceNumber,{targetId:0,path:uo(e.path),sequenceNumber:i}));var i}class BH{constructor(){this.changes=new xf(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ii.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?ue.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VK{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Ng(e).put(i)}removeEntry(e,t,i){return Ng(e).delete(function(r,s){const c=r.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],pI(s),c[c.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=ii.newInvalidDocument(t);return Ng(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Tw(t))},(r,s)=>{i=this.jn(t,s)}).next(()=>i)}Wn(e,t){let i={size:0,document:ii.newInvalidDocument(t)};return Ng(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Tw(t))},(r,s)=>{i={document:this.jn(t,s),size:yI(s)}}).next(()=>i)}getEntries(e,t){let i=Go();return this.zn(e,t,(r,s)=>{const c=this.jn(r,s);i=i.insert(r,c)}).next(()=>i)}Hn(e,t){let i=Go(),r=new ji(Xe.comparator);return this.zn(e,t,(s,c)=>{const d=this.jn(s,c);i=i.insert(s,d),r=r.insert(s,yI(c))}).next(()=>({documents:i,Jn:r}))}zn(e,t,i){if(t.isEmpty())return ue.resolve();let r=new qn(HH);t.forEach(f=>r=r.add(f));const s=IDBKeyRange.bound(Tw(r.first()),Tw(r.last())),c=r.getIterator();let d=c.getNext();return Ng(e).Z({index:"documentKeyIndex",range:s},(f,y,w)=>{const T=Xe.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;d&&HH(d,T)<0;)i(d,null),d=c.getNext();d&&d.isEqual(T)&&(i(d,y),d=c.hasNext()?c.getNext():null),d?w.j(Tw(d)):w.done()}).next(()=>{for(;d;)i(d,null),d=c.hasNext()?c.getNext():null})}getAllFromCollection(e,t,i){const r=[t.popLast().toArray(),t.lastSegment(),pI(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],s=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ng(e).W(IDBKeyRange.bound(r,s,!0)).next(c=>{let d=Go();for(const f of c){const y=this.jn(Xe.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);d=d.insert(y.key,y)}return d})}getAllFromCollectionGroup(e,t,i,r){let s=Go();const c=jH(t,i),d=jH(t,Ba.max());return Ng(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,d,!0)},(f,y,w)=>{const T=this.jn(Xe.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(T.key,T),s.size===r&&w.done()}).next(()=>s)}newChangeBuffer(e){return new jK(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return VH(e).get("remoteDocumentGlobalKey").next(t=>(Ft(!!t),t))}Qn(e,t){return VH(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function IK(n,e){let t;if(e.document)t=uH(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=Xe.fromSegments(e.noDocument.path),r=Dg(e.noDocument.readTime);t=ii.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return gt();{const i=Xe.fromSegments(e.unknownDocument.path),r=Dg(e.unknownDocument.version);t=ii.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime(function(i){const r=new vi(i[0],i[1]);return Lt.fromTimestamp(r)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(Lt.min()))return i}return ii.newInvalidDocument(e)}}function UH(n){return new VK(n)}class jK extends BH{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new xf(i=>i.toString(),(i,r)=>i.isEqual(r))}applyChanges(e){const t=[];let i=0,r=new qn((s,c)=>Gt(s.canonicalString(),c.canonicalString()));return this.changes.forEach((s,c)=>{const d=this.Xn.get(s);if(t.push(this.Yn.removeEntry(e,s,d.readTime)),c.isValidDocument()){const f=EH(this.Yn.It,c);r=r.add(s.path.popLast()),i+=yI(f)-d.size,t.push(this.Yn.addEntry(e,s,f))}else if(i-=d.size,this.trackRemovals){const f=EH(this.Yn.It,c.convertToNoDocument(Lt.min()));t.push(this.Yn.addEntry(e,s,f))}}),r.forEach(s=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.Yn.updateMetadata(e,i)),ue.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:r})=>(r.forEach((s,c)=>{this.Xn.set(s,{size:c,readTime:i.get(s).readTime})}),i))}}function VH(n){return Wr(n,"remoteDocumentGlobal")}function Ng(n){return Wr(n,"remoteDocumentsV14")}function Tw(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function jH(n,e){const t=e.documentKey.path.toArray();return[n,pI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function HH(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<t.length-2&&s<i.length-2;++s)if(r=Gt(t[s],i[s]),r)return r;return r=Gt(t.length,i.length),r||(r=Gt(t[t.length-2],i[i.length-2]),r||Gt(t[t.length-1],i[i.length-1]))}class HK{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class GH{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.getBaseDocument(e,t,i))).next(r=>(null!==i&&uw(i.mutation,r,Ua.empty(),vi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,Qt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=Qt()){const r=vu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let c=dw();return s.forEach((d,f)=>{c=c.insert(d,f.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const i=vu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,Qt()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((c,d)=>{t.set(c,d)})})}computeViews(e,t,i,r){let s=Go();const c=hw(),d=hw();return t.forEach((f,y)=>{const w=i.get(y.key);r.has(y.key)&&(void 0===w||w.mutation instanceof Nd)?s=s.insert(y.key,y):void 0!==w&&(c.set(y.key,w.mutation.getFieldMask()),uw(w.mutation,y,w.mutation.getFieldMask(),vi.now()))}),this.recalculateAndSaveOverlays(e,s).next(f=>(f.forEach((y,w)=>c.set(y,w)),t.forEach((y,w)=>{var T;return d.set(y,new HK(w,null!==(T=c.get(y))&&void 0!==T?T:null))}),d))}recalculateAndSaveOverlays(e,t){const i=hw();let r=new ji((c,d)=>c-d),s=Qt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const d of c)d.keys().forEach(f=>{const y=t.get(f);if(null===y)return;let w=i.get(f)||Ua.empty();w=d.applyToLocalView(y,w),i.set(f,w);const T=(r.get(d.batchId)||Qt()).add(f);r=r.insert(d.batchId,T)})}).next(()=>{const c=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),y=f.key,w=f.value,T=Xj();w.forEach(x=>{if(!s.has(x)){const O=$j(t.get(x),i.get(x));null!==O&&T.set(x,O),s=s.add(x)}}),c.push(this.documentOverlayCache.saveOverlays(e,y,T))}return ue.waitFor(c)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return Xe.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):sk(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var r}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const c=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):ue.resolve(vu());let d=-1,f=s;return c.next(y=>ue.forEach(y,(w,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),s.get(w)?ue.resolve():this.getBaseDocument(e,w,T).next(x=>{f=f.insert(w,x)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,f,y,Qt())).next(w=>({batchId:d,changes:Jj(w)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xe(t)).next(i=>{let r=dw();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const r=t.collectionGroup;let s=dw();return this.indexManager.getCollectionParents(e,r).next(c=>ue.forEach(c,d=>{const f=(y=t,w=d.child(r),new Md(w,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,w;return this.getDocumentsMatchingCollectionQuery(e,f,i).next(y=>{y.forEach((w,T)=>{s=s.insert(w,T)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,i){let r;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(s=>(r=s,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(s=>{s.forEach((d,f)=>{const y=f.getKey();null===r.get(y)&&(r=r.insert(y,ii.newInvalidDocument(y)))});let c=dw();return r.forEach((d,f)=>{const y=s.get(d);void 0!==y&&uw(y.mutation,f,Ua.empty(),vi.now()),ak(t,f)&&(c=c.insert(d,f))}),c})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):ue.resolve(ii.newInvalidDocument(t))}}class GK{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return ue.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:$r(i.createTime)}),ue.resolve()}getNamedQuery(e,t){return ue.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:_k(i.bundledQuery),readTime:$r(i.readTime)}),ue.resolve();var i}}class $K{constructor(){this.overlays=new ji(Xe.comparator),this.es=new Map}getOverlay(e,t){return ue.resolve(this.overlays.get(t))}getOverlays(e,t){const i=vu();return ue.forEach(t,r=>this.getOverlay(e,r).next(s=>{null!==s&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ue(e,t,s)}),ue.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.es.get(i);return void 0!==r&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.es.delete(i)),ue.resolve()}getOverlaysForCollection(e,t,i){const r=vu(),s=t.length+1,c=new Xe(t.child("")),d=this.overlays.getIteratorFrom(c);for(;d.hasNext();){const f=d.getNext().value,y=f.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&f.largestBatchId>i&&r.set(f.getKey(),f)}return ue.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new ji((y,w)=>y-w);const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>i){let w=s.get(y.largestBatchId);null===w&&(w=vu(),s=s.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const d=vu(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach((y,w)=>d.set(y,w)),!(d.size()>=r)););return ue.resolve(d)}ue(e,t,i){const r=this.overlays.get(i.key);if(null!==r){const c=this.es.get(r.largestBatchId).delete(i.key);this.es.set(r.largestBatchId,c)}this.overlays=this.overlays.insert(i.key,new mk(t,i));let s=this.es.get(t);void 0===s&&(s=Qt(),this.es.set(t,s)),this.es.set(t,s.add(i.key))}}class bk{constructor(){this.ns=new qn(zr.ss),this.rs=new qn(zr.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new zr(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new zr(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new Xe(new vn([])),i=new zr(t,e),r=new zr(t,e+1),s=[];return this.rs.forEachInRange([i,r],c=>{this.cs(c),s.push(c.key)}),s}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new Xe(new vn([])),i=new zr(t,e),r=new zr(t,e+1);let s=Qt();return this.rs.forEachInRange([i,r],c=>{s=s.add(c.key)}),s}containsKey(e){const t=new zr(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class zr{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return Xe.comparator(e.key,t.key)||Gt(e._s,t._s)}static os(e,t){return Gt(e._s,t._s)||Xe.comparator(e.key,t.key)}}class WK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new qn(zr.ss)}checkEmpty(e){return ue.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,r){const s=this.ws;this.ws++;const c=new pk(s,t,i,r);this.mutationQueue.push(c);for(const d of r)this.gs=this.gs.add(new zr(d.key,s)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return ue.resolve(c)}lookupMutationBatch(e,t){return ue.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const r=this.ps(t+1),s=r<0?0:r;return ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ue.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new zr(t,0),r=new zr(t,Number.POSITIVE_INFINITY),s=[];return this.gs.forEachInRange([i,r],c=>{const d=this.ys(c._s);s.push(d)}),ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qn(Gt);return t.forEach(r=>{const s=new zr(r,0),c=new zr(r,Number.POSITIVE_INFINITY);this.gs.forEachInRange([s,c],d=>{i=i.add(d._s)})}),ue.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Xe.isDocumentKey(s)||(s=s.child(""));const c=new zr(new Xe(s),0);let d=new qn(Gt);return this.gs.forEachWhile(f=>{const y=f.key.path;return!!i.isPrefixOf(y)&&(y.length===r&&(d=d.add(f._s)),!0)},c),ue.resolve(this.Is(d))}Is(e){const t=[];return e.forEach(i=>{const r=this.ys(i);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){Ft(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return ue.forEach(t.mutations,r=>{const s=new zr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new zr(t,0),r=this.gs.firstAfterOrEqual(i);return ue.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return ue.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class zK{constructor(e){this.Es=e,this.docs=new ji(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,c=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:c}),this.size+=c-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return ue.resolve(i?i.document.mutableCopy():ii.newInvalidDocument(t))}getEntries(e,t){let i=Go();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():ii.newInvalidDocument(r))}),ue.resolve(i)}getAllFromCollection(e,t,i){let r=Go();const s=new Xe(t.child("")),c=this.docs.getIteratorFrom(s);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!t.isPrefixOf(d.path))break;d.path.length>t.length+1||QO(cj(f),i)<=0||(r=r.insert(f.key,f.mutableCopy()))}return ue.resolve(r)}getAllFromCollectionGroup(e,t,i,r){gt()}As(e,t){return ue.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new qK(this)}getSize(e){return ue.resolve(this.size)}}class qK extends BH{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Yn.addEntry(e,r)):this.Yn.removeEntry(i)}),ue.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class ZK{constructor(e){this.persistence=e,this.Rs=new xf(t=>wg(t),aw),this.lastRemoteSnapshotVersion=Lt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new bk,this.targetCount=0,this.vs=Mg.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,r)=>t(r)),ue.resolve()}getLastRemoteSnapshotVersion(e){return ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ue.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),ue.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),ue.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Mg(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,ue.resolve()}updateTargetData(e,t){return this.Dn(t),ue.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,ue.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Rs.forEach((c,d)=>{d.sequenceNumber<=t&&null===i.get(d.targetId)&&(this.Rs.delete(c),s.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)}),ue.waitFor(s).next(()=>r)}getTargetCount(e){return ue.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return ue.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),ue.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(c=>{s.push(r.markPotentiallyOrphaned(e,c))}),ue.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),ue.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return ue.resolve(i)}containsKey(e,t){return ue.resolve(this.Ps.containsKey(t))}}class $H{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Ho(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new ZK(this),this.indexManager=new kK,this.remoteDocumentCache=new zK(i=>this.referenceDelegate.xs(i)),this.It=new wH(t),this.Ns=new GK(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new $K,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new WK(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){He("MemoryPersistence","Starting transaction:",e);const r=new KK(this.Ss.next());return this.referenceDelegate.ks(),i(r).next(s=>this.referenceDelegate.Os(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Ms(e,t){return ue.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class KK extends dj{constructor(e){super(),this.currentSequenceNumber=e}}class wI{constructor(e){this.persistence=e,this.Fs=new bk,this.$s=null}static Bs(e){return new wI(e)}get Ls(){if(this.$s)return this.$s;throw gt()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),ue.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),ue.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),ue.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(r=>this.Ls.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Ls.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ue.forEach(this.Ls,i=>{const r=Xe.fromPath(i);return this.Us(e,r).next(s=>{s||t.removeEntry(r,Lt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return ue.or([()=>ue.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class YK{constructor(e){this.It=e}$(e,t,i,r){const s=new tI("createOrUpgrade",t);var d;i<1&&r>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mH,{unique:!0}),d.createObjectStore("documentMutations"),WH(e),function(d){d.createObjectStore("remoteDocuments")}(e));let c=ue.resolve();return i<3&&r>=3&&(0!==i&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),WH(e)),c=c.next(()=>function(d){const f=d.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Lt.min().toTimestamp(),targetCount:0};return f.put("targetGlobalKey",y)}(s))),i<4&&r>=4&&(0!==i&&(c=c.next(()=>function(d,f){return f.store("mutations").W().next(y=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",mH,{unique:!0});const w=f.store("mutations"),T=y.map(x=>w.put(x));return ue.waitFor(T)})}(e,s))),c=c.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&r>=5&&(c=c.next(()=>this.qs(s))),i<6&&r>=6&&(c=c.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(s)))),i<7&&r>=7&&(c=c.next(()=>this.Gs(s))),i<8&&r>=8&&(c=c.next(()=>this.Qs(e,s))),i<9&&r>=9&&(c=c.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&r>=10&&(c=c.next(()=>this.js(s))),i<11&&r>=11&&(c=c.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&r>=12&&(c=c.next(()=>{!function(d){const f=d.createObjectStore("documentOverlays",{keyPath:wK});f.createIndex("collectionPathOverlayIndex",EK,{unique:!1}),f.createIndex("collectionGroupOverlayIndex",CK,{unique:!1})}(e)})),i<13&&r>=13&&(c=c.next(()=>function(d){const f=d.createObjectStore("remoteDocumentsV14",{keyPath:uK});f.createIndex("documentKeyIndex",dK),f.createIndex("collectionGroupIndex",hK)}(e)).next(()=>this.Ws(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&r>=14&&(c=c.next(()=>this.zs(e,s))),i<15&&r>=15&&(c=c.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:_K}).createIndex("sequenceNumberIndex",yK,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:vK}).createIndex("documentKeyIndex",bK,{unique:!1})}(e))),c}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,r)=>{t+=yI(r)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(r=>ue.forEach(r,s=>{const c=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",c).next(d=>ue.forEach(d,f=>{Ft(f.userId===s.userId);const y=Ig(this.It,f);return kH(e,s.userId,y).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(r=>{const s=[];return i.Z((c,d)=>{const f=new vn(c),y=[0,uo(f)];s.push(t.get(y).next(w=>w?ue.resolve():t.put({targetId:0,path:uo(f),sequenceNumber:r.highestListenSequenceNumber})))}).next(()=>ue.waitFor(s))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:mK});const i=t.store("collectionParents"),r=new vk,s=c=>{if(r.add(c)){const d=c.lastSegment(),f=c.popLast();return i.put({collectionId:d,parent:uo(f)})}};return t.store("remoteDocuments").Z({X:!0},(c,d)=>{const f=new vn(c);return s(f.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([c,d,f],y)=>{const w=wu(d);return s(w.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,r)=>{const s=vw(r),c=CH(this.It,s);return t.put(c)})}Ws(e,t){const i=t.store("remoteDocuments"),r=[];return i.Z((s,c)=>{const d=t.store("remoteDocumentsV14"),f=(y=c,y.document?new Xe(vn.fromString(y.document.name).popFirst(5)):y.noDocument?Xe.fromSegments(y.noDocument.path):y.unknownDocument?Xe.fromSegments(y.unknownDocument.path):gt()).path.toArray();var y;const w={prefixPath:f.slice(0,f.length-2),collectionGroup:f[f.length-2],documentId:f[f.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};r.push(d.put(w))}).next(()=>ue.waitFor(r))}zs(e,t){const i=t.store("mutations"),r=UH(this.It),s=new $H(wI.Bs,this.It.re);return i.W().next(c=>{const d=new Map;return c.forEach(f=>{var y;let w=null!==(y=d.get(f.userId))&&void 0!==y?y:Qt();Ig(this.It,f).keys().forEach(T=>w=w.add(T)),d.set(f.userId,w)}),ue.forEach(d,(f,y)=>{const w=new Gr(y),T=gI.oe(this.It,w),x=s.getIndexManager(w),O=vI.oe(w,this.It,x,s.referenceDelegate);return new GH(r,O,T,x).recalculateAndSaveOverlaysForDocumentKeys(new fk(t,Ho.at),f).next()})})}}function WH(n){n.createObjectStore("targetDocuments",{keyPath:pK}).createIndex("documentTargetsIndex",gK,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fK,{unique:!0}),n.createObjectStore("targetGlobal")}const wk="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ek{constructor(e,t,i,r,s,c,d,f,y,w,T=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=s,this.window=c,this.document=d,this.Js=y,this.Ys=w,this.Xs=T,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=x=>Promise.resolve(),!Ek.C())throw new Ue(me.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UK(this,r),this.ii=t+"main",this.It=new wH(f),this.ri=new rc(this.ii,this.Xs,new YK(this.It)),this.Cs=new PK(this.referenceDelegate,this.It),this.remoteDocumentCache=UH(this.It),this.Ns=new SK,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===w&&er("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ue(me.FAILED_PRECONDITION,wk);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Ho(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,Ee.Z)(function*(r){if(t.started)return e(r)});return function(r){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ee.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>EI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Cf(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Dw(e).get("owner").next(t=>ue.resolve(this.mi(t)))}gi(e){return EI(e).delete(this.clientId)}yi(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const r=Wr(i,"clientMetadata");return r.W().next(s=>{const c=e.Ii(s,18e5),d=s.filter(f=>-1===c.indexOf(f));return ue.forEach(d,f=>r.delete(f.clientId)).next(()=>d)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?ue.resolve(!0):Dw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ue(me.FAILED_PRECONDITION,wk);return!1}}return!(!this.networkEnabled||!this.inForeground)||EI(e).W().next(i=>void 0===this.Ii(i,5e3).find(r=>{if(this.clientId!==r.clientId){const c=!this.inForeground&&r.inForeground,d=this.networkEnabled===r.networkEnabled;if(!this.networkEnabled&&r.networkEnabled||c&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new fk(t,Ho.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>EI(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return vI.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new RK(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return gI.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){He("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=15===(c=this.Xs)?DK:14===c?bH:13===c?vH:12===c?TK:11===c?yH:void gt();var c;let d;return this.ri.runTransaction(e,r,s,f=>(d=new fk(f,this.Ss?this.Ss.next():Ho.at),"readwrite-primary"===t?this.fi(d).next(y=>!!y||this.di(d)).next(y=>{if(!y)throw er(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ue(me.FAILED_PRECONDITION,uj);return i(d)}).next(y=>this.wi(d).next(()=>y)):this.Vi(d).next(()=>i(d)))).then(f=>(d.raiseOnCommittedEvent(),f))}Vi(e){return Dw(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ue(me.FAILED_PRECONDITION,wk)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Dw(e).put("owner",t)}static C(){return rc.C()}_i(e){const t=Dw(e);return t.get("owner").next(i=>this.mi(i)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ue.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(er(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,L.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return He("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return er("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){er("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dw(n){return Wr(n,"owner")}function EI(n){return Wr(n,"clientMetadata")}function Ck(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Tk{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=r}static Ci(e,t){let i=Qt(),r=Qt();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Tk(e,t.fromCache,i,r)}}class zH{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,r){return this.ki(e,t).next(s=>s||this.Oi(e,t,r,i)).next(s=>s||this.Mi(e,t))}ki(e,t){if(Oj(t))return ue.resolve(null);let i=co(t);return this.indexManager.getIndexType(e,i).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=aI(t,null,"F"),i=co(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const c=Qt(...s);return this.Ni.getDocuments(e,c).next(d=>this.indexManager.getMinOffset(e,i).next(f=>{const y=this.Fi(t,d);return this.$i(t,y,c,f.readTime)?this.ki(e,aI(t,null,"F")):this.Bi(e,y,t,f)}))})))}Oi(e,t,i,r){return Oj(t)||r.isEqual(Lt.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(s=>{const c=this.Fi(t,s);return this.$i(t,c,i,r)?this.Mi(e,t):(ZO()<=nc.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ok(t)),this.Bi(e,c,t,lj(r,-1)))})}Fi(e,t){let i=new qn(Pj(e));return t.forEach((r,s)=>{ak(e,s)&&(i=i.add(s))}),i}$i(e,t,i,r){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Mi(e,t){return ZO()<=nc.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",ok(t)),this.Ni.getDocumentsMatchingQuery(e,t,Ba.min())}Bi(e,t,i,r){return this.Ni.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(c=>{s=s.insert(c.key,c)}),s))}}class QK{constructor(e,t,i,r){this.persistence=e,this.Li=t,this.It=r,this.Ui=new ji(Gt),this.qi=new xf(s=>wg(s),aw),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new GH(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function qH(n,e,t,i){return new QK(n,e,t,i)}function ZH(n,e){return Dk.apply(this,arguments)}function Dk(){return Dk=(0,Ee.Z)(function*(n,e){const t=nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const c=[],d=[];let f=Qt();for(const y of r){c.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}for(const y of s){d.push(y.batchId);for(const w of y.mutations)f=f.add(w.key)}return t.localDocuments.getDocuments(i,f).next(y=>({ji:y,removedBatchIds:c,addedBatchIds:d}))})})}),Dk.apply(this,arguments)}function JK(n,e){const t=nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.Gi.newChangeBuffer({trackRemovals:!0});return function(c,d,f,y){const w=f.batch,T=w.keys();let x=ue.resolve();return T.forEach(O=>{x=x.next(()=>y.getEntry(d,O)).next(F=>{const G=f.docVersions.get(O);Ft(null!==G),F.version.compareTo(G)<0&&(w.applyToRemoteDocument(F,f),F.isValidDocument()&&(F.setReadTime(f.commitVersion),y.addEntry(F)))})}),x.next(()=>c.mutationQueue.removeMutationBatch(d,w))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let d=Qt();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(d=d.add(c.batch.mutations[f].key));return d}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function KH(n){const e=nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function XK(n,e){const t=nt(n),i=e.snapshotVersion;let r=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const c=t.Gi.newChangeBuffer({trackRemovals:!0});r=t.Ui;const d=[];e.targetChanges.forEach((w,T)=>{const x=r.get(T);if(!x)return;d.push(t.Cs.removeMatchingKeys(s,w.removedDocuments,T).next(()=>t.Cs.addMatchingKeys(s,w.addedDocuments,T)));let O=x.withSequenceNumber(s.currentSequenceNumber);var F,G,Q;e.targetMismatches.has(T)?O=O.withResumeToken(xr.EMPTY_BYTE_STRING,Lt.min()).withLastLimboFreeSnapshotVersion(Lt.min()):w.resumeToken.approximateByteSize()>0&&(O=O.withResumeToken(w.resumeToken,i)),r=r.insert(T,O),G=O,Q=w,(0===(F=x).resumeToken.approximateByteSize()||G.snapshotVersion.toMicroseconds()-F.snapshotVersion.toMicroseconds()>=3e8||Q.addedDocuments.size+Q.modifiedDocuments.size+Q.removedDocuments.size>0)&&d.push(t.Cs.updateTargetData(s,O))});let f=Go(),y=Qt();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(s,w))}),d.push(YH(s,c,e.documentUpdates).next(w=>{f=w.Wi,y=w.zi})),!i.isEqual(Lt.min())){const w=t.Cs.getLastRemoteSnapshotVersion(s).next(T=>t.Cs.setTargetsMetadata(s,s.currentSequenceNumber,i));d.push(w)}return ue.waitFor(d).next(()=>c.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,f,y)).next(()=>f)}).then(s=>(t.Ui=r,s))}function YH(n,e,t){let i=Qt(),r=Qt();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let c=Go();return t.forEach((d,f)=>{const y=s.get(d);f.isFoundDocument()!==y.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Lt.min())?(e.removeEntry(d,f.readTime),c=c.insert(d,f)):!y.isValidDocument()||f.version.compareTo(y.version)>0||0===f.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(f),c=c.insert(d,f)):He("LocalStore","Ignoring outdated watch update for ",d,". Current version:",y.version," Watch version:",f.version)}),{Wi:c,zi:r}})}function eY(n,e){const t=nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Cy(n,e){const t=nt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Cs.getTargetData(i,e).next(s=>s?(r=s,ue.resolve(r)):t.Cs.allocateTargetId(i).next(c=>(r=new Mf(e,c,0,i.currentSequenceNumber),t.Cs.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ui.get(i.targetId);return(null===r||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Ty(n,e,t){return Ik.apply(this,arguments)}function Ik(){return Ik=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=i.Ui.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,c=>i.persistence.referenceDelegate.removeTarget(c,r)))}catch(c){if(!Cf(c))throw c;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}i.Ui=i.Ui.remove(e),i.qi.delete(r.target)}),Ik.apply(this,arguments)}function CI(n,e,t){const i=nt(n);let r=Lt.min(),s=Qt();return i.persistence.runTransaction("Execute query","readonly",c=>function(d,f,y){const w=nt(d),T=w.qi.get(y);return void 0!==T?ue.resolve(w.Ui.get(T)):w.Cs.getTargetData(f,y)}(i,c,co(e)).next(d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(c,d.targetId).next(f=>{s=f})}).next(()=>i.Li.getDocumentsMatchingQuery(c,e,t?r:Lt.min(),t?s:Qt())).next(d=>(XH(i,Rj(e),d),{documents:d,Hi:s})))}function QH(n,e){const t=nt(n),i=nt(t.Cs),r=t.Ui.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",s=>i.se(s,e).next(c=>c?c.target:null))}function JH(n,e){const t=nt(n),i=t.Ki.get(e)||Lt.min();return t.persistence.runTransaction("Get new document changes","readonly",r=>t.Gi.getAllFromCollectionGroup(r,e,lj(i,-1),Number.MAX_SAFE_INTEGER)).then(r=>(XH(t,e,r),r))}function XH(n,e,t){let i=n.Ki.get(e)||Lt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Ki.set(e,i)}function Sk(){return Sk=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n);let s=Qt(),c=Go();for(const y of t){const w=e.Ji(y.metadata.name);y.document&&(s=s.add(w));const T=e.Yi(y);T.setReadTime(e.Xi(y.metadata.readTime)),c=c.insert(w,T)}const d=r.Gi.newChangeBuffer({trackRemovals:!0}),f=yield Cy(r,(y=i,co(fy(vn.fromString(`__bundle__/docs/${y}`)))));var y;return r.persistence.runTransaction("Apply bundle documents","readwrite",y=>YH(y,d,c).next(w=>(d.apply(y),w)).next(w=>r.Cs.removeMatchingKeysForTargetId(y,f.targetId).next(()=>r.Cs.addMatchingKeys(y,s,f.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(y,w.Wi,w.zi)).next(()=>w.Wi)))}),Sk.apply(this,arguments)}function nY(n,e){return Ak.apply(this,arguments)}function Ak(){return Ak=(0,Ee.Z)(function*(n,e,t=Qt()){const i=yield Cy(n,co(_k(e.bundledQuery))),r=nt(n);return r.persistence.runTransaction("Save named query","readwrite",s=>{const c=$r(e.readTime);if(i.snapshotVersion.compareTo(c)>=0)return r.Ns.saveNamedQuery(s,e);const d=i.withResumeToken(xr.EMPTY_BYTE_STRING,c);return r.Ui=r.Ui.insert(d.targetId,d),r.Cs.updateTargetData(s,d).next(()=>r.Cs.removeMatchingKeysForTargetId(s,i.targetId)).next(()=>r.Cs.addMatchingKeys(s,t,i.targetId)).next(()=>r.Ns.saveNamedQuery(s,e))})}),Ak.apply(this,arguments)}function e3(n,e){return`firestore_clients_${n}_${e}`}function t3(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function xk(n,e){return`firestore_targets_${n}_${e}`}class TI{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static Zi(e,t,i){const r=JSON.parse(i);let s,c="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return c&&r.error&&(c="string"==typeof r.error.message&&"string"==typeof r.error.code,c&&(s=new Ue(r.error.code,r.error.message))),c?new TI(e,t,r.state,s):(er("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Iw{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let r,s="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new Ue(i.error.code,i.error.message))),s?new Iw(e,i.state,r):(er("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class DI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let r="object"==typeof i&&i.activeTargetIds instanceof Array,s=dI();for(let c=0;r&&c<i.activeTargetIds.length;++c)r=_j(i.activeTargetIds[c]),s=s.add(i.activeTargetIds[c]);return r?new DI(e,s):(er("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Mk{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mk(t.clientId,t.onlineState):(er("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nk{constructor(){this.activeTargetIds=dI()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ok{constructor(e,t,i,r,s){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ji(Gt),this.started=!1,this.cr=[];const c=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.ar=e3(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Nk),this.lr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.vi();for(const r of t){if(r===e.sr)continue;const s=e.getItem(e3(e.persistenceKey,r));if(s){const c=DI.Zi(r,s);c&&(e.ur=e.ur.insert(c.clientId,c))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const r=e.yr(i);r&&e.pr(r)}for(const r of e.cr)e.rr(r);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(xk(this.persistenceKey,e));if(i){const r=Iw.Zi(e,i);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(xk(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(r=>{this.Er(r)}),this.currentUser=e,i.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(He("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void er("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const r=t.vr(i.key);return t.Vr(r,null)}{const r=t.Sr(i.key,i.newValue);if(r)return t.Vr(r.clientId,r)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const r=t.Dr(i.key,i.newValue);if(r)return t.Cr(r)}}else if(t._r.test(i.key)){if(null!==i.newValue){const r=t.Nr(i.key,i.newValue);if(r)return t.kr(r)}}else if(i.key===t.wr){if(null!==i.newValue){const r=t.yr(i.newValue);if(r)return t.pr(r)}}else if(i.key===t.hr){const r=function(s){let c=Ho.at;if(null!=s)try{const d=JSON.parse(s);Ft("number"==typeof d),c=d}catch(d){er("SharedClientState","Failed to read sequence number from WebStorage",d)}return c}(i.newValue);r!==Ho.at&&t.sequenceNumberHandler(r)}else if(i.key===t.mr){const r=t.Or(i.newValue);yield Promise.all(r.map(s=>t.syncEngine.Mr(s)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const r=new TI(this.currentUser,e,t,i),s=t3(this.persistenceKey,this.currentUser,e);this.setItem(s,r.tr())}Er(e){const t=t3(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const r=xk(this.persistenceKey,e),s=new Iw(e,t,i);this.setItem(r,s.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return DI.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),r=Number(i[1]);return TI.Zi(new Gr(void 0!==i[2]?i[2]:null),r,t)}Nr(e,t){const i=this._r.exec(e),r=Number(i[1]);return Iw.Zi(r,t)}yr(e){return Mk.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),r=this.Ir(this.ur),s=this.Ir(i),c=[],d=[];return s.forEach(f=>{r.has(f)||c.push(f)}),r.forEach(f=>{s.has(f)||d.push(f)}),this.syncEngine.Br(c,d).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=dI();return e.forEach((i,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class n3{constructor(){this.Lr=new Nk,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Nk,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iY{qr(e){}shutdown(){}}class r3{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const rY={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sY{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class oY extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,r,s){const c=this.ho(e,t);He("RestConnection","Sending: ",c,i);const d={};return this.lo(d,r,s),this.fo(e,c,d,i).then(f=>(He("RestConnection","Received: ",f),f),f=>{throw pg("RestConnection",`${e} failed with error: `,f,"url: ",c,"request:",i),f})}_o(e,t,i,r,s,c){return this.ao(e,t,i,r,s)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+ly,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}ho(e,t){return`${this.oo}/v1/${t}:${rY[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,r){return new Promise((s,c)=>{const d=new r7;d.setWithCredentials(!0),d.listenOnce(t7.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case qO.NO_ERROR:const y=d.getResponseJson();He("Connection","XHR received:",JSON.stringify(y)),s(y);break;case qO.TIMEOUT:He("Connection",'RPC "'+e+'" timed out'),c(new Ue(me.DEADLINE_EXCEEDED,"Request time out"));break;case qO.HTTP_ERROR:const w=d.getStatus();if(He("Connection",'RPC "'+e+'" failed with status:',w,"response text:",d.getResponseText()),w>0){const T=d.getResponseJson().error;if(T&&T.status&&T.message){const x=function(O){const F=O.toLowerCase().replace(/_/g,"-");return Object.values(me).indexOf(F)>=0?F:me.UNKNOWN}(T.status);c(new Ue(x,T.message))}else c(new Ue(me.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new Ue(me.UNAVAILABLE,"Connection failed."));break;default:gt()}}finally{He("Connection",'RPC "'+e+'" completed.')}});const f=JSON.stringify(r);d.send(t,"POST",f,i,15)})}wo(e,t,i){const r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=XZ(),c=e7(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(d.xmlHttpFactory=new i7({})),this.lo(d.initMessageHeaders,t,i),d.encodeInitMessageHeaders=!0;const f=r.join("");He("Connection","Creating WebChannel: "+f,d);const y=s.createWebChannel(f,d);let w=!1,T=!1;const x=new sY({Hr:F=>{T?He("Connection","Not sending because WebChannel is closed:",F):(w||(He("Connection","Opening WebChannel transport."),y.open(),w=!0),He("Connection","WebChannel sending:",F),y.send(F))},Jr:()=>y.close()}),O=(F,G,Q)=>{F.listen(G,pe=>{try{Q(pe)}catch(Se){setTimeout(()=>{throw Se},0)}})};return O(y,JD.EventType.OPEN,()=>{T||He("Connection","WebChannel transport opened.")}),O(y,JD.EventType.CLOSE,()=>{T||(T=!0,He("Connection","WebChannel transport closed"),x.io())}),O(y,JD.EventType.ERROR,F=>{T||(T=!0,pg("Connection","WebChannel transport errored:",F),x.io(new Ue(me.UNAVAILABLE,"The operation could not be completed")))}),O(y,JD.EventType.MESSAGE,F=>{var G;if(!T){const Q=F.data[0];Ft(!!Q);const pe=Q,Se=pe.error||(null===(G=pe[0])||void 0===G?void 0:G.error);if(Se){He("Connection","WebChannel received error:",Se);const ke=Se.status;let Ae=function(We){const ft=yr[We];if(void 0!==ft)return Yj(ft)}(ke),Be=Se.message;void 0===Ae&&(Ae=me.INTERNAL,Be="Unknown error status: "+ke+" with message "+Se.message),T=!0,x.io(new Ue(Ae,Be)),y.close()}else He("Connection","WebChannel received:",Q),x.ro(Q)}}),O(c,n7.STAT_EVENT,F=>{F.stat===nj.PROXY?He("Connection","Detected buffering proxy"):F.stat===nj.NOPROXY&&He("Connection","Detected no buffering proxy")}),setTimeout(()=>{x.so()},0),x}}function s3(){return"undefined"!=typeof window?window:null}function II(){return"undefined"!=typeof document?document:null}function Sw(n){return new Q7(n,!0)}class kk{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=r,this.po=s,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),r=Math.max(0,t-i);r>0&&He("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,r,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class o3{constructor(e,t,i,r,s,c,d,f){this.Hs=e,this.vo=i,this.Vo=r,this.connection=s,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new kk(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ee.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,Ee.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===me.RESOURCE_EXHAUSTED?(er(t.toString()),er("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===me.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.So===t&&this.Go(i,r)},i=>{e(()=>{const r=new Ue(me.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(r)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(r=>{i(()=>this.Qo(r))}),this.stream.onMessage(r=>{i(()=>this.onMessage(r))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ee.Z)(function*(){e.state=0,e.start()}))}Qo(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class aY extends o3{constructor(e,t,i,r,s,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,c),this.It=s}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function eK(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(f=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===f?1:"REMOVE"===f?2:"CURRENT"===f?3:"RESET"===f?4:gt(),r=e.targetChange.targetIds||[],s=function(f,y){return f.gt?(Ft(void 0===y||"string"==typeof y),xr.fromBase64String(y||"")):(Ft(void 0===y||y instanceof Uint8Array),xr.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,d=c&&function(f){const y=void 0===f.code?me.UNKNOWN:Yj(f.code);return new Ue(y,f.message||"")}(c);t=new tH(i,r,s,d||null)}else if("documentChange"in e){const i=e.documentChange,r=bu(n,i.document.name),s=$r(i.document.updateTime),c=new cs({mapValue:{fields:i.document.fields}}),d=ii.newFoundDocument(r,s,c);t=new hI(i.targetIds||[],i.removedTargetIds||[],d.key,d)}else if("documentDelete"in e){const i=e.documentDelete,r=bu(n,i.document),s=i.readTime?$r(i.readTime):Lt.min(),c=ii.newNoDocument(r,s);t=new hI([],i.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const i=e.documentRemove,r=bu(n,i.document);t=new hI([],i.removedTargetIds||[],r,null)}else{if(!("filter"in e))return gt();{const i=e.filter,s=new G7(i.count||0);t=new eH(i.targetId,s)}}var f;return t}(this.It,e),i=function(r){if(!("targetChange"in r))return Lt.min();const s=r.targetChange;return s.targetIds&&s.targetIds.length?Lt.min():s.readTime?$r(s.readTime):Lt.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=_w(this.It),t.addTarget=function(r,s){let c;const d=s.target;return c=sI(d)?{documents:dH(r,d)}:{query:hk(r,d)},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0?c.resumeToken=sH(r,s.resumeToken):s.snapshotVersion.compareTo(Lt.min())>0&&(c.readTime=gw(r,s.snapshotVersion.toTimestamp())),c}(this.It,e);const i=function nK(n,e){const t=function(i,r){switch(r){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return gt()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=_w(this.It),t.removeTarget=e,this.Bo(t)}}class lY extends o3{constructor(e,t,i,r,s,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,c),this.It=s,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(Ft(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function tK(n,e){return n&&n.length>0?(Ft(void 0!==e),n.map(t=>function(i,r){let s=$r(i.updateTime?i.updateTime:r);return s.isEqual(Lt.min())&&(s=$r(r)),new V7(s,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=$r(e.commitTime);return this.listener.Zo(i,t)}return Ft(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=_w(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>yw(this.It,i))};this.Bo(t)}}class cY extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.It=r,this.nu=!1}su(){if(this.nu)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,s])=>this.connection.ao(e,t,i,r,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new Ue(me.UNKNOWN,r.toString())})}_o(e,t,i,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection._o(e,t,i,s,c,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===me.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ue(me.UNKNOWN,s.toString())})}terminate(){this.nu=!0}}class dY{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(er(t),this.ou=!1):He("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class hY{constructor(e,t,i,r,s){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=s,this.mu.qr(d=>{i.enqueueAndForget((0,Ee.Z)(function*(){var f;Od(c)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(f=(0,Ee.Z)(function*(y){const w=nt(y);w._u.add(4),yield Dy(w),w.gu.set("Unknown"),w._u.delete(4),yield Aw(w)}),function(y){return f.apply(this,arguments)})(c))}))}),this.gu=new dY(i,r)}}function Aw(n){return Pk.apply(this,arguments)}function Pk(){return Pk=(0,Ee.Z)(function*(n){if(Od(n))for(const e of n.wu)yield e(!0)}),Pk.apply(this,arguments)}function Dy(n){return Fk.apply(this,arguments)}function Fk(){return Fk=(0,Ee.Z)(function*(n){for(const e of n.wu)yield e(!1)}),Fk.apply(this,arguments)}function SI(n,e){const t=nt(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),Uk(t)?Bk(t):Sy(t).ko()&&Lk(t,e))}function xw(n,e){const t=nt(n),i=Sy(t);t.du.delete(e),i.ko()&&a3(t,e),0===t.du.size&&(i.ko()?i.Fo():Od(t)&&t.gu.set("Unknown"))}function Lk(n,e){n.yu.Mt(e.targetId),Sy(n).zo(e)}function a3(n,e){n.yu.Mt(e),Sy(n).Ho(e)}function Bk(n){n.yu=new Z7({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),Sy(n).start(),n.gu.uu()}function Uk(n){return Od(n)&&!Sy(n).No()&&n.du.size>0}function Od(n){return 0===nt(n)._u.size}function l3(n){n.yu=void 0}function fY(n){return Vk.apply(this,arguments)}function Vk(){return Vk=(0,Ee.Z)(function*(n){n.du.forEach((e,t)=>{Lk(n,e)})}),Vk.apply(this,arguments)}function pY(n,e){return jk.apply(this,arguments)}function jk(){return jk=(0,Ee.Z)(function*(n,e){l3(n),Uk(n)?(n.gu.hu(e),Bk(n)):n.gu.set("Unknown")}),jk.apply(this,arguments)}function gY(n,e,t){return Hk.apply(this,arguments)}function Hk(){return Hk=(0,Ee.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof tH&&2===e.state&&e.cause)try{yield(i=(0,Ee.Z)(function*(r,s){const c=s.cause;for(const d of s.targetIds)r.du.has(d)&&(yield r.remoteSyncer.rejectListen(d,c),r.du.delete(d),r.yu.removeTarget(d))}),function(r,s){return i.apply(this,arguments)})(n,e)}catch(i){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield AI(n,i)}else if(e instanceof hI?n.yu.Gt(e):e instanceof eH?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(Lt.min()))try{const i=yield KH(n.localStore);t.compareTo(i)>=0&&(yield function(r,s){const c=r.yu.te(s);return c.targetChanges.forEach((d,f)=>{if(d.resumeToken.approximateByteSize()>0){const y=r.du.get(f);y&&r.du.set(f,y.withResumeToken(d.resumeToken,s))}}),c.targetMismatches.forEach(d=>{const f=r.du.get(d);if(!f)return;r.du.set(d,f.withResumeToken(xr.EMPTY_BYTE_STRING,f.snapshotVersion)),a3(r,d);const y=new Mf(f.target,d,1,f.sequenceNumber);Lk(r,y)}),r.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){He("RemoteStore","Failed to raise snapshot:",i),yield AI(n,i)}var i}),Hk.apply(this,arguments)}function AI(n,e,t){return Gk.apply(this,arguments)}function Gk(){return Gk=(0,Ee.Z)(function*(n,e,t){if(!Cf(e))throw e;n._u.add(1),yield Dy(n),n.gu.set("Offline"),t||(t=()=>KH(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield Aw(n)}))}),Gk.apply(this,arguments)}function c3(n,e){return e().catch(t=>AI(n,t,e))}function Iy(n){return $k.apply(this,arguments)}function $k(){return $k=(0,Ee.Z)(function*(n){const e=nt(n),t=kf(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;mY(e);)try{const r=yield eY(e.localStore,i);if(null===r){0===e.fu.length&&t.Fo();break}i=r.batchId,_Y(e,r)}catch(r){yield AI(e,r)}u3(e)&&d3(e)}),$k.apply(this,arguments)}function mY(n){return Od(n)&&n.fu.length<10}function _Y(n,e){n.fu.push(e);const t=kf(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function u3(n){return Od(n)&&!kf(n).No()&&n.fu.length>0}function d3(n){kf(n).start()}function yY(n){return Wk.apply(this,arguments)}function Wk(){return Wk=(0,Ee.Z)(function*(n){kf(n).eu()}),Wk.apply(this,arguments)}function vY(n){return zk.apply(this,arguments)}function zk(){return zk=(0,Ee.Z)(function*(n){const e=kf(n);for(const t of n.fu)e.Xo(t.mutations)}),zk.apply(this,arguments)}function bY(n,e,t){return qk.apply(this,arguments)}function qk(){return qk=(0,Ee.Z)(function*(n,e,t){const i=n.fu.shift(),r=gk.from(i,e,t);yield c3(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Iy(n)}),qk.apply(this,arguments)}function wY(n,e){return Zk.apply(this,arguments)}function Zk(){return Zk=(0,Ee.Z)(function*(n,e){var t;e&&kf(n).Yo&&(yield(t=(0,Ee.Z)(function*(i,r){if(Kj(s=r.code)&&s!==me.ABORTED){const c=i.fu.shift();kf(i).Mo(),yield c3(i,()=>i.remoteSyncer.rejectFailedWrite(c.batchId,r)),yield Iy(i)}var s}),function(i,r){return t.apply(this,arguments)})(n,e)),u3(n)&&d3(n)}),Zk.apply(this,arguments)}function h3(n,e){return Kk.apply(this,arguments)}function Kk(){return Kk=(0,Ee.Z)(function*(n,e){const t=nt(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const i=Od(t);t._u.add(3),yield Dy(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield Aw(t)}),Kk.apply(this,arguments)}function Yk(n,e){return Qk.apply(this,arguments)}function Qk(){return Qk=(0,Ee.Z)(function*(n,e){const t=nt(n);e?(t._u.delete(2),yield Aw(t)):e||(t._u.add(2),yield Dy(t),t.gu.set("Unknown"))}),Qk.apply(this,arguments)}function Sy(n){return n.pu||(n.pu=function(e,t,i){const r=nt(e);return r.su(),new aY(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:fY.bind(null,n),Zr:pY.bind(null,n),Wo:gY.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.pu.Mo(),Uk(n)?Bk(n):n.gu.set("Unknown")):(yield n.pu.stop(),l3(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function kf(n){return n.Iu||(n.Iu=function(e,t,i){const r=nt(e);return r.su(),new lY(t,r.connection,r.authCredentials,r.appCheckCredentials,r.It,i)}(n.datastore,n.asyncQueue,{Yr:yY.bind(null,n),Zr:wY.bind(null,n),tu:vY.bind(null,n),Zo:bY.bind(null,n)}),n.wu.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Iu.Mo(),yield Iy(n)):(yield n.Iu.stop(),n.fu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class Jk{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,i,r,s){const c=Date.now()+i,d=new Jk(e,t,c,r,s);return d.start(i),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ue(me.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ay(n,e){if(er("AsyncQueue",`${e}: ${n}`),Cf(n))return new Ue(me.UNAVAILABLE,`${e}: ${n}`);throw n}class xy{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Xe.comparator(t.key,i.key):(t,i)=>Xe.comparator(t.key,i.key),this.keyedMap=dw(),this.sortedSet=new ji(this.comparator)}static emptySet(e){return new xy(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof xy)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new xy;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class f3{constructor(){this.Tu=new ji(Xe.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):gt():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class My{constructor(e,t,i,r,s,c,d,f,y){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=c,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=y}static fromInitialDocuments(e,t,i,r,s){const c=[];return t.forEach(d=>{c.push({type:0,doc:d})}),new My(e,t,xy.emptySet(t),c,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}class EY{constructor(){this.Au=void 0,this.listeners=[]}}class CY{constructor(){this.queries=new xf(e=>kj(e),lw),this.onlineState="Unknown",this.Ru=new Set}}function Xk(n,e){return eR.apply(this,arguments)}function eR(){return eR=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.query;let r=!1,s=t.queries.get(i);if(s||(r=!0,s=new EY),r)try{s.Au=yield t.onListen(i)}catch(c){const d=Ay(c,`Initialization of query '${ok(e.query)}' failed`);return void e.onError(d)}t.queries.set(i,s),s.listeners.push(e),e.bu(t.onlineState),s.Au&&e.Pu(s.Au)&&iR(t)}),eR.apply(this,arguments)}function tR(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.query;let r=!1;const s=t.queries.get(i);if(s){const c=s.listeners.indexOf(e);c>=0&&(s.listeners.splice(c,1),r=0===s.listeners.length)}if(r)return t.queries.delete(i),t.onUnlisten(i)}),nR.apply(this,arguments)}function TY(n,e){const t=nt(n);let i=!1;for(const r of e){const c=t.queries.get(r.query);if(c){for(const d of c.listeners)d.Pu(r)&&(i=!0);c.Au=r}}i&&iR(t)}function DY(n,e,t){const i=nt(n),r=i.queries.get(e);if(r)for(const s of r.listeners)s.onError(t);i.queries.delete(e)}function iR(n){n.Ru.forEach(e=>{e.next()})}class rR{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)3!==r.type&&i.push(r);e=new My(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=My.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class IY{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class p3{constructor(e){this.It=e}Ji(e){return bu(this.It,e)}Yi(e){return e.metadata.exists?uH(this.It,e.document,!1):ii.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return $r(e)}}class SY{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=g3(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=vn.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new p3(this.It);for(const r of e)if(r.metadata.queries){const s=i.Ji(r.metadata.name);for(const c of r.metadata.queries){const d=(t.get(c)||Qt()).add(s);t.set(c,d)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function tY(n,e,t,i){return Sk.apply(this,arguments)}(e.localStore,new p3(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const r of e.queries)yield nY(e.localStore,r,i.get(r.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function g3(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class m3{constructor(e){this.key=e}}class _3{constructor(e){this.key=e}}class y3{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=Qt(),this.mutatedKeys=Qt(),this.Gu=Pj(e),this.Qu=new xy(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new f3,r=t?t.Qu:this.Qu;let s=t?t.mutatedKeys:this.mutatedKeys,c=r,d=!1;const f="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,y="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((w,T)=>{const x=r.get(w),O=ak(this.query,T)?T:null,F=!!x&&this.mutatedKeys.has(x.key),G=!!O&&(O.hasLocalMutations||this.mutatedKeys.has(O.key)&&O.hasCommittedMutations);let Q=!1;x&&O?x.data.isEqual(O.data)?F!==G&&(i.track({type:3,doc:O}),Q=!0):this.Hu(x,O)||(i.track({type:2,doc:O}),Q=!0,(f&&this.Gu(O,f)>0||y&&this.Gu(O,y)<0)&&(d=!0)):!x&&O?(i.track({type:0,doc:O}),Q=!0):x&&!O&&(i.track({type:1,doc:x}),Q=!0,(f||y)&&(d=!0)),Q&&(O?(c=c.add(O),s=G?s.add(w):s.delete(w)):(c=c.delete(w),s=s.delete(w)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const w="F"===this.query.limitType?c.last():c.first();c=c.delete(w.key),s=s.delete(w.key),i.track({type:1,doc:w})}return{Qu:c,zu:i,$i:d,mutatedKeys:s}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const r=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const s=e.zu.Eu();s.sort((y,w)=>function(T,x){const O=F=>{switch(F){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return gt()}};return O(T)-O(x)}(y.type,w.type)||this.Gu(y.doc,w.doc)),this.Ju(i);const c=t?this.Yu():[],d=0===this.Ku.size&&this.current?1:0,f=d!==this.qu;return this.qu=d,0!==s.length||f?{snapshot:new My(this.query,e.Qu,r,s,e.mutatedKeys,0===d,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:c}:{Xu:c}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new f3,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=Qt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new _3(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new m3(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=Qt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return My.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class AY{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class xY{constructor(e){this.key=e,this.nc=!1}}class MY{constructor(e,t,i,r,s,c){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=c,this.sc={},this.ic=new xf(d=>kj(d),lw),this.rc=new Map,this.oc=new Set,this.uc=new ji(Xe.comparator),this.cc=new Map,this.ac=new bk,this.hc={},this.lc=new Map,this.fc=Mg.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function NY(n,e){return sR.apply(this,arguments)}function sR(){return sR=(0,Ee.Z)(function*(n,e){const t=AR(n);let i,r;const s=t.ic.get(e);if(s)i=s.targetId,t.sharedClientState.addLocalQueryTarget(i),r=s.view.ec();else{const c=yield Cy(t.localStore,co(e));t.isPrimaryClient&&SI(t.remoteStore,c);const d=t.sharedClientState.addLocalQueryTarget(c.targetId);i=c.targetId,r=yield oR(t,e,i,"current"===d,c.resumeToken)}return r}),sR.apply(this,arguments)}function oR(n,e,t,i,r){return aR.apply(this,arguments)}function aR(){return aR=(0,Ee.Z)(function*(n,e,t,i,r){n._c=(T,x,O)=>{return(F=(0,Ee.Z)(function*(G,Q,pe,Se){let ke=Q.view.Wu(pe);ke.$i&&(ke=yield CI(G.localStore,Q.query,!1).then(({documents:We})=>Q.view.Wu(We,ke)));const Ae=Se&&Se.targetChanges.get(Q.targetId),Be=Q.view.applyChanges(ke,G.isPrimaryClient,Ae);return _R(G,Q.targetId,Be.Xu),Be.snapshot}),function(G,Q,pe,Se){return F.apply(this,arguments)})(n,T,x,O);var F};const s=yield CI(n.localStore,e,!0),c=new y3(e,s.Hi),d=c.Wu(s.documents),f=pw.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,r),y=c.applyChanges(d,n.isPrimaryClient,f);_R(n,t,y.Xu);const w=new AY(e,t,c);return n.ic.set(e,w),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),y.snapshot}),aR.apply(this,arguments)}function OY(n,e){return lR.apply(this,arguments)}function lR(){return lR=(0,Ee.Z)(function*(n,e){const t=nt(n),i=t.ic.get(e),r=t.rc.get(i.targetId);if(r.length>1)return t.rc.set(i.targetId,r.filter(s=>!lw(s,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Ty(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),xw(t.remoteStore,i.targetId),Ny(t,i.targetId)}).catch(Ef))):(Ny(t,i.targetId),yield Ty(t.localStore,i.targetId,!0))}),lR.apply(this,arguments)}function cR(){return cR=(0,Ee.Z)(function*(n,e,t){const i=xR(n);try{const r=yield function(s,c){const d=nt(s),f=vi.now(),y=c.reduce((x,O)=>x.add(O.key),Qt());let w,T;return d.persistence.runTransaction("Locally write mutations","readwrite",x=>{let O=Go(),F=Qt();return d.Gi.getEntries(x,y).next(G=>{O=G,O.forEach((Q,pe)=>{pe.isValidDocument()||(F=F.add(Q))})}).next(()=>d.localDocuments.getOverlayedDocuments(x,O)).next(G=>{w=G;const Q=[];for(const pe of c){const Se=H7(pe,w.get(pe.key).overlayedDocument);null!=Se&&Q.push(new Nd(pe.key,Se,Tj(Se.value.mapValue),bi.exists(!0)))}return d.mutationQueue.addMutationBatch(x,f,Q,c)}).next(G=>{T=G;const Q=G.applyToLocalDocumentSet(w,F);return d.documentOverlayCache.saveOverlays(x,G.batchId,Q)})}).then(()=>({batchId:T.batchId,changes:Jj(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(s,c,d){let f=s.hc[s.currentUser.toKey()];f||(f=new ji(Gt)),f=f.insert(c,d),s.hc[s.currentUser.toKey()]=f}(i,r.batchId,t),yield kd(i,r.changes),yield Iy(i.remoteStore)}catch(r){const s=Ay(r,"Failed to persist write");t.reject(s)}}),cR.apply(this,arguments)}function v3(n,e){return uR.apply(this,arguments)}function uR(){return uR=(0,Ee.Z)(function*(n,e){const t=nt(n);try{const i=yield XK(t.localStore,e);e.targetChanges.forEach((r,s)=>{const c=t.cc.get(s);c&&(Ft(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?c.nc=!0:r.modifiedDocuments.size>0?Ft(c.nc):r.removedDocuments.size>0&&(Ft(c.nc),c.nc=!1))}),yield kd(t,i,e)}catch(i){yield Ef(i)}}),uR.apply(this,arguments)}function b3(n,e,t){const i=nt(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const r=[];i.ic.forEach((s,c)=>{const d=c.view.bu(e);d.snapshot&&r.push(d.snapshot)}),function(s,c){const d=nt(s);d.onlineState=c;let f=!1;d.queries.forEach((y,w)=>{for(const T of w.listeners)T.bu(c)&&(f=!0)}),f&&iR(d)}(i.eventManager,e),r.length&&i.sc.Wo(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function RY(n,e,t){return dR.apply(this,arguments)}function dR(){return dR=(0,Ee.Z)(function*(n,e,t){const i=nt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.cc.get(e),s=r&&r.key;if(s){let c=new ji(Xe.comparator);c=c.insert(s,ii.newNoDocument(s,Lt.min()));const d=Qt().add(s),f=new fw(Lt.min(),new Map,new qn(Gt),c,d);yield v3(i,f),i.uc=i.uc.remove(s),i.cc.delete(e),yR(i)}else yield Ty(i.localStore,e,!1).then(()=>Ny(i,e,t)).catch(Ef)}),dR.apply(this,arguments)}function PY(n,e){return hR.apply(this,arguments)}function hR(){return hR=(0,Ee.Z)(function*(n,e){const t=nt(n),i=e.batch.batchId;try{const r=yield JK(t.localStore,e);mR(t,i,null),gR(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield kd(t,r)}catch(r){yield Ef(r)}}),hR.apply(this,arguments)}function FY(n,e,t){return fR.apply(this,arguments)}function fR(){return fR=(0,Ee.Z)(function*(n,e,t){const i=nt(n);try{const r=yield function(s,c){const d=nt(s);return d.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let y;return d.mutationQueue.lookupMutationBatch(f,c).next(w=>(Ft(null!==w),y=w.keys(),d.mutationQueue.removeMutationBatch(f,w))).next(()=>d.mutationQueue.performConsistencyCheck(f)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(f,y,c)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,y)).next(()=>d.localDocuments.getDocuments(f,y))})}(i.localStore,e);mR(i,e,t),gR(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield kd(i,r)}catch(r){yield Ef(r)}}),fR.apply(this,arguments)}function pR(){return pR=(0,Ee.Z)(function*(n,e){const t=nt(n);Od(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(s){const c=nt(s);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>c.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===i)return void e.resolve();const r=t.lc.get(i)||[];r.push(e),t.lc.set(i,r)}catch(i){const r=Ay(i,"Initialization of waitForPendingWrites() operation failed");e.reject(r)}}),pR.apply(this,arguments)}function gR(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function mR(n,e,t){const i=nt(n);let r=i.hc[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.hc[i.currentUser.toKey()]=r}}function Ny(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||w3(n,i)})}function w3(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(xw(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),yR(n))}function _R(n,e,t){for(const i of t)i instanceof m3?(n.ac.addReference(i.key,e),BY(n,i)):i instanceof _3?(He("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||w3(n,i.key)):gt()}function BY(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(He("SyncEngine","New document in limbo: "+t),n.oc.add(i),yR(n))}function yR(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new Xe(vn.fromString(e)),i=n.fc.next();n.cc.set(i,new xY(t)),n.uc=n.uc.insert(t,i),SI(n.remoteStore,new Mf(co(fy(t.path)),i,2,Ho.at))}}function kd(n,e,t){return vR.apply(this,arguments)}function vR(){return vR=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=[],s=[],c=[];var d;i.ic.isEmpty()||(i.ic.forEach((d,f)=>{c.push(i._c(f,e,t).then(y=>{if((y||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(f.targetId,(null==y?void 0:y.fromCache)?"not-current":"current"),y){r.push(y);const w=Tk.Ci(f.targetId,y);s.push(w)}}))}),yield Promise.all(c),i.sc.Wo(r),yield(d=(0,Ee.Z)(function*(f,y){const w=nt(f);try{yield w.persistence.runTransaction("notifyLocalViewChanges","readwrite",T=>ue.forEach(y,x=>ue.forEach(x.Si,O=>w.persistence.referenceDelegate.addReference(T,x.targetId,O)).next(()=>ue.forEach(x.Di,O=>w.persistence.referenceDelegate.removeReference(T,x.targetId,O)))))}catch(T){if(!Cf(T))throw T;He("LocalStore","Failed to update sequence numbers: "+T)}for(const T of y){const x=T.targetId;if(!T.fromCache){const O=w.Ui.get(x),G=O.withLastLimboFreeSnapshotVersion(O.snapshotVersion);w.Ui=w.Ui.insert(x,G)}}}),function(f,y){return d.apply(this,arguments)})(i.localStore,s))}),vR.apply(this,arguments)}function UY(n,e){return bR.apply(this,arguments)}function bR(){return bR=(0,Ee.Z)(function*(n,e){const t=nt(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const i=yield ZH(t.localStore,e);t.currentUser=e,(r=t).lc.forEach(c=>{c.forEach(d=>{d.reject(new Ue(me.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield kd(t,i.ji)}var r}),bR.apply(this,arguments)}function VY(n,e){const t=nt(n),i=t.cc.get(e);if(i&&i.nc)return Qt().add(i.key);{let r=Qt();const s=t.rc.get(e);if(!s)return r;for(const c of s){const d=t.ic.get(c);r=r.unionWith(d.view.ju)}return r}}function jY(n,e){return wR.apply(this,arguments)}function wR(){return wR=(0,Ee.Z)(function*(n,e){const t=nt(n),i=yield CI(t.localStore,e.query,!0),r=e.view.tc(i);return t.isPrimaryClient&&_R(t,e.targetId,r.Xu),r}),wR.apply(this,arguments)}function HY(n,e){return ER.apply(this,arguments)}function ER(){return ER=(0,Ee.Z)(function*(n,e){const t=nt(n);return JH(t.localStore,e).then(i=>kd(t,i))}),ER.apply(this,arguments)}function GY(n,e,t,i){return CR.apply(this,arguments)}function CR(){return CR=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n),s=yield function(c,d){const f=nt(c),y=nt(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",w=>y.Tn(w,d).next(T=>T?f.localDocuments.getDocuments(w,T):ue.resolve(null)))}(r.localStore,e);var d;null!==s?("pending"===t?yield Iy(r.remoteStore):"acknowledged"===t||"rejected"===t?(mR(r,e,i||null),gR(r,e),d=e,nt(nt(r.localStore).mutationQueue).An(d)):gt(),yield kd(r,s)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),CR.apply(this,arguments)}function TR(){return TR=(0,Ee.Z)(function*(n,e){const t=nt(n);if(AR(t),xR(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),r=yield E3(t,i.toArray());t.dc=!0,yield Yk(t.remoteStore,!0);for(const s of r)SI(t.remoteStore,s)}else if(!1===e&&!1!==t.dc){const i=[];let r=Promise.resolve();t.rc.forEach((s,c)=>{t.sharedClientState.isLocalQueryTarget(c)?i.push(c):r=r.then(()=>(Ny(t,c),Ty(t.localStore,c,!0))),xw(t.remoteStore,c)}),yield r,yield E3(t,i),function(s){const c=nt(s);c.cc.forEach((d,f)=>{xw(c.remoteStore,f)}),c.ac.fs(),c.cc=new Map,c.uc=new ji(Xe.comparator)}(t),t.dc=!1,yield Yk(t.remoteStore,!1)}}),TR.apply(this,arguments)}function E3(n,e,t){return DR.apply(this,arguments)}function DR(){return DR=(0,Ee.Z)(function*(n,e,t){const i=nt(n),r=[],s=[];for(const c of e){let d;const f=i.rc.get(c);if(f&&0!==f.length){d=yield Cy(i.localStore,co(f[0]));for(const y of f){const w=i.ic.get(y),T=yield jY(i,w);T.snapshot&&s.push(T.snapshot)}}else{const y=yield QH(i.localStore,c);d=yield Cy(i.localStore,y),yield oR(i,C3(y),c,!1,d.resumeToken)}r.push(d)}return i.sc.Wo(s),r}),DR.apply(this,arguments)}function C3(n){return Nj(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WY(n){const e=nt(n);return nt(nt(e.localStore).persistence).vi()}function zY(n,e,t,i){return IR.apply(this,arguments)}function IR(){return IR=(0,Ee.Z)(function*(n,e,t,i){const r=nt(n);if(r.dc)return void He("SyncEngine","Ignoring unexpected query state notification.");const s=r.rc.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const c=yield JH(r.localStore,Rj(s[0])),d=fw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,xr.EMPTY_BYTE_STRING);yield kd(r,c,d);break}case"rejected":yield Ty(r.localStore,e,!0),Ny(r,e,i);break;default:gt()}}),IR.apply(this,arguments)}function qY(n,e,t){return SR.apply(this,arguments)}function SR(){return SR=(0,Ee.Z)(function*(n,e,t){const i=AR(n);if(i.dc){for(const r of e){if(i.rc.has(r)){He("SyncEngine","Adding an already active target "+r);continue}const s=yield QH(i.localStore,r),c=yield Cy(i.localStore,s);yield oR(i,C3(s),c.targetId,!1,c.resumeToken),SI(i.remoteStore,c)}for(const r of t)i.rc.has(r)&&(yield Ty(i.localStore,r,!1).then(()=>{xw(i.remoteStore,r),Ny(i,r)}).catch(Ef))}}),SR.apply(this,arguments)}function AR(n){const e=nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=v3.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=VY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=RY.bind(null,e),e.sc.Wo=TY.bind(null,e.eventManager),e.sc.wc=DY.bind(null,e.eventManager),e}function xR(n){const e=nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FY.bind(null,e),e}class T3{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.It=Sw(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return qH(this.persistence,new zH,e.initialUser,this.It)}yc(e){return new $H(wI.Bs,this.It)}gc(e){return new n3}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class D3 extends T3{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield xR(i.Ac.syncEngine),yield Iy(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return qH(this.persistence,new zH,e.initialUser,this.It)}Tc(e,t){return new LK(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new b7(t,this.persistence);return new v7(e.asyncQueue,i)}yc(e){const t=Ck(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?$o.withCacheSize(this.cacheSizeBytes):$o.DEFAULT;return new Ek(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,s3(),II(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new n3}}class KY extends D3{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,Ee.Z)(function*(){yield t().call(i,e);const r=i.Ac.syncEngine;i.sharedClientState instanceof Ok&&(i.sharedClientState.syncEngine={Fr:GY.bind(null,r),$r:zY.bind(null,r),Br:qY.bind(null,r),vi:WY.bind(null,r),Mr:HY.bind(null,r)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var s=(0,Ee.Z)(function*(c){yield function $Y(n,e){return TR.apply(this,arguments)}(i.Ac.syncEngine,c),i.gcScheduler&&(c&&!i.gcScheduler.started?i.gcScheduler.start():c||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(c&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():c||i.indexBackfillerScheduler.stop())});return function(c){return s.apply(this,arguments)}}())})()}gc(e){const t=s3();if(!Ok.C(t))throw new Ue(me.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ck(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ok(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class MR{initialize(e,t){var i=this;return(0,Ee.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=r=>b3(i.syncEngine,r,1),i.remoteStore.remoteSyncer.handleCredentialChange=UY.bind(null,i.syncEngine),yield Yk(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CY}createDatastore(e){const t=Sw(e.databaseInfo.databaseId),i=new oY(e.databaseInfo);return new cY(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,r=e.asyncQueue,s=d=>b3(this.syncEngine,d,0),c=r3.C()?new r3:new iY,new hY(t,i,r,s,c);var t,i,r,s,c}createSyncEngine(e,t){return function(i,r,s,c,d,f,y){const w=new MY(i,r,s,c,d,f);return y&&(w.dc=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const i=nt(t);He("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield Dy(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function NR(n,e,t){if(!t)throw new Ue(me.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function I3(n,e,t,i){if(!0===e&&!0===i)throw new Ue(me.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function S3(n){if(!Xe.isDocumentKey(n))throw new Ue(me.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function A3(n){if(Xe.isDocumentKey(n))throw new Ue(me.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function xI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":gt()}function fn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ue(me.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=xI(n);throw new Ue(me.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function x3(n,e){if(e<=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const M3=new Map;class N3{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ue(me.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ue(me.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,I3("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new N3({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ue(me.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ue(me.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new N3(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new a7;switch(t.type){case"gapi":return new d7(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ue(me.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=M3.get(e);t&&(He("ComponentProvider","Removing Datastore"),M3.delete(e),t.terminate())}(this),Promise.resolve()}}class ui{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ui(this.firestore,e,this._key)}}class Ls{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Ls(this.firestore,e,this._query)}}class Eu extends Ls{constructor(e,t,i){super(e,t,fy(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ui(this.firestore,null,new Xe(e))}withConverter(e){return new Eu(this.firestore,e,this._path)}}function k3(n,e,...t){if(n=(0,L.m9)(n),NR("collection","path",e),n instanceof Mw){const i=vn.fromString(e,...t);return A3(i),new Eu(n,null,i)}{if(!(n instanceof ui||n instanceof Eu))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(e,...t));return A3(i),new Eu(n.firestore,null,i)}}function MI(n,e,...t){if(n=(0,L.m9)(n),1===arguments.length&&(e=oj.R()),NR("doc","path",e),n instanceof Mw){const i=vn.fromString(e,...t);return S3(i),new ui(n,null,new Xe(i))}{if(!(n instanceof ui||n instanceof Eu))throw new Ue(me.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(vn.fromString(e,...t));return S3(i),new ui(n.firestore,n instanceof Eu?n.converter:null,new Xe(i))}}function R3(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),(n instanceof ui||n instanceof Eu)&&(e instanceof ui||e instanceof Eu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function OR(n,e){return n=(0,L.m9)(n),e=(0,L.m9)(e),n instanceof Ls&&e instanceof Ls&&n.firestore===e.firestore&&lw(n._query,e._query)&&n.converter===e.converter}function P3(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class NI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):er("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QY{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ar,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==i?void 0:i.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),r=Number(i);isNaN(r)&&e.Dc(`length string (${i}) is not valid number`);const s=yield e.Cc(r);return new IY(JSON.parse(s),t.length+r)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ee.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class e9{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ue(me.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(r=(0,Ee.Z)(function*(s,c){const d=nt(s),f=_w(d.It)+"/documents",y={documents:c.map(O=>mw(d.It,O))},w=yield d._o("BatchGetDocuments",f,y,c.length),T=new Map;w.forEach(O=>{const F=function X7(n,e){return"found"in e?function(t,i){Ft(!!i.found);const r=bu(t,i.found.name),s=$r(i.found.updateTime),c=new cs({mapValue:{fields:i.found.fields}});return ii.newFoundDocument(r,s,c)}(n,e):"missing"in e?function(t,i){Ft(!!i.missing),Ft(!!i.readTime);const r=bu(t,i.missing),s=$r(i.readTime);return ii.newNoDocument(r,s)}(n,e):gt()}(d.It,O);T.set(F.key.toString(),F)});const x=[];return c.forEach(O=>{const F=T.get(O.toString());Ft(!!F),x.push(F)}),x}),function(s,c){return r.apply(this,arguments)})(t.datastore,e);var r;return i.forEach(r=>t.recordVersion(r)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new yy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,r)=>{const s=Xe.fromPath(r);e.mutations.push(new lk(s,e.precondition(s)))}),yield(i=(0,Ee.Z)(function*(r,s){const c=nt(r),d=_w(c.It)+"/documents",f={writes:s.map(y=>yw(c.It,y))};yield c.ao("Commit",d,f)}),function(r,s){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw gt();t=Lt.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ue(me.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Lt.min())?bi.exists(!1):bi.updateTime(t):bi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Lt.min()))throw new Ue(me.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return bi.updateTime(t)}return bi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class t9{constructor(e,t,i,r,s){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=r,this.deferred=s,this.kc=i.maxAttempts,this.xo=new kk(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ee.Z)(function*(){const t=new e9(e.datastore),i=e.Mc(t);i&&i.then(r=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(r)}).catch(s=>{e.Fc(s)}))}).catch(r=>{e.Fc(r)})}))}Mc(e){try{const t=this.updateFunction(e);return!nw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Kj(t)}return!1}}class n9{constructor(e,t,i,r){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Gr.UNAUTHENTICATED,this.clientId=oj.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var c=(0,Ee.Z)(function*(d){He("FirestoreClient","Received user=",d.uid),yield s.authCredentialListener(d),s.user=d});return function(d){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(i,c=>(He("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ue(me.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const r=Ay(i,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}function F3(n,e){return kR.apply(this,arguments)}function kR(){return kR=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var r=(0,Ee.Z)(function*(s){i.isEqual(s)||(yield ZH(e.localStore,s),i=s)});return function(s){return r.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),kR.apply(this,arguments)}function L3(n,e){return RR.apply(this,arguments)}function RR(){return RR=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield PR(n);He("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(r=>h3(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>h3(e.remoteStore,s)),n.onlineComponents=e}),RR.apply(this,arguments)}function PR(n){return FR.apply(this,arguments)}function FR(){return FR=(0,Ee.Z)(function*(n){return n.offlineComponents||(He("FirestoreClient","Using default OfflineComponentProvider"),yield F3(n,new T3)),n.offlineComponents}),FR.apply(this,arguments)}function OI(n){return LR.apply(this,arguments)}function LR(){return LR=(0,Ee.Z)(function*(n){return n.onlineComponents||(He("FirestoreClient","Using default OnlineComponentProvider"),yield L3(n,new MR)),n.onlineComponents}),LR.apply(this,arguments)}function B3(n){return PR(n).then(e=>e.persistence)}function kI(n){return PR(n).then(e=>e.localStore)}function BR(n){return OI(n).then(e=>e.remoteStore)}function UR(n){return OI(n).then(e=>e.syncEngine)}function Oy(n){return VR.apply(this,arguments)}function VR(){return VR=(0,Ee.Z)(function*(n){const e=yield OI(n),t=e.eventManager;return t.onListen=NY.bind(null,e.syncEngine),t.onUnlisten=OY.bind(null,e.syncEngine),t}),VR.apply(this,arguments)}function V3(n,e,t={}){const i=new Ar;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,f){const y=new NI({next:T=>{s.enqueueAndForget(()=>tR(r,w));const x=T.docs.has(c);!x&&T.fromCache?f.reject(new Ue(me.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&T.fromCache&&d&&"server"===d.source?f.reject(new Ue(me.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(T)},error:T=>f.reject(T)}),w=new rR(fy(c.path),y,{includeMetadataChanges:!0,Nu:!0});return Xk(r,w)}(yield Oy(n),n.asyncQueue,e,t,i)})),i.promise}function j3(n,e,t={}){const i=new Ar;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(r,s,c,d,f){const y=new NI({next:T=>{s.enqueueAndForget(()=>tR(r,w)),T.fromCache&&"server"===d.source?f.reject(new Ue(me.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(T)},error:T=>f.reject(T)}),w=new rR(c,y,{includeMetadataChanges:!0,Nu:!0});return Xk(r,w)}(yield Oy(n),n.asyncQueue,e,t,i)})),i.promise}class u9{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new kk(this,"async_queue_retry"),this.Wc=()=>{const t=II();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=II();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=II();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ar;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!Cf(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,er("INTERNAL UNHANDLED ERROR: ",function(s){let c=s.message||"";return s.stack&&(c=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),c}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const r=Jk.createAndSchedule(this,e,t,i,s=>this.Yc(s));return this.qc.push(r),r}zc(){this.Kc&&gt()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function jR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const r of["next","error","complete"])if(r in i&&"function"==typeof i[r])return!0;return!1}(n)}class d9{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ar,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class di extends Mw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new u9,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||H3(this),this._firestoreClient.terminate()}}function tr(n){return n._firestoreClient||H3(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function H3(n){var e;const t=n._freezeSettings(),i=(s=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new C7(n._databaseId,s,n._persistenceKey,(d=t).host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,d.useFetchStreams));var s,d;n._firestoreClient=new n9(n._authCredentials,n._appCheckCredentials,n._queue,i)}function G3(n,e,t){const i=new Ar;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield F3(n,t),yield L3(n,e),i.resolve()}catch(r){const s=r;if(!("FirebaseError"===(c=s).name?c.code===me.FAILED_PRECONDITION||c.code===me.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&c instanceof DOMException)||22===c.code||20===c.code||11===c.code))throw s;pg("Error enabling offline persistence. Falling back to persistence disabled: "+s),i.reject(s)}var c})).then(()=>i.promise)}function $3(n){if(n._initialized||n._terminated)throw new Ue(me.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Cu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cu(xr.fromBase64String(e))}catch(t){throw new Ue(me.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Cu(xr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ue(me.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Og{constructor(e){this._methodName=e}}class RI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ue(me.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ue(me.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Gt(this._lat,e._lat)||Gt(this._long,e._long)}}const w9=/^__.*__$/;class E9{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Nd(e,this.data,this.fieldMask,t,this.fieldTransforms):new _y(e,this.data,t,this.fieldTransforms)}}class W3{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Nd(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function z3(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw gt()}}class PI{constructor(e,t,i,r,s,c){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=r,void 0===s&&this.na(),this.fieldTransforms=s||[],this.fieldMask=c||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new PI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.ua(e),r}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:i,oa:!1});return r.na(),r}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return BI(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(z3(this.sa)&&w9.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class C9{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||Sw(e)}da(e,t,i,r=!1){return new PI({sa:e,methodName:t,fa:i,path:Vi.emptyPath(),oa:!1,la:r},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function kg(n){const e=n._freezeSettings(),t=Sw(n._databaseId);return new C9(n._databaseId,!!e.ignoreUndefinedProperties,t)}function FI(n,e,t,i,r,s={}){const c=n.da(s.merge||s.mergeFields?2:0,e,t,r);WR("Data must be an object, but it was:",c,i);const d=K3(i,c);let f,y;if(s.merge)f=new Ua(c.fieldMask),y=c.fieldTransforms;else if(s.mergeFields){const w=[];for(const T of s.mergeFields){const x=zR(e,T,t);if(!c.contains(x))throw new Ue(me.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);Q3(w,x)||w.push(x)}f=new Ua(w),y=c.fieldTransforms.filter(T=>f.covers(T.field))}else f=null,y=c.fieldTransforms;return new E9(new cs(d),f,y)}class Nw extends Og{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Nw}}function q3(n,e,t){return new PI({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class HR extends Og{_toFieldTransform(e){return new cw(e.path,new gy)}isEqual(e){return e instanceof HR}}class T9 extends Og{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=q3(this,e,!0),i=this._a.map(s=>Rg(s,t)),r=new Eg(i);return new cw(e.path,r)}isEqual(e){return this===e}}class D9 extends Og{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=q3(this,e,!0),i=this._a.map(s=>Rg(s,t)),r=new Cg(i);return new cw(e.path,r)}isEqual(e){return this===e}}class I9 extends Og{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new my(e.It,Bj(e.It,this.wa));return new cw(e.path,t)}isEqual(e){return this===e}}function GR(n,e,t,i){const r=n.da(1,e,t);WR("Data must be an object, but it was:",r,i);const s=[],c=cs.empty();_g(i,(f,y)=>{const w=LI(e,f,t);y=(0,L.m9)(y);const T=r.ca(w);if(y instanceof Nw)s.push(w);else{const x=Rg(y,T);null!=x&&(s.push(w),c.set(w,x))}});const d=new Ua(s);return new W3(c,d,r.fieldTransforms)}function $R(n,e,t,i,r,s){const c=n.da(1,e,t),d=[zR(e,i,t)],f=[r];if(s.length%2!=0)throw new Ue(me.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<s.length;x+=2)d.push(zR(e,s[x])),f.push(s[x+1]);const y=[],w=cs.empty();for(let x=d.length-1;x>=0;--x)if(!Q3(y,d[x])){const O=d[x];let F=f[x];F=(0,L.m9)(F);const G=c.ca(O);if(F instanceof Nw)y.push(O);else{const Q=Rg(F,G);null!=Q&&(y.push(O),w.set(O,Q))}}const T=new Ua(y);return new W3(w,T,c.fieldTransforms)}function Z3(n,e,t,i=!1){return Rg(t,n.da(i?4:3,e))}function Rg(n,e){if(Y3(n=(0,L.m9)(n)))return WR("Unsupported field value:",e,n),K3(n,e);if(n instanceof Og)return function(t,i){if(!z3(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const r=t._toFieldTransform(i);r&&i.fieldTransforms.push(r)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const r=[];let s=0;for(const c of t){let d=Rg(c,i.aa(s));null==d&&(d={nullValue:"NULL_VALUE"}),r.push(d),s++}return{arrayValue:{values:r}}}(n,e)}return function(t,i){if(null===(t=(0,L.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bj(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const r=vi.fromDate(t);return{timestampValue:gw(i.It,r)}}if(t instanceof vi){const r=new vi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:gw(i.It,r)}}if(t instanceof RI)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cu)return{bytesValue:sH(i.It,t._byteString)};if(t instanceof ui){const r=i.databaseId,s=t.firestore._databaseId;if(!s.isEqual(r))throw i.ha(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:ck(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${xI(t)}`)}(n,e)}function K3(n,e){const t={};return pj(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_g(n,(i,r)=>{const s=Rg(r,e.ra(i));null!=s&&(t[i]=s)}),{mapValue:{fields:t}}}function Y3(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof vi||n instanceof RI||n instanceof Cu||n instanceof ui||n instanceof Og)}function WR(n,e,t){if(!Y3(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=xI(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function zR(n,e,t){if((e=(0,L.m9)(e))instanceof Rd)return e._internalPath;if("string"==typeof e)return LI(n,e);throw BI("Field path arguments must be of type string or ",n,!1,void 0,t)}const S9=new RegExp("[~\\*/\\[\\]]");function LI(n,e,t){if(e.search(S9)>=0)throw BI(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Rd(...e.split("."))._internalPath}catch(i){throw BI(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function BI(n,e,t,i,r){const s=i&&!i.isEmpty(),c=void 0!==r;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(s||c)&&(f+=" (found",s&&(f+=` in field ${i}`),c&&(f+=` in document ${r}`),f+=")"),new Ue(me.INVALID_ARGUMENT,d+n+f)}function Q3(n,e){return n.some(t=>t.isEqual(e))}class Ow{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ui(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A9(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A9 extends Ow{data(){return super.data()}}function UI(n,e){return"string"==typeof e?LI(n,e):e instanceof Rd?e._internalPath:e._delegate._internalPath}function J3(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ue(me.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class kw{}function Rf(n,...e){for(const t of e)n=t._apply(n);return n}class x9 extends kw{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=kg(e.firestore),i=function(r,s,c,d,f,y,w){let T;if(f.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){rG(w,y);const O=[];for(const F of w)O.push(iG(d,r,F));T={arrayValue:{values:O}}}else T=iG(d,r,w)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||rG(w,y),T=Z3(c,"where",w,"in"===y||"not-in"===y);const x=us.create(f,y,T);return function(O,F){if(F.dt()){const Q=rk(O);if(null!==Q&&!Q.isEqual(F.field))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Q.toString()}' and '${F.field.toString()}'`);const pe=ik(O);null!==pe&&sG(0,F.field,pe)}const G=function(Q,pe){for(const Se of Q.filters)if(pe.indexOf(Se.op)>=0)return Se.op;return null}(O,function(Q){switch(Q){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(F.op));if(null!==G)throw new Ue(me.INVALID_ARGUMENT,G===F.op?`Invalid query. You cannot use more than one '${F.op.toString()}' filter.`:`Invalid query. You cannot use '${F.op.toString()}' filters with '${G.toString()}' filters.`)}(r,x),x}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Ls(e.firestore,e.converter,function(r,s){const c=r.filters.concat([s]);return new Md(r.path,r.collectionGroup,r.explicitOrderBy.slice(),c,r.limit,r.limitType,r.startAt,r.endAt)}(e._query,i))}}class N9 extends kw{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,r,s){if(null!==i.startAt)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new hy(r,s);return function(d,f){if(null===ik(d)){const y=rk(d);null!==y&&sG(0,y,f.field)}}(i,c),c}(e._query,this.ma,this.pa);return new Ls(e.firestore,e.converter,function(i,r){const s=i.explicitOrderBy.concat([r]);return new Md(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class X3 extends kw{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new Ls(e.firestore,e.converter,aI(e._query,this.Ia,this.Ta))}}class eG extends kw{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=nG(e,this.type,this.Ea,this.Aa);return new Ls(e.firestore,e.converter,(r=t,new Md((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,r,i.endAt)));var i,r}}class tG extends kw{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=nG(e,this.type,this.Ea,this.Aa);return new Ls(e.firestore,e.converter,(r=t,new Md((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,r)));var i,r}}function nG(n,e,t,i){if(t[0]=(0,L.m9)(t[0]),t[0]instanceof Ow)return function(r,s,c,d,f){if(!d)throw new Ue(me.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const y=[];for(const w of py(r))if(w.field.isKeyField())y.push(bg(s,d.key));else{const T=d.data.field(w.field);if(ek(T))throw new Ue(me.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+w.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===T){const x=w.field.canonicalString();throw new Ue(me.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}y.push(T)}return new Af(y,f)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const r=kg(n.firestore);return function(s,c,d,f,y,w){const T=s.explicitOrderBy;if(y.length>T.length)throw new Ue(me.INVALID_ARGUMENT,`Too many arguments provided to ${f}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let O=0;O<y.length;O++){const F=y[O];if(T[O].field.isKeyField()){if("string"!=typeof F)throw new Ue(me.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${f}(), but got a ${typeof F}`);if(!sk(s)&&-1!==F.indexOf("/"))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${f}() must be a plain document ID, but '${F}' contains a slash.`);const G=s.path.child(vn.fromString(F));if(!Xe.isDocumentKey(G))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${f}() must result in a valid document path, but '${G}' is not because it contains an odd number of segments.`);const Q=new Xe(G);x.push(bg(c,Q))}else{const G=Z3(d,f,F);x.push(G)}}return new Af(x,w)}(n._query,n.firestore._databaseId,r,e,t,i)}}function iG(n,e,t){if("string"==typeof(t=(0,L.m9)(t))){if(""===t)throw new Ue(me.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!sk(e)&&-1!==t.indexOf("/"))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(vn.fromString(t));if(!Xe.isDocumentKey(i))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return bg(n,new Xe(i))}if(t instanceof ui)return bg(n,t._key);throw new Ue(me.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${xI(t)}.`)}function rG(n,e){if(!Array.isArray(n)||0===n.length)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ue(me.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sG(n,e,t){if(!t.isEqual(e))throw new Ue(me.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class qR{convertValue(e,t="none"){switch(vg(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Hi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yg(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw gt()}}convertObject(e,t){const i={};return _g(e.fields,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new RI(Hi(e.latitude),Hi(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=mj(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(tw(e));default:return null}}convertTimestamp(e){const t=Tf(e);return new vi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=vn.fromString(e);Ft(pH(i));const r=new Df(i.get(1),i.get(3)),s=new Xe(i.popFirst(5));return r.isEqual(t)||er(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function VI(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class U9 extends qR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,t)}}class Pg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pd extends Ow{constructor(e,t,i,r,s,c){super(e,t,i,r,c),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Rw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(UI("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Rw extends Pd{data(e={}){return super.data(e)}}class Pf{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pg(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Rw(this._firestore,this._userDataWriter,i.key,i,new Pg(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ue(me.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,r){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>({type:"added",doc:new Rw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Pg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:s++}))}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>r||3!==c.type).map(c=>{const d=new Rw(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Pg(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let f=-1,y=-1;return 0!==c.type&&(f=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),1!==c.type&&(s=s.add(c.doc),y=s.indexOf(c.doc.key)),{type:V9(c.type),doc:d,oldIndex:f,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function V9(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return gt()}}function oG(n,e){return n instanceof Pd&&e instanceof Pd?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pf&&e instanceof Pf&&n._firestore===e._firestore&&OR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Ff extends qR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ui(this.firestore,null,t)}}function aG(n,e,t){n=fn(n,ui);const i=fn(n.firestore,di),r=VI(n.converter,e,t);return ky(i,[FI(kg(i),"setDoc",n._key,r,null!==n.converter,t).toMutation(n._key,bi.none())])}function lG(n,e,t,...i){n=fn(n,ui);const r=fn(n.firestore,di),s=kg(r);let c;return c="string"==typeof(e=(0,L.m9)(e))||e instanceof Rd?$R(s,"updateDoc",n._key,e,t,i):GR(s,"updateDoc",n._key,e),ky(r,[c.toMutation(n._key,bi.exists(!0))])}function cG(n,...e){var t,i,r;n=(0,L.m9)(n);let s={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||jR(e[c])||(s=e[c],c++);const d={includeMetadataChanges:s.includeMetadataChanges};if(jR(e[c])){const T=e[c];e[c]=null===(t=T.next)||void 0===t?void 0:t.bind(T),e[c+1]=null===(i=T.error)||void 0===i?void 0:i.bind(T),e[c+2]=null===(r=T.complete)||void 0===r?void 0:r.bind(T)}let f,y,w;if(n instanceof ui)y=fn(n.firestore,di),w=fy(n._key.path),f={next:T=>{e[c]&&e[c](ZR(y,n,T))},error:e[c+1],complete:e[c+2]};else{const T=fn(n,Ls);y=fn(T.firestore,di),w=T._query;const x=new Ff(y);f={next:O=>{e[c]&&e[c](new Pf(y,x,T,O))},error:e[c+1],complete:e[c+2]},J3(n._query)}return function(T,x,O,F){const G=new NI(F),Q=new rR(x,G,O);return T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return Xk(yield Oy(T),Q)})),()=>{G.bc(),T.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return tR(yield Oy(T),Q)}))}}(tr(y),w,d,f)}function ky(n,e){return function(t,i){const r=new Ar;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function kY(n,e,t){return cR.apply(this,arguments)}(yield UR(t),i,r)})),r.promise}(tr(n),e)}function ZR(n,e,t){const i=t.docs.get(e._key),r=new Ff(n);return new Pd(n,r,e._key,i,new Pg(t.hasPendingWrites,t.fromCache),e.converter)}const Y9={maxAttempts:5};class uG{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=kg(e)}set(e,t,i){this._verifyNotCommitted();const r=Lf(e,this._firestore),s=VI(r.converter,t,i),c=FI(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,i);return this._mutations.push(c.toMutation(r._key,bi.none())),this}update(e,t,i,...r){this._verifyNotCommitted();const s=Lf(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Rd?$R(this._dataReader,"WriteBatch.update",s._key,t,i,r):GR(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(c.toMutation(s._key,bi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Lf(e,this._firestore);return this._mutations=this._mutations.concat(new yy(t._key,bi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ue(me.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Lf(n,e){if((n=(0,L.m9)(n)).firestore!==e)throw new Ue(me.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Q9 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=kg(e)}get(e){const t=Lf(e,this._firestore),i=new U9(this._firestore);return this._transaction.lookup([t._key]).then(r=>{if(!r||1!==r.length)return gt();const s=r[0];if(s.isFoundDocument())return new Ow(this._firestore,i,s.key,s,t.converter);if(s.isNoDocument())return new Ow(this._firestore,i,t._key,null,t.converter);throw gt()})}set(e,t,i){const r=Lf(e,this._firestore),s=VI(r.converter,t,i),c=FI(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,i);return this._transaction.set(r._key,c),this}update(e,t,i,...r){const s=Lf(e,this._firestore);let c;return c="string"==typeof(t=(0,L.m9)(t))||t instanceof Rd?$R(this._dataReader,"Transaction.update",s._key,t,i,r):GR(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,c),this}delete(e){const t=Lf(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Lf(e,this._firestore),i=new Ff(this._firestore);return super.get(e).then(r=>new Pd(this._firestore,i,t._key,r._document,new Pg(!1,!1),t.converter))}}function KR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ue("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function hG(){if("undefined"==typeof Uint8Array)throw new Ue("unimplemented","Uint8Arrays are not available in this environment.")}function fG(){if(!function w7(){return"undefined"!=typeof atob}())throw new Ue("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){ly=ro.SDK_VERSION,(0,ro._registerComponent)(new tc.wA("firestore",(t,{instanceIdentifier:i,options:r})=>{const s=t.getProvider("app").getImmediate(),c=new di(new c7(t.getProvider("auth-internal")),new h7(t.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Ue(me.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Df(d.options.projectId,f)}(s,i),s);return r=Object.assign({useFetchStreams:e},r),c._setSettings(r),c},"PUBLIC").setMultipleInstances(!0)),(0,ro.registerVersion)(ij,"3.7.2",n),(0,ro.registerVersion)(ij,"3.7.2","esm2017")}();class Pw{constructor(e){this._delegate=e}static fromBase64String(e){return fG(),new Pw(Cu.fromBase64String(e))}static fromUint8Array(e){return hG(),new Pw(Cu.fromUint8Array(e))}toBase64(){return fG(),this._delegate.toBase64()}toUint8Array(){return hG(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YR(n){return function oQ(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class aQ{enableIndexedDbPersistence(e,t){return function f9(n,e){$3(n=fn(n,di));const t=tr(n),i=n._freezeSettings(),r=new MR;return G3(t,r,new D3(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function p9(n){$3(n=fn(n,di));const e=tr(n),t=n._freezeSettings(),i=new MR;return G3(e,i,new KY(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function g9(n){if(n._initialized&&!n._terminated)throw new Ue(me.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ar;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(i){if(!rc.C())return Promise.resolve();const r=i+"main";yield rc.delete(r)}),function(i){return t.apply(this,arguments)})(Ck(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class pG{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Df||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&pg("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function O3(n,e,t,i={}){var r;const s=(n=fn(n,Mw))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&pg("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let c,d;if("string"==typeof i.mockUserToken)c=i.mockUserToken,d=Gr.MOCK_USER;else{c=(0,L.Sg)(i.mockUserToken,null===(r=n._app)||void 0===r?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new Ue(me.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new Gr(f)}n._authCredentials=new l7(new rj(c,d))}}(this._delegate,e,t,i)}enableNetwork(){return function _9(n){return function i9(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield B3(n),t=yield BR(n);return e.setNetworkEnabled(!0),function(i){const r=nt(i);return r._u.delete(0),Aw(r)}(t)}))}(tr(n=fn(n,di)))}(this._delegate)}disableNetwork(){return function y9(n){return function r9(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield B3(n),t=yield BR(n);return e.setNetworkEnabled(!1),(i=(0,Ee.Z)(function*(r){const s=nt(r);s._u.add(0),yield Dy(s),s.gu.set("Offline")}),function(r){return i.apply(this,arguments)})(t);var i}))}(tr(n=fn(n,di)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,I3("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function m9(n){return function(e){const t=new Ar;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function LY(n,e){return pR.apply(this,arguments)}(yield UR(e),t)})),t.promise}(tr(n=fn(n,di)))}(this._delegate)}onSnapshotsInSync(e){return function K9(n,e){return function a9(n,e){const t=new NI(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Oy(n),r=t,nt(i).Ru.add(r),void r.next();var i,r})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return i=yield Oy(n),r=t,void nt(i).Ru.delete(r);var i,r}))}}(tr(n=fn(n,di)),jR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ue("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ry(this,k3(this._delegate,e))}catch(t){throw ho(t,"collection()","Firestore.collection()")}}doc(e){try{return new Cl(this,MI(this._delegate,e))}catch(t){throw ho(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new fo(this,function YY(n,e){if(n=fn(n,Mw),NR("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ue(me.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ls(n,null,(t=e,new Md(vn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw ho(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function J9(n,e,t){n=fn(n,di);const i=Object.assign(Object.assign({},Y9),t);return function(r){if(r.maxAttempts<1)throw new Ue(me.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(r,s,c){const d=new Ar;return r.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const f=yield function U3(n){return OI(n).then(e=>e.datastore)}(r);new t9(r.asyncQueue,f,c,s,d).run()})),d.promise}(tr(n),r=>e(new Q9(n,r)),i)}(this._delegate,t=>e(new gG(this,t)))}batch(){return tr(this._delegate),new mG(new uG(this._delegate,e=>ky(this._delegate,e)))}loadBundle(e){return function v9(n,e){const t=tr(n=fn(n,di)),i=new d9;return function l9(n,e,t,i){const r=function(s,c){let d;return d="string"==typeof s?(new TextEncoder).encode(s):s,f=function(f,y){if(f instanceof Uint8Array)return P3(f,y);if(f instanceof ArrayBuffer)return P3(new Uint8Array(f),y);if(f instanceof ReadableStream)return f.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new QY(f,c);var f}(t,Sw(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function ZY(n,e,t){const i=nt(n);var r;(r=(0,Ee.Z)(function*(s,c,d){try{const f=yield c.getMetadata();if(yield function(x,O){const F=nt(x),G=$r(O.createTime);return F.persistence.runTransaction("hasNewerBundle","readonly",Q=>F.Ns.getBundleMetadata(Q,O.id)).then(Q=>!!Q&&Q.createTime.compareTo(G)>=0)}(s.localStore,f))return yield c.close(),d._completeWith({taskState:"Success",documentsLoaded:(x=f).totalDocuments,bytesLoaded:x.totalBytes,totalDocuments:x.totalDocuments,totalBytes:x.totalBytes}),Promise.resolve(new Set);d._updateProgress(g3(f));const y=new SY(f,s.localStore,c.It);let w=yield c.mc();for(;w;){const x=yield y.Fu(w);x&&d._updateProgress(x),w=yield c.mc()}const T=yield y.complete();return yield kd(s,T.Lu,void 0),yield function(x,O){const F=nt(x);return F.persistence.runTransaction("Save bundle","readwrite",G=>F.Ns.saveBundleMetadata(G,O))}(s.localStore,f),d._completeWith(T.progress),Promise.resolve(T.Bu)}catch(f){return pg("SyncEngine",`Loading bundle failed with ${f}`),d._failWith(f),Promise.resolve(new Set)}var x}),function(s,c,d){return r.apply(this,arguments)})(i,e,t).then(r=>{i.sharedClientState.notifyBundleLoaded(r)})}(yield UR(n),r,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function b9(n,e){return function c9(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,i){const r=nt(t);return r.persistence.runTransaction("Get named query","readonly",s=>r.Ns.getNamedQuery(s,i))}(yield kI(n),e)}))}(tr(n=fn(n,di)),e).then(t=>t?new Ls(n,null,t.query):null)}(this._delegate,e).then(t=>t?new fo(this,t):null)}}class jI extends qR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pw(new Cu(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Cl.forKey(t,this.firestore,null)}}class gG{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}get(e){const t=Lg(e);return this._delegate.get(t).then(i=>new Fw(this._firestore,new Pd(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const r=Lg(e);return i?(KR("Transaction.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Lg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Lg(e);return this._delegate.delete(t),this}}class mG{constructor(e){this._delegate=e}set(e,t,i){const r=Lg(e);return i?(KR("WriteBatch.set",i),this._delegate.set(r,t,i)):this._delegate.set(r,t),this}update(e,t,i,...r){const s=Lg(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,i,...r),this}delete(e){const t=Lg(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Fg{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new Rw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Lw(this._firestore,i),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Fg.INSTANCES;let r=i.get(e);r||(r=new WeakMap,i.set(e,r));let s=r.get(t);return s||(s=new Fg(e,new jI(e),t),r.set(t,s)),s}}Fg.INSTANCES=new WeakMap;class Cl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ue("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Cl(t,new ui(t._delegate,i,new Xe(e)))}static forKey(e,t,i){return new Cl(t,new ui(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ry(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ry(this.firestore,k3(this._delegate,e))}catch(t){throw ho(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,L.m9)(e))instanceof ui&&R3(this._delegate,e)}set(e,t){t=KR("DocumentReference.set",t);try{return t?aG(this._delegate,e,t):aG(this._delegate,e)}catch(i){throw ho(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?lG(this._delegate,e):lG(this._delegate,e,t,...i)}catch(r){throw ho(r,"updateDoc()","DocumentReference.update()")}}delete(){return function q9(n){return ky(fn(n.firestore,di),[new yy(n._key,bi.none())])}(this._delegate)}onSnapshot(...e){const t=_G(e),i=yG(e,r=>new Fw(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return cG(this._delegate,t,i)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function H9(n){n=fn(n,ui);const e=fn(n.firestore,di),t=tr(e),i=new Ff(e);return function s9(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield function(f,y){const w=nt(f);return w.persistence.runTransaction("read document","readonly",T=>w.localDocuments.getDocument(T,y))}(r,s);d.isFoundDocument()?c.resolve(d):d.isNoDocument()?c.resolve(null):c.reject(new Ue(me.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const f=Ay(d,`Failed to get document '${s} from cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield kI(n),e,t);var i})),t.promise}(t,n._key).then(r=>new Pd(e,i,n._key,r,new Pg(null!==r&&r.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function G9(n){n=fn(n,ui);const e=fn(n.firestore,di);return V3(tr(e),n._key,{source:"server"}).then(t=>ZR(e,n,t))}(this._delegate):function j9(n){n=fn(n,ui);const e=fn(n.firestore,di);return V3(tr(e),n._key).then(t=>ZR(e,n,t))}(this._delegate),t.then(i=>new Fw(this.firestore,new Pd(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new Cl(this.firestore,this._delegate.withConverter(e?Fg.getInstance(this.firestore,e):null))}}function ho(n,e,t){return n.message=n.message.replace(e,t),n}function _G(n){for(const e of n)if("object"==typeof e&&!YR(e))return e;return{}}function yG(n,e){var t,i;let r;return r=YR(n[0])?n[0]:YR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{r.next&&r.next(e(s))},error:null===(t=r.error)||void 0===t?void 0:t.bind(r),complete:null===(i=r.complete)||void 0===i?void 0:i.bind(r)}}class Fw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return oG(this._delegate,e._delegate)}}class Lw extends Fw{data(e){const t=this._delegate.data(e);return function o7(n,e){n||gt()}(void 0!==t),t}}class fo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new jI(e)}where(e,t,i){try{return new fo(this.firestore,Rf(this._delegate,function M9(n,e,t){const i=e,r=UI("where",n);return new x9(r,i,t)}(e,t,i)))}catch(r){throw ho(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new fo(this.firestore,Rf(this._delegate,function O9(n,e="asc"){const t=e,i=UI("orderBy",n);return new N9(i,t)}(e,t)))}catch(i){throw ho(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new fo(this.firestore,Rf(this._delegate,function k9(n){return x3("limit",n),new X3("limit",n,"F")}(e)))}catch(t){throw ho(t,"limit()","Query.limit()")}}limitToLast(e){try{return new fo(this.firestore,Rf(this._delegate,function R9(n){return x3("limitToLast",n),new X3("limitToLast",n,"L")}(e)))}catch(t){throw ho(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new fo(this.firestore,Rf(this._delegate,function P9(...n){return new eG("startAt",n,!0)}(...e)))}catch(t){throw ho(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new fo(this.firestore,Rf(this._delegate,function F9(...n){return new eG("startAfter",n,!1)}(...e)))}catch(t){throw ho(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new fo(this.firestore,Rf(this._delegate,function L9(...n){return new tG("endBefore",n,!1)}(...e)))}catch(t){throw ho(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new fo(this.firestore,Rf(this._delegate,function B9(...n){return new tG("endAt",n,!0)}(...e)))}catch(t){throw ho(t,"endAt()","Query.endAt()")}}isEqual(e){return OR(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function W9(n){n=fn(n,Ls);const e=fn(n.firestore,di),t=tr(e),i=new Ff(e);return function o9(n,e){const t=new Ar;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(i=(0,Ee.Z)(function*(r,s,c){try{const d=yield CI(r,s,!0),f=new y3(s,d.Hi),y=f.Wu(d.documents),w=f.applyChanges(y,!1);c.resolve(w.snapshot)}catch(d){const f=Ay(d,`Failed to execute query '${s} against cache`);c.reject(f)}}),function(r,s,c){return i.apply(this,arguments)})(yield kI(n),e,t);var i})),t.promise}(t,n._query).then(r=>new Pf(e,i,n,r))}(this._delegate):"server"===(null==e?void 0:e.source)?function z9(n){n=fn(n,Ls);const e=fn(n.firestore,di),t=tr(e),i=new Ff(e);return j3(t,n._query,{source:"server"}).then(r=>new Pf(e,i,n,r))}(this._delegate):function $9(n){n=fn(n,Ls);const e=fn(n.firestore,di),t=tr(e),i=new Ff(e);return J3(n._query),j3(t,n._query).then(r=>new Pf(e,i,n,r))}(this._delegate),t.then(i=>new QR(this.firestore,new Pf(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=_G(e),i=yG(e,r=>new QR(this.firestore,new Pf(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return cG(this._delegate,t,i)}withConverter(e){return new fo(this.firestore,this._delegate.withConverter(e?Fg.getInstance(this.firestore,e):null))}}class cQ{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Lw(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class QR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new fo(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Lw(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new cQ(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Lw(this._firestore,i))})}isEqual(e){return oG(this._delegate,e._delegate)}}class Ry extends fo{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Cl(this.firestore,e):null}doc(e){try{return new Cl(this.firestore,void 0===e?MI(this._delegate):MI(this._delegate,e))}catch(t){throw ho(t,"doc()","CollectionReference.doc()")}}add(e){return function Z9(n,e){const t=fn(n.firestore,di),i=MI(n),r=VI(n.converter,e);return ky(t,[FI(kg(n.firestore),"addDoc",i._key,r,null!==n.converter,{}).toMutation(i._key,bi.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new Cl(this.firestore,t))}isEqual(e){return R3(this._delegate,e._delegate)}withConverter(e){return new Ry(this.firestore,this._delegate.withConverter(e?Fg.getInstance(this.firestore,e):null))}}function Lg(n){return fn(n,ui)}class JR{constructor(...e){this._delegate=new Rd(...e)}static documentId(){return new JR(Vi.keyField().canonicalString())}isEqual(e){return(e=(0,L.m9)(e))instanceof Rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class Bg{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eQ(){return new HR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Bg(e)}static delete(){const e=function X9(){return new Nw("deleteField")}();return e._methodName="FieldValue.delete",new Bg(e)}static arrayUnion(...e){const t=function tQ(...n){return new T9("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Bg(t)}static arrayRemove(...e){const t=function nQ(...n){return new D9("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Bg(t)}static increment(e){const t=function iQ(n){return new I9("increment",n)}(e);return t._methodName="FieldValue.increment",new Bg(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const uQ={Firestore:pG,GeoPoint:RI,Timestamp:vi,Blob:Pw,Transaction:gG,WriteBatch:mG,DocumentReference:Cl,DocumentSnapshot:Fw,Query:fo,QueryDocumentSnapshot:Lw,QuerySnapshot:QR,CollectionReference:Ry,FieldPath:JR,FieldValue:Bg,setLogLevel:function lQ(n){!function s7(n){wf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function vG(n,e){return function fQ(n,e=zm.z){return new yn.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=i&&i()}})}(n,e)}function XR(n,e){return vG(n,e).pipe((0,ut.U)(t=>({payload:t,type:"query"})))}function HI(n,e){return XR(n,e).pipe(Dr(void 0),aO(),(0,ut.U)(([t,i])=>{const r=i.payload.docChanges(),s=r.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((c,d)=>{const f=r.find(w=>w.doc.ref.isEqual(c.ref)),y=null==t?void 0:t.payload.docs.find(w=>w.ref.isEqual(c.ref));f&&JSON.stringify(f.doc.metadata)===JSON.stringify(c.metadata)||!f&&y&&JSON.stringify(y.metadata)===JSON.stringify(c.metadata)||s.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:c}})}),s}))}function bG(n,e,t){return HI(n,t).pipe(Ir((i,r)=>function gQ(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function mQ(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return eP(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return eP(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return eP(n,e.oldIndex,1)}return n}(n,i))}),n}(i,r.map(s=>s.payload),e),[]),Ep(),(0,ut.U)(i=>i.map(r=>({type:r.type,payload:r}))))}function eP(n,e,t,...i){const r=n.slice();return r.splice(e,t,...i),r}function wG(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hQ(n){(function dQ(n,e){n.INTERNAL.registerComponent(new tc.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),r=t.getProvider("firestore").getImmediate();return e(i,r)},"PUBLIC").setServiceProps(Object.assign({},uQ)))})(n,(e,t)=>new pG(e,t,new aQ)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(ZN.Z);class EG{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=HI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ut.U)(i=>i.filter(r=>e.indexOf(r.type)>-1)))),t.pipe(Dr(void 0),aO(),tn(([i,r])=>r.length>0||!i),(0,ut.U)(([i,r])=>r),Mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ir((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wG(e);return bG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return XR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Mn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Mn.iC)}add(e){return this.ref.add(e)}doc(e){return new CG(this.ref.doc(e),this.afs)}}class CG{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:r,query:s}=IG(i,t);return new EG(r,s,this.afs)}snapshotChanges(){return function pQ(n,e){return vG(n,e).pipe(Dr(void 0),aO(),(0,ut.U)(([t,i])=>i.exists?(null==t?void 0:t.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ut.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,An.D)(this.ref.get(e)).pipe(Mn.iC)}}class _Q{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?HI(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),tn(t=>t.length>0),Mn.iC):HI(this.query,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ir((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=wG(e);return bG(this.query,t,this.afs.schedulers.outsideAngular).pipe(Mn.iC)}valueChanges(e={}){return XR(this.query,this.afs.schedulers.outsideAngular).pipe((0,ut.U)(i=>i.payload.docs.map(r=>e.idField?Object.assign({[e.idField]:r.id},r.data()):r.data())),Mn.iC)}get(e){return(0,An.D)(this.query.get(e)).pipe(Mn.iC)}}const TG=new l.OlP("angularfire2.enableFirestorePersistence"),DG=new l.OlP("angularfire2.firestore.persistenceSettings"),yQ=new l.OlP("angularfire2.firestore.settings"),vQ=new l.OlP("angularfire2.firestore.use-emulator");function IG(n,e=(t=>t)){return{query:e(n),ref:n}}let bQ=(()=>{class n{constructor(t,i,r,s,c,d,f,y,w,T,x,O,F,G,Q,pe,Se){this.schedulers=f;const ke=(0,Sr.on)(t,d,i),Ae=w;T&&qN(ke,d,x,F,G,Q,O,pe),[this.firestore,this.persistenceEnabled$]=(0,Sr.cc)(`${ke.name}.firestore`,"AngularFirestore",ke.name,()=>{const Be=d.runOutsideAngular(()=>ke.firestore());if(s&&Be.settings(s),Ae&&Be.useEmulator(...Ae),r&&!Za(c)){const We=()=>{try{return(0,An.D)(Be.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(ft){return"undefined"!=typeof console&&console.warn(ft),ct(!1)}};return[Be,d.runOutsideAngular(We)]}return[Be,ct(!1)]},[s,Ae,r])}collection(t,i){let r;r="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:c}=IG(r,i),d=this.schedulers.ngZone.run(()=>s);return new EG(d,c,this)}collectionGroup(t,i){const r=i||(c=>c),s=this.firestore.collectionGroup(t);return new _Q(r(s),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const r=this.schedulers.ngZone.run(()=>i);return new CG(r,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Sr.Dh),l.LFG(Sr.xv,8),l.LFG(TG,8),l.LFG(yQ,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(DG,8),l.LFG(vQ,8),l.LFG(yD,8),l.LFG(jN,8),l.LFG(HN,8),l.LFG(GN,8),l.LFG($N,8),l.LFG(WN,8),l.LFG(zN,8),l.LFG(xb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wQ=(()=>{class n{constructor(){_D.Z.registerVersion("angularfire",Mn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:TG,useValue:!0},{provide:DG,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[bQ]}),n})();const SG="@firebase/database",AG="0.13.10";let tP="";function xG(n){tP=n}class CQ{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,L.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,L.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class TQ{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,L.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const MG=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CQ(e)}}catch(e){}return new TQ},Ug=MG("localStorage"),nP=MG("sessionStorage"),Py=new nc.Yd("@firebase/database"),NG=function(){let n=1;return function(){return n++}}(),OG=function(n){const e=(0,L.dS)(n),t=new L.gQ;t.update(e);const i=t.digest();return L.US.encodeByteArray(i)},Bw=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?e+=Bw.apply(null,i):e+="object"==typeof i?(0,L.Wl)(i):i,e+=" "}return e};let Vg=null,kG=!0;const RG=function(n,e){(0,L.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Py.logLevel=nc.in.VERBOSE,Vg=Py.log.bind(Py),e&&nP.set("logging_enabled",!0)):"function"==typeof n?Vg=n:(Vg=null,nP.remove("logging_enabled"))},qr=function(...n){if(!0===kG&&(kG=!1,null===Vg&&!0===nP.get("logging_enabled")&&RG(!0)),Vg){const e=Bw.apply(null,n);Vg(e)}},Uw=function(n){return function(...e){qr(n,...e)}},iP=function(...n){const e="FIREBASE INTERNAL ERROR: "+Bw(...n);Py.error(e)},Tu=function(...n){const e=`FIREBASE FATAL ERROR: ${Bw(...n)}`;throw Py.error(e),new Error(e)},Bs=function(...n){const e="FIREBASE WARNING: "+Bw(...n);Py.warn(e)},GI=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fd="[MIN_NAME]",Du="[MAX_NAME]",jg=function(n,e){if(n===e)return 0;if(n===Fd||e===Du)return-1;if(e===Fd||n===Du)return 1;{const t=$I(n),i=$I(e);return null!==t?null!==i?t-i==0?n.length-e.length:t-i:-1:null!==i?1:n<e?-1:1}},SQ=function(n,e){return n===e?0:n<e?-1:1},Vw=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,L.Wl)(e))},rP=function(n){if("object"!=typeof n||null===n)return(0,L.Wl)(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)0!==i&&(t+=","),t+=(0,L.Wl)(e[i]),t+=":",t+=rP(n[e[i]]);return t+="}",t},PG=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)i.push(n.substring(r,r+e>t?t:r+e));return i};function Zr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const FG=function(n){(0,L.hu)(!GI(n),"Invalid JSON number");const i=1023;let r,s,c,d,f;0===n?(s=0,c=0,r=1/n==-1/0?1:0):(r=n<0,(n=Math.abs(n))>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),s=d+i,c=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(s=0,c=Math.round(n/Math.pow(2,-1074))));const y=[];for(f=52;f;f-=1)y.push(c%2?1:0),c=Math.floor(c/2);for(f=11;f;f-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(r?1:0),y.reverse();const w=y.join("");let T="";for(f=0;f<64;f+=8){let x=parseInt(w.substr(f,8),2).toString(16);1===x.length&&(x="0"+x),T+=x}return T.toLowerCase()},NQ=new RegExp("^-?(0*)\\d{1,10}$"),LG=-2147483648,sP=2147483647,$I=function(n){if(NQ.test(n)){const e=Number(n);if(e>=LG&&e<=sP)return e}return null},Fy=function(n){try{n()}catch(e){setTimeout(()=>{throw Bs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},jw=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class kQ{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Bs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RQ{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(qr("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Bs(e)}}let Hw=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const HG=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,WG="websocket",zG="long_polling";class aP{constructor(e,t,i,r,s=!1,c="",d=!1){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=c,this.includeNamespaceInQueryParams=d,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ug.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ug.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function qG(n,e,t){let i;if((0,L.hu)("string"==typeof e,"typeof type must == string"),(0,L.hu)("object"==typeof t,"typeof params must == object"),e===WG)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==zG)throw new Error("Unknown connection type: "+e);i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function PQ(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const r=[];return Zr(t,(s,c)=>{r.push(s+"="+c)}),i+r.join("&")}class FQ{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,L.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,L.p$)(this.counters_)}}const lP={},cP={};function uP(n){const e=n.toString();return lP[e]||(lP[e]=new FQ),lP[e]}class BQ{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Fy(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Bf{constructor(e,t,i,r,s,c,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=s,this.transportSessionId=c,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Uw(e),this.stats_=uP(t),this.urlFn=f=>(this.appCheckToken&&(f.ac=this.appCheckToken),qG(t,zG,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new BQ(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,L.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new dP((...s)=>{const[c,d,f,y,w]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=d,this.password=f;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[c,d]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(c,d)},()=>{this.onClosed_()},this.urlFn);const i={start:"t"};i.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(i.cb=this.scriptTagHolder.uniqueCallbackIdentifier),i.v="5",this.transportSessionId&&(i.s=this.transportSessionId),this.lastSessionId&&(i.ls=this.lastSessionId),this.applicationId&&(i.p=this.applicationId),this.appCheckToken&&(i.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&HG.test(location.hostname)&&(i.r="f");const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Bf.forceAllow_=!0}static forceDisallow(){Bf.forceDisallow_=!0}static isAvailable(){return!((0,L.Yr)()||!Bf.forceAllow_&&(Bf.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,L.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=(0,L.h$)(t),r=PG(i,1840);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,L.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const i={dframe:"t"};i.id=e,i.pw=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,L.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class dP{constructor(e,t,i,r){if(this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,L.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=NG(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=dP.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(d){qr("frame writing exception"),d.stack&&qr(d.stack),qr(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||qr("No IE domain setting required")}catch(t){const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+i.length<=1870;){const c=this.pendingSegs.shift();i=i+"&seg"+r+"="+c.seg+"&ts"+r+"="+c.ts+"&d"+r+"="+c.d,r++}return t+=i,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),i()})}addTag(e,t){(0,L.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||"loaded"===r||"complete"===r)&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{qr("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch(i){}},Math.floor(1))}}let zI=null;"undefined"!=typeof MozWebSocket?zI=MozWebSocket:"undefined"!=typeof WebSocket&&(zI=WebSocket);let Ly=(()=>{class n{constructor(t,i,r,s,c,d,f){this.connId=t,this.applicationId=r,this.appCheckToken=s,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Uw(this.connId),this.stats_=uP(i),this.connURL=n.connectionURL_(i,d,f,s,r),this.nodeAdmin=i.nodeAdmin}static connectionURL_(t,i,r,s,c){const d={v:"5"};return!(0,L.Yr)()&&"undefined"!=typeof location&&location.hostname&&HG.test(location.hostname)&&(d.r="f"),i&&(d.s=i),r&&(d.ls=r),s&&(d.ac=s),c&&(d.p=c),qG(t,WG,d)}open(t,i){this.onDisconnect=i,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ug.set("previous_websocket_failure",!0);try{let r;if((0,L.Yr)()){r={headers:{"User-Agent":`Firebase/5/${tP}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,d=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;d&&(r.proxy={origin:d})}this.mySock=new zI(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const s=r.message||r.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const r=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);r&&r.length>1&&parseFloat(r[1])<4.4&&(t=!0)}return!t&&null!==zI&&!n.forceDisallow_}static previouslyFailed(){return Ug.isInMemoryStorage||!0===Ug.get("previous_websocket_failure")}markConnectionHealthy(){Ug.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const i=this.frames.join("");this.frames=null;const r=(0,L.cI)(i);this.onMessage(r)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,L.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const i=Number(t);if(!isNaN(i))return this.handleNewFrameCount_(i),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const i=t.data;if(this.bytesReceived+=i.length,this.stats_.incrementCounter("bytes_received",i.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(i);else{const r=this.extractFrameCount_(i);null!==r&&this.appendFrame_(r)}}send(t){this.resetKeepAlive();const i=(0,L.Wl)(t);this.bytesSent+=i.length,this.stats_.incrementCounter("bytes_sent",i.length);const r=PG(i,16384);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(i){this.log_("Exception thrown from WebSocket.send():",i.message||i.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),e$=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Bf,Ly]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const i=Ly&&Ly.isAvailable();let r=i&&!Ly.previouslyFailed();if(t.webSocketOnly&&(i||Bs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Ly];else{const s=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&s.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class a${constructor(e,t,i,r,s,c,d,f,y,w){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=c,this.onReady_=d,this.onDisconnect_=f,this.onKill_=y,this.lastSessionId=w,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Uw("c:"+this.id+":"),this.transportManager_=new e$(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=jw(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=Vw("t",e),i=Vw("d",e);if("c"===t)this.onSecondaryControl_(i);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(i)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=Vw("t",e),i=Vw("d",e);"c"===t?this.onControl_(i):"d"===t&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=Vw("t",e);if("d"in e){const i=e.d;if("h"===t)this.onHandshake_(i);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(i):"r"===t?this.onReset_(i):"e"===t?iP("Server Error: "+i):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):iP("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==i&&Bs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),jw(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):jw(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ug.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class l${put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}class c${constructor(e){this.allowedEvents_=e,this.listeners_={},(0,L.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let s=0;s<r.length;s++)if(r[s].callback===t&&(!i||i===r[s].context))return void r.splice(s,1)}validateEventType_(e){(0,L.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class qI extends c${constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,L.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new qI}getInitialEvent(e){return(0,L.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Nn(){return new Pn("")}function rn(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Uf(n){return n.pieces_.length-n.pieceNum_}function Yn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function fP(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function Gw(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function h$(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function wi(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof Pn)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new Pn(t,0)}function sn(n){return n.pieceNum_>=n.pieces_.length}function po(n,e){const t=rn(n),i=rn(e);if(null===t)return e;if(t===i)return po(Yn(n),Yn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function oJ(n,e){const t=Gw(n,0),i=Gw(e,0);for(let r=0;r<t.length&&r<i.length;r++){const s=jg(t[r],i[r]);if(0!==s)return s}return t.length===i.length?0:t.length<i.length?-1:1}function pP(n,e){if(Uf(n)!==Uf(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Tl(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(Uf(n)>Uf(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class aJ{constructor(e,t){this.errorPrefix_=t,this.parts_=Gw(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=(0,L.ug)(this.parts_[i]);f$(this)}}function f$(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Hg(n))}function Hg(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class gP extends c${constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new gP}getInitialEvent(e){return(0,L.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const $w=1e3;let KI,Gg=(()=>{class n extends l${constructor(t,i,r,s,c,d,f,y){if(super(),this.repoInfo_=t,this.applicationId_=i,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=f,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=Uw("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=$w,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,L.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");gP.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&qI.getInstance().on("online",this.onOnline_,this)}sendRequest(t,i,r){const s=++this.requestNumber_,c={r:s,a:t,b:i};this.log_((0,L.Wl)(c)),(0,L.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),r&&(this.requestCBHash_[s]=r)}get(t){this.initConnection_();const i=new L.BH,r={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:r,onComplete:d=>{const f=d.d;"ok"===d.s?i.resolve(f):i.reject(f)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),i.promise}listen(t,i,r,s){this.initConnection_();const c=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,L.hu)(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const f={onComplete:s,hashFn:i,query:t,tag:r};this.listens.get(d).set(c,f),this.connected_&&this.sendListen_(f)}sendGet_(t){const i=this.outstandingGets_[t];this.sendRequest("g",i.request,r=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),i.onComplete&&i.onComplete(r)})}sendListen_(t){const i=t.query,r=i._path.toString(),s=i._queryIdentifier;this.log_("Listen on "+r+" for "+s);const c={p:r};t.tag&&(c.q=i._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,f=>{const y=f.d,w=f.s;n.warnOnListenWarnings_(y,i),(this.listens.get(r)&&this.listens.get(r).get(s))===t&&(this.log_("listen response",f),"ok"!==w&&this.removeListen_(r,s),t.onComplete&&t.onComplete(w,y))})}static warnOnListenWarnings_(t,i){if(t&&"object"==typeof t&&(0,L.r3)(t,"w")){const r=(0,L.DV)(t,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const s='".indexOn": "'+i._queryParams.getIndex().toString()+'"',c=i._path.toString();Bs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,L.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,i=(0,L.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(i,r,s=>{const c=s.s,d=s.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const i=t.s,r=t.d||"error";"ok"===i?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(i,r)})}unlisten(t,i){const r=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),(0,L.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,t._queryObject,i)}sendUnlisten_(t,i,r,s){this.log_("Unlisten on "+t+" for "+i);const c={p:t};s&&(c.q=r,c.t=s),this.sendRequest("n",c)}onDisconnectPut(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:i,onComplete:r})}onDisconnectMerge(t,i,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,i,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:i,onComplete:r})}onDisconnectCancel(t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:i})}sendOnDisconnect_(t,i,r,s){const c={p:i,d:r};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,d=>{s&&setTimeout(()=>{s(d.s,d.d)},Math.floor(0))})}put(t,i,r,s){this.putInternal("p",t,i,r,s)}merge(t,i,r,s){this.putInternal("m",t,i,r,s)}putInternal(t,i,r,s,c){this.initConnection_();const d={p:i,d:r};void 0!==c&&(d.h=c),this.outstandingPuts_.push({action:t,request:d,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+i)}sendPut_(t){const i=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(i,r,c=>{this.log_(i+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(c.s,c.d)})}reportStats(t){if(this.connected_){const i={c:t};this.log_("reportStats",i),this.sendRequest("s",i,r=>{"ok"!==r.s&&this.log_("reportStats","Error sending stats: "+r.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,L.Wl)(t));const i=t.r,r=this.requestCBHash_[i];r&&(delete this.requestCBHash_[i],r(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,i){this.log_("handleServerMessage",t,i),"d"===t?this.onDataUpdate_(i.p,i.d,!1,i.t):"m"===t?this.onDataUpdate_(i.p,i.d,!0,i.t):"c"===t?this.onListenRevoked_(i.p,i.q):"ac"===t?this.onAuthRevoked_(i.s,i.d):"apc"===t?this.onAppCheckRevoked_(i.s,i.d):"sd"===t?this.onSecurityDebugPacket_(i):iP("Unrecognized action received from server: "+(0,L.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,i){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=i,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,L.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=$w,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=$w,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=$w),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let i=Math.max(0,this.reconnectDelay_-t);i=Math.random()*i,this.log_("Trying to reconnect in "+i+"ms"),this.scheduleConnect_(i),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const i=t.onDataMessage_.bind(t),r=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let f=!1,y=null;const w=function(){y?y.close():(f=!0,s())};t.realtime_={close:w,sendRequest:function(O){(0,L.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(O)}};const x=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[O,F]=yield Promise.all([t.authTokenProvider_.getToken(x),t.appCheckTokenProvider_.getToken(x)]);f?qr("getToken() completed but was canceled"):(qr("getToken() completed. Creating connection."),t.authToken_=O&&O.accessToken,t.appCheckToken_=F&&F.token,y=new a$(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,i,r,s,G=>{Bs(G+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(O){t.log_("Failed to get token: "+O),f||(t.repoInfo_.nodeAdmin&&Bs(O),w())}}})()}interrupt(t){qr("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){qr("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,L.xb)(this.interruptReasons_)&&(this.reconnectDelay_=$w,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const i=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:i})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const i=this.outstandingPuts_[t];i&&"h"in i.request&&i.queued&&(i.onComplete&&i.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,i){let r;r=i?i.map(c=>rP(c)).join("$"):"default";const s=this.removeListen_(t,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,i){const r=new Pn(t).toString();let s;if(this.listens.has(r)){const c=this.listens.get(r);s=c.get(i),c.delete(i),0===c.size&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(t,i){qr("Auth token revoked: "+t+"/"+i),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,i){qr("App check token revoked: "+t+"/"+i),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const i of t.values())this.sendListen_(i);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let i="js";(0,L.Yr)()&&(i=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+i+"."+tP.replace(/\./g,"-")]=1,(0,L.uI)()?t["framework.cordova"]=1:(0,L.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=qI.getInstance().currentlyOnline();return(0,L.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class an{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new an(e,t)}}class ZI{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new an(Fd,e),r=new an(Fd,t);return 0!==this.compare(i,r)}minPost(){return an.MIN}}class m$ extends ZI{static get __EMPTY_NODE(){return KI}static set __EMPTY_NODE(e){KI=e}compare(e,t){return jg(e.name,t.name)}isDefinedOn(e){throw(0,L.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return an.MIN}maxPost(){return new an(Du,KI)}makePost(e,t){return(0,L.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new an(e,KI)}toString(){return".key"}}const Iu=new m$;class YI{constructor(e,t,i,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,r&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let _P,sc=(()=>{class n{constructor(t,i,r,s,c){this.key=t,this.value=i,this.color=null!=r?r:n.RED,this.left=null!=s?s:Wo.EMPTY_NODE,this.right=null!=c?c:Wo.EMPTY_NODE}copy(t,i,r,s,c){return new n(null!=t?t:this.key,null!=i?i:this.value,null!=r?r:this.color,null!=s?s:this.left,null!=c?c:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,i,r){let s=this;const c=r(t,s.key);return s=c<0?s.copy(null,null,null,s.left.insert(t,i,r),null):0===c?s.copy(null,i,null,null,null):s.copy(null,null,null,null,s.right.insert(t,i,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Wo.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,i){let r,s;if(r=this,i(t,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,i),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),0===i(t,r.key)){if(r.right.isEmpty())return Wo.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,i))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),i=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,i)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Wo{constructor(e,t=Wo.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Wo(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,sc.BLACK,null,null))}remove(e){return new Wo(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,sc.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),0===t){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}t<0?i=i.left:t>0&&(r=i,i=i.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new YI(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new YI(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new YI(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new YI(this.root_,null,this.comparator_,!0,e)}}function gJ(n,e){return jg(n.name,e.name)}function mP(n,e){return jg(n,e)}Wo.EMPTY_NODE=new class pJ{copy(e,t,i,r,s){return this}insert(e,t,i){return new sc(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const _$=function(n){return"number"==typeof n?"number:"+FG(n):"string:"+n},y$=function(n){if(n.isLeafNode()){const e=n.val();(0,L.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,L.r3)(e,".sv"),"Priority must be a string or number.")}else(0,L.hu)(n===_P||n.isEmpty(),"priority of unexpected type.");(0,L.hu)(n===_P||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let v$,b$,w$,By=(()=>{class n{constructor(t,i=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=i,this.lazyHash_=null,(0,L.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),y$(this.priorityNode_)}static set __childrenNodeConstructor(t){v$=t}static get __childrenNodeConstructor(){return v$}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return sn(t)?this:".priority"===rn(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,i){return null}updateImmediateChild(t,i){return".priority"===t?this.updatePriority(i):i.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,i).updatePriority(this.priorityNode_)}updateChild(t,i){const r=rn(t);return null===r?i:i.isEmpty()&&".priority"!==r?this:((0,L.hu)(".priority"!==r||1===Uf(t),".priority must be the last token in a path"),this.updateImmediateChild(r,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Yn(t),i)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,i){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+_$(this.priorityNode_.val())+":");const i=typeof this.value_;t+=i+":",t+="number"===i?FG(this.value_):this.value_,this.lazyHash_=OG(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,L.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const i=typeof t.value_,r=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(i),c=n.VALUE_TYPE_ORDER.indexOf(r);return(0,L.hu)(s>=0,"Unknown leaf type: "+i),(0,L.hu)(c>=0,"Unknown leaf type: "+r),s===c?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-s}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const i=t;return this.value_===i.value_&&this.priorityNode_.equals(i.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ri=new class vJ extends ZI{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),s=i.compareTo(r);return 0===s?jg(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return an.MIN}maxPost(){return new an(Du,new By("[PRIORITY-POST]",w$))}makePost(e,t){const i=b$(e);return new an(t,new By("[PRIORITY-POST]",i))}toString(){return".priority"}},bJ=Math.log(2);class wJ{constructor(e){this.count=parseInt(Math.log(e+1)/bJ,10),this.current_=this.count-1;const r=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const QI=function(n,e,t,i){n.sort(e);const r=function(f,y){const w=y-f;let T,x;if(0===w)return null;if(1===w)return T=n[f],x=t?t(T):T,new sc(x,T.node,sc.BLACK,null,null);{const O=parseInt(w/2,10)+f,F=r(f,O),G=r(O+1,y);return T=n[O],x=t?t(T):T,new sc(x,T.node,sc.BLACK,F,G)}},d=function(f){let y=null,w=null,T=n.length;const x=function(F,G){const Q=T-F,pe=T;T-=F;const Se=r(Q+1,pe),ke=n[Q],Ae=t?t(ke):ke;O(new sc(Ae,ke.node,G,null,Se))},O=function(F){y?(y.left=F,y=F):(w=F,y=F)};for(let F=0;F<f.count;++F){const G=f.nextBitIsOne(),Q=Math.pow(2,f.count-(F+1));G?x(Q,sc.BLACK):(x(Q,sc.BLACK),x(Q,sc.RED))}return w}(new wJ(n.length));return new Wo(i||e,d)};let yP;const Uy={};class Ld{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,L.hu)(Uy&&ri,"ChildrenNode.ts has not been loaded"),yP=yP||new Ld({".priority":Uy},{".priority":ri}),yP}get(e){const t=(0,L.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Wo?t:null}hasIndex(e){return(0,L.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,L.hu)(e!==Iu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const s=t.getIterator(an.Wrap);let d,c=s.getNext();for(;c;)r=r||e.isDefinedOn(c.node),i.push(c),c=s.getNext();d=r?QI(i,e.getCompare()):Uy;const f=e.toString(),y=Object.assign({},this.indexSet_);y[f]=e;const w=Object.assign({},this.indexes_);return w[f]=d,new Ld(w,y)}addToIndexes(e,t){const i=(0,L.UI)(this.indexes_,(r,s)=>{const c=(0,L.DV)(this.indexSet_,s);if((0,L.hu)(c,"Missing index implementation for "+s),r===Uy){if(c.isDefinedOn(e.node)){const d=[],f=t.getIterator(an.Wrap);let y=f.getNext();for(;y;)y.name!==e.name&&d.push(y),y=f.getNext();return d.push(e),QI(d,c.getCompare())}return Uy}{const d=t.get(e.name);let f=r;return d&&(f=f.remove(new an(e.name,d))),f.insert(e,e.node)}});return new Ld(i,this.indexSet_)}removeFromIndexes(e,t){const i=(0,L.UI)(this.indexes_,r=>{if(r===Uy)return r;{const s=t.get(e.name);return s?r.remove(new an(e.name,s)):r}});return new Ld(i,this.indexSet_)}}let Ww,Zt=(()=>{class n{constructor(t,i,r){this.children_=t,this.priorityNode_=i,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&y$(this.priorityNode_),this.children_.isEmpty()&&(0,L.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Ww||(Ww=new n(new Wo(mP),null,Ld.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Ww}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const i=this.children_.get(t);return null===i?Ww:i}}getChild(t){const i=rn(t);return null===i?this:this.getImmediateChild(i).getChild(Yn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,i){if((0,L.hu)(i,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(i);{const r=new an(t,i);let s,c;i.isEmpty()?(s=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(t,i),c=this.indexMap_.addToIndexes(r,this.children_));const d=s.isEmpty()?Ww:this.priorityNode_;return new n(s,d,c)}}updateChild(t,i){const r=rn(t);if(null===r)return i;{(0,L.hu)(".priority"!==rn(t)||1===Uf(t),".priority must be the last token in a path");const s=this.getImmediateChild(r).updateChild(Yn(t),i);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const i={};let r=0,s=0,c=!0;if(this.forEachChild(ri,(d,f)=>{i[d]=f.val(t),r++,c&&n.INTEGER_REGEXP_.test(d)?s=Math.max(s,Number(d)):c=!1}),!t&&c&&s<2*r){const d=[];for(const f in i)d[f]=i[f];return d}return t&&!this.getPriority().isEmpty()&&(i[".priority"]=this.getPriority().val()),i}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+_$(this.getPriority().val())+":"),this.forEachChild(ri,(i,r)=>{const s=r.hash();""!==s&&(t+=":"+i+":"+s)}),this.lazyHash_=""===t?"":OG(t)}return this.lazyHash_}getPredecessorChildName(t,i,r){const s=this.resolveIndex_(r);if(s){const c=s.getPredecessorKey(new an(t,i));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.minKey();return r&&r.name}return this.children_.minKey()}getFirstChild(t){const i=this.getFirstChildName(t);return i?new an(i,this.children_.get(i)):null}getLastChildName(t){const i=this.resolveIndex_(t);if(i){const r=i.maxKey();return r&&r.name}return this.children_.maxKey()}getLastChild(t){const i=this.getLastChildName(t);return i?new an(i,this.children_.get(i)):null}forEachChild(t,i){const r=this.resolveIndex_(t);return r?r.inorderTraversal(s=>i(s.name,s.node)):this.children_.inorderTraversal(i)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)<0;)s.getNext(),c=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,i){const r=this.resolveIndex_(i);if(r)return r.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,an.Wrap);let c=s.peek();for(;null!=c&&i.compare(c,t)>0;)s.getNext(),c=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===zw?-1:0}withIndex(t){if(t===Iu||this.indexMap_.hasIndex(t))return this;{const i=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,i)}}isIndexed(t){return t===Iu||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const i=t;if(this.getPriority().equals(i.getPriority())){if(this.children_.count()===i.children_.count()){const r=this.getIterator(ri),s=i.getIterator(ri);let c=r.getNext(),d=s.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=r.getNext(),d=s.getNext()}return null===c&&null===d}return!1}return!1}}resolveIndex_(t){return t===Iu?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const zw=new class EJ extends Zt{constructor(){super(new Wo(mP),Zt.EMPTY_NODE,Ld.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Zt.EMPTY_NODE}isEmpty(){return!1}};function Si(n,e=null){if(null===n)return Zt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,L.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new By(n,Si(e));if(n instanceof Array){let t=Zt.EMPTY_NODE;return Zr(n,(i,r)=>{if((0,L.r3)(n,i)&&"."!==i.substring(0,1)){const s=Si(r);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(i,s))}}),t.updatePriority(Si(e))}{const t=[];let i=!1;if(Zr(n,(c,d)=>{if("."!==c.substring(0,1)){const f=Si(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new an(c,f)))}}),0===t.length)return Zt.EMPTY_NODE;const s=QI(t,gJ,c=>c.name,mP);if(i){const c=QI(t,ri.getCompare());return new Zt(s,Si(e),new Ld({".priority":c},{".priority":ri}))}return new Zt(s,Si(e),Ld.Default)}}Object.defineProperties(an,{MIN:{value:new an(Fd,Zt.EMPTY_NODE)},MAX:{value:new an(Du,zw)}}),m$.__EMPTY_NODE=Zt.EMPTY_NODE,By.__childrenNodeConstructor=Zt,function mJ(n){_P=n}(zw),function yJ(n){w$=n}(zw),function _J(n){b$=n}(Si);class vP extends ZI{constructor(e){super(),this.indexPath_=e,(0,L.hu)(!sn(e)&&".priority"!==rn(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),s=i.compareTo(r);return 0===s?jg(e.name,t.name):s}makePost(e,t){const i=Si(e),r=Zt.EMPTY_NODE.updateChild(this.indexPath_,i);return new an(t,r)}maxPost(){const e=Zt.EMPTY_NODE.updateChild(this.indexPath_,zw);return new an(Du,e)}toString(){return Gw(this.indexPath_,0).join("/")}}const bP=new class TJ extends ZI{compare(e,t){const i=e.node.compareTo(t.node);return 0===i?jg(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return an.MIN}maxPost(){return an.MAX}makePost(e,t){const i=Si(e);return new an(t,i)}toString(){return".value"}},Vy="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",DJ=function(){let n=0;const e=[];return function(t){const i=t===n;let r;n=t;const s=new Array(8);for(r=7;r>=0;r--)s[r]=Vy.charAt(t%64),t=Math.floor(t/64);(0,L.hu)(0===t,"Cannot push at time == 0");let c=s.join("");if(i){for(r=11;r>=0&&63===e[r];r--)e[r]=0;e[r]++}else for(r=0;r<12;r++)e[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)c+=Vy.charAt(e[r]);return(0,L.hu)(20===c.length,"nextPushId: Length should be 20."),c}}(),T$=function(n){if(n===""+sP)return"-";const e=$I(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let c=0;c<t.length;c++)t[c]=n.charAt(c);if(t.length<786)return t.push("-"),t.join("");let i=t.length-1;for(;i>=0&&"z"===t[i];)i--;if(-1===i)return Du;const s=Vy.charAt(Vy.indexOf(t[i])+1);return t[i]=s,t.slice(0,i+1).join("")},D$=function(n){if(n===""+LG)return Fd;const e=$I(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let i=0;i<t.length;i++)t[i]=n.charAt(i);return"-"===t[t.length-1]?1===t.length?""+sP:(delete t[t.length-1],t.join("")):(t[t.length-1]=Vy.charAt(Vy.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function I$(n){return{type:"value",snapshotNode:n}}function jy(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function qw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Zw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class EP{constructor(e){this.index_=e}updateChild(e,t,i,r,s,c){(0,L.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(null!=c&&(i.isEmpty()?e.hasChild(t)?c.trackChildChange(qw(t,d)):(0,L.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?c.trackChildChange(jy(t,i)):c.trackChildChange(Zw(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return null!=i&&(e.isLeafNode()||e.forEachChild(ri,(r,s)=>{t.hasChild(r)||i.trackChildChange(qw(r,s))}),t.isLeafNode()||t.forEachChild(ri,(r,s)=>{if(e.hasChild(r)){const c=e.getImmediateChild(r);c.equals(s)||i.trackChildChange(Zw(r,s,c))}else i.trackChildChange(jy(r,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Zt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Kw{constructor(e){this.indexedFilter_=new EP(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Kw.getStartPost_(e),this.endPost_=Kw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,i,r,s,c){return this.matches(new an(t,i))||(i=Zt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,s,c)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Zt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Zt.EMPTY_NODE);const s=this;return t.forEachChild(ri,(c,d)=>{s.matches(new an(c,d))||(r=r.updateImmediateChild(c,Zt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class SJ{constructor(e){this.rangedFilter_=new Kw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,i,r,s,c){return this.rangedFilter_.matches(new an(t,i))||(i=Zt.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,s,c):this.fullLimitUpdateChild_(e,t,i,s,c)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Zt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;r=Zt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;s.hasNext()&&c<this.limit_;){const d=s.getNext();let f;if(f=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),d)<=0:this.index_.compare(d,this.rangedFilter_.getEndPost())<=0,!f)break;r=r.updateImmediateChild(d.name,d.node),c++}}else{let s,c,d,f;if(r=t.withIndex(this.index_),r=r.updatePriority(Zt.EMPTY_NODE),this.reverse_){f=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost();const T=this.index_.getCompare();d=(x,O)=>T(O,x)}else f=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),d=this.index_.getCompare();let y=0,w=!1;for(;f.hasNext();){const T=f.getNext();!w&&d(s,T)<=0&&(w=!0),w&&y<this.limit_&&d(T,c)<=0?y++:r=r.updateImmediateChild(T.name,Zt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,s){let c;if(this.reverse_){const T=this.index_.getCompare();c=(x,O)=>T(O,x)}else c=this.index_.getCompare();const d=e;(0,L.hu)(d.numChildren()===this.limit_,"");const f=new an(t,i),y=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),w=this.rangedFilter_.matches(f);if(d.hasChild(t)){const T=d.getImmediateChild(t);let x=r.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=x&&(x.name===t||d.hasChild(x.name));)x=r.getChildAfterChild(this.index_,x,this.reverse_);const O=null==x?1:c(x,f);if(w&&!i.isEmpty()&&O>=0)return null!=s&&s.trackChildChange(Zw(t,i,T)),d.updateImmediateChild(t,i);{null!=s&&s.trackChildChange(qw(t,T));const G=d.updateImmediateChild(t,Zt.EMPTY_NODE);return null!=x&&this.rangedFilter_.matches(x)?(null!=s&&s.trackChildChange(jy(x.name,x.node)),G.updateImmediateChild(x.name,x.node)):G}}return i.isEmpty()?e:w&&c(y,f)>=0?(null!=s&&(s.trackChildChange(qw(y.name,y.node)),s.trackChildChange(jy(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(y.name,Zt.EMPTY_NODE)):e}}class JI{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,L.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fd}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,L.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Du}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,L.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ri}copy(){const e=new JI;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function CP(n,e,t){const i=n.copy();return i.startSet_=!0,void 0===e&&(e=null),i.indexStartValue_=e,null!=t?(i.startNameSet_=!0,i.indexStartName_=t):(i.startNameSet_=!1,i.indexStartName_=""),i}function TP(n,e,t){const i=n.copy();return i.endSet_=!0,void 0===e&&(e=null),i.indexEndValue_=e,void 0!==t?(i.endNameSet_=!0,i.indexEndName_=t):(i.endNameSet_=!1,i.indexEndName_=""),i}function XI(n,e){const t=n.copy();return t.index_=e,t}function S$(n){const e={};if(n.isDefault())return e;let t;return n.index_===ri?t="$priority":n.index_===bP?t="$value":n.index_===Iu?t="$key":((0,L.hu)(n.index_ instanceof vP,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,L.Wl)(t),n.startSet_&&(e.startAt=(0,L.Wl)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,L.Wl)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,L.Wl)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,L.Wl)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function A$(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ri&&(e.i=n.index_.toString()),e}class eS extends l${constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Uw("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,L.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,i,r){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const c=eS.getListenId_(e,i),d={};this.listens_[c]=d;const f=S$(e._queryParams);this.restRequest_(s+".json",f,(y,w)=>{let T=w;if(404===y&&(T=null,y=null),null===y&&this.onDataUpdate_(s,T,!1,i),(0,L.DV)(this.listens_,c)===d){let x;x=y?401===y?"permission_denied":"rest_error:"+y:"ok",r(x,null)}})}unlisten(e,t){const i=eS.getListenId_(e,t);delete this.listens_[i]}get(e){const t=S$(e._queryParams),i=e._path.toString(),r=new L.BH;return this.restRequest_(i+".json",t,(s,c)=>{let d=c;404===s&&(d=null,s=null),null===s?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(t.auth=r.accessToken),s&&s.token&&(t.ac=s.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,L.xO)(t);this.log_("Sending REST request for "+c);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&4===d.readyState){this.log_("REST Response for "+c+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=(0,L.cI)(d.responseText)}catch(y){Bs("Failed to parse JSON response for "+c+": "+d.responseText)}i(null,f)}else 401!==d.status&&404!==d.status&&Bs("Got unsuccessful REST response for "+c+" Status: "+d.status),i(d.status);i=null}},d.open("GET",c,!0),d.send()})}}class kJ{constructor(){this.rootNode_=Zt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function tS(){return{value:null,children:new Map}}function Hy(n,e,t){if(sn(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const i=rn(e);n.children.has(i)||n.children.set(i,tS()),Hy(n.children.get(i),e=Yn(e),t)}}function DP(n,e){if(sn(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ri,(i,r)=>{Hy(n,new Pn(i),r)}),DP(n,e)}}if(n.children.size>0){const t=rn(e);return e=Yn(e),n.children.has(t)&&DP(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function IP(n,e,t){null!==n.value?t(e,n.value):function RJ(n,e){n.children.forEach((t,i)=>{e(i,t)})}(n,(i,r)=>{IP(r,new Pn(e.toString()+"/"+i),t)})}class PJ{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Zr(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}class BJ{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new PJ(e);const i=1e4+2e4*Math.random();jw(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Zr(e,(r,s)=>{s>0&&(0,L.r3)(this.statsToReport_,r)&&(t[r]=s,i=!0)}),i&&this.server_.reportStats(t),jw(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Dl=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Dl||(Dl={})),Dl))();function xP(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class nS{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Dl.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(sn(this.path)){if(null!=this.affectedTree.value)return(0,L.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new nS(Nn(),t,this.revert)}}return(0,L.hu)(rn(this.path)===e,"operationForChild called for unrelated child."),new nS(Yn(this.path),this.affectedTree,this.revert)}}class Yw{constructor(e,t){this.source=e,this.path=t,this.type=Dl.LISTEN_COMPLETE}operationForChild(e){return sn(this.path)?new Yw(this.source,Nn()):new Yw(this.source,Yn(this.path))}}class $g{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Dl.OVERWRITE}operationForChild(e){return sn(this.path)?new $g(this.source,Nn(),this.snap.getImmediateChild(e)):new $g(this.source,Yn(this.path),this.snap)}}class Gy{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Dl.MERGE}operationForChild(e){if(sn(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new $g(this.source,Nn(),t.value):new Gy(this.source,Nn(),t)}return(0,L.hu)(rn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Gy(this.source,Yn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vf{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(sn(e))return this.isFullyInitialized()&&!this.filtered_;const t=rn(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class UJ{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Qw(n,e,t,i,r,s){const c=i.filter(d=>d.type===t);c.sort((d,f)=>function HJ(n,e,t){if(null==e.childName||null==t.childName)throw(0,L.g5)("Should only compare child_ events.");const i=new an(e.childName,e.snapshotNode),r=new an(t.childName,t.snapshotNode);return n.index_.compare(i,r)}(n,d,f)),c.forEach(d=>{const f=function jJ(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,s);r.forEach(y=>{y.respondsTo(d.type)&&e.push(y.createEvent(f,n.query_))})})}function iS(n,e){return{eventCache:n,serverCache:e}}function Jw(n,e,t,i){return iS(new Vf(e,t,i),n.serverCache)}function M$(n,e,t,i){return iS(n.eventCache,new Vf(e,t,i))}function rS(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Wg(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let MP;class si{constructor(e,t=(()=>(MP||(MP=new Wo(SQ)),MP))()){this.value=e,this.children=t}static fromObject(e){let t=new si(null);return Zr(e,(i,r)=>{t=t.set(new Pn(i),r)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Nn(),value:this.value};if(sn(e))return null;{const i=rn(e),r=this.children.get(i);if(null!==r){const s=r.findRootMostMatchingPathAndValue(Yn(e),t);return null!=s?{path:wi(new Pn(i),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(sn(e))return this;{const t=rn(e),i=this.children.get(t);return null!==i?i.subtree(Yn(e)):new si(null)}}set(e,t){if(sn(e))return new si(t,this.children);{const i=rn(e),s=(this.children.get(i)||new si(null)).set(Yn(e),t),c=this.children.insert(i,s);return new si(this.value,c)}}remove(e){if(sn(e))return this.children.isEmpty()?new si(null):new si(null,this.children);{const t=rn(e),i=this.children.get(t);if(i){const r=i.remove(Yn(e));let s;return s=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&s.isEmpty()?new si(null):new si(this.value,s)}return this}}get(e){if(sn(e))return this.value;{const t=rn(e),i=this.children.get(t);return i?i.get(Yn(e)):null}}setTree(e,t){if(sn(e))return t;{const i=rn(e),s=(this.children.get(i)||new si(null)).setTree(Yn(e),t);let c;return c=s.isEmpty()?this.children.remove(i):this.children.insert(i,s),new si(this.value,c)}}fold(e){return this.fold_(Nn(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,s)=>{i[r]=s.fold_(wi(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,Nn(),t)}findOnPath_(e,t,i){const r=!!this.value&&i(t,this.value);if(r)return r;if(sn(e))return null;{const s=rn(e),c=this.children.get(s);return c?c.findOnPath_(Yn(e),wi(t,s),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Nn(),t)}foreachOnPath_(e,t,i){if(sn(e))return this;{this.value&&i(t,this.value);const r=rn(e),s=this.children.get(r);return s?s.foreachOnPath_(Yn(e),wi(t,r),i):new si(null)}}foreach(e){this.foreach_(Nn(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(wi(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}class oc{constructor(e){this.writeTree_=e}static empty(){return new oc(new si(null))}}function Xw(n,e,t){if(sn(e))return new oc(new si(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(null!=i){const r=i.path;let s=i.value;const c=po(r,e);return s=s.updateChild(c,t),new oc(n.writeTree_.set(r,s))}{const r=new si(t),s=n.writeTree_.setTree(e,r);return new oc(s)}}}function NP(n,e,t){let i=n;return Zr(t,(r,s)=>{i=Xw(i,wi(e,r),s)}),i}function N$(n,e){if(sn(e))return oc.empty();{const t=n.writeTree_.setTree(e,new si(null));return new oc(t)}}function OP(n,e){return null!=zg(n,e)}function zg(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(po(t.path,e)):null}function O$(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ri,(i,r)=>{e.push(new an(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{null!=r.value&&e.push(new an(i,r.value))}),e}function jf(n,e){if(sn(e))return n;{const t=zg(n,e);return new oc(null!=t?new si(t):n.writeTree_.subtree(e))}}function kP(n){return n.writeTree_.isEmpty()}function $y(n,e){return k$(Nn(),n.writeTree_,e)}function k$(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,s)=>{".priority"===r?((0,L.hu)(null!==s.value,"Priority writes must always be leaf nodes"),i=s.value):t=k$(wi(n,r),s,t)}),!t.getChild(n).isEmpty()&&null!==i&&(t=t.updateChild(wi(n,".priority"),i)),t}}function sS(n,e){return B$(e,n)}function ZJ(n,e){if(n.snap)return Tl(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Tl(wi(n.path,t),e))return!0;return!1}function YJ(n){return n.visible}function R$(n,e,t){let i=oc.empty();for(let r=0;r<n.length;++r){const s=n[r];if(e(s)){const c=s.path;let d;if(s.snap)Tl(t,c)?(d=po(t,c),i=Xw(i,d,s.snap)):Tl(c,t)&&(d=po(c,t),i=Xw(i,Nn(),s.snap.getChild(d)));else{if(!s.children)throw(0,L.g5)("WriteRecord should have .snap or .children");if(Tl(t,c))d=po(t,c),i=NP(i,d,s.children);else if(Tl(c,t))if(d=po(c,t),sn(d))i=NP(i,Nn(),s.children);else{const f=(0,L.DV)(s.children,rn(d));if(f){const y=f.getChild(Yn(d));i=Xw(i,Nn(),y)}}}}}return i}function P$(n,e,t,i,r){if(i||r){const s=jf(n.visibleWrites,e);return!r&&kP(s)?t:r||null!=t||OP(s,Nn())?$y(R$(n.allWrites,function(y){return(y.visible||r)&&(!i||!~i.indexOf(y.writeId))&&(Tl(y.path,e)||Tl(e,y.path))},e),t||Zt.EMPTY_NODE):null}{const s=zg(n.visibleWrites,e);if(null!=s)return s;{const c=jf(n.visibleWrites,e);return kP(c)?t:null!=t||OP(c,Nn())?$y(c,t||Zt.EMPTY_NODE):null}}}function oS(n,e,t,i){return P$(n.writeTree,n.treePath,e,t,i)}function RP(n,e){return function QJ(n,e,t){let i=Zt.EMPTY_NODE;const r=zg(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(ri,(s,c)=>{i=i.updateImmediateChild(s,c)}),i;if(t){const s=jf(n.visibleWrites,e);return t.forEachChild(ri,(c,d)=>{const f=$y(jf(s,new Pn(c)),d);i=i.updateImmediateChild(c,f)}),O$(s).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}return O$(jf(n.visibleWrites,e)).forEach(c=>{i=i.updateImmediateChild(c.name,c.node)}),i}(n.writeTree,n.treePath,e)}function F$(n,e,t,i){return function JJ(n,e,t,i,r){(0,L.hu)(i||r,"Either existingEventSnap or existingServerSnap must exist");const s=wi(e,t);if(OP(n.visibleWrites,s))return null;{const c=jf(n.visibleWrites,s);return kP(c)?r.getChild(t):$y(c,r.getChild(t))}}(n.writeTree,n.treePath,e,t,i)}function aS(n,e){return function eX(n,e){return zg(n.visibleWrites,e)}(n.writeTree,wi(n.treePath,e))}function PP(n,e,t){return function XJ(n,e,t,i){const r=wi(e,t),s=zg(n.visibleWrites,r);return null!=s?s:i.isCompleteForChild(t)?$y(jf(n.visibleWrites,r),i.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function L$(n,e){return B$(wi(n.treePath,e),n.writeTree)}function B$(n,e){return{treePath:n,writeTree:e}}class rX{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;(0,L.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,L.hu)(".priority"!==i,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const s=r.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(i,Zw(i,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(i);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(i,qw(i,r.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(i,jy(i,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,L.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(i,Zw(i,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}const U$=new class sX{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}};class FP{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=null!=this.optCompleteServerCache_?new Vf(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return PP(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wg(this.viewCache_),s=function iX(n,e,t,i,r,s){return function tX(n,e,t,i,r,s,c){let d;const f=jf(n.visibleWrites,e),y=zg(f,Nn());if(null!=y)d=y;else{if(null==t)return[];d=$y(f,t)}if(d=d.withIndex(c),d.isEmpty()||d.isLeafNode())return[];{const w=[],T=c.getCompare(),x=s?d.getReverseIteratorFrom(i,c):d.getIteratorFrom(i,c);let O=x.getNext();for(;O&&w.length<r;)0!==T(O,i)&&w.push(O),O=x.getNext();return w}}(n.writeTree,n.treePath,e,t,i,r,s)}(this.writes_,r,t,1,i,e);return 0===s.length?null:s[0]}}function V$(n,e,t,i,r,s){const c=e.eventCache;if(null!=aS(i,t))return e;{let d,f;if(sn(t))if((0,L.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Wg(e),T=RP(i,y instanceof Zt?y:Zt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),T,s)}else{const y=oS(i,Wg(e));d=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=rn(t);if(".priority"===y){(0,L.hu)(1===Uf(t),"Can't have a priority with additional path components");const w=c.getNode();f=e.serverCache.getNode();const T=F$(i,t,w,f);d=null!=T?n.filter.updatePriority(w,T):c.getNode()}else{const w=Yn(t);let T;if(c.isCompleteForChild(y)){f=e.serverCache.getNode();const x=F$(i,t,c.getNode(),f);T=null!=x?c.getNode().getImmediateChild(y).updateChild(w,x):c.getNode().getImmediateChild(y)}else T=PP(i,y,e.serverCache);d=null!=T?n.filter.updateChild(c.getNode(),y,T,w,r,s):c.getNode()}}return Jw(e,d,c.isFullyInitialized()||sn(t),n.filter.filtersNodes())}}function lS(n,e,t,i,r,s,c,d){const f=e.serverCache;let y;const w=c?n.filter:n.filter.getIndexedFilter();if(sn(t))y=w.updateFullNode(f.getNode(),i,null);else if(w.filtersNodes()&&!f.isFiltered()){const O=f.getNode().updateChild(t,i);y=w.updateFullNode(f.getNode(),O,null)}else{const O=rn(t);if(!f.isCompleteForPath(t)&&Uf(t)>1)return e;const F=Yn(t),Q=f.getNode().getImmediateChild(O).updateChild(F,i);y=".priority"===O?w.updatePriority(f.getNode(),Q):w.updateChild(f.getNode(),O,Q,F,U$,null)}const T=M$(e,y,f.isFullyInitialized()||sn(t),w.filtersNodes());return V$(n,T,t,r,new FP(r,T,s),d)}function LP(n,e,t,i,r,s,c){const d=e.eventCache;let f,y;const w=new FP(r,e,s);if(sn(t))y=n.filter.updateFullNode(e.eventCache.getNode(),i,c),f=Jw(e,y,!0,n.filter.filtersNodes());else{const T=rn(t);if(".priority"===T)y=n.filter.updatePriority(e.eventCache.getNode(),i),f=Jw(e,y,d.isFullyInitialized(),d.isFiltered());else{const x=Yn(t),O=d.getNode().getImmediateChild(T);let F;if(sn(x))F=i;else{const G=w.getCompleteChild(T);F=null!=G?".priority"===fP(x)&&G.getChild(h$(x)).isEmpty()?G:G.updateChild(x,i):Zt.EMPTY_NODE}f=O.equals(F)?e:Jw(e,n.filter.updateChild(d.getNode(),T,F,x,w,c),d.isFullyInitialized(),n.filter.filtersNodes())}}return f}function j$(n,e){return n.eventCache.isCompleteForChild(e)}function H$(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function BP(n,e,t,i,r,s,c,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,f=e;y=sn(t)?i:new si(null).setTree(t,i);const w=e.serverCache.getNode();return y.children.inorderTraversal((T,x)=>{if(w.hasChild(T)){const F=H$(0,e.serverCache.getNode().getImmediateChild(T),x);f=lS(n,f,new Pn(T),F,r,s,c,d)}}),y.children.inorderTraversal((T,x)=>{const O=!e.serverCache.isCompleteForChild(T)&&null===x.value;if(!w.hasChild(T)&&!O){const G=H$(0,e.serverCache.getNode().getImmediateChild(T),x);f=lS(n,f,new Pn(T),G,r,s,c,d)}}),f}class pX{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new EP(i.getIndex()),s=function AJ(n){return n.loadsAllData()?new EP(n.getIndex()):n.hasLimit()?new SJ(n):new Kw(n)}(i);this.processor_=function oX(n){return{filter:n}}(s);const c=t.serverCache,d=t.eventCache,f=r.updateFullNode(Zt.EMPTY_NODE,c.getNode(),null),y=s.updateFullNode(Zt.EMPTY_NODE,d.getNode(),null),w=new Vf(f,c.isFullyInitialized(),r.filtersNodes()),T=new Vf(y,d.isFullyInitialized(),s.filtersNodes());this.viewCache_=iS(T,w),this.eventGenerator_=new UJ(this.query_)}get query(){return this.query_}}function _X(n,e){const t=Wg(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!sn(e)&&!t.getImmediateChild(rn(e)).isEmpty())?t.getChild(e):null}function G$(n){return 0===n.eventRegistrations_.length}function $$(n,e,t){const i=[];if(t){(0,L.hu)(null==e,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(s=>{const c=s.createCancelEvent(t,r);c&&i.push(c)})}if(e){let r=[];for(let s=0;s<n.eventRegistrations_.length;++s){const c=n.eventRegistrations_[s];if(c.matches(e)){if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(s+1));break}}else r.push(c)}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function W$(n,e,t,i){e.type===Dl.MERGE&&null!==e.source.queryId&&((0,L.hu)(Wg(n.viewCache_),"We should always have a full cache before handling merges"),(0,L.hu)(rS(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,s=function lX(n,e,t,i,r){const s=new rX;let c,d;if(t.type===Dl.OVERWRITE){const y=t;y.source.fromUser?c=LP(n,e,y.path,y.snap,i,r,s):((0,L.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered()&&!sn(y.path),c=lS(n,e,y.path,y.snap,i,r,d,s))}else if(t.type===Dl.MERGE){const y=t;y.source.fromUser?c=function uX(n,e,t,i,r,s,c){let d=e;return i.foreach((f,y)=>{const w=wi(t,f);j$(e,rn(w))&&(d=LP(n,d,w,y,r,s,c))}),i.foreach((f,y)=>{const w=wi(t,f);j$(e,rn(w))||(d=LP(n,d,w,y,r,s,c))}),d}(n,e,y.path,y.children,i,r,s):((0,L.hu)(y.source.fromServer,"Unknown source."),d=y.source.tagged||e.serverCache.isFiltered(),c=BP(n,e,y.path,y.children,i,r,d,s))}else if(t.type===Dl.ACK_USER_WRITE){const y=t;c=y.revert?function fX(n,e,t,i,r,s){let c;if(null!=aS(i,t))return e;{const d=new FP(i,e,r),f=e.eventCache.getNode();let y;if(sn(t)||".priority"===rn(t)){let w;if(e.serverCache.isFullyInitialized())w=oS(i,Wg(e));else{const T=e.serverCache.getNode();(0,L.hu)(T instanceof Zt,"serverChildren would be complete if leaf node"),w=RP(i,T)}y=n.filter.updateFullNode(f,w,s)}else{const w=rn(t);let T=PP(i,w,e.serverCache);null==T&&e.serverCache.isCompleteForChild(w)&&(T=f.getImmediateChild(w)),y=null!=T?n.filter.updateChild(f,w,T,Yn(t),d,s):e.eventCache.getNode().hasChild(w)?n.filter.updateChild(f,w,Zt.EMPTY_NODE,Yn(t),d,s):f,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=oS(i,Wg(e)),c.isLeafNode()&&(y=n.filter.updateFullNode(y,c,s)))}return c=e.serverCache.isFullyInitialized()||null!=aS(i,Nn()),Jw(e,y,c,n.filter.filtersNodes())}}(n,e,y.path,i,r,s):function dX(n,e,t,i,r,s,c){if(null!=aS(r,t))return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(null!=i.value){if(sn(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return lS(n,e,t,f.getNode().getChild(t),r,s,d,c);if(sn(t)){let y=new si(null);return f.getNode().forEachChild(Iu,(w,T)=>{y=y.set(new Pn(w),T)}),BP(n,e,t,y,r,s,d,c)}return e}{let y=new si(null);return i.foreach((w,T)=>{const x=wi(t,w);f.isCompleteForPath(x)&&(y=y.set(w,f.getNode().getChild(x)))}),BP(n,e,t,y,r,s,d,c)}}(n,e,y.path,y.affectedTree,i,r,s)}else{if(t.type!==Dl.LISTEN_COMPLETE)throw(0,L.g5)("Unknown operation type: "+t.type);c=function hX(n,e,t,i,r){const s=e.serverCache;return V$(n,M$(e,s.getNode(),s.isFullyInitialized()||sn(t),s.isFiltered()),t,i,U$,r)}(n,e,t.path,i,s)}const f=s.getChanges();return function cX(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),s=rS(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(s)||!i.getNode().getPriority().equals(s.getPriority()))&&t.push(I$(rS(e)))}}(e,c,f),{viewCache:c,changes:f}}(n.processor_,r,e,t,i);return function aX(n,e){(0,L.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,L.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,L.hu)(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,z$(n,s.changes,s.viewCache.eventCache.getNode(),null)}function z$(n,e,t,i){return function VJ(n,e,t,i){const r=[],s=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&s.push(function IJ(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),Qw(n,r,"child_removed",e,i,t),Qw(n,r,"child_added",e,i,t),Qw(n,r,"child_moved",s,i,t),Qw(n,r,"child_changed",e,i,t),Qw(n,r,"value",e,i,t),r}(n.eventGenerator_,e,t,i?[i]:n.eventRegistrations_)}let cS,dS;class q${constructor(){this.views=new Map}}function UP(n,e,t,i){const r=e.source.queryId;if(null!==r){const s=n.views.get(r);return(0,L.hu)(null!=s,"SyncTree gave us an op for an invalid query."),W$(s,e,t,i)}{let s=[];for(const c of n.views.values())s=s.concat(W$(c,e,t,i));return s}}function Z$(n,e,t,i,r){const c=n.views.get(e._queryIdentifier);if(!c){let d=oS(t,r?i:null),f=!1;d?f=!0:i instanceof Zt?(d=RP(t,i),f=!1):(d=Zt.EMPTY_NODE,f=!1);const y=iS(new Vf(d,f,!1),new Vf(i,r,!1));return new pX(e,y)}return c}function K$(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Hf(n,e){let t=null;for(const i of n.views.values())t=t||_X(i,e);return t}function Y$(n,e){return e._queryParams.loadsAllData()?uS(n):n.views.get(e._queryIdentifier)}function Q$(n,e){return null!=Y$(n,e)}function Gf(n){return null!=uS(n)}function uS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let SX=1;class J${constructor(e){this.listenProvider_=e,this.syncPointTree_=new si(null),this.pendingWriteTree_=function nX(){return{visibleWrites:oc.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function VP(n,e,t,i,r){return function $J(n,e,t,i,r){(0,L.hu)(i>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=Xw(n.visibleWrites,e,t)),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i,r),r?Wy(n,new $g({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function $f(n,e,t=!1){const i=function zJ(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}(n.pendingWriteTree_,e);if(function qJ(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,L.hu)(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,s=!1,c=n.allWrites.length-1;for(;r&&c>=0;){const d=n.allWrites[c];d.visible&&(c>=t&&ZJ(d,i.path)?r=!1:Tl(i.path,d.path)&&(s=!0)),c--}return!!r&&(s?(function KJ(n){n.visibleWrites=R$(n.allWrites,YJ,Nn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(i.snap?n.visibleWrites=N$(n.visibleWrites,i.path):Zr(i.children,f=>{n.visibleWrites=N$(n.visibleWrites,wi(i.path,f))}),!0))}(n.pendingWriteTree_,e)){let s=new si(null);return null!=i.snap?s=s.set(Nn(),!0):Zr(i.children,c=>{s=s.set(new Pn(c),!0)}),Wy(n,new nS(i.path,s,t))}return[]}function eE(n,e,t){return Wy(n,new $g({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function hS(n,e,t,i,r=!1){const s=e._path,c=n.syncPointTree_.get(s);let d=[];if(c&&("default"===e._queryIdentifier||Q$(c,e))){const f=function TX(n,e,t,i){const r=e._queryIdentifier,s=[];let c=[];const d=Gf(n);if("default"===r)for(const[f,y]of n.views.entries())c=c.concat($$(y,t,i)),G$(y)&&(n.views.delete(f),y.query._queryParams.loadsAllData()||s.push(y.query));else{const f=n.views.get(r);f&&(c=c.concat($$(f,t,i)),G$(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||s.push(f.query)))}return d&&!Gf(n)&&s.push(new(function wX(){return(0,L.hu)(cS,"Reference.ts has not been loaded"),cS}())(e._repo,e._path)),{removed:s,events:c}}(c,e,t,i);(function EX(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=f.removed;if(d=f.events,!r){const w=-1!==y.findIndex(x=>x._queryParams.loadsAllData()),T=n.syncPointTree_.findOnPath(s,(x,O)=>Gf(O));if(w&&!T){const x=n.syncPointTree_.subtree(s);if(!x.isEmpty()){const O=function RX(n){return n.fold((e,t,i)=>{if(t&&Gf(t))return[uS(t)];{let r=[];return t&&(r=K$(t)),Zr(i,(s,c)=>{r=r.concat(c)}),r}})}(x);for(let F=0;F<O.length;++F){const G=O[F],Q=G.query,pe=n6(n,G);n.listenProvider_.startListening(nE(Q),tE(n,Q),pe.hashFn,pe.onComplete)}}}!T&&y.length>0&&!i&&(w?n.listenProvider_.stopListening(nE(e),null):y.forEach(x=>{const O=n.queryToTagMap.get(pS(x));n.listenProvider_.stopListening(nE(x),O)}))}!function PX(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=pS(i),s=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(s)}}}(n,y)}return d}function X$(n,e,t,i){const r=HP(n,i);if(null!=r){const s=GP(r),c=s.path,d=s.queryId,f=po(c,e);return $P(n,c,new $g(xP(d),f,t))}return[]}function jP(n,e,t,i=!1){const r=e._path;let s=null,c=!1;n.syncPointTree_.foreachOnPath(r,(x,O)=>{const F=po(x,r);s=s||Hf(O,F),c=c||Gf(O)});let f,d=n.syncPointTree_.get(r);d?(c=c||Gf(d),s=s||Hf(d,Nn())):(d=new q$,n.syncPointTree_=n.syncPointTree_.set(r,d)),null!=s?f=!0:(f=!1,s=Zt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((O,F)=>{const G=Hf(F,Nn());G&&(s=s.updateImmediateChild(O,G))}));const y=Q$(d,e);if(!y&&!e._queryParams.loadsAllData()){const x=pS(e);(0,L.hu)(!n.queryToTagMap.has(x),"View does not exist, but we have a tag");const O=function FX(){return SX++}();n.queryToTagMap.set(x,O),n.tagToQueryMap.set(O,x)}let T=function CX(n,e,t,i,r,s){const c=Z$(n,e,i,r,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function yX(n,e){n.eventRegistrations_.push(e)}(c,t),function vX(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ri,(s,c)=>{i.push(jy(s,c))}),t.isFullyInitialized()&&i.push(I$(t.getNode())),z$(n,i,t.getNode(),e)}(c,t)}(d,e,t,sS(n.pendingWriteTree_,r),s,f);if(!y&&!c&&!i){const x=Y$(d,e);T=T.concat(function LX(n,e,t){const i=e._path,r=tE(n,e),s=n6(n,t),c=n.listenProvider_.startListening(nE(e),r,s.hashFn,s.onComplete),d=n.syncPointTree_.subtree(i);if(r)(0,L.hu)(!Gf(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((y,w,T)=>{if(!sn(y)&&w&&Gf(w))return[uS(w).query];{let x=[];return w&&(x=x.concat(K$(w).map(O=>O.query))),Zr(T,(O,F)=>{x=x.concat(F)}),x}});for(let y=0;y<f.length;++y){const w=f[y];n.listenProvider_.stopListening(nE(w),tE(n,w))}}return c}(n,e,x))}return T}function fS(n,e,t){const r=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(c,d)=>{const y=Hf(d,po(c,e));if(y)return y});return P$(r,e,s,t,!0)}function Wy(n,e){return e6(e,n.syncPointTree_,null,sS(n.pendingWriteTree_,Nn()))}function e6(n,e,t,i){if(sn(n.path))return t6(n,e,t,i);{const r=e.get(Nn());null==t&&null!=r&&(t=Hf(r,Nn()));let s=[];const c=rn(n.path),d=n.operationForChild(c),f=e.children.get(c);if(f&&d){const y=t?t.getImmediateChild(c):null,w=L$(i,c);s=s.concat(e6(d,f,y,w))}return r&&(s=s.concat(UP(r,n,i,t))),s}}function t6(n,e,t,i){const r=e.get(Nn());null==t&&null!=r&&(t=Hf(r,Nn()));let s=[];return e.children.inorderTraversal((c,d)=>{const f=t?t.getImmediateChild(c):null,y=L$(i,c),w=n.operationForChild(c);w&&(s=s.concat(t6(w,d,f,y)))}),r&&(s=s.concat(UP(r,n,i,t))),s}function n6(n,e){const t=e.query,i=tE(n,t);return{hashFn:()=>(function gX(n){return n.viewCache_.serverCache.getNode()}(e)||Zt.EMPTY_NODE).hash(),onComplete:r=>{if("ok"===r)return i?function NX(n,e,t){const i=HP(n,t);if(i){const r=GP(i),s=r.path,c=r.queryId,d=po(s,e);return $P(n,s,new Yw(xP(c),d))}return[]}(n,t._path,i):function MX(n,e){return Wy(n,new Yw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function MQ(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}(r,t);return hS(n,t,null,s)}}}}function tE(n,e){const t=pS(e);return n.queryToTagMap.get(t)}function pS(n){return n._path.toString()+"$"+n._queryIdentifier}function HP(n,e){return n.tagToQueryMap.get(e)}function GP(n){const e=n.indexOf("$");return(0,L.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function $P(n,e,t){const i=n.syncPointTree_.get(e);return(0,L.hu)(i,"Missing sync point for query tag that we're tracking"),UP(i,t,sS(n.pendingWriteTree_,e),null)}function nE(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function IX(){return(0,L.hu)(dS,"Reference.ts has not been loaded"),dS}())(n._repo,n._path):n}class WP{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new WP(t)}node(){return this.node_}}class zP{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=wi(this.path_,e);return new zP(this.syncTree_,t)}node(){return fS(this.syncTree_,this.path_)}}const i6=function(n,e,t){return n&&"object"==typeof n?((0,L.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?UX(n[".sv"],e,t):"object"==typeof n[".sv"]?VX(n[".sv"],e):void(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},UX=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,L.hu)(!1,"Unexpected server value: "+n)},VX=function(n,e,t){n.hasOwnProperty("increment")||(0,L.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;"number"!=typeof i&&(0,L.hu)(!1,"Unexpected increment value: "+i);const r=e.node();if((0,L.hu)(null!=r,"Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const c=r.getValue();return"number"!=typeof c?i:c+i},r6=function(n,e,t,i){return ZP(e,new zP(t,n),i)},qP=function(n,e,t){return ZP(n,new WP(e),t)};function ZP(n,e,t){const i=n.getPriority().val(),r=i6(i,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const c=n,d=i6(c.getValue(),e,t);return d!==c.getValue()||r!==c.getPriority().val()?new By(d,Si(r)):n}{const c=n;return s=c,r!==c.getPriority().val()&&(s=s.updatePriority(new By(r))),c.forEachChild(ri,(d,f)=>{const y=ZP(f,e.getImmediateChild(d),t);y!==f&&(s=s.updateImmediateChild(d,y))}),s}}class KP{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function gS(n,e){let t=e instanceof Pn?e:new Pn(e),i=n,r=rn(t);for(;null!==r;){const s=(0,L.DV)(i.node.children,r)||{children:{},childCount:0};i=new KP(r,i,s),t=Yn(t),r=rn(t)}return i}function qg(n){return n.node.value}function YP(n,e){n.node.value=e,QP(n)}function s6(n){return n.node.childCount>0}function mS(n,e){Zr(n.node.children,(t,i)=>{e(new KP(t,n,i))})}function o6(n,e,t,i){t&&!i&&e(n),mS(n,r=>{o6(r,e,!0,i)}),t&&i&&e(n)}function iE(n){return new Pn(null===n.parent?n.name:iE(n.parent)+"/"+n.name)}function QP(n){null!==n.parent&&function GX(n,e,t){const i=function jX(n){return void 0===qg(n)&&!s6(n)}(t),r=(0,L.r3)(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,QP(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,QP(n))}(n.parent,n.name,n)}const $X=/[\[\].#$\/\u0000-\u001F\u007F]/,WX=/[\[\].#$\u0000-\u001F\u007F]/,JP=10485760,_S=function(n){return"string"==typeof n&&0!==n.length&&!$X.test(n)},a6=function(n){return"string"==typeof n&&0!==n.length&&!WX.test(n)},rE=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!GI(n)||n&&"object"==typeof n&&(0,L.r3)(n,".sv")},Su=function(n,e,t,i){i&&void 0===e||sE((0,L.gK)(n,"value"),e,t)},sE=function(n,e,t){const i=t instanceof Pn?new aJ(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Hg(i));if("function"==typeof e)throw new Error(n+"contains a function "+Hg(i)+" with contents = "+e.toString());if(GI(e))throw new Error(n+"contains "+e.toString()+" "+Hg(i));if("string"==typeof e&&e.length>JP/3&&(0,L.ug)(e)>JP)throw new Error(n+"contains a string greater than "+JP+" utf8 bytes "+Hg(i)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let r=!1,s=!1;if(Zr(e,(c,d)=>{if(".value"===c)r=!0;else if(".priority"!==c&&".sv"!==c&&(s=!0,!_S(c)))throw new Error(n+" contains an invalid key ("+c+") "+Hg(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function lJ(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,L.ug)(e),f$(n)})(i,c),sE(n,d,i),function cJ(n){const e=n.parts_.pop();n.byteLength_-=(0,L.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(i)}),r&&s)throw new Error(n+' contains ".value" child '+Hg(i)+" in addition to actual children.")}},l6=function(n,e,t,i){if(i&&void 0===e)return;const r=(0,L.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const s=[];Zr(e,(c,d)=>{const f=new Pn(c);if(sE(r,d,wi(t,f)),".priority"===fP(f)&&!rE(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(f)}),function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const s=Gw(i);for(let c=0;c<s.length;c++)if((".priority"!==s[c]||c!==s.length-1)&&!_S(s[c]))throw new Error(n+"contains an invalid key ("+s[c]+") in path "+i.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(oJ);let r=null;for(t=0;t<e.length;t++){if(i=e[t],null!==r&&Tl(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}}(r,s)},XP=function(n,e,t){if(!t||void 0!==e){if(GI(e))throw new Error((0,L.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!rE(e))throw new Error((0,L.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},oE=function(n,e,t,i){if(!(i&&void 0===t||_S(t)))throw new Error((0,L.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},aE=function(n,e,t,i){if(!(i&&void 0===t||a6(t)))throw new Error((0,L.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Il=function(n,e){if(".info"===rn(e))throw new Error(n+" failed = Can't modify data under /.info/")},c6=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!_S(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),a6(n)}(t))throw new Error((0,L.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class KX{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function yS(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],s=r.getPath();null!==t&&!pP(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(r)}t&&n.eventLists_.push(t)}function u6(n,e,t){yS(n,t),d6(n,i=>pP(i,e))}function Va(n,e,t){yS(n,t),d6(n,i=>Tl(i,e)||Tl(e,i))}function d6(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];r&&(e(r.path)?(YX(n.eventLists_[i]),n.eventLists_[i]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function YX(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const i=t.getEventRunner();Vg&&qr("event: "+t.toString()),Fy(i)}}}const h6="repo_interrupt";class JX{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new KX,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=tS(),this.transactionQueueTree_=new KP,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function f6(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function lE(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:f6(n)})}function p6(n,e,t,i,r){n.dataUpdateCount++;const s=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(r)if(i){const f=(0,L.UI)(t,y=>Si(y));c=function OX(n,e,t,i){const r=HP(n,i);if(r){const s=GP(r),c=s.path,d=s.queryId,f=po(c,e),y=si.fromObject(t);return $P(n,c,new Gy(xP(d),f,y))}return[]}(n.serverSyncTree_,s,f,r)}else{const f=Si(t);c=X$(n.serverSyncTree_,s,f,r)}else if(i){const f=(0,L.UI)(t,y=>Si(y));c=function xX(n,e,t){const i=si.fromObject(t);return Wy(n,new Gy({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,s,f)}else{const f=Si(t);c=eE(n.serverSyncTree_,s,f)}let d=s;c.length>0&&(d=qy(n,s)),Va(n.eventQueue_,d,c)}function g6(n,e){eF(n,"connected",e),!1===e&&function iee(n){zy(n,"onDisconnectEvents");const e=lE(n),t=tS();IP(n.onDisconnect_,Nn(),(r,s)=>{const c=r6(r,s,n.serverSyncTree_,e);Hy(t,r,c)});let i=[];IP(t,Nn(),(r,s)=>{i=i.concat(eE(n.serverSyncTree_,r,s));const c=rF(n,r);qy(n,c)}),n.onDisconnect_=tS(),Va(n.eventQueue_,Nn(),i)}(n)}function eF(n,e,t){const i=new Pn("/.info/"+e),r=Si(t);n.infoData_.updateSnapshot(i,r);const s=eE(n.infoSyncTree_,i,r);Va(n.eventQueue_,i,s)}function vS(n){return n.nextWriteId_++}function tF(n,e,t,i,r){zy(n,"set",{path:e.toString(),value:t,priority:i});const s=lE(n),c=Si(t,i),d=fS(n.serverSyncTree_,e),f=qP(c,d,s),y=vS(n),w=VP(n.serverSyncTree_,e,f,y,!0);yS(n.eventQueue_,w),n.server_.put(e.toString(),c.val(!0),(x,O)=>{const F="ok"===x;F||Bs("set at "+e+" failed: "+x);const G=$f(n.serverSyncTree_,y,!F);Va(n.eventQueue_,e,G),Wf(0,r,x,O)});const T=rF(n,e);qy(n,T),Va(n.eventQueue_,T,[])}function ree(n,e,t){n.server_.onDisconnectCancel(e.toString(),(i,r)=>{"ok"===i&&DP(n.onDisconnect_,e),Wf(0,t,i,r)})}function m6(n,e,t,i){const r=Si(t);n.server_.onDisconnectPut(e.toString(),r.val(!0),(s,c)=>{"ok"===s&&Hy(n.onDisconnect_,e,r),Wf(0,i,s,c)})}function nF(n,e,t){let i;i=".info"===rn(e._path)?hS(n.infoSyncTree_,e,t):hS(n.serverSyncTree_,e,t),u6(n.eventQueue_,e._path,i)}function _6(n){n.persistentConnection_&&n.persistentConnection_.interrupt(h6)}function zy(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),qr(t,...e)}function Wf(n,e,t,i){e&&Fy(()=>{if("ok"===t)e(null);else{const r=(t||"error").toUpperCase();let s=r;i&&(s+=": "+i);const c=new Error(s);c.code=r,e(c)}})}function iF(n,e,t){return fS(n.serverSyncTree_,e,t)||Zt.EMPTY_NODE}function bS(n,e=n.transactionQueueTree_){if(e||wS(n,e),qg(e)){const t=v6(n,e);(0,L.hu)(t.length>0,"Sending zero length transaction queue"),t.every(r=>0===r.status)&&function uee(n,e,t){const i=t.map(y=>y.currentWriteId),r=iF(n,e,i);let s=r;const c=r.hash();for(let y=0;y<t.length;y++){const w=t[y];(0,L.hu)(0===w.status,"tryToSendTransactionQueue_: items in queue should all be run."),w.status=1,w.retryCount++;const T=po(e,w.path);s=s.updateChild(T,w.currentOutputSnapshotRaw)}const d=s.val(!0),f=e;n.server_.put(f.toString(),d,y=>{zy(n,"transaction put response",{path:f.toString(),status:y});let w=[];if("ok"===y){const T=[];for(let x=0;x<t.length;x++)t[x].status=2,w=w.concat($f(n.serverSyncTree_,t[x].currentWriteId)),t[x].onComplete&&T.push(()=>t[x].onComplete(null,!0,t[x].currentOutputSnapshotResolved)),t[x].unwatcher();wS(n,gS(n.transactionQueueTree_,e)),bS(n,n.transactionQueueTree_),Va(n.eventQueue_,e,w);for(let x=0;x<T.length;x++)Fy(T[x])}else{if("datastale"===y)for(let T=0;T<t.length;T++)t[T].status=3===t[T].status?4:0;else{Bs("transaction at "+f.toString()+" failed: "+y);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=y}qy(n,e)}},c)}(n,iE(e),t)}else s6(e)&&mS(e,t=>{bS(n,t)})}function qy(n,e){const t=y6(n,e),i=iE(t);return function dee(n,e,t){if(0===e.length)return;const i=[];let r=[];const c=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],y=po(t,f.path);let T,w=!1;if((0,L.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===f.status)w=!0,T=f.abortReason,r=r.concat($f(n.serverSyncTree_,f.currentWriteId,!0));else if(0===f.status)if(f.retryCount>=25)w=!0,T="maxretry",r=r.concat($f(n.serverSyncTree_,f.currentWriteId,!0));else{const x=iF(n,f.path,c);f.currentInputSnapshot=x;const O=e[d].update(x.val());if(void 0!==O){sE("transaction failed: Data returned ",O,f.path);let F=Si(O);"object"==typeof O&&null!=O&&(0,L.r3)(O,".priority")||(F=F.updatePriority(x.getPriority()));const Q=f.currentWriteId,pe=lE(n),Se=qP(F,x,pe);f.currentOutputSnapshotRaw=F,f.currentOutputSnapshotResolved=Se,f.currentWriteId=vS(n),c.splice(c.indexOf(Q),1),r=r.concat(VP(n.serverSyncTree_,f.path,Se,f.currentWriteId,f.applyLocally)),r=r.concat($f(n.serverSyncTree_,Q,!0))}else w=!0,T="nodata",r=r.concat($f(n.serverSyncTree_,f.currentWriteId,!0))}Va(n.eventQueue_,t,r),r=[],w&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&i.push("nodata"===T?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(T),!1,null)))}wS(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Fy(i[d]);bS(n,n.transactionQueueTree_)}(n,v6(n,t),i),i}function y6(n,e){let t,i=n.transactionQueueTree_;for(t=rn(e);null!==t&&void 0===qg(i);)i=gS(i,t),t=rn(e=Yn(e));return i}function v6(n,e){const t=[];return b6(n,e,t),t.sort((i,r)=>i.order-r.order),t}function b6(n,e,t){const i=qg(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);mS(e,r=>{b6(n,r,t)})}function wS(n,e){const t=qg(e);if(t){let i=0;for(let r=0;r<t.length;r++)2!==t[r].status&&(t[i]=t[r],i++);t.length=i,YP(e,t.length>0?t:void 0)}mS(e,i=>{wS(n,i)})}function rF(n,e){const t=iE(y6(n,e)),i=gS(n.transactionQueueTree_,e);return function HX(n,e,t){let i=t?n:n.parent;for(;null!==i;){if(e(i))return!0;i=i.parent}}(i,r=>{sF(n,r)}),sF(n,i),o6(i,r=>{sF(n,r)}),t}function sF(n,e){const t=qg(e);if(t){const i=[];let r=[],s=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,L.hu)(s===c-1,"All SENT items should be at beginning of queue."),s=c,t[c].status=3,t[c].abortReason="set"):((0,L.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),r=r.concat($f(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&i.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===s?YP(e,void 0):t.length=s+1,Va(n.eventQueue_,iE(e),r);for(let c=0;c<i.length;c++)Fy(i[c])}}const oF=function(n,e){const t=pee(n),i=t.namespace;return"firebase.com"===t.domain&&Tu(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||"undefined"===i)&&"localhost"!==t.domain&&Tu("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Bs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new aP(t.host,t.secure,i,"ws"===t.scheme||"wss"===t.scheme,e,"",i!==t.subdomain),path:new Pn(t.pathString)}},pee=function(n){let e="",t="",i="",r="",s="",c=!0,d="https",f=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(d=n.substring(0,y-1),n=n.substring(y+2));let w=n.indexOf("/");-1===w&&(w=n.length);let T=n.indexOf("?");-1===T&&(T=n.length),e=n.substring(0,Math.min(w,T)),w<T&&(r=function hee(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch(s){}e+="/"+r}return e}(n.substring(w,T)));const x=function fee(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const i=t.split("=");2===i.length?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Bs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,T)));y=e.indexOf(":"),y>=0?(c="https"===d||"wss"===d,f=parseInt(e.substring(y+1),10)):y=e.length;const O=e.slice(0,y);if("localhost"===O.toLowerCase())t="localhost";else if(O.split(".").length<=2)t=O;else{const F=e.indexOf(".");i=e.substring(0,F).toLowerCase(),t=e.substring(F+1),s=i}"ns"in x&&(s=x.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:c,scheme:d,pathString:r,namespace:s}};class w6{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,L.Wl)(this.snapshot.exportVal())}}class E6{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class aF{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,L.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class C6{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new L.BH;return ree(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Il("OnDisconnect.remove",this._path);const e=new L.BH;return m6(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Il("OnDisconnect.set",this._path),Su("OnDisconnect.set",e,this._path,!1);const t=new L.BH;return m6(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Il("OnDisconnect.setWithPriority",this._path),Su("OnDisconnect.setWithPriority",e,this._path,!1),XP("OnDisconnect.setWithPriority",t,!1);const i=new L.BH;return function see(n,e,t,i,r){const s=Si(t,i);n.server_.onDisconnectPut(e.toString(),s.val(!0),(c,d)=>{"ok"===c&&Hy(n.onDisconnect_,e,s),Wf(0,r,c,d)})}(this._repo,this._path,e,t,i.wrapCallback(()=>{})),i.promise}update(e){Il("OnDisconnect.update",this._path),l6("OnDisconnect.update",e,this._path,!1);const t=new L.BH;return function oee(n,e,t,i){if((0,L.xb)(t))return qr("onDisconnect().update() called with empty data.  Don't do anything."),void Wf(0,i,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(r,s)=>{"ok"===r&&Zr(t,(c,d)=>{const f=Si(d);Hy(n.onDisconnect_,wi(e,c),f)}),Wf(0,i,r,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class zo{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return sn(this._path)?null:fP(this._path)}get ref(){return new Sl(this._repo,this._path)}get _queryIdentifier(){const e=A$(this._queryParams),t=rP(e);return"{}"===t?"default":t}get _queryObject(){return A$(this._queryParams)}isEqual(e){if(!((e=(0,L.m9)(e))instanceof zo))return!1;const t=this._repo===e._repo,i=pP(this._path,e._path);return t&&i&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function sJ(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function ES(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zf(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Iu){const i="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fd)throw new Error(i);if("string"!=typeof e)throw new Error(r)}if(n.hasEnd()){if(n.getIndexEndName()!==Du)throw new Error(i);if("string"!=typeof t)throw new Error(r)}}else if(n.getIndex()===ri){if(null!=e&&!rE(e)||null!=t&&!rE(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,L.hu)(n.getIndex()instanceof vP||n.getIndex()===bP,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function CS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Sl extends zo{constructor(e,t){super(e,t,new JI,!1)}get parent(){const e=h$(this._path);return null===e?null:new Sl(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Zg{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),i=Kg(this.ref,e);return new Zg(this._node.getChild(t),i,ri)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(i,r)=>e(new Zg(r,Kg(this.ref,i),ri)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function T6(n,e){return(n=(0,L.m9)(n))._checkNotDeleted("ref"),void 0!==e?Kg(n._root,e):n._root}function D6(n,e){(n=(0,L.m9)(n))._checkNotDeleted("refFromURL");const t=oF(e,n._repo.repoInfo_.nodeAdmin);c6("refFromURL",t);const i=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&i.host!==n._repo.repoInfo_.host&&Tu("refFromURL: Host name does not match the current database: (found "+i.host+" but expected "+n._repo.repoInfo_.host+")"),T6(n,t.path.toString())}function Kg(n,e){return null===rn((n=(0,L.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),aE("child","path",t,!1)):aE("child","path",e,!1),new Sl(n._repo,wi(n._path,e));var t}function lF(n,e){n=(0,L.m9)(n),Il("set",n._path),Su("set",e,n._path,!1);const t=new L.BH;return tF(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function vee(n,e){l6("update",e,n._path,!1);const t=new L.BH;return function nee(n,e,t,i){zy(n,"update",{path:e.toString(),value:t});let r=!0;const s=lE(n),c={};if(Zr(t,(d,f)=>{r=!1,c[d]=r6(wi(e,d),Si(f),n.serverSyncTree_,s)}),r)qr("update() called with empty data.  Don't do anything."),Wf(0,i,"ok",void 0);else{const d=vS(n),f=function AX(n,e,t,i){!function WJ(n,e,t,i){(0,L.hu)(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=NP(n.visibleWrites,e,t),n.lastWriteId=i}(n.pendingWriteTree_,e,t,i);const r=si.fromObject(t);return Wy(n,new Gy({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,e,c,d);yS(n.eventQueue_,f),n.server_.merge(e.toString(),t,(y,w)=>{const T="ok"===y;T||Bs("update at "+e+" failed: "+y);const x=$f(n.serverSyncTree_,d,!T),O=x.length>0?qy(n,e):e;Va(n.eventQueue_,O,x),Wf(0,i,y,w)}),Zr(t,y=>{const w=rF(n,wi(e,y));qy(n,w)}),Va(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function bee(n){n=(0,L.m9)(n);const e=new aF(()=>{}),t=new cE(e);return function tee(n,e,t){const i=function kX(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(y,w)=>{const T=po(y,t);i=i||Hf(w,T)});let r=n.syncPointTree_.get(t);r?i=i||Hf(r,Nn()):(r=new q$,n.syncPointTree_=n.syncPointTree_.set(t,r));const s=null!=i,c=s?new Vf(i,!0,!1):null;return function mX(n){return rS(n.viewCache_)}(Z$(r,e,sS(n.pendingWriteTree_,e._path),s?c.getNode():Zt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=i?Promise.resolve(i):n.server_.get(e).then(r=>{const s=Si(r).withIndex(e._queryParams.getIndex());let c;if(jP(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=eE(n.serverSyncTree_,e._path,s);else{const d=tE(n.serverSyncTree_,e);c=X$(n.serverSyncTree_,e._path,s,d)}return Va(n.eventQueue_,e._path,c),hS(n.serverSyncTree_,e,t,null,!0),s},r=>(zy(n,"get for query "+(0,L.Wl)(e)+" failed: "+r),Promise.reject(new Error(r))))}(n._repo,n,t).then(i=>new Zg(i,new Sl(n._repo,n._path),n._queryParams.getIndex()))}class cE{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const i=t._queryParams.getIndex();return new w6("value",this,new Zg(e.snapshotNode,new Sl(t._repo,t._path),i))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E6(this,e,t):null}matches(e){return e instanceof cE&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class TS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new E6(this,e,t):null}createEvent(e,t){(0,L.hu)(null!=e.childName,"Child events should have a childName.");const i=Kg(new Sl(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new w6(e.type,this,new Zg(e.snapshotNode,i,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof TS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function uE(n,e,t,i,r){let s;if("object"==typeof i&&(s=void 0,r=i),"function"==typeof i&&(s=i),r&&r.onlyOnce){const f=t,y=(w,T)=>{nF(n._repo,n,d),f(w,T)};y.userCallback=t.userCallback,y.context=t.context,t=y}const c=new aF(t,s||void 0),d="value"===e?new cE(c):new TS(e,c);return function aee(n,e,t){let i;i=".info"===rn(e._path)?jP(n.infoSyncTree_,e,t):jP(n.serverSyncTree_,e,t),u6(n.eventQueue_,e._path,i)}(n._repo,n,d),()=>nF(n._repo,n,d)}function cF(n,e,t,i){return uE(n,"value",e,t,i)}function I6(n,e,t,i){return uE(n,"child_added",e,t,i)}function S6(n,e,t,i){return uE(n,"child_changed",e,t,i)}function A6(n,e,t,i){return uE(n,"child_moved",e,t,i)}function x6(n,e,t,i){return uE(n,"child_removed",e,t,i)}function M6(n,e,t){let i=null;const r=t?new aF(t):null;"value"===e?i=new cE(r):e&&(i=new TS(e,r)),nF(n._repo,n,i)}class ac{}class N6 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Su("endAt",this._value,e._path,!0);const t=TP(e._queryParams,this._value,this._key);if(CS(t),zf(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class Eee extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Su("endBefore",this._value,e._path,!1);const t=function OJ(n,e,t){let i,r;return n.index_===Iu?("string"==typeof e&&(e=D$(e)),r=TP(n,e,t)):(i=null==t?Fd:D$(t),r=TP(n,e,i)),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(CS(t),zf(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class O6 extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Su("startAt",this._value,e._path,!0);const t=CP(e._queryParams,this._value,this._key);if(CS(t),zf(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class Dee extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Su("startAfter",this._value,e._path,!1);const t=function NJ(n,e,t){let i;if(n.index_===Iu)"string"==typeof e&&(e=T$(e)),i=CP(n,e,t);else{let r;r=null==t?Du:T$(t),i=CP(n,e,r)}return i.startAfterSet_=!0,i}(e._queryParams,this._value,this._key);if(CS(t),zf(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new zo(e._repo,e._path,t,e._orderByCalled)}}class See extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function xJ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class xee extends ac{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new zo(e._repo,e._path,function MJ(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class Nee extends ac{constructor(e){super(),this._path=e}_apply(e){ES(e,"orderByChild");const t=new Pn(this._path);if(sn(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const i=new vP(t),r=XI(e._queryParams,i);return zf(r),new zo(e._repo,e._path,r,!0)}}class kee extends ac{_apply(e){ES(e,"orderByKey");const t=XI(e._queryParams,Iu);return zf(t),new zo(e._repo,e._path,t,!0)}}class Pee extends ac{_apply(e){ES(e,"orderByPriority");const t=XI(e._queryParams,ri);return zf(t),new zo(e._repo,e._path,t,!0)}}class Lee extends ac{_apply(e){ES(e,"orderByValue");const t=XI(e._queryParams,bP);return zf(t),new zo(e._repo,e._path,t,!0)}}class Uee extends ac{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Su("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new N6(this._value,this._key)._apply(new O6(this._value,this._key)._apply(e))}}function lc(n,...e){let t=(0,L.m9)(n);for(const i of e)t=i._apply(t);return t}(function bX(n){(0,L.hu)(!cS,"__referenceConstructor has already been defined"),cS=n})(Sl),function DX(n){(0,L.hu)(!dS,"__referenceConstructor has already been defined"),dS=n}(Sl);const uF={};function R6(n,e,t,i,r){let s=i||n.options.databaseURL;void 0===s&&(n.options.projectId||Tu("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),qr("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let f,y,c=oF(s,r),d=c.repoInfo;"undefined"!=typeof process&&process.env&&(y=process.env.FIREBASE_DATABASE_EMULATOR_HOST),y?(f=!0,s=`http://${y}?ns=${d.namespace}`,c=oF(s,r),d=c.repoInfo):f=!c.repoInfo.secure;const w=r&&f?new Hw(Hw.OWNER):new RQ(n.name,n.options,e);c6("Invalid Firebase Database URL",c),sn(c.path)||Tu("Database URL must point to the root of a Firebase Database (not including a child path).");const T=function $ee(n,e,t,i){let r=uF[e.name];r||(r={},uF[e.name]=r);let s=r[n.toURLString()];return s&&Tu("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new JX(n,false,t,i),r[n.toURLString()]=s,s}(d,n,w,new kQ(n.name,t));return new zee(T,n)}class zee{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function XX(n,e,t){if(n.stats_=uP(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new eS(n.repoInfo_,(i,r,s,c)=>{p6(n,i,r,s,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>g6(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,L.Wl)(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new Gg(n.repoInfo_,e,(i,r,s,c)=>{p6(n,i,r,s,c)},i=>{g6(n,i)},i=>{!function eee(n,e){Zr(e,(t,i)=>{eF(n,t,i)})}(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=function LQ(n,e){const t=n.toString();return cP[t]||(cP[t]=e()),cP[t]}(n.repoInfo_,()=>new BJ(n.stats_,n.server_)),n.infoData_=new kJ,n.infoSyncTree_=new J$({startListening:(i,r,s,c)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=eE(n.infoSyncTree_,i._path,f),setTimeout(()=>{c("ok")},0)),d},stopListening:()=>{}}),eF(n,"connected",!1),n.serverSyncTree_=new J$({startListening:(i,r,s,c)=>(n.server_.listen(i,s,r,(d,f)=>{const y=c(d,f);Va(n.eventQueue_,i._path,y)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Sl(this._repo,Nn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Gee(n,e){const t=uF[e];(!t||t[n.key]!==n)&&Tu(`Database ${e}(${n.repoInfo_}) has already been deleted.`),_6(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Tu("Cannot call "+e+" on a deleted database.")}}function P6(){e$.IS_TRANSPORT_INITIALIZED&&Bs("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function qee(){P6(),Bf.forceDisallow()}function Zee(){P6(),Ly.forceDisallow(),Bf.forceAllow()}function Qee(n,e){RG(n,e)}const Xee={".sv":"timestamp"};class nte{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Gg.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Gg.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function Jee(n){xG(ro.SDK_VERSION),(0,ro._registerComponent)(new tc.wA("database",(e,{instanceIdentifier:t})=>R6(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,ro.registerVersion)(SG,AG,n),(0,ro.registerVersion)(SG,AG,"esm2017")}();const ote=new nc.Yd("@firebase/database-compat"),L6=function(n){ote.warn("FIREBASE WARNING: "+n)};class cte{constructor(e){this._delegate=e}cancel(e){(0,L.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,L.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),i=>e(i)),t}remove(e){(0,L.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,L.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),i=>e(i)),t}set(e,t){(0,L.Dv)("OnDisconnect.set",1,2,arguments.length),(0,L.Wj)("OnDisconnect.set","onComplete",t,!0);const i=this._delegate.set(e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,L.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,L.Wj)("OnDisconnect.setWithPriority","onComplete",i,!0);const r=this._delegate.setWithPriority(e,t);return i&&r.then(()=>i(null),s=>i(s)),r}update(e,t){if((0,L.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,L6("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,L.Wj)("OnDisconnect.update","onComplete",t,!0);const i=this._delegate.update(e);return t&&i.then(()=>t(null),r=>t(r)),i}}class ute{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,L.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class qf{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,L.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,L.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,L.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,L.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,L.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),aE("DataSnapshot.child","path",e,!1),new qf(this._database,this._delegate.child(e))}hasChild(e){return(0,L.Dv)("DataSnapshot.hasChild",1,1,arguments.length),aE("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,L.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,L.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,L.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new qf(this._database,t)))}hasChildren(){return(0,L.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,L.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,L.Dv)("DataSnapshot.ref",0,0,arguments.length),new ja(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ds{constructor(e,t){this.database=e,this._delegate=t}on(e,t,i,r){var s;(0,L.Dv)("Query.on",2,4,arguments.length),(0,L.Wj)("Query.on","callback",t,!1);const c=ds.getCancelAndContextArgs_("Query.on",i,r),d=(y,w)=>{t.call(c.context,new qf(this.database,y),w)};d.userCallback=t,d.context=c.context;const f=null===(s=c.cancel)||void 0===s?void 0:s.bind(c.context);switch(e){case"value":return cF(this._delegate,d,f),t;case"child_added":return I6(this._delegate,d,f),t;case"child_removed":return x6(this._delegate,d,f),t;case"child_changed":return S6(this._delegate,d,f),t;case"child_moved":return A6(this._delegate,d,f),t;default:throw new Error((0,L.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,i){if((0,L.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,L.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,L.Wj)("Query.off","callback",t,!0),(0,L.lb)("Query.off","context",i,!0),t){const r=()=>{};r.userCallback=t,r.context=i,M6(this._delegate,e,r)}else M6(this._delegate,e)}get(){return bee(this._delegate).then(e=>new qf(this.database,e))}once(e,t,i,r){(0,L.Dv)("Query.once",1,4,arguments.length),(0,L.Wj)("Query.once","callback",t,!0);const s=ds.getCancelAndContextArgs_("Query.once",i,r),c=new L.BH,d=(y,w)=>{const T=new qf(this.database,y);t&&t.call(s.context,T,w),c.resolve(T)};d.userCallback=t,d.context=s.context;const f=y=>{s.cancel&&s.cancel.call(s.context,y),c.reject(y)};switch(e){case"value":cF(this._delegate,d,f,{onlyOnce:!0});break;case"child_added":I6(this._delegate,d,f,{onlyOnce:!0});break;case"child_removed":x6(this._delegate,d,f,{onlyOnce:!0});break;case"child_changed":S6(this._delegate,d,f,{onlyOnce:!0});break;case"child_moved":A6(this._delegate,d,f,{onlyOnce:!0});break;default:throw new Error((0,L.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,L.Dv)("Query.limitToFirst",1,1,arguments.length),new ds(this.database,lc(this._delegate,function Aee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new See(n)}(e)))}limitToLast(e){return(0,L.Dv)("Query.limitToLast",1,1,arguments.length),new ds(this.database,lc(this._delegate,function Mee(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new xee(n)}(e)))}orderByChild(e){return(0,L.Dv)("Query.orderByChild",1,1,arguments.length),new ds(this.database,lc(this._delegate,function Oee(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return aE("orderByChild","path",n,!1),new Nee(n)}(e)))}orderByKey(){return(0,L.Dv)("Query.orderByKey",0,0,arguments.length),new ds(this.database,lc(this._delegate,function Ree(){return new kee}()))}orderByPriority(){return(0,L.Dv)("Query.orderByPriority",0,0,arguments.length),new ds(this.database,lc(this._delegate,function Fee(){return new Pee}()))}orderByValue(){return(0,L.Dv)("Query.orderByValue",0,0,arguments.length),new ds(this.database,lc(this._delegate,function Bee(){return new Lee}()))}startAt(e=null,t){return(0,L.Dv)("Query.startAt",0,2,arguments.length),new ds(this.database,lc(this._delegate,function Tee(n=null,e){return oE("startAt","key",e,!0),new O6(n,e)}(e,t)))}startAfter(e=null,t){return(0,L.Dv)("Query.startAfter",0,2,arguments.length),new ds(this.database,lc(this._delegate,function Iee(n,e){return oE("startAfter","key",e,!0),new Dee(n,e)}(e,t)))}endAt(e=null,t){return(0,L.Dv)("Query.endAt",0,2,arguments.length),new ds(this.database,lc(this._delegate,function wee(n,e){return oE("endAt","key",e,!0),new N6(n,e)}(e,t)))}endBefore(e=null,t){return(0,L.Dv)("Query.endBefore",0,2,arguments.length),new ds(this.database,lc(this._delegate,function Cee(n,e){return oE("endBefore","key",e,!0),new Eee(n,e)}(e,t)))}equalTo(e,t){return(0,L.Dv)("Query.equalTo",1,2,arguments.length),new ds(this.database,lc(this._delegate,function Vee(n,e){return oE("equalTo","key",e,!0),new Uee(n,e)}(e,t)))}toString(){return(0,L.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,L.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,L.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ds))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,i){const r={cancel:void 0,context:void 0};if(t&&i)r.cancel=t,(0,L.Wj)(e,"cancel",r.cancel,!0),r.context=i,(0,L.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,L.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new ja(this.database,new Sl(this._delegate._repo,this._delegate._path))}}class ja extends ds{constructor(e,t){super(e,new zo(t._repo,t._path,new JI,!1)),this.database=e,this._delegate=t}getKey(){return(0,L.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,L.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new ja(this.database,Kg(this._delegate,e))}getParent(){(0,L.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new ja(this.database,e):null}getRoot(){return(0,L.Dv)("Reference.root",0,0,arguments.length),new ja(this.database,this._delegate.root)}set(e,t){(0,L.Dv)("Reference.set",1,2,arguments.length),(0,L.Wj)("Reference.set","onComplete",t,!0);const i=lF(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}update(e,t){if((0,L.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const r={};for(let s=0;s<e.length;++s)r[""+s]=e[s];e=r,L6("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Il("Reference.update",this._delegate._path),(0,L.Wj)("Reference.update","onComplete",t,!0);const i=vee(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}setWithPriority(e,t,i){(0,L.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,L.Wj)("Reference.setWithPriority","onComplete",i,!0);const r=function yee(n,e,t){if(Il("setWithPriority",n._path),Su("setWithPriority",e,n._path,!1),XP("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const i=new L.BH;return tF(n._repo,n._path,e,t,i.wrapCallback(()=>{})),i.promise}(this._delegate,e,t);return i&&r.then(()=>i(null),s=>i(s)),r}remove(e){(0,L.Dv)("Reference.remove",0,1,arguments.length),(0,L.Wj)("Reference.remove","onComplete",e,!0);const t=function mee(n){return Il("remove",n._path),lF(n,null)}(this._delegate);return e&&t.then(()=>e(null),i=>e(i)),t}transaction(e,t,i){(0,L.Dv)("Reference.transaction",1,3,arguments.length),(0,L.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,L.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,i){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,L.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,i);const r=function ite(n,e,t){var i;if(n=(0,L.m9)(n),Il("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const r=null===(i=null==t?void 0:t.applyLocally)||void 0===i||i,s=new L.BH,d=cF(n,()=>{});return function cee(n,e,t,i,r,s){zy(n,"transaction on "+e);const c={path:e,update:t,onComplete:i,status:null,order:NG(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=iF(n,e,void 0);c.currentInputSnapshot=d;const f=c.update(d.val());if(void 0===f)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{sE("transaction failed: Data returned ",f,c.path),c.status=0;const y=gS(n.transactionQueueTree_,e),w=qg(y)||[];let T;w.push(c),YP(y,w),"object"==typeof f&&null!==f&&(0,L.r3)(f,".priority")?(T=(0,L.DV)(f,".priority"),(0,L.hu)(rE(T),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):T=(fS(n.serverSyncTree_,e)||Zt.EMPTY_NODE).getPriority().val();const x=lE(n),O=Si(f,T),F=qP(O,d,x);c.currentOutputSnapshotRaw=O,c.currentOutputSnapshotResolved=F,c.currentWriteId=vS(n);const G=VP(n.serverSyncTree_,e,F,c.currentWriteId,c.applyLocally);Va(n.eventQueue_,e,G),bS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(f,y,w)=>{let T=null;f?s.reject(f):(T=new Zg(w,new Sl(n._repo,n._path),ri),s.resolve(new nte(y,T)))},d,r),s.promise}(this._delegate,e,{applyLocally:i}).then(s=>new ute(s.committed,new qf(this.database,s.snapshot)));return t&&r.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),r}setPriority(e,t){(0,L.Dv)("Reference.setPriority",1,2,arguments.length),(0,L.Wj)("Reference.setPriority","onComplete",t,!0);const i=function _ee(n,e){n=(0,L.m9)(n),Il("setPriority",n._path),XP("setPriority",e,!1);const t=new L.BH;return tF(n._repo,wi(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&i.then(()=>t(null),r=>t(r)),i}push(e,t){(0,L.Dv)("Reference.push",0,2,arguments.length),(0,L.Wj)("Reference.push","onComplete",t,!0);const i=function gee(n,e){n=(0,L.m9)(n),Il("push",n._path),Su("push",e,n._path,!0);const t=f6(n._repo),i=DJ(t),r=Kg(n,i),s=Kg(n,i);let c;return c=null!=e?lF(s,e).then(()=>s):Promise.resolve(s),r.then=c.then.bind(c),r.catch=c.then.bind(c,void 0),r}(this._delegate,e),r=i.then(c=>new ja(this.database,c));t&&r.then(()=>t(null),c=>t(c));const s=new ja(this.database,i);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Il("Reference.onDisconnect",this._delegate._path),new cte(new C6(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class dE{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:qee,forceLongPolling:Zee}}useEmulator(e,t,i={}){!function F6(n,e,t,i={}){(n=(0,L.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Tu("Cannot call useEmulator() after instance has already been initialized.");const r=n._repoInternal;let s;if(r.repoInfo_.nodeAdmin)i.mockUserToken&&Tu('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Hw(Hw.OWNER);else if(i.mockUserToken){const c="string"==typeof i.mockUserToken?i.mockUserToken:(0,L.Sg)(i.mockUserToken,n.app.options.projectId);s=new Hw(c)}!function Hee(n,e,t,i){n.repoInfo_=new aP(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),i&&(n.authTokenProvider_=i)}(r,e,t,s)}(this._delegate,e,t,i)}ref(e){if((0,L.Dv)("database.ref",0,1,arguments.length),e instanceof ja){const t=D6(this._delegate,e.toString());return new ja(this,t)}{const t=T6(this._delegate,e);return new ja(this,t)}}refFromURL(e){(0,L.Dv)("database.refFromURL",1,1,arguments.length);const i=D6(this._delegate,e);return new ja(this,i)}goOffline(){return(0,L.Dv)("database.goOffline",0,0,arguments.length),function Kee(n){(n=(0,L.m9)(n))._checkNotDeleted("goOffline"),_6(n._repo)}(this._delegate)}goOnline(){return(0,L.Dv)("database.goOnline",0,0,arguments.length),function Yee(n){(n=(0,L.m9)(n))._checkNotDeleted("goOnline"),function lee(n){n.persistentConnection_&&n.persistentConnection_.resume(h6)}(n._repo)}(this._delegate)}}dE.ServerValue={TIMESTAMP:function ete(){return Xee}(),increment:n=>function tte(n){return{".sv":{increment:n}}}(n)};var hte=Object.freeze({__proto__:null,initStandalone:function dte({app:n,url:e,version:t,customAuthImpl:i,namespace:r,nodeAdmin:s=!1}){xG(t);const c=new tc.zt("auth-internal",new tc.H0("database-standalone"));return c.setComponent(new tc.wA("auth-internal",()=>i,"PRIVATE")),{instance:new dE(R6(n,c,void 0,e,s),n),namespace:r}}});const fte=dE.ServerValue;function B6(n){return null==n}function U6(n){return"function"==typeof n.set}function V6(n,e){return U6(e)?e:n.ref(e)}function j6(n,e){if(function gte(n){return"string"==typeof n}(n))return e.stringCase();if(U6(n))return e.firebaseCase();if(function mte(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function hE(n,e,t="on",i=zm.z){return new yn.y(r=>{let s=null;return s=n[t](e,(c,d)=>{i.schedule(()=>{r.next({snapshot:c,prevKey:d})}),"once"===t&&i.schedule(()=>r.complete())},c=>{i.schedule(()=>r.error(c))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,ut.U)(r=>{const{snapshot:s,prevKey:c}=r;let d=null;return s.exists()&&(d=s.key),{type:e,payload:s,prevKey:c,key:d}}),(0,Cp.B)())}function H6(n,e){const t=n.length;for(let i=0;i<t;i++)if(n[i].payload.key===e)return i;return-1}function vte(n,e){const{payload:t,prevKey:i,key:r}=e,s=H6(n,r),c=function yte(n,e){if(B6(e))return 0;{const t=H6(n,e);return-1===t?n.length:t+1}}(n,i);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(f=>{const y={payload:f,type:"value",prevKey:d,key:f.key};return d=f.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const d=n[s-1];(d&&d.key||null)!==i&&(n=n.filter(f=>f.payload.key!==t.key)).splice(c,0,e)}else{if(null==i)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===r?e:d);case"child_moved":if(s>-1){const d=n.splice(s,1)[0];return(n=n.slice()).splice(c,0,d),n}return n;default:return n}}function G6(n){return(B6(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function $6(n,e,t){return function _te(n,e,t){return hE(n,"value","once",t).pipe(Rn(i=>{const r=[ct(i)];return e.forEach(s=>r.push(hE(n,s,"on",t))),(0,Km.T)(...r).pipe(Ir(vte,[]))}),Ep())}(n,e=G6(e),t)}function W6(n,e,t){const i=(e=G6(e)).map(r=>hE(n,r,"on",t));return(0,Km.T)(...i)}function z6(n,e){return function(i,r){return j6(i,{stringCase:()=>n.child(i)[e](r),firebaseCase:()=>i[e](r),snapshotCase:()=>i.ref[e](r)})}}function Cte(n){return function(t){return t?j6(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function q6(n,e){return function(){return hE(n,"value","on",e)}}!function pte(n){n.INTERNAL.registerComponent(new tc.wA("database-compat",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new dE(r,i)},"PUBLIC").setServiceProps({Reference:ja,Query:ds,Database:dE,DataSnapshot:qf,enableLogging:Qee,INTERNAL:hte,ServerValue:fte}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.2.10")}(ZN.Z);const Ite=new l.OlP("angularfire2.realtimeDatabaseURL"),Ste=new l.OlP("angularfire2.database.use-emulator");let Ate=(()=>{class n{constructor(t,i,r,s,c,d,f,y,w,T,x,O,F,G,Q){this.schedulers=d;const pe=f,Se=(0,Sr.on)(t,c,i);y&&qN(Se,c,w,x,O,F,T,G),this.database=(0,Sr.cc)(`${Se.name}.database.${r}`,"AngularFireDatabase",Se.name,()=>{const ke=c.runOutsideAngular(()=>Se.database(r||void 0));return pe&&ke.useEmulator(...pe),ke},[pe])}list(t,i){const r=this.schedulers.ngZone.runOutsideAngular(()=>V6(this.database,t));let s=r;return i&&(s=i(r)),function Tte(n,e){const t=e.schedulers.outsideAngular,i=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:z6(i,"update"),set:z6(i,"set"),push:r=>i.push(r),remove:Cte(i),snapshotChanges:r=>$6(n,r,t).pipe(Mn.iC),stateChanges:r=>W6(n,r,t).pipe(Mn.iC),auditTrail:r=>function bte(n,e,t){return function Ete(n,e,t){return function wte(n,e){return hE(n,"value","on",e).pipe((0,ut.U)(t=>{let i;return t.payload.forEach(r=>(i=r.key,!1)),{data:t,lastKeyToLoad:i}}))}(n,t).pipe(Ym(e),(0,ut.U)(([r,s])=>{const c=r.lastKeyToLoad,d=s.map(f=>f.key);return{actions:s,lastKeyToLoad:c,loadedKeys:d}}),function EQ(n){return(0,$n.e)((e,t)=>{let i=!1,r=0;e.subscribe((0,Un.x)(t,s=>(i||(i=!n(s,r++)))&&t.next(s)))})}(r=>-1===r.loadedKeys.indexOf(r.lastKeyToLoad)),(0,ut.U)(r=>r.actions))}(n,W6(n,e).pipe(Ir((r,s)=>[...r,s],[])),t)}(n,r,t).pipe(Mn.iC),valueChanges:(r,s)=>$6(n,r,t).pipe((0,ut.U)(d=>d.map(f=>s&&s.idField?Object.assign(Object.assign({},f.payload.val()),{[s.idField]:f.key}):f.payload.val())),Mn.iC)}}(s,this)}object(t){return function Dte(n,e){return{query:n,snapshotChanges:()=>q6(n,e.schedulers.outsideAngular)().pipe(Mn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>q6(n,e.schedulers.outsideAngular)().pipe(Mn.iC,(0,ut.U)(i=>i.payload.exists()?i.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>V6(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(l.LFG(Sr.Dh),l.LFG(Sr.xv,8),l.LFG(Ite,8),l.LFG(l.Lbi),l.LFG(l.R0b),l.LFG(Mn.HU),l.LFG(Ste,8),l.LFG(yD,8),l.LFG(jN,8),l.LFG(HN,8),l.LFG(GN,8),l.LFG($N,8),l.LFG(WN,8),l.LFG(zN,8),l.LFG(xb,8))},n.\u0275prov=l.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),xte=(()=>{class n{constructor(){_D.Z.registerVersion("angularfire",Mn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n}),n.\u0275inj=l.cJS({providers:[Ate]}),n})(),Mte=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=l.oAB({type:n,bootstrap:[O5]}),n.\u0275inj=l.cJS({providers:[to],imports:[[Ja,N5,q_,RS,P8,gA,wN,mW,pA,Sr.hO.initializeApp(ad_firebase),fz,wQ,nZ,xte,Dt.forRoot({})]]}),n})();(0,l.G48)(),Ec().bootstrapModule(Mte).catch(n=>console.error(n))},5867:(lt,Te,B)=>{B.d(Te,{C6:()=>l.getApps,Mq:()=>l.getApp});var l=B(9681);(0,l.registerVersion)("firebase","9.13.0","app")},127:(lt,Te,B)=>{B.d(Te,{Z:()=>l.Z});var l=B(3942);l.Z.registerVersion("firebase","9.13.0","app-compat")},1277:(lt,Te,B)=>{B.r(Te);var l=B(5861),ne=B(3942),U=B(2090),de=B(9681),le=B(1877),ve=B(655),ce=B(4859);const Ve=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ze=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},ye=new U.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Je=new le.Yd("@firebase/auth");function st(v,...g){Je.logLevel<=le.in.ERROR&&Je.error(`Auth (${de.SDK_VERSION}): ${v}`,...g)}function Le(v,...g){throw Ke(v,...g)}function we(v,...g){return Ke(v,...g)}function Me(v,g,m){const E=Object.assign(Object.assign({},Ze()),{[g]:m});return new U.LL("auth","Firebase",E).create(g,{appName:v.name})}function qe(v,g,m){if(!(g instanceof m))throw m.name!==g.constructor.name&&Le(v,"argument-error"),Me(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ke(v,...g){if("string"!=typeof v){const m=g[0],E=[...g.slice(1)];return E[0]&&(E[0].appName=v.name),v._errorFactory.create(m,...E)}return ye.create(v,...g)}function K(v,g,...m){if(!v)throw Ke(g,...m)}function De(v){const g="INTERNAL ASSERTION FAILED: "+v;throw st(g),new Error(g)}function J(v,g){v||De(g)}const se=new Map;function ie(v){J(v instanceof Function,"Expected a class definition");let g=se.get(v);return g?(J(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,se.set(v,g),g)}function je(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function bt(){return"http:"===ln()||"https:"===ln()}function ln(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class pn{constructor(g,m){this.shortDelay=g,this.longDelay=m,J(m>g,"Short delay should be less than long delay!"),this.isMobile=(0,U.uI)()||(0,U.b$)()}get(){return function $t(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(bt()||(0,U.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function On(v,g){J(v.emulator,"Emulator should always be set here");const{url:m}=v.emulator;return g?`${m}${g.startsWith("/")?g.slice(1):g}`:m}class mn{static initialize(g,m,E){this.fetchImpl=g,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void De("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void De("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void De("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},nr=new pn(3e4,6e4);function Xt(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function Kt(v,g,m,E){return br.apply(this,arguments)}function br(){return(br=(0,l.Z)(function*(v,g,m,E,M={}){return fs(v,M,(0,l.Z)(function*(){let P={},Y={};E&&("GET"===g?Y=E:P={body:JSON.stringify(E)});const ge=(0,U.xO)(Object.assign({key:v.config.apiKey},Y)).slice(1),Ge=yield v._getAdditionalHeaders();return Ge["Content-Type"]="application/json",v.languageCode&&(Ge["X-Firebase-Locale"]=v.languageCode),mn.fetch()(Us(v,v.config.apiHost,m,ge),Object.assign({method:g,headers:Ge,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function fs(v,g,m){return ir.apply(this,arguments)}function ir(){return(ir=(0,l.Z)(function*(v,g,m){v._canInitEmulator=!1;const E=Object.assign(Object.assign({},cn),g);try{const M=new wr(v),P=yield Promise.race([m(),M.promise]);M.clearNetworkTimeout();const Y=yield P.json();if("needConfirmation"in Y)throw Kr(v,"account-exists-with-different-credential",Y);if(P.ok&&!("errorMessage"in Y))return Y;{const ge=P.ok?Y.errorMessage:Y.error.message,[Ge,rt]=ge.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Ge)throw Kr(v,"credential-already-in-use",Y);if("EMAIL_EXISTS"===Ge)throw Kr(v,"email-already-in-use",Y);if("USER_DISABLED"===Ge)throw Kr(v,"user-disabled",Y);const Tt=E[Ge]||Ge.toLowerCase().replace(/[_\s]+/g,"-");if(rt)throw Me(v,Tt,rt);Le(v,Tt)}}catch(M){if(M instanceof U.ZR)throw M;Le(v,"network-request-failed")}})).apply(this,arguments)}function rr(v,g,m,E){return ps.apply(this,arguments)}function ps(){return(ps=(0,l.Z)(function*(v,g,m,E,M={}){const P=yield Kt(v,g,m,E,M);return"mfaPendingCredential"in P&&Le(v,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Us(v,g,m,E){const M=`${g}${m}?${E}`;return v.config.emulator?On(v.config,M):`${v.config.apiScheme}://${M}`}class wr{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(we(this.auth,"network-request-failed")),nr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Kr(v,g,m){const E={appName:v.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const M=we(v,g,E);return M.customData._tokenResponse=m,M}function sr(){return(sr=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Hn(v,g){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function mo(v,g){return gs.apply(this,arguments)}function gs(){return(gs=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function hi(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Zo(){return(Zo=(0,l.Z)(function*(v,g=!1){const m=(0,U.m9)(v),E=yield m.getIdToken(g),M=_t(E);K(M&&M.exp&&M.auth_time&&M.iat,m.auth,"internal-error");const P="object"==typeof M.firebase?M.firebase:void 0,Y=null==P?void 0:P.sign_in_provider;return{claims:M,token:E,authTime:hi(on(M.auth_time)),issuedAtTime:hi(on(M.iat)),expirationTime:hi(on(M.exp)),signInProvider:Y||null,signInSecondFactor:(null==P?void 0:P.sign_in_second_factor)||null}})).apply(this,arguments)}function on(v){return 1e3*Number(v)}function _t(v){var g;const[m,E,M]=v.split(".");if(void 0===m||void 0===E||void 0===M)return st("JWT malformed, contained fewer than 3 sections"),null;try{const P=(0,U.tV)(E);return P?JSON.parse(P):(st("Failed to decode base64 JWT payload"),null)}catch(P){return st("Caught error parsing JWT payload as JSON",null===(g=P)||void 0===g?void 0:g.toString()),null}}function Gi(v,g){return $i.apply(this,arguments)}function $i(){return($i=(0,l.Z)(function*(v,g,m=!1){if(m)return g;try{return yield g}catch(E){throw E instanceof U.ZR&&en(E)&&v.auth.currentUser===v&&(yield v.auth.signOut()),E}})).apply(this,arguments)}function en({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class _o{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var m;if(g){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const M=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,M)}}schedule(g=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(g);this.timerId=setTimeout((0,l.Z)(function*(){yield m.iteration()}),E)}iteration(){var g=this;return(0,l.Z)(function*(){var m;try{yield g.user.getIdToken(!0)}catch(E){return void("auth/network-request-failed"===(null===(m=E)||void 0===m?void 0:m.code)&&g.schedule(!0))}g.schedule()})()}}class Wi{constructor(g,m){this.createdAt=g,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=hi(this.lastLoginAt),this.creationTime=hi(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function zi(v){return wt.apply(this,arguments)}function wt(){return(wt=(0,l.Z)(function*(v){var g;const m=v.auth,E=yield v.getIdToken(),M=yield Gi(v,mo(m,{idToken:E}));K(null==M?void 0:M.users.length,m,"internal-error");const P=M.users[0];v._notifyReloadListener(P);const Y=(null===(g=P.providerUserInfo)||void 0===g?void 0:g.length)?at(P.providerUserInfo):[],ge=Vs(v.providerData,Y),Tt=!!v.isAnonymous&&!(v.email&&P.passwordHash||(null==ge?void 0:ge.length)),Et={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:ge,metadata:new Wi(P.createdAt,P.lastLoginAt),isAnonymous:Tt};Object.assign(v,Et)})).apply(this,arguments)}function Wt(){return(Wt=(0,l.Z)(function*(v){const g=(0,U.m9)(v);yield zi(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function Vs(v,g){return[...v.filter(E=>!g.some(M=>M.providerId===E.providerId)),...g]}function at(v){return v.map(g=>{var{providerId:m}=g,E=(0,ve._T)(g,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function et(){return(et=(0,l.Z)(function*(v,g){const m=yield fs(v,{},(0,l.Z)(function*(){const E=(0,U.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:M,apiKey:P}=v.config,Y=Us(v,M,"/v1/token",`key=${P}`),ge=yield v._getAdditionalHeaders();return ge["Content-Type"]="application/x-www-form-urlencoded",mn.fetch()(Y,{method:"POST",headers:ge,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Rt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){K(g.idToken,"internal-error"),K(void 0!==g.idToken,"internal-error"),K(void 0!==g.refreshToken,"internal-error");const m="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function St(v){const g=_t(v);return K(g,"internal-error"),K(void 0!==g.exp,"internal-error"),K(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,m)}getToken(g,m=!1){var E=this;return(0,l.Z)(function*(){return K(!E.accessToken||E.refreshToken,g,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(g,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,m){var E=this;return(0,l.Z)(function*(){const{accessToken:M,refreshToken:P,expiresIn:Y}=yield function Ne(v,g){return et.apply(this,arguments)}(g,m);E.updateTokensAndExpiration(M,P,Number(Y))})()}updateTokensAndExpiration(g,m,E){this.refreshToken=m||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(g,m){const{refreshToken:E,accessToken:M,expirationTime:P}=m,Y=new Rt;return E&&(K("string"==typeof E,"internal-error",{appName:g}),Y.refreshToken=E),M&&(K("string"==typeof M,"internal-error",{appName:g}),Y.accessToken=M),P&&(K("number"==typeof P,"internal-error",{appName:g}),Y.expirationTime=P),Y}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new Rt,this.toJSON())}_performRefresh(){return De("not implemented")}}function xt(v,g){K("string"==typeof v||void 0===v,"internal-error",{appName:g})}class zt{constructor(g){var{uid:m,auth:E,stsTokenManager:M}=g,P=(0,ve._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _o(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=M,this.accessToken=M.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Wi(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(g){var m=this;return(0,l.Z)(function*(){const E=yield Gi(m,m.stsTokenManager.getToken(m.auth,g));return K(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(g){return function Nr(v){return Zo.apply(this,arguments)}(this,g)}reload(){return function Ko(v){return Wt.apply(this,arguments)}(this)}_assign(g){this!==g&&(K(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(m=>Object.assign({},m)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new zt(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,m=!1){var E=this;return(0,l.Z)(function*(){let M=!1;g.idToken&&g.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(g),M=!0),m&&(yield zi(E)),yield E.auth._persistUserIfCurrent(E),M&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var g=this;return(0,l.Z)(function*(){const m=yield g.getIdToken();return yield Gi(g,function It(v,g){return sr.apply(this,arguments)}(g.auth,{idToken:m})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,m){var E,M,P,Y,ge,Ge,rt,Tt;const Et=null!==(E=m.displayName)&&void 0!==E?E:void 0,Pi=null!==(M=m.email)&&void 0!==M?M:void 0,_r=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,zl=null!==(Y=m.photoURL)&&void 0!==Y?Y:void 0,mp=null!==(ge=m.tenantId)&&void 0!==ge?ge:void 0,_p=null!==(Ge=m._redirectEventId)&&void 0!==Ge?Ge:void 0,zn=null!==(rt=m.createdAt)&&void 0!==rt?rt:void 0,Rm=null!==(Tt=m.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Oh,emailVerified:kh,isAnonymous:Rh,providerData:dl,stsTokenManager:Pm}=m;K(Oh&&Pm,g,"internal-error");const Fm=Rt.fromJSON(this.name,Pm);K("string"==typeof Oh,g,"internal-error"),xt(Et,g.name),xt(Pi,g.name),K("boolean"==typeof kh,g,"internal-error"),K("boolean"==typeof Rh,g,"internal-error"),xt(_r,g.name),xt(zl,g.name),xt(mp,g.name),xt(_p,g.name),xt(zn,g.name),xt(Rm,g.name);const Wc=new zt({uid:Oh,auth:g,email:Pi,emailVerified:kh,displayName:Et,isAnonymous:Rh,photoURL:zl,phoneNumber:_r,tenantId:mp,stsTokenManager:Fm,createdAt:zn,lastLoginAt:Rm});return dl&&Array.isArray(dl)&&(Wc.providerData=dl.map(Lm=>Object.assign({},Lm))),_p&&(Wc._redirectEventId=_p),Wc}static _fromIdTokenResponse(g,m,E=!1){return(0,l.Z)(function*(){const M=new Rt;M.updateFromServerResponse(m);const P=new zt({uid:m.localId,auth:g,stsTokenManager:M,isAnonymous:E});return yield zi(P),P})()}}const H=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,l.Z)(function*(){return!0})()}_set(m,E){var M=this;return(0,l.Z)(function*(){M.storage[m]=E})()}_get(m){var E=this;return(0,l.Z)(function*(){const M=E.storage[m];return void 0===M?null:M})()}_remove(m){var E=this;return(0,l.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return v.type="NONE",v})();function X(v,g,m){return`firebase:${v}:${g}:${m}`}class Ie{constructor(g,m,E){this.persistence=g,this.auth=m,this.userKey=E;const{config:M,name:P}=this.auth;this.fullUserKey=X(this.userKey,M.apiKey,P),this.fullPersistenceKey=X("persistence",M.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,l.Z)(function*(){const m=yield g.persistence._get(g.fullUserKey);return m?zt._fromJSON(g.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var m=this;return(0,l.Z)(function*(){if(m.persistence===g)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=g,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,m,E="authUser"){return(0,l.Z)(function*(){if(!m.length)return new Ie(ie(H),g,E);const M=(yield Promise.all(m.map(function(){var rt=(0,l.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return rt.apply(this,arguments)}}()))).filter(rt=>rt);let P=M[0]||ie(H);const Y=X(E,g.config.apiKey,g.name);let ge=null;for(const rt of m)try{const Tt=yield rt._get(Y);if(Tt){const Et=zt._fromJSON(g,Tt);rt!==P&&(ge=Et),P=rt;break}}catch(Tt){}const Ge=M.filter(rt=>rt._shouldAllowMigration);return P._shouldAllowMigration&&Ge.length?(P=Ge[0],ge&&(yield P._set(Y,ge.toJSON())),yield Promise.all(m.map(function(){var rt=(0,l.Z)(function*(Tt){if(Tt!==P)try{yield Tt._remove(Y)}catch(Et){}});return function(Tt){return rt.apply(this,arguments)}}())),new Ie(P,g,E)):new Ie(P,g,E)})()}}function ae(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(un(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ht(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(fi(g))return"Blackberry";if(Ot(g))return"Webos";if(Ut(g))return"Safari";if((g.includes("chrome/")||wn(g))&&!g.includes("edge/"))return"Chrome";if(_n(g))return"Android";{const E=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==E?void 0:E.length))return E[1]}return"Other"}function ht(v=(0,U.z$)()){return/firefox\//i.test(v)}function Ut(v=(0,U.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function wn(v=(0,U.z$)()){return/crios\//i.test(v)}function un(v=(0,U.z$)()){return/iemobile/i.test(v)}function _n(v=(0,U.z$)()){return/android/i.test(v)}function fi(v=(0,U.z$)()){return/blackberry/i.test(v)}function Ot(v=(0,U.z$)()){return/webos/i.test(v)}function Ln(v=(0,U.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function yo(v=(0,U.z$)()){return Ln(v)||_n(v)||Ot(v)||fi(v)||/windows phone/i.test(v)||un(v)}function Ga(v,g=[]){let m;switch(v){case"Browser":m=ae((0,U.z$)());break;case"Worker":m=`${ae((0,U.z$)())}-${v}`;break;default:m=v}const E=g.length?g.join(","):"FirebaseCore-web";return`${m}/JsCore/${de.SDK_VERSION}/${E}`}class Er{constructor(g){this.auth=g,this.queue=[]}pushCallback(g,m){const E=P=>new Promise((Y,ge)=>{try{Y(g(P))}catch(Ge){ge(Ge)}});E.onAbort=m,this.queue.push(E);const M=this.queue.length-1;return()=>{this.queue[M]=()=>Promise.resolve()}}runMiddleware(g){var m=this;return(0,l.Z)(function*(){var E;if(m.auth.currentUser===g)return;const M=[];try{for(const P of m.queue)yield P(g),P.onAbort&&M.push(P.onAbort)}catch(P){M.reverse();for(const Y of M)try{Y()}catch(ge){}throw m.auth._errorFactory.create("login-blocked",{originalMessage:null===(E=P)||void 0===E?void 0:E.message})}})()}}class tt{constructor(g,m,E){this.app=g,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new En(this),this.idTokenSubscription=new En(this),this.beforeStateQueue=new Er(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ye,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(g,m){var E=this;return m&&(this._popupRedirectResolver=ie(m)),this._initializationPromise=this.queue((0,l.Z)(function*(){var M,P;if(!E._deleted&&(E.persistenceManager=yield Ie.create(E,g),!E._deleted)){if(null===(M=E._popupRedirectResolver)||void 0===M?void 0:M._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch(Y){}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,l.Z)(function*(){if(g._deleted)return;const m=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||m){if(g.currentUser&&m&&g.currentUser.uid===m.uid)return g._currentUser._assign(m),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(m,!0)}})()}initializeCurrentUser(g){var m=this;return(0,l.Z)(function*(){var E;const M=yield m.assertedPersistence.getCurrentUser();let P=M,Y=!1;if(g&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const ge=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,Ge=null==P?void 0:P._redirectEventId,rt=yield m.tryRedirectSignIn(g);(!ge||ge===Ge)&&(null==rt?void 0:rt.user)&&(P=rt.user,Y=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(Y)try{yield m.beforeStateQueue.runMiddleware(P)}catch(ge){P=M,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(ge))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return K(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(g){var m=this;return(0,l.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,g,!0)}catch(M){yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(g){var m=this;return(0,l.Z)(function*(){var E;try{yield zi(g)}catch(M){if("auth/network-request-failed"!==(null===(E=M)||void 0===E?void 0:E.code))return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ot(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,l.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var m=this;return(0,l.Z)(function*(){const E=g?(0,U.m9)(g):null;return E&&K(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(g,m=!1){var E=this;return(0,l.Z)(function*(){if(!E._deleted)return g&&K(E.tenantId===g.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(g)),E.queue((0,l.Z)(function*(){yield E.directlySetCurrentUser(g),E.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,l.Z)(function*(){return yield g.beforeStateQueue.runMiddleware(null),(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null,!0)})()}setPersistence(g){var m=this;return this.queue((0,l.Z)(function*(){yield m.assertedPersistence.setPersistence(ie(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new U.LL("auth","Firebase",g())}onAuthStateChanged(g,m,E){return this.registerStateListener(this.authStateSubscription,g,m,E)}beforeAuthStateChanged(g,m){return this.beforeStateQueue.pushCallback(g,m)}onIdTokenChanged(g,m,E){return this.registerStateListener(this.idTokenSubscription,g,m,E)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,m){var E=this;return(0,l.Z)(function*(){const M=yield E.getOrInitRedirectPersistenceManager(m);return null===g?M.removeCurrentUser():M.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var m=this;return(0,l.Z)(function*(){if(!m.redirectPersistenceManager){const E=g&&ie(g)||m._popupRedirectResolver;K(E,m,"argument-error"),m.redirectPersistenceManager=yield Ie.create(m,[ie(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(g){var m=this;return(0,l.Z)(function*(){var E,M;return m._isInitialized&&(yield m.queue((0,l.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===g?m._currentUser:(null===(M=m.redirectUser)||void 0===M?void 0:M._redirectEventId)===g?m.redirectUser:null})()}_persistUserIfCurrent(g){var m=this;return(0,l.Z)(function*(){if(g===m.currentUser)return m.queue((0,l.Z)(function*(){return m.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,m,E,M){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),Y=this._isInitialized?Promise.resolve():this._initializationPromise;return K(Y,this,"internal-error"),Y.then(()=>P(this.currentUser)),"function"==typeof m?g.addObserver(m,E,M):g.addObserver(m)}directlySetCurrentUser(g){var m=this;return(0,l.Z)(function*(){m.currentUser&&m.currentUser!==g&&m._currentUser._stopProactiveRefresh(),g&&m.isProactiveRefreshEnabled&&g._startProactiveRefresh(),m.currentUser=g,g?yield m.assertedPersistence.setCurrentUser(g):yield m.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ga(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,l.Z)(function*(){var m;const E={"X-Client-Version":g.clientVersion};g.app.options.appId&&(E["X-Firebase-gmpid"]=g.app.options.appId);const M=yield null===(m=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return M&&(E["X-Firebase-Client"]=M),E})()}}function vt(v){return(0,U.m9)(v)}class En{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,U.ne)(m=>this.observer=m)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function ms(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function _s(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Yr{constructor(g,m){this.providerId=g,this.signInMethod=m}toJSON(){return De("not implemented")}_getIdTokenResponse(g){return De("not implemented")}_linkToIdToken(g,m){return De("not implemented")}_getReauthenticationResolver(g){return De("not implemented")}}function Jn(v,g){return Vt.apply(this,arguments)}function Vt(){return(Vt=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:resetPassword",Xt(v,g))})).apply(this,arguments)}function $a(v,g){return vo.apply(this,arguments)}function vo(){return(vo=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function uc(v,g){return bo.apply(this,arguments)}function bo(){return(bo=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",Xt(v,g))})).apply(this,arguments)}function Qo(){return(Qo=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithPassword",Xt(v,g))})).apply(this,arguments)}function wo(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendOobCode",Xt(v,g))})).apply(this,arguments)}function Sn(v,g){return dc.apply(this,arguments)}function dc(){return(dc=(0,l.Z)(function*(v,g){return wo(v,g)})).apply(this,arguments)}function Ml(v,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,l.Z)(function*(v,g){return wo(v,g)})).apply(this,arguments)}function ys(v,g){return hc.apply(this,arguments)}function hc(){return(hc=(0,l.Z)(function*(v,g){return wo(v,g)})).apply(this,arguments)}function Ud(v,g){return vs.apply(this,arguments)}function vs(){return(vs=(0,l.Z)(function*(v,g){return wo(v,g)})).apply(this,arguments)}function Mu(){return(Mu=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}function Vd(){return(Vd=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithEmailLink",Xt(v,g))})).apply(this,arguments)}class qi extends Yr{constructor(g,m,E,M=null){super("password",E),this._email=g,this._password=m,this._tenantId=M}static _fromEmailAndPassword(g,m){return new qi(g,m,"password")}static _fromEmailAndCode(g,m,E=null){return new qi(g,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(g){var m=this;return(0,l.Z)(function*(){switch(m.signInMethod){case"password":return function Cn(v,g){return Qo.apply(this,arguments)}(g,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function bs(v,g){return Mu.apply(this,arguments)}(g,{email:m._email,oobCode:m._password});default:Le(g,"internal-error")}})()}_linkToIdToken(g,m){var E=this;return(0,l.Z)(function*(){switch(E.signInMethod){case"password":return $a(g,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function fc(v,g){return Vd.apply(this,arguments)}(g,{idToken:m,email:E._email,oobCode:E._password});default:Le(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Eo(v,g){return jd.apply(this,arguments)}function jd(){return(jd=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithIdp",Xt(v,g))})).apply(this,arguments)}class Hs extends Yr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const m=new Hs(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(m.idToken=g.idToken),g.accessToken&&(m.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(m.nonce=g.nonce),g.pendingToken&&(m.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(m.accessToken=g.oauthToken,m.secret=g.oauthTokenSecret):Le("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M}=m,P=(0,ve._T)(m,["providerId","signInMethod"]);if(!E||!M)return null;const Y=new Hs(E,M);return Y.idToken=P.idToken||void 0,Y.accessToken=P.accessToken||void 0,Y.secret=P.secret,Y.nonce=P.nonce,Y.pendingToken=P.pendingToken||null,Y}_getIdTokenResponse(g){return Eo(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Eo(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Eo(g,m)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),g.postBody=(0,U.xO)(m)}return g}}function em(v,g){return Hd.apply(this,arguments)}function Hd(){return(Hd=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:sendVerificationCode",Xt(v,g))})).apply(this,arguments)}function Co(){return(Co=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g))})).apply(this,arguments)}function Gd(){return(Gd=(0,l.Z)(function*(v,g){const m=yield rr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,g));if(m.temporaryProof)throw Kr(v,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const nm={USER_NOT_FOUND:"user-not-found"};function $d(){return($d=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithPhoneNumber",Xt(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),nm)})).apply(this,arguments)}class Wa extends Yr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,m){return new Wa({verificationId:g,verificationCode:m})}static _fromTokenResponse(g,m){return new Wa({phoneNumber:g,temporaryProof:m})}_getIdTokenResponse(g){return function Nu(v,g){return Co.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,m){return function tm(v,g){return Gd.apply(this,arguments)}(g,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function im(v,g){return $d.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:m,verificationId:E,verificationCode:M}=this.params;return g&&m?{temporaryProof:g,phoneNumber:m}:{sessionInfo:E,code:M}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:P}=g;return E||m||M||P?new Wa({verificationId:m,verificationCode:E,phoneNumber:M,temporaryProof:P}):null}}class gc{constructor(g){var m,E,M,P,Y,ge;const Ge=(0,U.zd)((0,U.pd)(g)),rt=null!==(m=Ge.apiKey)&&void 0!==m?m:null,Tt=null!==(E=Ge.oobCode)&&void 0!==E?E:null,Et=function pc(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(M=Ge.mode)&&void 0!==M?M:null);K(rt&&Tt&&Et,"argument-error"),this.apiKey=rt,this.operation=Et,this.code=Tt,this.continueUrl=null!==(P=Ge.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(Y=Ge.languageCode)&&void 0!==Y?Y:null,this.tenantId=null!==(ge=Ge.tenantId)&&void 0!==ge?ge:null}static parseLink(g){const m=function Nl(v){const g=(0,U.zd)((0,U.pd)(v)).link,m=g?(0,U.zd)((0,U.pd)(g)).deep_link_id:null,E=(0,U.zd)((0,U.pd)(v)).deep_link_id;return(E?(0,U.zd)((0,U.pd)(E)).link:null)||E||m||g||v}(g);try{return new gc(m)}catch(E){return null}}}let zd=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(m,E){return qi._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const M=gc.parseLink(E);return K(M,"argument-error"),qi._fromEmailAndCode(m,M.code,M.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Zi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Jo extends Zi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class ws extends Jo{static credentialFromJSON(g){const m="string"==typeof g?JSON.parse(g):g;return K("providerId"in m&&"signInMethod"in m,"argument-error"),Hs._fromParams(m)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return K(g.idToken||g.accessToken,"argument-error"),Hs._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return ws.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return ws.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:M,pendingToken:P,nonce:Y,providerId:ge}=g;if(!E&&!M&&!m&&!P||!ge)return null;try{return new ws(ge)._credential({idToken:m,accessToken:E,nonce:Y,pendingToken:P})}catch(Ge){return null}}}let za=(()=>{class v extends Jo{constructor(){super("facebook.com")}static credential(m){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),qd=(()=>{class v extends Jo{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:M}=m;if(!E&&!M)return null;try{return v.credential(E,M)}catch(P){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),Zf=(()=>{class v extends Jo{constructor(){super("github.com")}static credential(m){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return v.credential(m.oauthAccessToken)}catch(E){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Xo extends Yr{constructor(g,m){super(g,g),this.pendingToken=m}_getIdTokenResponse(g){return Eo(g,this.buildRequest())}_linkToIdToken(g,m){const E=this.buildRequest();return E.idToken=m,Eo(g,E)}_getReauthenticationResolver(g){const m=this.buildRequest();return m.autoCreate=!1,Eo(g,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const m="string"==typeof g?JSON.parse(g):g,{providerId:E,signInMethod:M,pendingToken:P}=m;return E&&M&&P&&E===M?new Xo(E,P):null}static _create(g,m){return new Xo(g,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ar extends Zi{constructor(g){K(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return ar.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return ar.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const m=Xo.fromJSON(g);return K(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:m,providerId:E}=g;if(!m||!E)return null;try{return Xo._create(E,m)}catch(M){return null}}}let Zd=(()=>{class v extends Jo{constructor(){super("twitter.com")}static credential(m,E){return Hs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:M}=m;if(!E||!M)return null;try{return v.credential(E,M)}catch(P){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Oi(v,g){return Za.apply(this,arguments)}function Za(){return(Za=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signUp",Xt(v,g))})).apply(this,arguments)}class Or{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,m,E,M=!1){return(0,l.Z)(function*(){const P=yield zt._fromIdTokenResponse(g,E,M),Y=Ou(E);return new Or({user:P,providerId:Y,_tokenResponse:E,operationType:m})})()}static _forOperation(g,m,E){return(0,l.Z)(function*(){yield g._updateTokensIfNecessary(E,!0);const M=Ou(E);return new Or({user:g,providerId:M,_tokenResponse:E,operationType:m})})()}}function Ou(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function ku(){return(ku=(0,l.Z)(function*(v){var g;const m=vt(v);if(yield m._initializationPromise,null===(g=m.currentUser)||void 0===g?void 0:g.isAnonymous)return new Or({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Oi(m,{returnSecureToken:!0}),M=yield Or._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Ka extends U.ZR{constructor(g,m,E,M){var P;super(m.code,m.message),this.operationType=E,this.user=M,Object.setPrototypeOf(this,Ka.prototype),this.customData={appName:g.name,tenantId:null!==(P=g.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(g,m,E,M){return new Ka(g,m,E,M)}}function Ru(v,g,m,E){return("reauthenticate"===g?m._getReauthenticationResolver(v):m._getIdTokenResponse(v)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Ka._fromErrorAndOperation(v,P,g,E):P})}function Es(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function Tn(){return(Tn=(0,l.Z)(function*(v,g){const m=(0,U.m9)(v);yield gn(!0,m,g);const{providerUserInfo:E}=yield Hn(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[g]}),M=Es(E||[]);return m.providerData=m.providerData.filter(P=>M.has(P.providerId)),M.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ol(v,g){return ea.apply(this,arguments)}function ea(){return(ea=(0,l.Z)(function*(v,g,m=!1){const E=yield Gi(v,g._linkToIdToken(v.auth,yield v.getIdToken()),m);return Or._forOperation(v,"link",E)})).apply(this,arguments)}function gn(v,g,m){return kl.apply(this,arguments)}function kl(){return(kl=(0,l.Z)(function*(v,g,m){yield zi(g);const M=!1===v?"provider-already-linked":"no-such-provider";K(Es(g.providerData).has(m)===v,g.auth,M)})).apply(this,arguments)}function mc(v,g){return To.apply(this,arguments)}function To(){return(To=(0,l.Z)(function*(v,g,m=!1){var E;const{auth:M}=v,P="reauthenticate";try{const Y=yield Gi(v,Ru(M,P,g,v),m);K(Y.idToken,M,"internal-error");const ge=_t(Y.idToken);K(ge,M,"internal-error");const{sub:Ge}=ge;return K(v.uid===Ge,M,"user-mismatch"),Or._forOperation(v,P,Y)}catch(Y){throw"auth/user-not-found"===(null===(E=Y)||void 0===E?void 0:E.code)&&Le(M,"user-mismatch"),Y}})).apply(this,arguments)}function ki(v,g){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,l.Z)(function*(v,g,m=!1){const E="signIn",M=yield Ru(v,E,g),P=yield Or._fromIdTokenResponse(v,E,M);return m||(yield v._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Gn(v,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,l.Z)(function*(v,g){return ki(vt(v),g)})).apply(this,arguments)}function Ri(v,g){return ta.apply(this,arguments)}function ta(){return(ta=(0,l.Z)(function*(v,g){const m=(0,U.m9)(v);return yield gn(!1,m,g.providerId),Ol(m,g)})).apply(this,arguments)}function Gs(v,g){return Rl.apply(this,arguments)}function Rl(){return(Rl=(0,l.Z)(function*(v,g){return mc((0,U.m9)(v),g)})).apply(this,arguments)}function Qr(v,g){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,l.Z)(function*(v,g){return rr(v,"POST","/v1/accounts:signInWithCustomToken",Xt(v,g))})).apply(this,arguments)}function At(){return(At=(0,l.Z)(function*(v,g){const m=vt(v),E=yield Qr(m,{token:g,returnSecureToken:!0}),M=yield Or._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(M.user),M})).apply(this,arguments)}class Do{constructor(g,m){this.factorId=g,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(g,m){return"phoneInfo"in m?Fu._fromServerResponse(g,m):Le(g,"internal-error")}}class Fu extends Do{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,m){return new Fu(m)}}function Pl(v,g,m){var E;K((null===(E=m.url)||void 0===E?void 0:E.length)>0,v,"invalid-continue-uri"),K(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=m.url,g.dynamicLinkDomain=m.dynamicLinkDomain,g.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(K(m.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=m.iOS.bundleId),m.android&&(K(m.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=m.android.installApp,g.androidMinimumVersionCode=m.android.minimumVersion,g.androidPackageName=m.android.packageName)}function _c(){return(_c=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v),M={requestType:"PASSWORD_RESET",email:g};m&&Pl(E,M,m),yield Ml(E,M)})).apply(this,arguments)}function Bu(){return(Bu=(0,l.Z)(function*(v,g,m){yield Jn((0,U.m9)(v),{oobCode:g,newPassword:m})})).apply(this,arguments)}function Pe(){return(Pe=(0,l.Z)(function*(v,g){yield uc((0,U.m9)(v),{oobCode:g})})).apply(this,arguments)}function Yt(v,g){return na.apply(this,arguments)}function na(){return(na=(0,l.Z)(function*(v,g){const m=(0,U.m9)(v),E=yield Jn(m,{oobCode:g}),M=E.requestType;switch(K(M,m,"internal-error"),M){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":K(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":K(E.mfaInfo,m,"internal-error");default:K(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=Do._fromServerResponse(vt(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:M}})).apply(this,arguments)}function vc(){return(vc=(0,l.Z)(function*(v,g){const{data:m}=yield Yt((0,U.m9)(v),g);return m.email})).apply(this,arguments)}function kr(){return(kr=(0,l.Z)(function*(v,g,m){const E=vt(v),M=yield Oi(E,{returnSecureToken:!0,email:g,password:m}),P=yield Or._fromIdTokenResponse(E,"signIn",M);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function ju(){return(ju=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v),M={requestType:"EMAIL_SIGNIN",email:g};K(m.handleCodeInApp,E,"argument-error"),m&&Pl(E,M,m),yield ys(E,M)})).apply(this,arguments)}function $s(){return($s=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v),M=zd.credentialWithLink(g,m||je());return K(M._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Gn(E,M)})).apply(this,arguments)}function Ki(v,g){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:createAuthUri",Xt(v,g))})).apply(this,arguments)}function Io(){return(Io=(0,l.Z)(function*(v,g){const E={identifier:g,continueUri:bt()?je():"http://localhost"},{signinMethods:M}=yield Ki((0,U.m9)(v),E);return M||[]})).apply(this,arguments)}function Hu(){return(Hu=(0,l.Z)(function*(v,g){const m=(0,U.m9)(v),M={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Pl(m.auth,M,g);const{email:P}=yield Sn(m.auth,M);P!==v.email&&(yield v.reload())})).apply(this,arguments)}function Ec(){return(Ec=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};m&&Pl(E.auth,P,m);const{email:Y}=yield Ud(E.auth,P);Y!==v.email&&(yield v.reload())})).apply(this,arguments)}function Gu(v,g){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,l.Z)(function*(v,g){return Kt(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Tc(){return(Tc=(0,l.Z)(function*(v,{displayName:g,photoURL:m}){if(void 0===g&&void 0===m)return;const E=(0,U.m9)(v),P={idToken:yield E.getIdToken(),displayName:g,photoUrl:m,returnSecureToken:!0},Y=yield Gi(E,Gu(E.auth,P));E.displayName=Y.displayName||null,E.photoURL=Y.photoUrl||null;const ge=E.providerData.find(({providerId:Ge})=>"password"===Ge);ge&&(ge.displayName=E.displayName,ge.photoURL=E.photoURL),yield E._updateTokensIfNecessary(Y)})).apply(this,arguments)}function Dc(v,g,m){return ra.apply(this,arguments)}function ra(){return(ra=(0,l.Z)(function*(v,g,m){const{auth:E}=v,P={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(P.email=g),m&&(P.password=m);const Y=yield Gi(v,$a(E,P));yield v._updateTokensIfNecessary(Y,!0)})).apply(this,arguments)}class Xa{constructor(g,m,E={}){this.isNewUser=g,this.providerId=m,this.profile=E}}class eh extends Xa{constructor(g,m,E,M){super(g,m,E),this.username=M}}class Ic extends Xa{constructor(g,m){super(g,"facebook.com",m)}}class Tr extends eh{constructor(g,m){super(g,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class Yf extends Xa{constructor(g,m){super(g,"google.com",m)}}class $u extends eh{constructor(g,m,E){super(g,"twitter.com",m,E)}}function Ti(v){const{user:g,_tokenResponse:m}=v;return g.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function Xd(v){var g,m;if(!v)return null;const{providerId:E}=v,M=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},P=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!E&&(null==v?void 0:v.idToken)){const Y=null===(m=null===(g=_t(v.idToken))||void 0===g?void 0:g.firebase)||void 0===m?void 0:m.sign_in_provider;if(Y)return new Xa(P,"anonymous"!==Y&&"custom"!==Y?Y:null)}if(!E)return null;switch(E){case"facebook.com":return new Ic(P,M);case"github.com":return new Tr(P,M);case"google.com":return new Yf(P,M);case"twitter.com":return new $u(P,M,v.screenName||null);case"custom":case"anonymous":return new Xa(P,null);default:return new Xa(P,E,M)}}(m)}class Ws{constructor(g,m,E){this.type=g,this.credential=m,this.auth=E}static _fromIdtoken(g,m){return new Ws("enroll",g,m)}static _fromMfaPendingCredential(g){return new Ws("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var m,E;if(null==g?void 0:g.multiFactorSession){if(null===(m=g.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Ws._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(E=g.multiFactorSession)||void 0===E?void 0:E.idToken)return Ws._fromIdtoken(g.multiFactorSession.idToken)}return null}}class oa{constructor(g,m,E){this.session=g,this.hints=m,this.signInResolver=E}static _fromError(g,m){const E=vt(g),M=m.customData._serverResponse,P=(M.mfaInfo||[]).map(ge=>Do._fromServerResponse(E,ge));K(M.mfaPendingCredential,E,"internal-error");const Y=Ws._fromMfaPendingCredential(M.mfaPendingCredential);return new oa(Y,P,function(){var ge=(0,l.Z)(function*(Ge){const rt=yield Ge._process(E,Y);delete M.mfaInfo,delete M.mfaPendingCredential;const Tt=Object.assign(Object.assign({},M),{idToken:rt.idToken,refreshToken:rt.refreshToken});switch(m.operationType){case"signIn":const Et=yield Or._fromIdTokenResponse(E,m.operationType,Tt);return yield E._updateCurrentUser(Et.user),Et;case"reauthenticate":return K(m.user,E,"internal-error"),Or._forOperation(m.user,m.operationType,Tt);default:Le(E,"internal-error")}});return function(Ge){return ge.apply(this,arguments)}}())}resolveSignIn(g){var m=this;return(0,l.Z)(function*(){return m.signInResolver(g)})()}}function nh(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:start",Xt(v,g))}class el{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>Do._fromServerResponse(g.auth,E)))})}static _fromUser(g){return new el(g)}getSession(){var g=this;return(0,l.Z)(function*(){return Ws._fromIdtoken(yield g.user.getIdToken(),g.user.auth)})()}enroll(g,m){var E=this;return(0,l.Z)(function*(){const M=g,P=yield E.getSession(),Y=yield Gi(E.user,M._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(Y),E.user.reload()})()}unenroll(g){var m=this;return(0,l.Z)(function*(){var E;const M="string"==typeof g?g:g.uid,P=yield m.user.getIdToken(),Y=yield Gi(m.user,function aa(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",Xt(v,g))}(m.user.auth,{idToken:P,mfaEnrollmentId:M}));m.enrolledFactors=m.enrolledFactors.filter(({uid:ge})=>ge!==M),yield m.user._updateTokensIfNecessary(Y);try{yield m.user.reload()}catch(ge){if("auth/user-token-expired"!==(null===(E=ge)||void 0===E?void 0:E.code))throw ge}})()}}const Sc=new WeakMap,zs="__sak";class Ac{constructor(g,m){this.storageRetriever=g,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(zs,"1"),this.storage.removeItem(zs),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,m){return this.storage.setItem(g,JSON.stringify(m)),Promise.resolve()}_get(g){const m=this.storage.getItem(g);return Promise.resolve(m?JSON.parse(m):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const Dn=(()=>{class v extends Ac{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function cm(){const v=(0,U.z$)();return Ut(v)||Ln(v)}()&&function Mi(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=yo(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const M=this.storage.getItem(E),P=this.localCache[E];M!==P&&m(E,P,M)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((ge,Ge,rt)=>{this.notifyListeners(ge,rt)});const M=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ge=this.storage.getItem(M);if(m.newValue!==ge)null!==m.newValue?this.storage.setItem(M,m.newValue):this.storage.removeItem(M);else if(this.localCache[M]===m.newValue&&!E)return}const P=()=>{const ge=this.storage.getItem(M);!E&&this.localCache[M]===ge||this.notifyListeners(M,ge)},Y=this.storage.getItem(M);!function xl(){return(0,U.w1)()&&10===document.documentMode}()||Y===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,M)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:M}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var M=()=>super._set,P=this;return(0,l.Z)(function*(){yield M().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,M=this;return(0,l.Z)(function*(){const P=yield E().call(M,m);return M.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,M=this;return(0,l.Z)(function*(){yield E().call(M,m),delete M.localCache[m]})()}}return v.type="LOCAL",v})(),yn=(()=>{class v extends Ac{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return v.type="SESSION",v})();let ih=(()=>{class v{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const M=new v(m);return this.receivers.push(M),M}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,l.Z)(function*(){const M=m,{eventId:P,eventType:Y,data:ge}=M.data,Ge=E.handlersMap[Y];if(!(null==Ge?void 0:Ge.size))return;M.ports[0].postMessage({status:"ack",eventId:P,eventType:Y});const rt=Array.from(Ge).map(function(){var Et=(0,l.Z)(function*(Pi){return Pi(M.origin,ge)});return function(Pi){return Et.apply(this,arguments)}}()),Tt=yield function Ll(v){return Promise.all(v.map(function(){var g=(0,l.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return g.apply(this,arguments)}}()))}(rt);M.ports[0].postMessage({status:"done",eventId:P,eventType:Y,response:Tt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function tl(v="",g=10){let m="";for(let E=0;E<g;E++)m+=Math.floor(10*Math.random());return v+m}class So{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,m,E=50){var M=this;return(0,l.Z)(function*(){const P="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let Y,ge;return new Promise((Ge,rt)=>{const Tt=tl("",20);P.port1.start();const Et=setTimeout(()=>{rt(new Error("unsupported_event"))},E);ge={messageChannel:P,onMessage(Pi){const _r=Pi;if(_r.data.eventId===Tt)switch(_r.data.status){case"ack":clearTimeout(Et),Y=setTimeout(()=>{rt(new Error("timeout"))},3e3);break;case"done":clearTimeout(Y),Ge(_r.data.response);break;default:clearTimeout(Et),clearTimeout(Y),rt(new Error("invalid_response"))}}},M.handlers.add(ge),P.port1.addEventListener("message",ge.onMessage),M.target.postMessage({eventType:g,eventId:Tt,data:m},[P.port2])}).finally(()=>{ge&&M.removeMessageHandler(ge)})})()}}function ei(){return window}function Xr(){return void 0!==ei().WorkerGlobalScope&&"function"==typeof ei().importScripts}function rh(){return(rh=(0,l.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const Bl="firebaseLocalStorageDb",Ds="firebaseLocalStorage",nl="fbase_key";class qs{constructor(g){this.request=g}toPromise(){return new Promise((g,m)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function xo(v,g){return v.transaction([Ds],g?"readwrite":"readonly").objectStore(Ds)}function il(){const v=indexedDB.open(Bl,1);return new Promise((g,m)=>{v.addEventListener("error",()=>{m(v.error)}),v.addEventListener("upgradeneeded",()=>{const E=v.result;try{E.createObjectStore(Ds,{keyPath:nl})}catch(M){m(M)}}),v.addEventListener("success",(0,l.Z)(function*(){const E=v.result;E.objectStoreNames.contains(Ds)?g(E):(E.close(),yield function Yi(){const v=indexedDB.deleteDatabase(Bl);return new qs(v).toPromise()}(),g(yield il()))}))})}function Ul(v,g,m){return ca.apply(this,arguments)}function ca(){return(ca=(0,l.Z)(function*(v,g,m){const E=xo(v,!0).put({[nl]:g,value:m});return new qs(E).toPromise()})).apply(this,arguments)}function rl(){return(rl=(0,l.Z)(function*(v,g){const m=xo(v,!1).get(g),E=yield new qs(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function da(v,g){const m=xo(v,!0).delete(g);return new qs(m).toPromise()}const ha=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,l.Z)(function*(){return m.db||(m.db=yield il()),m.db})()}_withRetries(m){var E=this;return(0,l.Z)(function*(){let M=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(M++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,l.Z)(function*(){return Xr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,l.Z)(function*(){m.receiver=ih._getInstance(function xc(){return Xr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,l.Z)(function*(M,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(M,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,l.Z)(function*(M,P){return["keyChanged"]});return function(M,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,l.Z)(function*(){var E,M;if(m.activeServiceWorker=yield function ut(){return rh.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new So(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(M=P[0])||void 0===M?void 0:M.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,l.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function sh(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch(M){}})()}_isAvailable(){return(0,l.Z)(function*(){try{if(!indexedDB)return!1;const m=yield il();return yield Ul(m,zs,"1"),yield da(m,zs),!0}catch(m){}return!1})()}_withPendingWrite(m){var E=this;return(0,l.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var M=this;return(0,l.Z)(function*(){return M._withPendingWrite((0,l.Z)(function*(){return yield M._withRetries(P=>Ul(P,m,E)),M.localCache[m]=E,M.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,l.Z)(function*(){const M=yield E._withRetries(P=>function ua(v,g){return rl.apply(this,arguments)}(P,m));return E.localCache[m]=M,M})()}_remove(m){var E=this;return(0,l.Z)(function*(){return E._withPendingWrite((0,l.Z)(function*(){return yield E._withRetries(M=>da(M,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,l.Z)(function*(){const E=yield m._withRetries(Y=>{const ge=xo(Y,!1).getAll();return new qs(ge).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const M=[],P=new Set;for(const{fbase_key:Y,value:ge}of E)P.add(Y),JSON.stringify(m.localCache[Y])!==JSON.stringify(ge)&&(m.notifyListeners(Y,ge),M.push(Y));for(const Y of Object.keys(m.localCache))m.localCache[Y]&&!P.has(Y)&&(m.notifyListeners(Y,null),M.push(Y));return M})()}notifyListeners(m,E){this.localCache[m]=E;const M=this.listeners[m];if(M)for(const P of Array.from(M))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,l.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function $n(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:start",Xt(v,g))}function Rn(){return(Rn=(0,l.Z)(function*(v){return(yield Kt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Dr(v){return new Promise((g,m)=>{const E=document.createElement("script");E.setAttribute("src",v),E.onload=g,E.onerror=M=>{const P=we("internal-error");P.customData=M,m(P)},E.type="text/javascript",E.charset="UTF-8",function ai(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(E)})}function Mo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const ur=1e12;class ti{constructor(g){this.auth=g,this.counter=ur,this._widgets=new Map}render(g,m){const E=this.counter;return this._widgets.set(E,new ts(g,this.auth.name,m||{})),this.counter++,E}reset(g){var m;const E=g||ur;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(g){var m;return(null===(m=this._widgets.get(g||ur))||void 0===m?void 0:m.getResponse())||""}execute(g){var m=this;return(0,l.Z)(function*(){var E;return null===(E=m._widgets.get(g||ur))||void 0===E||E.execute(),""})()}}class ts{constructor(g,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const M="string"==typeof g?document.getElementById(g):g;K(M,"argument-error",{appName:m}),this.container=M,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oh(v){const g=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<v;E++)g.push(m.charAt(Math.floor(Math.random()*m.length)));return g.join("")}(50);const{callback:g,"expired-callback":m}=this.params;if(g)try{g(this.responseToken)}catch(E){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(E){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const qu=Mo("rcb"),Wn=new pn(3e4,6e4);class lh{constructor(){var g;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(g=ei().grecaptcha)||void 0===g?void 0:g.render)}load(g,m=""){return K(function jl(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(m),g,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ei().grecaptcha):new Promise((E,M)=>{const P=ei().setTimeout(()=>{M(we(g,"network-request-failed"))},Wn.get());ei()[qu]=()=>{ei().clearTimeout(P),delete ei()[qu];const ge=ei().grecaptcha;if(!ge)return void M(we(g,"internal-error"));const Ge=ge.render;ge.render=(rt,Tt)=>{const Et=Ge(rt,Tt);return this.counter++,Et},this.hostLanguage=m,E(ge)},Dr(`https://www.google.com/recaptcha/api.js??${(0,U.xO)({onload:qu,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),M(we(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){var m;return!!(null===(m=ei().grecaptcha)||void 0===m?void 0:m.render)&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class dr{load(g){return(0,l.Z)(function*(){return new ti(g)})()}clearedOneInstance(){}}const um="recaptcha",fa={theme:"light",type:"image"};class Qf{constructor(g,m=Object.assign({},fa),E){this.parameters=m,this.type=um,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(E),this.isInvisible="invisible"===this.parameters.size,K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const M="string"==typeof g?document.getElementById(g):g;K(M,this.auth,"argument-error"),this.container=M,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new dr:new lh,this.validateStartingState()}verify(){var g=this;return(0,l.Z)(function*(){g.assertNotDestroyed();const m=yield g.render(),E=g.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const Y=ge=>{!ge||(g.tokenChangeListeners.delete(Y),P(ge))};g.tokenChangeListeners.add(Y),g.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){K(!this.parameters.sitekey,this.auth,"argument-error"),K(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),K("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof g)g(m);else if("string"==typeof g){const E=ei()[g];"function"==typeof E&&E(m)}}}assertNotDestroyed(){K(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,l.Z)(function*(){if(yield g.init(),!g.widgetId){let m=g.container;if(!g.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}g.widgetId=g.getAssertedRecaptcha().render(m,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,l.Z)(function*(){K(bt()&&!Xr(),g.auth,"internal-error"),yield function Zs(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const m=yield function cr(v){return Rn.apply(this,arguments)}(g.auth);K(m,g.auth,"internal-error"),g.parameters.sitekey=m})()}getAssertedRecaptcha(){return K(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ch{constructor(g,m){this.verificationId=g,this.onConfirmation=m}confirm(g){const m=Wa._fromVerification(this.verificationId,g);return this.onConfirmation(m)}}function sl(){return(sl=(0,l.Z)(function*(v,g,m){const E=vt(v),M=yield fr(E,g,(0,U.m9)(m));return new ch(M,P=>Gn(E,P))})).apply(this,arguments)}function uh(){return(uh=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v);yield gn(!1,E,"phone");const M=yield fr(E.auth,g,(0,U.m9)(m));return new ch(M,P=>Ri(E,P))})).apply(this,arguments)}function hr(){return(hr=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v),M=yield fr(E.auth,g,(0,U.m9)(m));return new ch(M,P=>Gs(E,P))})).apply(this,arguments)}function fr(v,g,m){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,l.Z)(function*(v,g,m){var E;const M=yield m.verify();try{let P;if(K("string"==typeof M,v,"argument-error"),K(m.type===um,v,"argument-error"),P="string"==typeof g?{phoneNumber:g}:g,"session"in P){const Y=P.session;if("phoneNumber"in P)return K("enroll"===Y.type,v,"internal-error"),(yield nh(v,{idToken:Y.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:M}})).phoneSessionInfo.sessionInfo;{K("signin"===Y.type,v,"internal-error");const ge=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return K(ge,v,"missing-multi-factor-info"),(yield $n(v,{mfaPendingCredential:Y.credential,mfaEnrollmentId:ge,phoneSignInInfo:{recaptchaToken:M}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:Y}=yield em(v,{phoneNumber:P.phoneNumber,recaptchaToken:M});return Y}}finally{m._reset()}})).apply(this,arguments)}function pa(){return(pa=(0,l.Z)(function*(v,g){yield Ol((0,U.m9)(v),g)})).apply(this,arguments)}let ol=(()=>{class v{constructor(m){this.providerId=v.PROVIDER_ID,this.auth=vt(m)}verifyPhoneNumber(m,E){return fr(this.auth,m,(0,U.m9)(E))}static credential(m,E){return Wa._fromVerification(m,E)}static credentialFromResult(m){return v.credentialFromTaggedObject(m)}static credentialFromError(m){return v.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:M}=m;return E&&M?Wa._fromTokenResponse(E,M):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function No(v,g){return g?ie(g):(K(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class Mc extends Yr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Eo(g,this._buildIdpRequest())}_linkToIdToken(g,m){return Eo(g,this._buildIdpRequest(m))}_getReauthenticationResolver(g){return Eo(g,this._buildIdpRequest())}_buildIdpRequest(g){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(m.idToken=g),m}}function qt(v){return ki(v.auth,new Mc(v),v.bypassAuthState)}function dh(v){const{auth:g,user:m}=v;return K(m,g,"internal-error"),mc(m,new Mc(v),v.bypassAuthState)}function Ks(v){return mi.apply(this,arguments)}function mi(){return(mi=(0,l.Z)(function*(v){const{auth:g,user:m}=v;return K(m,g,"internal-error"),Ol(m,new Mc(v),v.bypassAuthState)})).apply(this,arguments)}class Oo{constructor(g,m,E,M,P=!1){this.auth=g,this.resolver=E,this.user=M,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var g=this;return new Promise(function(){var m=(0,l.Z)(function*(E,M){g.pendingPromise={resolve:E,reject:M};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(P){g.reject(P)}});return function(E,M){return m.apply(this,arguments)}}())}onAuthEvent(g){var m=this;return(0,l.Z)(function*(){const{urlResponse:E,sessionId:M,postBody:P,tenantId:Y,error:ge,type:Ge}=g;if(ge)return void m.reject(ge);const rt={auth:m.auth,requestUri:E,sessionId:M,tenantId:Y||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(Ge)(rt))}catch(Tt){m.reject(Tt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return qt;case"linkViaPopup":case"linkViaRedirect":return Ks;case"reauthViaPopup":case"reauthViaRedirect":return dh;default:Le(this.auth,"internal-error")}}resolve(g){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){J(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ko=new pn(2e3,1e4);function al(){return(al=(0,l.Z)(function*(v,g,m){const E=vt(v);qe(v,g,Zi);const M=No(E,m);return new fh(E,"signInViaPopup",g,M).executeNotNull()})).apply(this,arguments)}function Ku(){return(Ku=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v);qe(E.auth,g,Zi);const M=No(E.auth,m);return new fh(E.auth,"reauthViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}function Nc(){return(Nc=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v);qe(E.auth,g,Zi);const M=No(E.auth,m);return new fh(E.auth,"linkViaPopup",g,M,E).executeNotNull()})).apply(this,arguments)}let fh=(()=>{class v extends Oo{constructor(m,E,M,P,Y){super(m,E,P,Y),this.provider=M,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var m=this;return(0,l.Z)(function*(){const E=yield m.execute();return K(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,l.Z)(function*(){J(1===m.filter.length,"Popup operations only handle one event");const E=tl();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(M=>{m.reject(M)}),m.resolver._isIframeWebStorageSupported(m.auth,M=>{M||m.reject(we(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,M;this.pollId=(null===(M=null===(E=this.authWindow)||void 0===E?void 0:E.window)||void 0===M?void 0:M.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ko.get())};m()}}return v.currentPopupAction=null,v})();const Di=new Map;class Oc extends Oo{constructor(g,m,E=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var g=()=>super.execute,m=this;return(0,l.Z)(function*(){let E=Di.get(m.auth._key());if(!E){try{const P=(yield function dm(v,g){return pr.apply(this,arguments)}(m.resolver,m.auth))?yield g().call(m):null;E=()=>Promise.resolve(P)}catch(M){E=()=>Promise.reject(M)}Di.set(m.auth._key(),E)}return m.bypassAuthState||Di.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(g){var m=()=>super.onAuthEvent,E=this;return(0,l.Z)(function*(){if("signInViaRedirect"===g.type)return m().call(E,g);if("unknown"!==g.type){if(g.eventId){const M=yield E.auth._redirectUserForId(g.eventId);if(M)return E.user=M,m().call(E,g);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,l.Z)(function*(){})()}cleanUp(){}}function pr(){return(pr=(0,l.Z)(function*(v,g){const m=Rc(g),E=kc(v);if(!(yield E._isAvailable()))return!1;const M="true"===(yield E._get(m));return yield E._remove(m),M})).apply(this,arguments)}function ll(v,g){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,l.Z)(function*(v,g){return kc(v)._set(Rc(g),"true")})).apply(this,arguments)}function gh(v,g){Di.set(v._key(),g)}function kc(v){return ie(v._redirectPersistence)}function Rc(v){return X("pendingRedirect",v.config.apiKey,v.name)}function D(){return(D=(0,l.Z)(function*(v,g,m){const E=vt(v);qe(v,g,Zi);const M=No(E,m);return yield ll(M,E),M._openRedirect(E,g,"signInViaRedirect")})).apply(this,arguments)}function j(){return(j=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v);qe(E.auth,g,Zi);const M=No(E.auth,m);yield ll(M,E.auth);const P=yield pt(E);return M._openRedirect(E.auth,g,"reauthViaRedirect",P)})).apply(this,arguments)}function Oe(){return(Oe=(0,l.Z)(function*(v,g,m){const E=(0,U.m9)(v);qe(E.auth,g,Zi);const M=No(E.auth,m);yield gn(!1,E,g.providerId),yield ll(M,E.auth);const P=yield pt(E);return M._openRedirect(E.auth,g,"linkViaRedirect",P)})).apply(this,arguments)}function yt(){return(yt=(0,l.Z)(function*(v,g){return yield vt(v)._initializationPromise,Mt(v,g,!1)})).apply(this,arguments)}function Mt(v,g){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,l.Z)(function*(v,g,m=!1){const E=vt(v),M=No(E,g),Y=yield new Oc(E,M,m).execute();return Y&&!m&&(delete Y.user._redirectEventId,yield E._persistUserIfCurrent(Y.user),yield E._setRedirectUser(null,g)),Y})).apply(this,arguments)}function pt(v){return li.apply(this,arguments)}function li(){return(li=(0,l.Z)(function*(v){const g=tl(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Ro{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(g,E)&&(m=!0,this.sendToConsumer(g,E),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function Fc(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ss(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=g,m=!0)),m}sendToConsumer(g,m){var E;if(g.error&&!Ss(g)){const M=(null===(E=g.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(we(this.auth,M))}else m.onAuthEvent(g)}isEventForConsumer(g,m){const E=null===m.eventId||!!g.eventId&&g.eventId===m.eventId;return m.filter.includes(g.type)&&E}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Po(g))}saveEventToCache(g){this.cachedEventUids.add(Po(g)),this.lastProcessedEventTime=Date.now()}}function Po(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Ss({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function $l(v){return ga.apply(this,arguments)}function ga(){return(ga=(0,l.Z)(function*(v,g={}){return Kt(v,"GET","/v1/projects",g)})).apply(this,arguments)}const As=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ns=/^https?/;function ep(){return(ep=(0,l.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield $l(v);for(const m of g)try{if(pE(m))return}catch(E){}Le(v,"unauthorized-domain")})).apply(this,arguments)}function pE(v){const g=je(),{protocol:m,hostname:E}=new URL(g);if(v.startsWith("chrome-extension://")){const Y=new URL(v);return""===Y.hostname&&""===E?"chrome-extension:"===m&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===m&&Y.hostname===E}if(!ns.test(m))return!1;if(As.test(v))return E===v;const M=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+M+"|"+M+")$","i").test(E)}const hm=new pn(3e4,6e4);function tp(){const v=ei().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let m=0;m<v.CP.length;m++)v.CP[m]=null}let Lc=null;function ma(v){return Lc=Lc||function fm(v){return new Promise((g,m)=>{var E,M,P;function Y(){tp(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{tp(),m(we(v,"network-request-failed"))},timeout:hm.get()})}if(null===(M=null===(E=ei().gapi)||void 0===E?void 0:E.iframes)||void 0===M?void 0:M.Iframe)g(gapi.iframes.getContext());else{if(!(null===(P=ei().gapi)||void 0===P?void 0:P.load)){const ge=Mo("iframefcb");return ei()[ge]=()=>{gapi.load?Y():m(we(v,"network-request-failed"))},Dr(`https://apis.google.com/js/api.js?onload=${ge}`).catch(Ge=>m(Ge))}Y()}}).catch(g=>{throw Lc=null,g})}(v),Lc}const Bc=new pn(5e3,15e3),Uc={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pm(v){const g=v.config;K(g.authDomain,v,"auth-domain-config-required");const m=g.emulator?On(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,E={apiKey:g.apiKey,appName:v.name,v:de.SDK_VERSION},M=Vc.get(v.config.apiHost);M&&(E.eid=M);const P=v._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,U.xO)(E).slice(1)}`}function _a(){return _a=(0,l.Z)(function*(v){const g=yield ma(v),m=ei().gapi;return K(m,v,"internal-error"),g.open({where:document.body,url:pm(v),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Uc,dontclear:!0},E=>new Promise(function(){var M=(0,l.Z)(function*(P,Y){yield E.restyle({setHideOnLeave:!1});const ge=we(v,"network-request-failed"),Ge=ei().setTimeout(()=>{Y(ge)},Bc.get());function rt(){ei().clearTimeout(Ge),P(E)}E.ping(rt).then(rt,()=>{Y(ge)})});return function(P,Y){return M.apply(this,arguments)}}()))}),_a.apply(this,arguments)}const _h={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class gm{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function is(v,g,m,E,M,P){K(v.config.authDomain,v,"auth-domain-config-required"),K(v.config.apiKey,v,"invalid-api-key");const Y={apiKey:v.config.apiKey,appName:v.name,authType:m,redirectUrl:E,v:de.SDK_VERSION,eventId:M};if(g instanceof Zi){g.setDefaultLanguage(v.languageCode),Y.providerId=g.providerId||"",(0,U.xb)(g.getCustomParameters())||(Y.customParameters=JSON.stringify(g.getCustomParameters()));for(const[Ge,rt]of Object.entries(P||{}))Y[Ge]=rt}if(g instanceof Jo){const Ge=g.getScopes().filter(rt=>""!==rt);Ge.length>0&&(Y.scopes=Ge.join(","))}v.tenantId&&(Y.tid=v.tenantId);const ge=Y;for(const Ge of Object.keys(ge))void 0===ge[Ge]&&delete ge[Ge];return`${function ya({config:v}){return v.emulator?On(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,U.xO)(ge).slice(1)}`}const Ju="webStorageSupport";class wh extends class mE{constructor(g){this.factorId=g}_process(g,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(g,m.credential,E);case"signin":return this._finalizeSignIn(g,m.credential);default:return De("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new wh(g)}_finalizeEnroll(g,m,E){return function am(v,g){return Kt(v,"POST","/v2/accounts/mfaEnrollment:finalize",Xt(v,g))}(g,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,m){return function zu(v,g){return Kt(v,"POST","/v2/accounts/mfaSignIn:finalize",Xt(v,g))}(g,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let _E=(()=>{class v{constructor(){}static assertion(m){return wh._fromCredential(m)}}return v.FACTOR_ID="phone",v})();var ip="@firebase/auth",_m="0.20.11";class ym{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var m=this;return(0,l.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const m=this.auth.onIdTokenChanged(E=>{var M;g((null===(M=E)||void 0===M?void 0:M.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,m),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const m=this.internalListeners.get(g);!m||(this.internalListeners.delete(g),m(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Qs(){return window}function Js(){return(Js=(0,l.Z)(function*(v,g,m){var E;const{BuildInfo:M}=Qs();J(g.sessionId,"AuthEvent did not contain a session ID");const P=yield Th(g.sessionId),Y={};return Ln()?Y.ibi=M.packageName:_n()?Y.apn=M.packageName:Le(v,"operation-not-supported-in-this-environment"),M.displayName&&(Y.appDisplayName=M.displayName),Y.sessionId=P,is(v,m,g.type,void 0,null!==(E=g.eventId)&&void 0!==E?E:void 0,Y)})).apply(this,arguments)}function ul(){return(ul=(0,l.Z)(function*(v){const{BuildInfo:g}=Qs(),m={};Ln()?m.iosBundleId=g.packageName:_n()?m.androidPackageName=g.packageName:Le(v,"operation-not-supported-in-this-environment"),yield $l(v,m)})).apply(this,arguments)}function Xu(){return(Xu=(0,l.Z)(function*(v,g,m){const{cordova:E}=Qs();let M=()=>{};try{yield new Promise((P,Y)=>{let ge=null;function Ge(){var Et;P();const Pi=null===(Et=E.plugins.browsertab)||void 0===Et?void 0:Et.close;"function"==typeof Pi&&Pi(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function rt(){ge||(ge=window.setTimeout(()=>{Y(we(v,"redirect-cancelled-by-user"))},2e3))}function Tt(){"visible"===(null==document?void 0:document.visibilityState)&&rt()}g.addPassiveListener(Ge),document.addEventListener("resume",rt,!1),_n()&&document.addEventListener("visibilitychange",Tt,!1),M=()=>{g.removePassiveListener(Ge),document.removeEventListener("resume",rt,!1),document.removeEventListener("visibilitychange",Tt,!1),ge&&window.clearTimeout(ge)}})}finally{M()}})).apply(this,arguments)}function Th(v){return Hc.apply(this,arguments)}function Hc(){return(Hc=(0,l.Z)(function*(v){const g=wm(v),m=yield crypto.subtle.digest("SHA-256",g);return Array.from(new Uint8Array(m)).map(M=>M.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function wm(v){if(J(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(v);const g=new ArrayBuffer(v.length),m=new Uint8Array(g);for(let E=0;E<v.length;E++)m[E]=v.charCodeAt(E);return m}(0,U.Pz)("authIdTokenMaxAge"),function Xy(v){(0,de._registerComponent)(new ce.wA("auth",(g,{options:m})=>{const E=g.getProvider("app").getImmediate(),M=g.getProvider("heartbeat"),{apiKey:P,authDomain:Y}=E.options;return((ge,Ge)=>{K(P&&!P.includes(":"),"invalid-api-key",{appName:ge.name}),K(!(null==Y?void 0:Y.includes(":")),"argument-error",{appName:ge.name});const rt={apiKey:P,authDomain:Y,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ga(v)},Tt=new tt(ge,Ge,rt);return function fe(v,g){const m=(null==g?void 0:g.persistence)||[],E=(Array.isArray(m)?m:[m]).map(ie);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(E,null==g?void 0:g.popupRedirectResolver)}(Tt,m),Tt})(E,M)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,m,E)=>{g.getProvider("auth-internal").initialize()})),(0,de._registerComponent)(new ce.wA("auth-internal",g=>{const m=vt(g.getProvider("auth").getImmediate());return new ym(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,de.registerVersion)(ip,_m,function Eh(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,de.registerVersion)(ip,_m,"esm2017")}("Browser");class ap extends Ro{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(g=>{this.resolveInialized=g})}addPassiveListener(g){this.passiveListeners.add(g)}removePassiveListener(g){this.passiveListeners.delete(g)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(g){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(g)),super.onEvent(g)}initialized(){var g=this;return(0,l.Z)(function*(){yield g.initPromise})()}}function Dh(v){return Gc.apply(this,arguments)}function Gc(){return(Gc=(0,l.Z)(function*(v){const g=yield Fr()._get(Zn(v));return g&&(yield Fr()._remove(Zn(v))),g})).apply(this,arguments)}function td(){const v=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const E=Math.floor(Math.random()*g.length);v.push(g.charAt(E))}return v.join("")}function Fr(){return ie(Dn)}function Zn(v){return X("authEvent",v.config.apiKey,v.name)}function ba(v){if(!(null==v?void 0:v.includes("?")))return{};const[g,...m]=v.split("?");return(0,U.zd)(m.join("?"))}function Dm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}function Fo(){var v;return(null===(v=null==self?void 0:self.location)||void 0===v?void 0:v.protocol)||null}function nd(v=(0,U.z$)()){return!("file:"!==Fo()&&"ionic:"!==Fo()&&"capacitor:"!==Fo()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ah(){try{const v=self.localStorage,g=tl();if(v)return v.setItem(g,"1"),v.removeItem(g),!function id(v=(0,U.z$)()){return function Am(){return(0,U.w1)()&&11===(null==document?void 0:document.documentMode)}()||function gr(v=(0,U.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,U.hl)()}catch(v){return rd()&&(0,U.hl)()}return!1}function rd(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function cp(){return(function Ii(){return"http:"===Fo()||"https:"===Fo()}()||(0,U.ru)()||nd())&&!function Sm(){return(0,U.b$)()||(0,U.UG)()}()&&Ah()&&!rd()}function xh(){return nd()&&"undefined"!=typeof document}function Nh(){return(Nh=(0,l.Z)(function*(){return!!xh()&&new Promise(v=>{const g=setTimeout(()=>{v(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(g),v(!0)})})})).apply(this,arguments)}const Qi={LOCAL:"local",NONE:"none",SESSION:"session"},sd=K,$c="persistence";function dp(v){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,l.Z)(function*(v){yield v._initializationPromise;const g=xm(),m=X($c,v.config.apiKey,v.name);g&&g.setItem(m,v._getPersistence())})).apply(this,arguments)}function xm(){var v;try{return(null===(v=function ov(){return"undefined"!=typeof window?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch(g){return null}}const av=K;class Xs{constructor(){this.browserResolver=ie(class Jy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yn,this._completeRedirectFn=Mt,this._overrideRedirectResult=gh}_openPopup(g,m,E,M){var P=this;return(0,l.Z)(function*(){var Y;J(null===(Y=P.eventManagers[g._key()])||void 0===Y?void 0:Y.manager,"_initialize() not called before _openPopup()");const ge=is(g,m,E,je(),M);return function Qu(v,g,m,E=500,M=600){const P=Math.max((window.screen.availHeight-M)/2,0).toString(),Y=Math.max((window.screen.availWidth-E)/2,0).toString();let ge="";const Ge=Object.assign(Object.assign({},_h),{width:E.toString(),height:M.toString(),top:P,left:Y}),rt=(0,U.z$)().toLowerCase();m&&(ge=wn(rt)?"_blank":m),ht(rt)&&(g=g||"http://localhost",Ge.scrollbars="yes");const Tt=Object.entries(Ge).reduce((Pi,[_r,zl])=>`${Pi}${_r}=${zl},`,"");if(function js(v=(0,U.z$)()){var g;return Ln(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(rt)&&"_self"!==ge)return function Ky(v,g){const m=document.createElement("a");m.href=v,m.target=g;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(g||"",ge),new gm(null);const Et=window.open(g||"",ge,Tt);K(Et,v,"popup-blocked");try{Et.focus()}catch(Pi){}return new gm(Et)}(g,ge,tl())})()}_openRedirect(g,m,E,M){var P=this;return(0,l.Z)(function*(){return yield P._originValidation(g),function Ao(v){ei().location.href=v}(is(g,m,E,je(),M)),new Promise(()=>{})})()}_initialize(g){const m=g._key();if(this.eventManagers[m]){const{manager:M,promise:P}=this.eventManagers[m];return M?Promise.resolve(M):(J(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(g);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(g){var m=this;return(0,l.Z)(function*(){const E=yield function gE(v){return _a.apply(this,arguments)}(g),M=new Ro(g);return E.register("authEvent",P=>(K(null==P?void 0:P.authEvent,g,"invalid-auth-event"),{status:M.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[g._key()]={manager:M},m.iframes[g._key()]=E,M})()}_isIframeWebStorageSupported(g,m){this.iframes[g._key()].send(Ju,{type:Ju},M=>{var P;const Y=null===(P=null==M?void 0:M[0])||void 0===P?void 0:P[Ju];void 0!==Y&&m(!!Y),Le(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function cl(v){return ep.apply(this,arguments)}(g)),this.originValidationPromises[m]}get _shouldInitProactively(){return yo()||Ut()||Ln()}}),this.cordovaResolver=ie(class iv{constructor(){this._redirectPersistence=yn,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Mt,this._overrideRedirectResult=gh}_initialize(g){var m=this;return(0,l.Z)(function*(){const E=g._key();let M=m.eventManagers.get(E);return M||(M=new ap(g),m.eventManagers.set(E,M),m.attachCallbackListeners(g,M)),M})()}_openPopup(g){Le(g,"operation-not-supported-in-this-environment")}_openRedirect(g,m,E,M){var P=this;return(0,l.Z)(function*(){!function op(v){var g,m,E,M,P,Y,ge,Ge,rt,Tt;const Et=Qs();K("function"==typeof(null===(g=null==Et?void 0:Et.universalLinks)||void 0===g?void 0:g.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),K(void 0!==(null===(m=null==Et?void 0:Et.BuildInfo)||void 0===m?void 0:m.packageName),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),K("function"==typeof(null===(P=null===(M=null===(E=null==Et?void 0:Et.cordova)||void 0===E?void 0:E.plugins)||void 0===M?void 0:M.browsertab)||void 0===P?void 0:P.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(Ge=null===(ge=null===(Y=null==Et?void 0:Et.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ge?void 0:ge.browsertab)||void 0===Ge?void 0:Ge.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),K("function"==typeof(null===(Tt=null===(rt=null==Et?void 0:Et.cordova)||void 0===rt?void 0:rt.InAppBrowser)||void 0===Tt?void 0:Tt.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(g);const Y=yield P._initialize(g);yield Y.initialized(),Y.resetRedirect(),function ph(){Di.clear()}(),yield P._originValidation(g);const ge=function tv(v,g,m=null){return{type:g,eventId:m,urlResponse:null,sessionId:td(),postBody:null,tenantId:v.tenantId,error:we(v,"no-auth-event")}}(g,E,M);yield function Em(v,g){return Fr()._set(Zn(v),g)}(g,ge);const Ge=yield function Ch(v,g,m){return Js.apply(this,arguments)}(g,ge,m),rt=yield function vE(v){const{cordova:g}=Qs();return new Promise(m=>{g.plugins.browsertab.isAvailable(E=>{let M=null;E?g.plugins.browsertab.openUrl(v):M=g.InAppBrowser.open(v,function Yo(v=(0,U.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),m(M)})})}(Ge);return function sp(v,g,m){return Xu.apply(this,arguments)}(g,Y,rt)})()}_isIframeWebStorageSupported(g,m){throw new Error("Method not implemented.")}_originValidation(g){const m=g._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function yE(v){return ul.apply(this,arguments)}(g)),this.originValidationPromises[m]}attachCallbackListeners(g,m){const{universalLinks:E,handleOpenURL:M,BuildInfo:P}=Qs(),Y=setTimeout((0,l.Z)(function*(){yield Dh(g),m.onEvent(Dm())}),500),ge=function(){var Tt=(0,l.Z)(function*(Et){clearTimeout(Y);const Pi=yield Dh(g);let _r=null;Pi&&(null==Et?void 0:Et.url)&&(_r=function nv(v,g){var m,E;const M=function Ih(v){const g=ba(v),m=g.link?decodeURIComponent(g.link):void 0,E=ba(m).link,M=g.deep_link_id?decodeURIComponent(g.deep_link_id):void 0;return ba(M).link||M||E||m||v}(g);if(M.includes("/__/auth/callback")){const P=ba(M),Y=P.firebaseError?function Cm(v){try{return JSON.parse(v)}catch(g){return null}}(decodeURIComponent(P.firebaseError)):null,ge=null===(E=null===(m=null==Y?void 0:Y.code)||void 0===m?void 0:m.split("auth/"))||void 0===E?void 0:E[1],Ge=ge?we(ge):null;return Ge?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Ge,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:M,postBody:null}}return null}(Pi,Et.url)),m.onEvent(_r||Dm())});return function(Pi){return Tt.apply(this,arguments)}}();void 0!==E&&"function"==typeof E.subscribe&&E.subscribe(null,ge);const Ge=M,rt=`${P.packageName.toLowerCase()}://`;Qs().handleOpenURL=function(){var Tt=(0,l.Z)(function*(Et){if(Et.toLowerCase().startsWith(rt)&&ge({url:Et}),"function"==typeof Ge)try{Ge(Et)}catch(Pi){console.error(Pi)}});return function(Et){return Tt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=yn,this._completeRedirectFn=Mt,this._overrideRedirectResult=gh}_initialize(g){var m=this;return(0,l.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(g)})()}_openPopup(g,m,E,M){var P=this;return(0,l.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openPopup(g,m,E,M)})()}_openRedirect(g,m,E,M){var P=this;return(0,l.Z)(function*(){return yield P.selectUnderlyingResolver(),P.assertedUnderlyingResolver._openRedirect(g,m,E,M)})()}_isIframeWebStorageSupported(g,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(g,m)}_originValidation(g){return this.assertedUnderlyingResolver._originValidation(g)}get _shouldInitProactively(){return xh()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return av(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var g=this;return(0,l.Z)(function*(){if(g.underlyingResolver)return;const m=yield function Mh(){return Nh.apply(this,arguments)}();g.underlyingResolver=m?g.cordovaResolver:g.browserResolver})()}}function Mm(v){return v.unwrap()}function cv(v){return Nm(v)}function Nm(v){const{_tokenResponse:g}=v instanceof U.ZR?v.customData:v;if(!g)return null;if(!(v instanceof U.ZR)&&"temporaryProof"in g&&"phoneNumber"in g)return ol.credentialFromResult(v);const m=g.providerId;if(!m||"password"===m)return null;let E;switch(m){case"google.com":E=qd;break;case"facebook.com":E=za;break;case"github.com":E=Zf;break;case"twitter.com":E=Zd;break;default:const{oauthIdToken:M,oauthAccessToken:P,oauthTokenSecret:Y,pendingToken:ge,nonce:Ge}=g;return P||Y||M||ge?ge?m.startsWith("saml.")?Xo._create(m,ge):Hs._fromParams({providerId:m,signInMethod:m,pendingToken:ge,idToken:M,accessToken:P}):new ws(m).credential({idToken:M,accessToken:P,rawNonce:Ge}):null}return v instanceof U.ZR?E.credentialFromError(v):E.credentialFromResult(v)}function mr(v,g){return g.catch(m=>{throw m instanceof U.ZR&&function uv(v,g){var m,E;const M=null===(m=g.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===(null===(E=g)||void 0===E?void 0:E.code))g.resolver=new dv(v,function pi(v,g){var m;const E=(0,U.m9)(v),M=g;return K(g.customData.operationType,E,"argument-error"),K(null===(m=M.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),oa._fromError(E,M)}(v,g));else if(M){const P=Nm(g),Y=g;P&&(Y.credential=P,Y.tenantId=M.tenantId||void 0,Y.email=M.email||void 0,Y.phoneNumber=M.phoneNumber||void 0)}}(v,m),m}).then(m=>{const M=m.user;return{operationType:m.operationType,credential:cv(m),additionalUserInfo:Ti(m),user:wa.getOrCreate(M)}})}function fp(v,g){return pp.apply(this,arguments)}function pp(){return(pp=(0,l.Z)(function*(v,g){const m=yield g;return{verificationId:m.verificationId,confirm:E=>mr(v,m.confirm(E))}})).apply(this,arguments)}class dv{constructor(g,m){this.resolver=m,this.auth=function lv(v){return v.wrapped()}(g)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(g){return mr(Mm(this.auth),this.resolver.resolveSignIn(g))}}class wa{constructor(g){this._delegate=g,this.multiFactor=function lm(v){const g=(0,U.m9)(v);return Sc.has(g)||Sc.set(g,el._fromUser(g)),Sc.get(g)}(g)}static getOrCreate(g){return wa.USER_MAP.has(g)||wa.USER_MAP.set(g,new wa(g)),wa.USER_MAP.get(g)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(g){return this._delegate.getIdTokenResult(g)}getIdToken(g){return this._delegate.getIdToken(g)}linkAndRetrieveDataWithCredential(g){return this.linkWithCredential(g)}linkWithCredential(g){var m=this;return(0,l.Z)(function*(){return mr(m.auth,Ri(m._delegate,g))})()}linkWithPhoneNumber(g,m){var E=this;return(0,l.Z)(function*(){return fp(E.auth,function Hl(v,g,m){return uh.apply(this,arguments)}(E._delegate,g,m))})()}linkWithPopup(g){var m=this;return(0,l.Z)(function*(){return mr(m.auth,function Xf(v,g,m){return Nc.apply(this,arguments)}(m._delegate,g,Xs))})()}linkWithRedirect(g){var m=this;return(0,l.Z)(function*(){return yield dp(vt(m.auth)),function ee(v,g,m){return function oe(v,g,m){return Oe.apply(this,arguments)}(v,g,m)}(m._delegate,g,Xs)})()}reauthenticateAndRetrieveDataWithCredential(g){return this.reauthenticateWithCredential(g)}reauthenticateWithCredential(g){var m=this;return(0,l.Z)(function*(){return mr(m.auth,Gs(m._delegate,g))})()}reauthenticateWithPhoneNumber(g,m){return fp(this.auth,function Jf(v,g,m){return hr.apply(this,arguments)}(this._delegate,g,m))}reauthenticateWithPopup(g){return mr(this.auth,function Ys(v,g,m){return Ku.apply(this,arguments)}(this._delegate,g,Xs))}reauthenticateWithRedirect(g){var m=this;return(0,l.Z)(function*(){return yield dp(vt(m.auth)),function S(v,g,m){return function k(v,g,m){return j.apply(this,arguments)}(v,g,m)}(m._delegate,g,Xs)})()}sendEmailVerification(g){return function Jr(v,g){return Hu.apply(this,arguments)}(this._delegate,g)}unlink(g){var m=this;return(0,l.Z)(function*(){return yield function Kf(v,g){return Tn.apply(this,arguments)}(m._delegate,g),m})()}updateEmail(g){return function Qd(v,g){return Dc((0,U.m9)(v),g,null)}(this._delegate,g)}updatePassword(g){return function Jd(v,g){return Dc((0,U.m9)(v),null,g)}(this._delegate,g)}updatePhoneNumber(g){return function Zu(v,g){return pa.apply(this,arguments)}(this._delegate,g)}updateProfile(g){return function Cc(v,g){return Tc.apply(this,arguments)}(this._delegate,g)}verifyBeforeUpdateEmail(g,m){return function wc(v,g,m){return Ec.apply(this,arguments)}(this._delegate,g,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wa.USER_MAP=new WeakMap;const od=K;let gp=(()=>{class v{constructor(m,E){if(this.app=m,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:M}=m.options;od(M,"invalid-api-key",{appName:m.name}),od(M,"invalid-api-key",{appName:m.name});const P="undefined"!=typeof window?Xs:void 0;this._delegate=E.initialize({options:{persistence:Om(M,m.name),popupRedirectResolver:P}}),this._delegate._updateErrorMap(Ve),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wa.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,E){!function or(v,g,m){const E=vt(v);K(E._canInitEmulator,E,"emulator-config-failed"),K(/^https?:\/\//.test(g),E,"invalid-emulator-scheme");const M=!!(null==m?void 0:m.disableWarnings),P=ms(g),{host:Y,port:ge}=function oi(v){const g=ms(v),m=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",M=/^(\[[^\]]+\])(:|$)/.exec(E);if(M){const P=M[1];return{host:P,port:_s(E.substr(P.length+1))}}{const[P,Y]=E.split(":");return{host:P,port:_s(Y)}}}(g);E.config.emulator={url:`${P}//${Y}${null===ge?"":`:${ge}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:Y,port:ge,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:M})}),M||function kn(){function v(){const g=document.createElement("p"),m=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,m,E)}applyActionCode(m){return function Qa(v,g){return Pe.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return Yt(this._delegate,m)}confirmPasswordReset(m,E){return function yc(v,g,m){return Bu.apply(this,arguments)}(this._delegate,m,E)}createUserWithEmailAndPassword(m,E){var M=this;return(0,l.Z)(function*(){return mr(M._delegate,function ia(v,g,m){return kr.apply(this,arguments)}(M._delegate,m,E))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function bc(v,g){return Io.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function Yd(v,g){const m=gc.parseLink(g);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,l.Z)(function*(){od(cp(),m._delegate,"operation-not-supported-in-this-environment");const E=yield function Ye(v,g){return yt.apply(this,arguments)}(m._delegate,Xs);return E?mr(m._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function Sh(v,g){vt(v)._logFramework(g)}(this._delegate,m)}onAuthStateChanged(m,E,M){const{next:P,error:Y,complete:ge}=hv(m,E,M);return this._delegate.onAuthStateChanged(P,Y,ge)}onIdTokenChanged(m,E,M){const{next:P,error:Y,complete:ge}=hv(m,E,M);return this._delegate.onIdTokenChanged(P,Y,ge)}sendSignInLinkToEmail(m,E){return function Vu(v,g,m){return ju.apply(this,arguments)}(this._delegate,m,E)}sendPasswordResetEmail(m,E){return function Lu(v,g,m){return _c.apply(this,arguments)}(this._delegate,m,E||void 0)}setPersistence(m){var E=this;return(0,l.Z)(function*(){let M;switch(function up(v,g){sd(Object.values(Qi).includes(g),v,"invalid-persistence-type"),(0,U.b$)()?sd(g!==Qi.SESSION,v,"unsupported-persistence-type"):(0,U.UG)()?sd(g===Qi.NONE,v,"unsupported-persistence-type"):rd()?sd(g===Qi.NONE||g===Qi.LOCAL&&(0,U.hl)(),v,"unsupported-persistence-type"):sd(g===Qi.NONE||Ah(),v,"unsupported-persistence-type")}(E._delegate,m),m){case Qi.SESSION:M=yn;break;case Qi.LOCAL:M=(yield ie(ha)._isAvailable())?ha:Dn;break;case Qi.NONE:M=H;break;default:return Le("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(M)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return mr(this._delegate,function Kd(v){return ku.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return mr(this._delegate,Gn(this._delegate,m))}signInWithCustomToken(m){return mr(this._delegate,function Ya(v,g){return At.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,E){return mr(this._delegate,function Uu(v,g,m){return Gn((0,U.m9)(v),zd.credential(g,m))}(this._delegate,m,E))}signInWithEmailLink(m,E){return mr(this._delegate,function rm(v,g,m){return $s.apply(this,arguments)}(this._delegate,m,E))}signInWithPhoneNumber(m,E){return fp(this._delegate,function ni(v,g,m){return sl.apply(this,arguments)}(this._delegate,m,E))}signInWithPopup(m){var E=this;return(0,l.Z)(function*(){return od(cp(),E._delegate,"operation-not-supported-in-this-environment"),mr(E._delegate,function hh(v,g,m){return al.apply(this,arguments)}(E._delegate,m,Xs))})()}signInWithRedirect(m){var E=this;return(0,l.Z)(function*(){return od(cp(),E._delegate,"operation-not-supported-in-this-environment"),yield dp(E._delegate),function Pc(v,g,m){return function Is(v,g,m){return D.apply(this,arguments)}(v,g,m)}(E._delegate,m,Xs)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function Bn(v,g){return vc.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=Qi,v})();function hv(v,g,m){let E=v;"function"!=typeof v&&({next:E,error:g,complete:m}=v);const M=E;return{next:Y=>M(Y&&wa.getOrCreate(Y)),error:g,complete:m}}function Om(v,g){const m=function hp(v,g){const m=xm();if(!m)return[];const E=X($c,v,g);switch(m.getItem(E)){case Qi.NONE:return[H];case Qi.LOCAL:return[ha,yn];case Qi.SESSION:return[yn];default:return[]}}(v,g);if("undefined"!=typeof self&&!m.includes(ha)&&m.push(ha),"undefined"!=typeof window)for(const E of[Dn,yn])m.includes(E)||m.push(E);return m.includes(H)||m.push(H),m}class Ea{constructor(){this.providerId="phone",this._delegate=new ol(Mm(ne.Z.auth()))}static credential(g,m){return ol.credential(g,m)}verifyPhoneNumber(g,m){return this._delegate.verifyPhoneNumber(g,m)}unwrap(){return this._delegate}}Ea.PHONE_SIGN_IN_METHOD=ol.PHONE_SIGN_IN_METHOD,Ea.PROVIDER_ID=ol.PROVIDER_ID;const eo=K;class fv{constructor(g,m,E=ne.Z.app()){var M;eo(null===(M=E.options)||void 0===M?void 0:M.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Qf(g,m,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function km(v){v.INTERNAL.registerComponent(new ce.wA("auth-compat",g=>{const m=g.getProvider("app-compat").getImmediate(),E=g.getProvider("auth");return new gp(m,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:zd,FacebookAuthProvider:za,GithubAuthProvider:Zf,GoogleAuthProvider:qd,OAuthProvider:ws,SAMLAuthProvider:ar,PhoneAuthProvider:Ea,PhoneMultiFactorGenerator:_E,RecaptchaVerifier:fv,TwitterAuthProvider:Zd,Auth:gp,AuthCredential:Yr,Error:U.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.2.24")}(ne.Z)},8306:(lt,Te,B)=>{B.d(Te,{y:()=>$});var l=B(930),ne=B(727),U=B(8822),de=B(4671);var ce=B(2416),he=B(576),_e=B(2806);let $=(()=>{class Re{constructor(Ze){Ze&&(this._subscribe=Ze)}lift(Ze){const ye=new Re;return ye.source=this,ye.operator=Ze,ye}subscribe(Ze,ye,xe){const Je=function ze(Re){return Re&&Re instanceof l.Lv||function re(Re){return Re&&(0,he.m)(Re.next)&&(0,he.m)(Re.error)&&(0,he.m)(Re.complete)}(Re)&&(0,ne.Nn)(Re)}(Ze)?Ze:new l.Hp(Ze,ye,xe);return(0,_e.x)(()=>{const{operator:st,source:Le}=this;Je.add(st?st.call(Je,Le):Le?this._subscribe(Je):this._trySubscribe(Je))}),Je}_trySubscribe(Ze){try{return this._subscribe(Ze)}catch(ye){Ze.error(ye)}}forEach(Ze,ye){return new(ye=W(ye))((xe,Je)=>{const st=new l.Hp({next:Le=>{try{Ze(Le)}catch(we){Je(we),st.unsubscribe()}},error:Je,complete:xe});this.subscribe(st)})}_subscribe(Ze){var ye;return null===(ye=this.source)||void 0===ye?void 0:ye.subscribe(Ze)}[U.L](){return this}pipe(...Ze){return function ve(Re){return 0===Re.length?de.y:1===Re.length?Re[0]:function(Ze){return Re.reduce((ye,xe)=>xe(ye),Ze)}}(Ze)(this)}toPromise(Ze){return new(Ze=W(Ze))((ye,xe)=>{let Je;this.subscribe(st=>Je=st,st=>xe(st),()=>ye(Je))})}}return Re.create=Ve=>new Re(Ve),Re})();function W(Re){var Ve;return null!==(Ve=null!=Re?Re:ce.v.Promise)&&void 0!==Ve?Ve:Promise}},7579:(lt,Te,B)=>{B.d(Te,{x:()=>ce});var l=B(8306),ne=B(727);const de=(0,B(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var le=B(8737),ve=B(2806);let ce=(()=>{class _e extends l.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(W){const re=new he(this,this);return re.operator=W,re}_throwIfClosed(){if(this.closed)throw new de}next(W){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const re of this.currentObservers)re.next(W)}})}error(W){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=W;const{observers:re}=this;for(;re.length;)re.shift().error(W)}})}complete(){(0,ve.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:W}=this;for(;W.length;)W.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var W;return(null===(W=this.observers)||void 0===W?void 0:W.length)>0}_trySubscribe(W){return this._throwIfClosed(),super._trySubscribe(W)}_subscribe(W){return this._throwIfClosed(),this._checkFinalizedStatuses(W),this._innerSubscribe(W)}_innerSubscribe(W){const{hasError:re,isStopped:ze,observers:Re}=this;return re||ze?ne.Lc:(this.currentObservers=null,Re.push(W),new ne.w0(()=>{this.currentObservers=null,(0,le.P)(Re,W)}))}_checkFinalizedStatuses(W){const{hasError:re,thrownError:ze,isStopped:Re}=this;re?W.error(ze):Re&&W.complete()}asObservable(){const W=new l.y;return W.source=this,W}}return _e.create=($,W)=>new he($,W),_e})();class he extends ce{constructor($,W){super(),this.destination=$,this.source=W}next($){var W,re;null===(re=null===(W=this.destination)||void 0===W?void 0:W.next)||void 0===re||re.call(W,$)}error($){var W,re;null===(re=null===(W=this.destination)||void 0===W?void 0:W.error)||void 0===re||re.call(W,$)}complete(){var $,W;null===(W=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===W||W.call($)}_subscribe($){var W,re;return null!==(re=null===(W=this.source)||void 0===W?void 0:W.subscribe($))&&void 0!==re?re:ne.Lc}}},930:(lt,Te,B)=>{B.d(Te,{Hp:()=>Ze,Lv:()=>re});var l=B(576),ne=B(727),U=B(2416),de=B(7849),le=B(5032);const ve=_e("C",void 0,void 0);function _e(Le,we,Me){return{kind:Le,value:we,error:Me}}var $=B(3410),W=B(2806);class re extends ne.w0{constructor(we){super(),this.isStopped=!1,we?(this.destination=we,(0,ne.Nn)(we)&&we.add(this)):this.destination=st}static create(we,Me,qe){return new Ze(we,Me,qe)}next(we){this.isStopped?Je(function he(Le){return _e("N",Le,void 0)}(we),this):this._next(we)}error(we){this.isStopped?Je(function ce(Le){return _e("E",void 0,Le)}(we),this):(this.isStopped=!0,this._error(we))}complete(){this.isStopped?Je(ve,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(we){this.destination.next(we)}_error(we){try{this.destination.error(we)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function Re(Le,we){return ze.call(Le,we)}class Ve{constructor(we){this.partialObserver=we}next(we){const{partialObserver:Me}=this;if(Me.next)try{Me.next(we)}catch(qe){ye(qe)}}error(we){const{partialObserver:Me}=this;if(Me.error)try{Me.error(we)}catch(qe){ye(qe)}else ye(we)}complete(){const{partialObserver:we}=this;if(we.complete)try{we.complete()}catch(Me){ye(Me)}}}class Ze extends re{constructor(we,Me,qe){let Ke;if(super(),(0,l.m)(we)||!we)Ke={next:null!=we?we:void 0,error:null!=Me?Me:void 0,complete:null!=qe?qe:void 0};else{let K;this&&U.v.useDeprecatedNextContext?(K=Object.create(we),K.unsubscribe=()=>this.unsubscribe(),Ke={next:we.next&&Re(we.next,K),error:we.error&&Re(we.error,K),complete:we.complete&&Re(we.complete,K)}):Ke=we}this.destination=new Ve(Ke)}}function ye(Le){U.v.useDeprecatedSynchronousErrorHandling?(0,W.O)(Le):(0,de.h)(Le)}function Je(Le,we){const{onStoppedNotification:Me}=U.v;Me&&$.z.setTimeout(()=>Me(Le,we))}const st={closed:!0,next:le.Z,error:function xe(Le){throw Le},complete:le.Z}},727:(lt,Te,B)=>{B.d(Te,{Lc:()=>ve,w0:()=>le,Nn:()=>ce});var l=B(576);const U=(0,B(3888).d)(_e=>function(W){_e(this),this.message=W?`${W.length} errors occurred during unsubscription:\n${W.map((re,ze)=>`${ze+1}) ${re.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=W});var de=B(8737);class le{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:W}=this;if(W)if(this._parentage=null,Array.isArray(W))for(const Re of W)Re.remove(this);else W.remove(this);const{initialTeardown:re}=this;if((0,l.m)(re))try{re()}catch(Re){$=Re instanceof U?Re.errors:[Re]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const Re of ze)try{he(Re)}catch(Ve){$=null!=$?$:[],Ve instanceof U?$=[...$,...Ve.errors]:$.push(Ve)}}if($)throw new U($)}}add($){var W;if($&&$!==this)if(this.closed)he($);else{if($ instanceof le){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(W=this._finalizers)&&void 0!==W?W:[]).push($)}}_hasParent($){const{_parentage:W}=this;return W===$||Array.isArray(W)&&W.includes($)}_addParent($){const{_parentage:W}=this;this._parentage=Array.isArray(W)?(W.push($),W):W?[W,$]:$}_removeParent($){const{_parentage:W}=this;W===$?this._parentage=null:Array.isArray(W)&&(0,de.P)(W,$)}remove($){const{_finalizers:W}=this;W&&(0,de.P)(W,$),$ instanceof le&&$._removeParent(this)}}le.EMPTY=(()=>{const _e=new le;return _e.closed=!0,_e})();const ve=le.EMPTY;function ce(_e){return _e instanceof le||_e&&"closed"in _e&&(0,l.m)(_e.remove)&&(0,l.m)(_e.add)&&(0,l.m)(_e.unsubscribe)}function he(_e){(0,l.m)(_e)?_e():_e.unsubscribe()}},2416:(lt,Te,B)=>{B.d(Te,{v:()=>l});const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(lt,Te,B)=>{B.d(Te,{E:()=>ne});const ne=new(B(8306).y)(le=>le.complete())},8996:(lt,Te,B)=>{B.d(Te,{D:()=>we});var l=B(8421),ne=B(5363),U=B(9468),ve=B(8306),he=B(2202),_e=B(576),$=B(9672);function re(Me,qe){if(!Me)throw new Error("Iterable cannot be null");return new ve.y(Ke=>{(0,$.f)(Ke,qe,()=>{const K=Me[Symbol.asyncIterator]();(0,$.f)(Ke,qe,()=>{K.next().then(De=>{De.done?Ke.complete():Ke.next(De.value)})},0,!0)})})}var ze=B(3670),Re=B(8239),Ve=B(1144),Ze=B(6495),ye=B(2206),xe=B(4532),Je=B(3260);function we(Me,qe){return qe?function Le(Me,qe){if(null!=Me){if((0,ze.c)(Me))return function de(Me,qe){return(0,l.Xf)(Me).pipe((0,U.R)(qe),(0,ne.Q)(qe))}(Me,qe);if((0,Ve.z)(Me))return function ce(Me,qe){return new ve.y(Ke=>{let K=0;return qe.schedule(function(){K===Me.length?Ke.complete():(Ke.next(Me[K++]),Ke.closed||this.schedule())})})}(Me,qe);if((0,Re.t)(Me))return function le(Me,qe){return(0,l.Xf)(Me).pipe((0,U.R)(qe),(0,ne.Q)(qe))}(Me,qe);if((0,ye.D)(Me))return re(Me,qe);if((0,Ze.T)(Me))return function W(Me,qe){return new ve.y(Ke=>{let K;return(0,$.f)(Ke,qe,()=>{K=Me[he.h](),(0,$.f)(Ke,qe,()=>{let De,J;try{({value:De,done:J}=K.next())}catch(se){return void Ke.error(se)}J?Ke.complete():Ke.next(De)},0,!0)}),()=>(0,_e.m)(null==K?void 0:K.return)&&K.return()})}(Me,qe);if((0,Je.L)(Me))return function st(Me,qe){return re((0,Je.Q)(Me),qe)}(Me,qe)}throw(0,xe.z)(Me)}(Me,qe):(0,l.Xf)(Me)}},8421:(lt,Te,B)=>{B.d(Te,{Xf:()=>ze});var l=B(655),ne=B(1144),U=B(8239),de=B(8306),le=B(3670),ve=B(2206),ce=B(4532),he=B(6495),_e=B(3260),$=B(576),W=B(7849),re=B(8822);function ze(Le){if(Le instanceof de.y)return Le;if(null!=Le){if((0,le.c)(Le))return function Re(Le){return new de.y(we=>{const Me=Le[re.L]();if((0,$.m)(Me.subscribe))return Me.subscribe(we);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,ne.z)(Le))return function Ve(Le){return new de.y(we=>{for(let Me=0;Me<Le.length&&!we.closed;Me++)we.next(Le[Me]);we.complete()})}(Le);if((0,U.t)(Le))return function Ze(Le){return new de.y(we=>{Le.then(Me=>{we.closed||(we.next(Me),we.complete())},Me=>we.error(Me)).then(null,W.h)})}(Le);if((0,ve.D)(Le))return xe(Le);if((0,he.T)(Le))return function ye(Le){return new de.y(we=>{for(const Me of Le)if(we.next(Me),we.closed)return;we.complete()})}(Le);if((0,_e.L)(Le))return function Je(Le){return xe((0,_e.Q)(Le))}(Le)}throw(0,ce.z)(Le)}function xe(Le){return new de.y(we=>{(function st(Le,we){var Me,qe,Ke,K;return(0,l.mG)(this,void 0,void 0,function*(){try{for(Me=(0,l.KL)(Le);!(qe=yield Me.next()).done;)if(we.next(qe.value),we.closed)return}catch(De){Ke={error:De}}finally{try{qe&&!qe.done&&(K=Me.return)&&(yield K.call(Me))}finally{if(Ke)throw Ke.error}}we.complete()})})(Le,we).catch(Me=>we.error(Me))})}},6451:(lt,Te,B)=>{B.d(Te,{T:()=>ve});var l=B(8189),ne=B(8421),U=B(515),de=B(3269),le=B(8996);function ve(...ce){const he=(0,de.yG)(ce),_e=(0,de._6)(ce,1/0),$=ce;return $.length?1===$.length?(0,ne.Xf)($[0]):(0,l.J)(_e)((0,le.D)($,he)):U.E}},5403:(lt,Te,B)=>{B.d(Te,{x:()=>ne});var l=B(930);function ne(de,le,ve,ce,he){return new U(de,le,ve,ce,he)}class U extends l.Lv{constructor(le,ve,ce,he,_e,$){super(le),this.onFinalize=_e,this.shouldUnsubscribe=$,this._next=ve?function(W){try{ve(W)}catch(re){le.error(re)}}:super._next,this._error=he?function(W){try{he(W)}catch(re){le.error(re)}finally{this.unsubscribe()}}:super._error,this._complete=ce?function(){try{ce()}catch(W){le.error(W)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var le;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ve}=this;super.unsubscribe(),!ve&&(null===(le=this.onFinalize)||void 0===le||le.call(this))}}}},4004:(lt,Te,B)=>{B.d(Te,{U:()=>U});var l=B(4482),ne=B(5403);function U(de,le){return(0,l.e)((ve,ce)=>{let he=0;ve.subscribe((0,ne.x)(ce,_e=>{ce.next(de.call(le,_e,he++))}))})}},8189:(lt,Te,B)=>{B.d(Te,{J:()=>U});var l=B(5577),ne=B(4671);function U(de=1/0){return(0,l.z)(ne.y,de)}},5577:(lt,Te,B)=>{B.d(Te,{z:()=>he});var l=B(4004),ne=B(8421),U=B(4482),de=B(9672),le=B(5403),ce=B(576);function he(_e,$,W=1/0){return(0,ce.m)($)?he((re,ze)=>(0,l.U)((Re,Ve)=>$(re,Re,ze,Ve))((0,ne.Xf)(_e(re,ze))),W):("number"==typeof $&&(W=$),(0,U.e)((re,ze)=>function ve(_e,$,W,re,ze,Re,Ve,Ze){const ye=[];let xe=0,Je=0,st=!1;const Le=()=>{st&&!ye.length&&!xe&&$.complete()},we=qe=>xe<re?Me(qe):ye.push(qe),Me=qe=>{Re&&$.next(qe),xe++;let Ke=!1;(0,ne.Xf)(W(qe,Je++)).subscribe((0,le.x)($,K=>{null==ze||ze(K),Re?we(K):$.next(K)},()=>{Ke=!0},void 0,()=>{if(Ke)try{for(xe--;ye.length&&xe<re;){const K=ye.shift();Ve?(0,de.f)($,Ve,()=>Me(K)):Me(K)}Le()}catch(K){$.error(K)}}))};return _e.subscribe((0,le.x)($,we,()=>{st=!0,Le()})),()=>{null==Ze||Ze()}}(re,ze,_e,W)))}},5363:(lt,Te,B)=>{B.d(Te,{Q:()=>de});var l=B(9672),ne=B(4482),U=B(5403);function de(le,ve=0){return(0,ne.e)((ce,he)=>{ce.subscribe((0,U.x)(he,_e=>(0,l.f)(he,le,()=>he.next(_e),ve),()=>(0,l.f)(he,le,()=>he.complete(),ve),_e=>(0,l.f)(he,le,()=>he.error(_e),ve)))})}},3099:(lt,Te,B)=>{B.d(Te,{B:()=>le});var l=B(8421),ne=B(7579),U=B(930),de=B(4482);function le(ce={}){const{connector:he=(()=>new ne.x),resetOnError:_e=!0,resetOnComplete:$=!0,resetOnRefCountZero:W=!0}=ce;return re=>{let ze,Re,Ve,Ze=0,ye=!1,xe=!1;const Je=()=>{null==Re||Re.unsubscribe(),Re=void 0},st=()=>{Je(),ze=Ve=void 0,ye=xe=!1},Le=()=>{const we=ze;st(),null==we||we.unsubscribe()};return(0,de.e)((we,Me)=>{Ze++,!xe&&!ye&&Je();const qe=Ve=null!=Ve?Ve:he();Me.add(()=>{Ze--,0===Ze&&!xe&&!ye&&(Re=ve(Le,W))}),qe.subscribe(Me),!ze&&Ze>0&&(ze=new U.Hp({next:Ke=>qe.next(Ke),error:Ke=>{xe=!0,Je(),Re=ve(st,_e,Ke),qe.error(Ke)},complete:()=>{ye=!0,Je(),Re=ve(st,$),qe.complete()}}),(0,l.Xf)(we).subscribe(ze))})(re)}}function ve(ce,he,..._e){if(!0===he)return void ce();if(!1===he)return;const $=new U.Hp({next:()=>{$.unsubscribe(),ce()}});return he(..._e).subscribe($)}},9468:(lt,Te,B)=>{B.d(Te,{R:()=>ne});var l=B(4482);function ne(U,de=0){return(0,l.e)((le,ve)=>{ve.add(U.schedule(()=>le.subscribe(ve),de))})}},8505:(lt,Te,B)=>{B.d(Te,{b:()=>le});var l=B(576),ne=B(4482),U=B(5403),de=B(4671);function le(ve,ce,he){const _e=(0,l.m)(ve)||ce||he?{next:ve,error:ce,complete:he}:ve;return _e?(0,ne.e)(($,W)=>{var re;null===(re=_e.subscribe)||void 0===re||re.call(_e);let ze=!0;$.subscribe((0,U.x)(W,Re=>{var Ve;null===(Ve=_e.next)||void 0===Ve||Ve.call(_e,Re),W.next(Re)},()=>{var Re;ze=!1,null===(Re=_e.complete)||void 0===Re||Re.call(_e),W.complete()},Re=>{var Ve;ze=!1,null===(Ve=_e.error)||void 0===Ve||Ve.call(_e,Re),W.error(Re)},()=>{var Re,Ve;ze&&(null===(Re=_e.unsubscribe)||void 0===Re||Re.call(_e)),null===(Ve=_e.finalize)||void 0===Ve||Ve.call(_e)}))}):de.y}},4408:(lt,Te,B)=>{B.d(Te,{o:()=>le});var l=B(727);class ne extends l.w0{constructor(ce,he){super()}schedule(ce,he=0){return this}}const U={setInterval(ve,ce,...he){const{delegate:_e}=U;return(null==_e?void 0:_e.setInterval)?_e.setInterval(ve,ce,...he):setInterval(ve,ce,...he)},clearInterval(ve){const{delegate:ce}=U;return((null==ce?void 0:ce.clearInterval)||clearInterval)(ve)},delegate:void 0};var de=B(8737);class le extends ne{constructor(ce,he){super(ce,he),this.scheduler=ce,this.work=he,this.pending=!1}schedule(ce,he=0){var _e;if(this.closed)return this;this.state=ce;const $=this.id,W=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(W,$,he)),this.pending=!0,this.delay=he,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(W,this.id,he),this}requestAsyncId(ce,he,_e=0){return U.setInterval(ce.flush.bind(ce,this),_e)}recycleAsyncId(ce,he,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return he;null!=he&&U.clearInterval(he)}execute(ce,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(ce,he);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ce,he){let $,_e=!1;try{this.work(ce)}catch(W){_e=!0,$=W||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:ce,scheduler:he}=this,{actions:_e}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,de.P)(_e,this),null!=ce&&(this.id=this.recycleAsyncId(he,ce,null)),this.delay=null,super.unsubscribe()}}}},7565:(lt,Te,B)=>{B.d(Te,{v:()=>U});var l=B(6063);class ne{constructor(le,ve=ne.now){this.schedulerActionCtor=le,this.now=ve}schedule(le,ve=0,ce){return new this.schedulerActionCtor(this,le).schedule(ce,ve)}}ne.now=l.l.now;class U extends ne{constructor(le,ve=ne.now){super(le,ve),this.actions=[],this._active=!1}flush(le){const{actions:ve}=this;if(this._active)return void ve.push(le);let ce;this._active=!0;do{if(ce=le.execute(le.state,le.delay))break}while(le=ve.shift());if(this._active=!1,ce){for(;le=ve.shift();)le.unsubscribe();throw ce}}}},4986:(lt,Te,B)=>{B.d(Te,{P:()=>de,z:()=>U});var l=B(4408);const U=new(B(7565).v)(l.o),de=U},6063:(lt,Te,B)=>{B.d(Te,{l:()=>l});const l={now:()=>(l.delegate||Date).now(),delegate:void 0}},3410:(lt,Te,B)=>{B.d(Te,{z:()=>l});const l={setTimeout(ne,U,...de){const{delegate:le}=l;return(null==le?void 0:le.setTimeout)?le.setTimeout(ne,U,...de):setTimeout(ne,U,...de)},clearTimeout(ne){const{delegate:U}=l;return((null==U?void 0:U.clearTimeout)||clearTimeout)(ne)},delegate:void 0}},2202:(lt,Te,B)=>{B.d(Te,{h:()=>ne});const ne=function l(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(lt,Te,B)=>{B.d(Te,{L:()=>l});const l="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(lt,Te,B)=>{B.d(Te,{_6:()=>ve,jO:()=>de,yG:()=>le});var l=B(576),ne=B(3532);function U(ce){return ce[ce.length-1]}function de(ce){return(0,l.m)(U(ce))?ce.pop():void 0}function le(ce){return(0,ne.K)(U(ce))?ce.pop():void 0}function ve(ce,he){return"number"==typeof U(ce)?ce.pop():he}},8737:(lt,Te,B)=>{function l(ne,U){if(ne){const de=ne.indexOf(U);0<=de&&ne.splice(de,1)}}B.d(Te,{P:()=>l})},3888:(lt,Te,B)=>{function l(ne){const de=ne(le=>{Error.call(le),le.stack=(new Error).stack});return de.prototype=Object.create(Error.prototype),de.prototype.constructor=de,de}B.d(Te,{d:()=>l})},2806:(lt,Te,B)=>{B.d(Te,{O:()=>de,x:()=>U});var l=B(2416);let ne=null;function U(le){if(l.v.useDeprecatedSynchronousErrorHandling){const ve=!ne;if(ve&&(ne={errorThrown:!1,error:null}),le(),ve){const{errorThrown:ce,error:he}=ne;if(ne=null,ce)throw he}}else le()}function de(le){l.v.useDeprecatedSynchronousErrorHandling&&ne&&(ne.errorThrown=!0,ne.error=le)}},9672:(lt,Te,B)=>{function l(ne,U,de,le=0,ve=!1){const ce=U.schedule(function(){de(),ve?ne.add(this.schedule(null,le)):this.unsubscribe()},le);if(ne.add(ce),!ve)return ce}B.d(Te,{f:()=>l})},4671:(lt,Te,B)=>{function l(ne){return ne}B.d(Te,{y:()=>l})},1144:(lt,Te,B)=>{B.d(Te,{z:()=>l});const l=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},2206:(lt,Te,B)=>{B.d(Te,{D:()=>ne});var l=B(576);function ne(U){return Symbol.asyncIterator&&(0,l.m)(null==U?void 0:U[Symbol.asyncIterator])}},576:(lt,Te,B)=>{function l(ne){return"function"==typeof ne}B.d(Te,{m:()=>l})},3670:(lt,Te,B)=>{B.d(Te,{c:()=>U});var l=B(8822),ne=B(576);function U(de){return(0,ne.m)(de[l.L])}},6495:(lt,Te,B)=>{B.d(Te,{T:()=>U});var l=B(2202),ne=B(576);function U(de){return(0,ne.m)(null==de?void 0:de[l.h])}},8239:(lt,Te,B)=>{B.d(Te,{t:()=>ne});var l=B(576);function ne(U){return(0,l.m)(null==U?void 0:U.then)}},3260:(lt,Te,B)=>{B.d(Te,{L:()=>de,Q:()=>U});var l=B(655),ne=B(576);function U(le){return(0,l.FC)(this,arguments,function*(){const ce=le.getReader();try{for(;;){const{value:he,done:_e}=yield(0,l.qq)(ce.read());if(_e)return yield(0,l.qq)(void 0);yield yield(0,l.qq)(he)}}finally{ce.releaseLock()}})}function de(le){return(0,ne.m)(null==le?void 0:le.getReader)}},3532:(lt,Te,B)=>{B.d(Te,{K:()=>ne});var l=B(576);function ne(U){return U&&(0,l.m)(U.schedule)}},4482:(lt,Te,B)=>{B.d(Te,{A:()=>ne,e:()=>U});var l=B(576);function ne(de){return(0,l.m)(null==de?void 0:de.lift)}function U(de){return le=>{if(ne(le))return le.lift(function(ve){try{return de(ve,this)}catch(ce){this.error(ce)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(lt,Te,B)=>{function l(){}B.d(Te,{Z:()=>l})},7849:(lt,Te,B)=>{B.d(Te,{h:()=>U});var l=B(2416),ne=B(3410);function U(de){ne.z.setTimeout(()=>{const{onUnhandledError:le}=l.v;if(!le)throw de;le(de)})}},4532:(lt,Te,B)=>{function l(ne){return new TypeError(`You provided ${null!==ne&&"object"==typeof ne?"an invalid object":`'${ne}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}B.d(Te,{z:()=>l})},655:(lt,Te,B)=>{function de(J,se){var ie={};for(var be in J)Object.prototype.hasOwnProperty.call(J,be)&&se.indexOf(be)<0&&(ie[be]=J[be]);if(null!=J&&"function"==typeof Object.getOwnPropertySymbols){var fe=0;for(be=Object.getOwnPropertySymbols(J);fe<be.length;fe++)se.indexOf(be[fe])<0&&Object.prototype.propertyIsEnumerable.call(J,be[fe])&&(ie[be[fe]]=J[be[fe]])}return ie}function he(J,se,ie,be){return new(ie||(ie=Promise))(function(je,bt){function ln(pn){try{ot(be.next(pn))}catch(On){bt(On)}}function $t(pn){try{ot(be.throw(pn))}catch(On){bt(On)}}function ot(pn){pn.done?je(pn.value):function fe(je){return je instanceof ie?je:new ie(function(bt){bt(je)})}(pn.value).then(ln,$t)}ot((be=be.apply(J,se||[])).next())})}function ye(J){return this instanceof ye?(this.v=J,this):new ye(J)}function xe(J,se,ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,be=ie.apply(J,se||[]),je=[];return fe={},bt("next"),bt("throw"),bt("return"),fe[Symbol.asyncIterator]=function(){return this},fe;function bt(mn){be[mn]&&(fe[mn]=function(cn){return new Promise(function(nr,Xt){je.push([mn,cn,nr,Xt])>1||ln(mn,cn)})})}function ln(mn,cn){try{!function $t(mn){mn.value instanceof ye?Promise.resolve(mn.value.v).then(ot,pn):On(je[0][2],mn)}(be[mn](cn))}catch(nr){On(je[0][3],nr)}}function ot(mn){ln("next",mn)}function pn(mn){ln("throw",mn)}function On(mn,cn){mn(cn),je.shift(),je.length&&ln(je[0][0],je[0][1])}}function st(J){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ie,se=J[Symbol.asyncIterator];return se?se.call(J):(J=function re(J){var se="function"==typeof Symbol&&Symbol.iterator,ie=se&&J[se],be=0;if(ie)return ie.call(J);if(J&&"number"==typeof J.length)return{next:function(){return J&&be>=J.length&&(J=void 0),{value:J&&J[be++],done:!J}}};throw new TypeError(se?"Object is not iterable.":"Symbol.iterator is not defined.")}(J),ie={},be("next"),be("throw"),be("return"),ie[Symbol.asyncIterator]=function(){return this},ie);function be(je){ie[je]=J[je]&&function(bt){return new Promise(function(ln,$t){!function fe(je,bt,ln,$t){Promise.resolve($t).then(function(ot){je({value:ot,done:ln})},bt)}(ln,$t,(bt=J[je](bt)).done,bt.value)})}}}B.d(Te,{FC:()=>xe,KL:()=>st,_T:()=>de,mG:()=>he,qq:()=>ye})},5e3:(lt,Te,B)=>{B.d(Te,{$8M:()=>Dr,$Z:()=>iu,AFp:()=>_T,ALo:()=>U0,AaK:()=>he,AsE:()=>b0,BQk:()=>Xh,CHM:()=>na,CRH:()=>sM,CZH:()=>j_,CqO:()=>xa,EJc:()=>KL,EpF:()=>GC,F$t:()=>l0,F4k:()=>$C,FYo:()=>cu,FiY:()=>pt,G48:()=>RM,Gf:()=>iM,GfV:()=>P0,Gpc:()=>W,Hsn:()=>b_,Ikx:()=>w1,JOm:()=>g,LFG:()=>k,LSH:()=>ba,Lbi:()=>X0,MAs:()=>e0,MGl:()=>Vp,NdJ:()=>ef,O4$:()=>Wu,OlP:()=>Wn,Oqu:()=>v0,PXZ:()=>n2,Q2q:()=>Jl,Q6J:()=>ks,QGY:()=>Aa,Qsj:()=>fL,QtT:()=>M0,R0b:()=>vl,RDi:()=>Ru,Rgc:()=>Jp,SBq:()=>zp,SDv:()=>x_,Sil:()=>bT,Suo:()=>rM,TTD:()=>ws,TgZ:()=>gl,Tol:()=>MA,Udp:()=>g0,VKq:()=>Gx,VLi:()=>e2,W1O:()=>F_,WLB:()=>Y1,X6Q:()=>kM,XFs:()=>It,Xpm:()=>xt,Y36:()=>Ur,YKP:()=>jx,YNc:()=>Xv,Yjl:()=>wn,Yz7:()=>cn,ZZ4:()=>fb,_Bn:()=>Px,_UZ:()=>su,_Vd:()=>R_,_c5:()=>HM,_uU:()=>c1,aQg:()=>gf,c2e:()=>bM,cJS:()=>Xt,cg1:()=>w0,dDg:()=>SM,deG:()=>ah,dqk:()=>en,eFA:()=>xM,ekj:()=>m0,f3M:()=>ee,g9A:()=>G_,h0i:()=>Zp,hGG:()=>GM,hij:()=>E_,iGM:()=>nM,ifc:()=>on,ip1:()=>mT,kEZ:()=>$x,kL8:()=>C1,kYT:()=>ae,kcU:()=>sm,lG2:()=>Ut,lcZ:()=>eT,n5z:()=>Rn,oAB:()=>Ie,oxw:()=>qC,pQV:()=>M_,q4F:()=>Oa,qLn:()=>Xs,qOj:()=>EC,qZA:()=>_d,s9C:()=>c0,sBO:()=>u2,sIi:()=>hd,s_b:()=>H0,soG:()=>yT,tBr:()=>Pt,tb:()=>eb,tp0:()=>ci,uIk:()=>Kv,vHH:()=>Ve,vpe:()=>yl,wAp:()=>Nt,xp6:()=>ld,ynx:()=>ec,z2F:()=>AT,zSh:()=>s_,zs3:()=>Da});var l=B(7579),ne=B(727),U=B(8306),de=B(6451),le=B(3099);function ve(o){for(let a in o)if(o[a]===ve)return a;throw Error("Could not find renamed property on target object.")}function ce(o,a){for(const u in a)a.hasOwnProperty(u)&&!o.hasOwnProperty(u)&&(o[u]=a[u])}function he(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(he).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const u=a.indexOf("\n");return-1===u?a:a.substring(0,u)}function _e(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const $=ve({__forward_ref__:ve});function W(o){return o.__forward_ref__=W,o.toString=function(){return he(this())},o}function re(o){return ze(o)?o():o}function ze(o){return"function"==typeof o&&o.hasOwnProperty($)&&o.__forward_ref__===W}class Ve extends Error{constructor(a,u){super(function Ze(o,a){return`NG0${Math.abs(o)}${a?": "+a:""}`}(a,u)),this.code=a}}function ye(o){return"string"==typeof o?o:null==o?"":String(o)}function xe(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():ye(o)}function we(o,a){const u=a?` in ${a}`:"";throw new Ve(-201,`No provider for ${xe(o)} found${u}`)}function ot(o,a,u,h){throw new Error(`ASSERTION ERROR: ${o}`+(null==h?"":` [Expected=> ${u} ${h} ${a} <=Actual]`))}function cn(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function Xt(o){return{providers:o.providers||[],imports:o.imports||[]}}function Kt(o){return br(o,ps)||br(o,wr)}function br(o,a){return o.hasOwnProperty(a)?o[a]:null}function rr(o){return o&&(o.hasOwnProperty(Us)||o.hasOwnProperty(Kr))?o[Us]:null}const ps=ve({\u0275prov:ve}),Us=ve({\u0275inj:ve}),wr=ve({ngInjectableDef:ve}),Kr=ve({ngInjectorDef:ve});var It=(()=>((It=It||{})[It.Default=0]="Default",It[It.Host=1]="Host",It[It.Self=2]="Self",It[It.SkipSelf=4]="SkipSelf",It[It.Optional=8]="Optional",It))();let sr;function Ci(o){const a=sr;return sr=o,a}function mo(o,a,u){const h=Kt(o);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:u&It.Optional?null:void 0!==a?a:void we(he(o),"Injector")}function hi(o){return{toString:o}.toString()}var Qn=(()=>((Qn=Qn||{})[Qn.OnPush=0]="OnPush",Qn[Qn.Default=1]="Default",Qn))(),on=(()=>{return(o=on||(on={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",on;var o})();const _t="undefined"!=typeof globalThis&&globalThis,St="undefined"!=typeof window&&window,Gi="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,en=_t||"undefined"!=typeof global&&global||St||Gi,zi={},wt=[],Ko=ve({\u0275cmp:ve}),Wt=ve({\u0275dir:ve}),Vs=ve({\u0275pipe:ve}),at=ve({\u0275mod:ve}),Ne=ve({\u0275fac:ve}),et=ve({__NG_ELEMENT_ID__:ve});let Rt=0;function xt(o){return hi(()=>{const u={},h={type:o.type,providersResolver:null,decls:o.decls,vars:o.vars,factory:null,template:o.template||null,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:o.exportAs||null,onPush:o.changeDetection===Qn.OnPush,directiveDefs:null,pipeDefs:null,selectors:o.selectors||wt,viewQuery:o.viewQuery||null,features:o.features||null,data:o.data||{},encapsulation:o.encapsulation||on.Emulated,id:"c",styles:o.styles||wt,_:null,setInput:null,schemas:o.schemas||null,tView:null},p=o.directives,_=o.features,b=o.pipes;return h.id+=Rt++,h.inputs=ht(o.inputs,u),h.outputs=ht(o.outputs),_&&_.forEach(C=>C(h)),h.directiveDefs=p?()=>("function"==typeof p?p():p).map(z):null,h.pipeDefs=b?()=>("function"==typeof b?b():b).map(H):null,h})}function z(o){return un(o)||function _n(o){return o[Wt]||null}(o)}function H(o){return function fi(o){return o[Vs]||null}(o)}const X={};function Ie(o){return hi(()=>{const a={type:o.type,bootstrap:o.bootstrap||wt,declarations:o.declarations||wt,imports:o.imports||wt,exports:o.exports||wt,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null};return null!=o.id&&(X[o.id]=o.type),a})}function ae(o,a){return hi(()=>{const u=Ot(o,!0);u.declarations=a.declarations||wt,u.imports=a.imports||wt,u.exports=a.exports||wt})}function ht(o,a){if(null==o)return zi;const u={};for(const h in o)if(o.hasOwnProperty(h)){let p=o[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),u[p]=h,a&&(a[p]=_)}return u}const Ut=xt;function wn(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,onDestroy:o.type.prototype.ngOnDestroy||null}}function un(o){return o[Ko]||null}function Ot(o,a){const u=o[at]||null;if(!u&&!0===a)throw new Error(`Type ${he(o)} does not have '\u0275mod' property.`);return u}function Cr(o){return Array.isArray(o)&&"object"==typeof o[1]}function ys(o){return Array.isArray(o)&&!0===o[1]}function hc(o){return 0!=(8&o.flags)}function Ud(o){return 2==(2&o.flags)}function vs(o){return 1==(1&o.flags)}function bs(o){return null!==o.template}function Mu(o){return 0!=(512&o[2])}function Zi(o,a){return o.hasOwnProperty(Ne)?o[Ne]:null}class Jo{constructor(a,u,h){this.previousValue=a,this.currentValue=u,this.firstChange=h}isFirstChange(){return this.firstChange}}function ws(){return za}function za(o){return o.type.prototype.ngOnChanges&&(o.setInput=Zf),qd}function qd(){const o=Xo(this),a=null==o?void 0:o.current;if(a){const u=o.previous;if(u===zi)o.previous=a;else for(let h in a)u[h]=a[h];o.current=null,this.ngOnChanges(a)}}function Zf(o,a,u,h){const p=Xo(o)||function qa(o,a){return o[Ni]=a}(o,{previous:zi,current:null}),_=p.current||(p.current={}),b=p.previous,C=this.declaredInputs[u],I=b[C];_[C]=new Jo(I&&I.currentValue,a,b===zi),o[h]=a}ws.ngInherit=!0;const Ni="__ngSimpleChanges__";function Xo(o){return o[Ni]||null}let Ka;function Ru(o){Ka=o}function Es(){return void 0!==Ka?Ka:"undefined"!=typeof document?document:void 0}function Tn(o){return!!o.listen}const Ol={createRenderer:(o,a)=>Es()};function gn(o){for(;Array.isArray(o);)o=o[0];return o}function To(o,a){return gn(a[o])}function ki(o,a){return gn(a[o.index])}function Gn(o,a){return o.data[a]}function Cs(o,a){return o[a]}function Ri(o,a){const u=a[o];return Cr(u)?u:u[0]}function ta(o){return 4==(4&o[2])}function Gs(o){return 128==(128&o[2])}function Qr(o,a){return null==a?null:o[a]}function Ts(o){o[18]=0}function Ya(o,a){o[5]+=a;let u=o,h=o[3];for(;null!==h&&(1===a&&1===u[5]||-1===a&&0===u[5]);)h[5]+=a,u=h,h=h[3]}const At={lFrame:Xa(null),bindingsEnabled:!0};function yc(){return At.bindingsEnabled}function Pe(){return At.lFrame.lView}function Yt(){return At.lFrame.tView}function na(o){return At.lFrame.contextLView=o,o[8]}function Bn(){let o=vc();for(;null!==o&&64===o.type;)o=o.parent;return o}function vc(){return At.lFrame.currentTNode}function ia(){const o=At.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function kr(o,a){const u=At.lFrame;u.currentTNode=o,u.isParent=a}function Uu(){return At.lFrame.isParent}function Vu(){At.lFrame.isParent=!1}function Ki(){const o=At.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Rr(){return At.lFrame.bindingIndex}function Io(){return At.lFrame.bindingIndex++}function Jr(o){const a=At.lFrame,u=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,u}function wc(o){At.lFrame.inI18n=o}function Ec(o,a){const u=At.lFrame;u.bindingIndex=u.bindingRootIndex=o,Ja(a)}function Ja(o){At.lFrame.currentDirectiveIndex=o}function Tc(){return At.lFrame.currentQueryIndex}function Qd(o){At.lFrame.currentQueryIndex=o}function Jd(o){const a=o[1];return 2===a.type?a.declTNode:1===a.type?o[6]:null}function Dc(o,a,u){if(u&It.SkipSelf){let p=a,_=o;for(;!(p=p.parent,null!==p||u&It.Host||(p=Jd(_),null===p||(_=_[15],10&p.type))););if(null===p)return!1;a=p,o=_}const h=At.lFrame=Xd();return h.currentTNode=a,h.lView=o,!0}function ra(o){const a=Xd(),u=o[1];At.lFrame=a,a.currentTNode=u.firstChild,a.lView=o,a.tView=u,a.contextLView=o,a.bindingIndex=u.bindingStartIndex,a.inI18n=!1}function Xd(){const o=At.lFrame,a=null===o?null:o.child;return null===a?Xa(o):a}function Xa(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function eh(){const o=At.lFrame;return At.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Ic=eh;function Tr(){const o=eh();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Ti(){return At.lFrame.selectedIndex}function sa(o){At.lFrame.selectedIndex=o}function Xn(){const o=At.lFrame;return Gn(o.tView,o.selectedIndex)}function Wu(){At.lFrame.currentNamespace="svg"}function sm(){!function th(){At.lFrame.currentNamespace=null}()}function Fl(o,a){for(let u=a.directiveStart,h=a.directiveEnd;u<h;u++){const _=o.data[u].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:I,ngAfterViewChecked:N,ngOnDestroy:R}=_;b&&(o.contentHooks||(o.contentHooks=[])).push(-u,b),C&&((o.contentHooks||(o.contentHooks=[])).push(u,C),(o.contentCheckHooks||(o.contentCheckHooks=[])).push(u,C)),I&&(o.viewHooks||(o.viewHooks=[])).push(-u,I),N&&((o.viewHooks||(o.viewHooks=[])).push(u,N),(o.viewCheckHooks||(o.viewCheckHooks=[])).push(u,N)),null!=R&&(o.destroyHooks||(o.destroyHooks=[])).push(u,R)}}function Ws(o,a,u){nh(o,a,3,u)}function oa(o,a,u,h){(3&o[2])===u&&nh(o,a,u,h)}function pi(o,a){let u=o[2];(3&u)===a&&(u&=2047,u+=1,o[2]=u)}function nh(o,a,u,h){const _=null!=h?h:-1,b=a.length-1;let C=0;for(let I=void 0!==h?65535&o[18]:0;I<b;I++)if("number"==typeof a[I+1]){if(C=a[I],null!=h&&C>=h)break}else a[I]<0&&(o[18]+=65536),(C<_||-1==_)&&(am(o,u,a,I),o[18]=(4294901760&o[18])+I+2),I++}function am(o,a,u,h){const p=u[h]<0,_=u[h+1],C=o[p?-u[h]:u[h]];if(p){if(o[2]>>11<o[18]>>16&&(3&o[2])===a){o[2]+=2048;try{_.call(C)}finally{}}}else try{_.call(C)}finally{}}class el{constructor(a,u,h){this.factory=a,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=h}}function Dn(o,a,u){const h=Tn(o);let p=0;for(;p<u.length;){const _=u[p];if("number"==typeof _){if(0!==_)break;p++;const b=u[p++],C=u[p++],I=u[p++];h?o.setAttribute(a,C,I,b):a.setAttributeNS(b,C,I)}else{const b=_,C=u[++p];yn(b)?h&&o.setProperty(a,b,C):h?o.setAttribute(a,b,C):a.setAttribute(b,C),p++}}return p}function gi(o){return 3===o||4===o||6===o}function yn(o){return 64===o.charCodeAt(0)}function Ll(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let u=-1;for(let h=0;h<a.length;h++){const p=a[h];"number"==typeof p?u=p:0===u||ih(o,u,p,null,-1===u||2===u?a[++h]:null)}}return o}function ih(o,a,u,h,p){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const C=o[_++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=_-1;break}}}for(;_<o.length;){const C=o[_];if("number"==typeof C)break;if(C===u){if(null===h)return void(null!==p&&(o[_+1]=p));if(h===o[_+1])return void(o[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,u),null!==h&&o.splice(_++,0,h),null!==p&&o.splice(_++,0,p)}function tl(o){return-1!==o}function So(o){return 32767&o}function Ao(o,a){let u=function ei(o){return o>>16}(o),h=a;for(;u>0;)h=h[15],u--;return h}let Xr=!0;function ut(o){const a=Xr;return Xr=o,a}let Bl=0;function Ds(o,a){const u=qs(o,a);if(-1!==u)return u;const h=a[1];h.firstCreatePass&&(o.injectorIndex=a.length,nl(h.data,o),nl(a,null),nl(h.blueprint,null));const p=xo(o,a),_=o.injectorIndex;if(tl(p)){const b=So(p),C=Ao(p,a),I=C[1].data;for(let N=0;N<8;N++)a[_+N]=C[b+N]|I[b+N]}return a[_+8]=p,_}function nl(o,a){o.push(0,0,0,0,0,0,0,0,a)}function qs(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function xo(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let u=0,h=null,p=a;for(;null!==p;){const _=p[1],b=_.type;if(h=2===b?_.declTNode:1===b?p[6]:null,null===h)return-1;if(u++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|u<<16}return-1}function Yi(o,a,u){!function Un(o,a,u){let h;"string"==typeof u?h=u.charCodeAt(0)||0:u.hasOwnProperty(et)&&(h=u[et]),null==h&&(h=u[et]=Bl++);const p=255&h;a.data[o+(p>>5)]|=1<<p}(o,a,u)}function Ul(o,a,u){if(u&It.Optional)return o;we(a,"NodeInjector")}function ca(o,a,u,h){if(u&It.Optional&&void 0===h&&(h=null),0==(u&(It.Self|It.Host))){const p=o[9],_=Ci(void 0);try{return p?p.get(a,h,u&It.Optional):mo(a,h,u&It.Optional)}finally{Ci(_)}}return Ul(h,a,u)}function ua(o,a,u,h=It.Default,p){if(null!==o){const _=function ha(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(et)?o[et]:void 0;return"number"==typeof a?a>=0?255&a:da:a}(u);if("function"==typeof _){if(!Dc(a,o,h))return h&It.Host?Ul(p,u,h):ca(a,u,h,p);try{const b=_(h);if(null!=b||h&It.Optional)return b;we(u)}finally{Ic()}}else if("number"==typeof _){let b=null,C=qs(o,a),I=-1,N=h&It.Host?a[16][6]:null;for((-1===C||h&It.SkipSelf)&&(I=-1===C?xo(o,a):a[C+8],-1!==I&&zu(h,!1)?(b=a[1],C=So(I),a=Ao(I,a)):C=-1);-1!==C;){const R=a[1];if($n(_,C,R.data)){const V=es(C,a,u,b,h,N);if(V!==rl)return V}I=a[C+8],-1!==I&&zu(h,a[1].data[C+8]===N)&&$n(_,C,a)?(b=R,C=So(I),a=Ao(I,a)):C=-1}}}return ca(a,u,h,p)}const rl={};function da(){return new cr(Bn(),Pe())}function es(o,a,u,h,p,_){const b=a[1],C=b.data[o+8],R=Vl(C,b,u,null==h?Ud(C)&&Xr:h!=b&&0!=(3&C.type),p&It.Host&&_===C);return null!==R?lr(a,b,R,C):rl}function Vl(o,a,u,h,p){const _=o.providerIndexes,b=a.data,C=1048575&_,I=o.directiveStart,R=_>>20,q=p?C+R:o.directiveEnd;for(let te=h?C:C+R;te<q;te++){const Ce=b[te];if(te<I&&u===Ce||te>=I&&Ce.type===u)return te}if(p){const te=b[I];if(te&&bs(te)&&te.type===u)return I}return null}function lr(o,a,u,h){let p=o[u];const _=a.data;if(function Sc(o){return o instanceof el}(p)){const b=p;b.resolving&&function Je(o,a){const u=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new Ve(-200,`Circular dependency in DI detected for ${o}${u}`)}(xe(_[u]));const C=ut(b.canSeeViewProviders);b.resolving=!0;const I=b.injectImpl?Ci(b.injectImpl):null;Dc(o,h,It.Default);try{p=o[u]=b.factory(void 0,_,o,h),a.firstCreatePass&&u>=h.directiveStart&&function Zy(o,a,u){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=a.type.prototype;if(h){const b=za(a);(u.preOrderHooks||(u.preOrderHooks=[])).push(o,b),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,b)}p&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-o,p),_&&((u.preOrderHooks||(u.preOrderHooks=[])).push(o,_),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(o,_))}(u,_[u],a)}finally{null!==I&&Ci(I),ut(C),b.resolving=!1,Ic()}}return p}function $n(o,a,u){return!!(u[a+(o>>5)]&1<<o)}function zu(o,a){return!(o&It.Self||o&It.Host&&a)}class cr{constructor(a,u){this._tNode=a,this._lView=u}get(a,u,h){return ua(this._tNode,this._lView,a,h,u)}}function Rn(o){return hi(()=>{const a=o.prototype.constructor,u=a[Ne]||ai(a),h=Object.prototype;let p=Object.getPrototypeOf(o.prototype).constructor;for(;p&&p!==h;){const _=p[Ne]||ai(p);if(_&&_!==u)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function ai(o){return ze(o)?()=>{const a=ai(re(o));return a&&a()}:Zi(o)}function Dr(o){return function il(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const u=o.attrs;if(u){const h=u.length;let p=0;for(;p<h;){const _=u[p];if(gi(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof u[p];)p++;else{if(_===a)return u[p+1];p+=2}}}return null}(Bn(),o)}const Ir="__parameters__";function ts(o,a,u){return hi(()=>{const h=function ti(o){return function(...u){if(o){const h=o(...u);for(const p in h)this[p]=h[p]}}}(a);function p(..._){if(this instanceof p)return h.apply(this,_),this;const b=new p(..._);return C.annotation=b,C;function C(I,N,R){const V=I.hasOwnProperty(Ir)?I[Ir]:Object.defineProperty(I,Ir,{value:[]})[Ir];for(;V.length<=R;)V.push(null);return(V[R]=V[R]||[]).push(b),I}}return u&&(p.prototype=Object.create(u.prototype)),p.prototype.ngMetadataName=o,p.annotationCls=p,p})}class Wn{constructor(a,u){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=cn({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const ah=new Wn("AnalyzeForEntryComponents");function hr(o,a){void 0===a&&(a=o);for(let u=0;u<o.length;u++){let h=o[u];Array.isArray(h)?(a===o&&(a=o.slice(0,u)),hr(h,a)):a!==o&&a.push(h)}return a}function fr(o,a){o.forEach(u=>Array.isArray(u)?fr(u,a):a(u))}function Gl(o,a,u){a>=o.length?o.push(u):o.splice(a,0,u)}function Zu(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function pa(o,a){const u=[];for(let h=0;h<o;h++)u.push(a);return u}function mi(o,a,u){let h=ko(o,a);return h>=0?o[1|h]=u:(h=~h,function Mc(o,a,u,h){let p=o.length;if(p==a)o.push(u,h);else if(1===p)o.push(h,o[0]),o[0]=u;else{for(p--,o.push(o[p-1],o[p]);p>a;)o[p]=o[p-2],p--;o[a]=u,o[a+1]=h}}(o,h,a,u)),h}function Oo(o,a){const u=ko(o,a);if(u>=0)return o[1|u]}function ko(o,a){return function al(o,a,u){let h=0,p=o.length>>u;for(;p!==h;){const _=h+(p-h>>1),b=o[_<<u];if(a===b)return _<<u;b>a?p=_:h=_+1}return~(p<<u)}(o,a,1)}const pr={},ll="__NG_DI_FLAG__",Pr="ngTempTokenPath",gh=/\n/gm,Rc="__source",Pc=ve({provide:String,useValue:ve});let Is;function D(o){const a=Is;return Is=o,a}function S(o,a=It.Default){if(void 0===Is)throw new Ve(203,"");return null===Is?mo(o,void 0,a):Is.get(o,a&It.Optional?null:void 0,a)}function k(o,a=It.Default){return(function Hn(){return sr}()||S)(re(o),a)}const ee=k;function oe(o){const a=[];for(let u=0;u<o.length;u++){const h=re(o[u]);if(Array.isArray(h)){if(0===h.length)throw new Ve(900,"");let p,_=It.Default;for(let b=0;b<h.length;b++){const C=h[b],I=Ye(C);"number"==typeof I?-1===I?p=C.token:_|=I:p=C}a.push(k(p,_))}else a.push(k(h))}return a}function Oe(o,a){return o[ll]=a,o.prototype[ll]=a,o}function Ye(o){return o[ll]}const Pt=Oe(ts("Inject",o=>({token:o})),-1),pt=Oe(ts("Optional"),8),ci=Oe(ts("SkipSelf"),4);let Yu;function Uc(o){var a;return(null===(a=function mh(){if(void 0===Yu&&(Yu=null,en.trustedTypes))try{Yu=en.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch(o){}return Yu}())||void 0===a?void 0:a.createHTML(o))||o}class bh{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function is(o){return o instanceof bh?o.changingThisBreaksApplicationSecurity:o}class _m{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const u=(new window.DOMParser).parseFromString(Uc(a),"text/html").body;return null===u?this.inertDocumentHelper.getInertBodyElement(a):(u.removeChild(u.firstChild),u)}catch(u){return null}}}class ym{constructor(a){if(this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const u=this.inertDocument.createElement("html");this.inertDocument.appendChild(u);const h=this.inertDocument.createElement("body");u.appendChild(h)}}getInertBodyElement(a){const u=this.inertDocument.createElement("template");if("content"in u)return u.innerHTML=Uc(a),u;const h=this.inertDocument.createElement("body");return h.innerHTML=Uc(a),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(a){const u=a.attributes;for(let p=u.length-1;0<p;p--){const b=u.item(p).name;("xmlns:ns1"===b||0===b.indexOf("ns1:"))&&a.removeAttribute(b)}let h=a.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const Xy=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,ev=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function jc(o){return(o=String(o)).match(Xy)||o.match(ev)?o:"unsafe:"+o}function rp(o){return(o=String(o)).split(",").map(a=>jc(a.trim())).join(", ")}function va(o){const a={};for(const u of o.split(","))a[u]=!0;return a}function Qs(...o){const a={};for(const u of o)for(const h in u)u.hasOwnProperty(h)&&(a[h]=!0);return a}const bm=va("area,br,col,hr,img,wbr"),Ch=va("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Js=va("rp,rt"),sp=Qs(bm,Qs(Ch,va("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Qs(Js,va("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Qs(Js,Ch)),Xu=va("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),op=va("srcset"),wm=Qs(Xu,op,va("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),va("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Zn=(()=>((Zn=Zn||{})[Zn.NONE=0]="NONE",Zn[Zn.HTML=1]="HTML",Zn[Zn.STYLE=2]="STYLE",Zn[Zn.SCRIPT=3]="SCRIPT",Zn[Zn.URL=4]="URL",Zn[Zn.RESOURCE_URL=5]="RESOURCE_URL",Zn))();function ba(o){const a=function Fo(){const o=Pe();return o&&o[12]}();return a?a.sanitize(Zn.URL,o)||"":function ya(o,a){const u=function Ju(o){return o instanceof bh&&o.getTypeName()||null}(o);if(null!=u&&u!==a){if("ResourceURL"===u&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===a}(o,"URL")?is(o):jc(ye(o))}const Am="__ngContext__";function gr(o,a){o[Am]=a}function Ah(o){const a=function id(o){return o[Am]||null}(o);return a?Array.isArray(a)?a:a.lView:null}function hp(o){return o.ngOriginalError}function av(o,...a){o.error(...a)}class Xs{constructor(){this._console=console}handleError(a){const u=this._findOriginalError(a),h=function xm(o){return o&&o.ngErrorLogger||av}(a);h(this._console,"ERROR",a),u&&h(this._console,"ORIGINAL ERROR",u)}_findOriginalError(a){let u=a&&hp(a);for(;u&&hp(u);)u=hp(u);return u||null}}const cv=/^>|^->|<!--|-->|--!>|<!-$/g,uv=/(<|>)/;const od=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(en))();function eo(o){return o instanceof Function?o():o}var g=(()=>((g=g||{})[g.Important=1]="Important",g[g.DashCase=2]="DashCase",g))();let m;function E(o,a){return m(o,a)}function Y(o){const a=o[3];return ys(a)?a[3]:a}function rt(o){return Et(o[13])}function Tt(o){return Et(o[4])}function Et(o){for(;null!==o&&!ys(o);)o=o[4];return o}function _r(o,a,u,h,p){if(null!=h){let _,b=!1;ys(h)?_=h:Cr(h)&&(b=!0,h=h[0]);const C=gn(h);0===o&&null!==u?null==p?EE(a,u,C):qc(a,u,C,p||null,!0):1===o&&null!==u?qc(a,u,C,p||null,!0):2===o?xE(a,C,b):3===o&&a.destroyNode(C),null!=_&&function NE(o,a,u,h,p){const _=u[7];_!==gn(u)&&_r(a,o,h,_,p);for(let C=10;C<u.length;C++){const I=u[C];Fh(I[1],I,o,a,h,_)}}(a,o,_,u,p)}}function zl(o,a){return Tn(o)?o.createText(a):o.createTextNode(a)}function mp(o,a,u){Tn(o)?o.setValue(a,u):a.textContent=u}function _p(o,a){return o.createComment(function mr(o){return o.replace(cv,a=>a.replace(uv,"\u200b$1\u200b"))}(a))}function zn(o,a,u){if(Tn(o))return o.createElement(a,u);{const h=null!==u?function ku(o){const a=o.toLowerCase();return"svg"===a?"http://www.w3.org/2000/svg":"math"===a?"http://www.w3.org/1998/MathML/":null}(u):null;return null===h?o.createElement(a):o.createElementNS(h,a)}}function Fm(o,a){const u=o[9],h=u.indexOf(a),p=a[3];1024&a[2]&&(a[2]&=-1025,Ya(p,-1)),u.splice(h,1)}function Wc(o,a){if(o.length<=10)return;const u=10+a,h=o[u];if(h){const p=h[17];null!==p&&p!==o&&Fm(p,h),a>0&&(o[u-1][4]=h[4]);const _=Zu(o,10+a);!function Rm(o,a){Fh(o,a,a[11],2,null,null),a[0]=null,a[6]=null}(h[1],h);const b=_[19];null!==b&&b.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-129}return h}function Lm(o,a){if(!(256&a[2])){const u=a[11];Tn(u)&&u.destroyNode&&Fh(o,a,u,3,null,null),function Rh(o){let a=o[13];if(!a)return Bm(o[1],o);for(;a;){let u=null;if(Cr(a))u=a[13];else{const h=a[10];h&&(u=h)}if(!u){for(;a&&!a[4]&&a!==o;)Cr(a)&&Bm(a[1],a),a=a[3];null===a&&(a=o),Cr(a)&&Bm(a[1],a),u=a&&a[4]}a=u}}(a)}}function Bm(o,a){if(!(256&a[2])){a[2]&=-129,a[2]|=256,function pv(o,a){let u;if(null!=o&&null!=(u=o.destroyHooks))for(let h=0;h<u.length;h+=2){const p=a[u[h]];if(!(p instanceof el)){const _=u[h+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const C=p[_[b]],I=_[b+1];try{I.call(C)}finally{}}else try{_.call(p)}finally{}}}}(o,a),function wE(o,a){const u=o.cleanup,h=a[7];let p=-1;if(null!==u)for(let _=0;_<u.length-1;_+=2)if("string"==typeof u[_]){const b=u[_+1],C="function"==typeof b?b(a):gn(a[b]),I=h[p=u[_+2]],N=u[_+3];"boolean"==typeof N?C.removeEventListener(u[_],I,N):N>=0?h[p=N]():h[p=-N].unsubscribe(),_+=2}else{const b=h[p=u[_+1]];u[_].call(b)}if(null!==h){for(let _=p+1;_<h.length;_++)h[_]();a[7]=null}}(o,a),1===a[1].type&&Tn(a[11])&&a[11].destroy();const u=a[17];if(null!==u&&ys(a[3])){u!==a[3]&&Fm(u,a);const h=a[19];null!==h&&h.detachView(o)}}}function IS(o,a,u){return zc(o,a.parent,u)}function zc(o,a,u){let h=a;for(;null!==h&&40&h.type;)h=(a=h).parent;if(null===h)return u[0];if(2&h.flags){const p=o.data[h.directiveStart].encapsulation;if(p===on.None||p===on.Emulated)return null}return ki(h,u)}function qc(o,a,u,h,p){Tn(o)?o.insertBefore(a,u,h,p):a.insertBefore(u,h,p)}function EE(o,a,u){Tn(o)?o.appendChild(a,u):a.appendChild(u)}function CE(o,a,u,h,p){null!==h?qc(o,a,u,h,p):EE(o,a,u)}function Um(o,a){return Tn(o)?o.parentNode(a):a.parentNode}function DE(o,a,u){return IE(o,a,u)}function gv(o,a,u){return 40&o.type?ki(o,u):null}let mv,IE=gv;function SE(o,a){IE=o,mv=a}function Ph(o,a,u,h){const p=IS(o,h,a),_=a[11],C=DE(h.parent||a[6],h,a);if(null!=p)if(Array.isArray(u))for(let I=0;I<u.length;I++)CE(_,p,u[I],C,!1);else CE(_,p,u,C,!1);void 0!==mv&&mv(_,h,a,u,p)}function Vm(o,a){if(null!==a){const u=a.type;if(3&u)return ki(a,o);if(4&u)return jm(-1,o[a.index]);if(8&u){const h=a.child;if(null!==h)return Vm(o,h);{const p=o[a.index];return ys(p)?jm(-1,p):gn(p)}}if(32&u)return E(a,o)()||gn(o[a.index]);{const h=AE(o,a);return null!==h?Array.isArray(h)?h[0]:Vm(Y(o[16]),h):Vm(o,a.next)}}return null}function AE(o,a){return null!==a?o[16][6].projection[a.projection]:null}function jm(o,a){const u=10+o+1;if(u<a.length){const h=a[u],p=h[1].firstChild;if(null!==p)return Vm(h,p)}return a[7]}function xE(o,a,u){const h=Um(o,a);h&&function TE(o,a,u,h){Tn(o)?o.removeChild(a,u,h):a.removeChild(u)}(o,h,a,u)}function ME(o,a,u,h,p,_,b){for(;null!=u;){const C=h[u.index],I=u.type;if(b&&0===a&&(C&&gr(gn(C),h),u.flags|=4),64!=(64&u.flags))if(8&I)ME(o,a,u.child,h,p,_,!1),_r(a,o,p,C,_);else if(32&I){const N=E(u,h);let R;for(;R=N();)_r(a,o,p,R,_);_r(a,o,p,C,_)}else 16&I?_v(o,a,h,u,p,_):_r(a,o,p,C,_);u=b?u.projectionNext:u.next}}function Fh(o,a,u,h,p,_){ME(u,h,o.firstChild,a,p,_,!1)}function _v(o,a,u,h,p,_){const b=u[16],I=b[6].projection[h.projection];if(Array.isArray(I))for(let N=0;N<I.length;N++)_r(a,o,p,I[N],_);else ME(o,a,I,b[3],p,_,!0)}function OE(o,a,u){Tn(o)?o.setAttribute(a,"style",u):a.style.cssText=u}function yv(o,a,u){Tn(o)?""===u?o.removeAttribute(a,"class"):o.setAttribute(a,"class",u):a.className=u}function kE(o,a,u){let h=o.length;for(;;){const p=o.indexOf(a,u);if(-1===p)return p;if(0===p||o.charCodeAt(p-1)<=32){const _=a.length;if(p+_===h||o.charCodeAt(p+_)<=32)return p}u=p+1}}const vv="ng-template";function RE(o,a,u){let h=0;for(;h<o.length;){let p=o[h++];if(u&&"class"===p){if(p=o[h],-1!==kE(p.toLowerCase(),a,0))return!0}else if(1===p){for(;h<o.length&&"string"==typeof(p=o[h++]);)if(p.toLowerCase()===a)return!0;return!1}}return!1}function Zl(o){return 4===o.type&&o.value!==vv}function fF(o,a,u){return a===(4!==o.type||u?o.value:vv)}function AS(o,a,u){let h=4;const p=o.attrs||[],_=function xS(o){for(let a=0;a<o.length;a++)if(gi(o[a]))return a;return o.length}(p);let b=!1;for(let C=0;C<a.length;C++){const I=a[C];if("number"!=typeof I){if(!b)if(4&h){if(h=2|1&h,""!==I&&!fF(o,I,u)||""===I&&1===a.length){if(Ca(h))return!1;b=!0}}else{const N=8&h?I:a[++C];if(8&h&&null!==o.attrs){if(!RE(o.attrs,N,u)){if(Ca(h))return!1;b=!0}continue}const V=PE(8&h?"class":I,p,Zl(o),u);if(-1===V){if(Ca(h))return!1;b=!0;continue}if(""!==N){let q;q=V>_?"":p[V+1].toLowerCase();const te=8&h?q:null;if(te&&-1!==kE(te,N,0)||2&h&&N!==q){if(Ca(h))return!1;b=!0}}}}else{if(!b&&!Ca(h)&&!Ca(I))return!1;if(b&&Ca(I))continue;b=!1,h=I|1&h}}return Ca(h)||b}function Ca(o){return 0==(1&o)}function PE(o,a,u,h){if(null===a)return-1;let p=0;if(h||!u){let _=!1;for(;p<a.length;){const b=a[p];if(b===o)return p;if(3===b||6===b)_=!0;else{if(1===b||2===b){let C=a[++p];for(;"string"==typeof C;)C=a[++p];continue}if(4===b)break;if(0===b){p+=4;continue}}p+=_?1:2}return-1}return function yp(o,a){let u=o.indexOf(4);if(u>-1)for(u++;u<o.length;){const h=o[u];if("number"==typeof h)return-1;if(h===a)return u;u++}return-1}(a,o)}function bv(o,a,u=!1){for(let h=0;h<a.length;h++)if(AS(o,a[h],u))return!0;return!1}function Fi(o,a){e:for(let u=0;u<a.length;u++){const h=a[u];if(o.length===h.length){for(let p=0;p<o.length;p++)if(o[p]!==h[p])continue e;return!0}}return!1}function Hm(o,a){return o?":not("+a.trim()+")":a}function wv(o){let a=o[0],u=1,h=2,p="",_=!1;for(;u<o.length;){let b=o[u];if("string"==typeof b)if(2&h){const C=o[++u];p+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&h?p+="."+b:4&h&&(p+=" "+b);else""!==p&&!Ca(b)&&(a+=Hm(_,p),p=""),h=b,_=_||!Ca(h);u++}return""!==p&&(a+=Hm(_,p)),a}const jt={};function ld(o){Ev(Yt(),Pe(),Ti()+o,!1)}function Ev(o,a,u,h){if(!h)if(3==(3&a[2])){const _=o.preOrderCheckHooks;null!==_&&Ws(a,_,u)}else{const _=o.preOrderHooks;null!==_&&oa(a,_,0,u)}sa(u)}function $m(o,a){return o<<17|a<<2}function hl(o){return o>>17&32767}function BE(o){return 2|o}function Zc(o){return(131068&o)>>2}function UE(o,a){return-131069&o|a<<2}function VE(o){return 1|o}function WE(o,a){const u=o.contentQueries;if(null!==u)for(let h=0;h<u.length;h+=2){const p=u[h],_=u[h+1];if(-1!==_){const b=o.data[_];Qd(p),b.contentQueries(2,a[_],_)}}}function Vh(o,a,u,h,p,_,b,C,I,N){const R=a.blueprint.slice();return R[0]=p,R[2]=140|h,Ts(R),R[3]=R[15]=o,R[8]=u,R[10]=b||o&&o[10],R[11]=C||o&&o[11],R[12]=I||o&&o[12]||null,R[9]=N||o&&o[9]||null,R[6]=_,R[16]=2==a.type?o[16]:R,R}function jh(o,a,u,h,p){let _=o.data[a];if(null===_)_=Cp(o,a,u,h,p),function Hu(){return At.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=u,_.value=h,_.attrs=p;const b=ia();_.injectorIndex=null===b?-1:b.injectorIndex}return kr(_,!0),_}function Cp(o,a,u,h,p){const _=vc(),b=Uu(),I=o.data[a]=function DF(o,a,u,h,p,_){return{type:u,index:h,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,u,a,h,p);return null===o.firstChild&&(o.firstChild=I),null!==_&&(b?null==_.child&&null!==I.parent&&(_.child=I):null===_.next&&(_.next=I)),I}function Hh(o,a,u,h){if(0===u)return-1;const p=a.length;for(let _=0;_<u;_++)a.push(h),o.blueprint.push(h),o.data.push(null);return p}function Gh(o,a,u){ra(a);try{const h=o.viewQuery;null!==h&&cC(1,h,u);const p=o.template;null!==p&&qE(o,a,p,1,u),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&WE(o,a),o.staticViewQueries&&cC(2,o.viewQuery,u);const _=o.components;null!==_&&function zE(o,a){for(let u=0;u<a.length;u++)Pv(o,a[u])}(a,_)}catch(h){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),h}finally{a[2]&=-5,Tr()}}function Lo(o,a,u,h){const p=a[2];if(256!=(256&p)){ra(a);try{Ts(a),function bc(o){return At.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==u&&qE(o,a,u,2,h);const b=3==(3&p);if(b){const N=o.preOrderCheckHooks;null!==N&&Ws(a,N,null)}else{const N=o.preOrderHooks;null!==N&&oa(a,N,0,null),pi(a,0)}if(function SF(o){for(let a=rt(o);null!==a;a=Tt(a)){if(!a[2])continue;const u=a[9];for(let h=0;h<u.length;h++){const p=u[h],_=p[3];0==(1024&p[2])&&Ya(_,1),p[2]|=1024}}}(a),function IF(o){for(let a=rt(o);null!==a;a=Tt(a))for(let u=10;u<a.length;u++){const h=a[u],p=h[1];Gs(h)&&Lo(p,h,p.template,h[8])}}(a),null!==o.contentQueries&&WE(o,a),b){const N=o.contentCheckHooks;null!==N&&Ws(a,N)}else{const N=o.contentHooks;null!==N&&oa(a,N,1),pi(a,1)}!function Ym(o,a){const u=o.hostBindingOpCodes;if(null!==u)try{for(let h=0;h<u.length;h++){const p=u[h];if(p<0)sa(~p);else{const _=p,b=u[++h],C=u[++h];Ec(b,_),C(2,a[_])}}}finally{sa(-1)}}(o,a);const C=o.components;null!==C&&function VS(o,a){for(let u=0;u<a.length;u++)Dp(o,a[u])}(a,C);const I=o.viewQuery;if(null!==I&&cC(2,I,h),b){const N=o.viewCheckHooks;null!==N&&Ws(a,N)}else{const N=o.viewHooks;null!==N&&oa(a,N,2),pi(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[2]&=-73,1024&a[2]&&(a[2]&=-1025,Ya(a[3],-1))}finally{Tr()}}}function Bo(o,a,u,h){const p=a[10],b=ta(a);try{!b&&p.begin&&p.begin(),b&&Gh(o,a,h),Lo(o,a,u,h)}finally{!b&&p.end&&p.end()}}function qE(o,a,u,h,p){const _=Ti(),b=2&h;try{sa(-1),b&&a.length>20&&Ev(o,a,20,!1),u(h,p)}finally{sa(_)}}function Sv(o,a,u){if(hc(a)){const p=a.directiveEnd;for(let _=a.directiveStart;_<p;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,u[_],_)}}}function Av(o,a,u){!yc()||(function tC(o,a,u,h){const p=u.directiveStart,_=u.directiveEnd;o.firstCreatePass||Ds(u,a),gr(h,a);const b=u.initialInputs;for(let C=p;C<_;C++){const I=o.data[C],N=bs(I);N&&t_(a,u,I);const R=lr(a,o,C,u);gr(R,a),null!==b&&oC(0,C-p,R,I,0,b),N&&(Ri(u.index,a)[8]=R)}}(o,a,u,ki(u,a)),128==(128&u.flags)&&function nC(o,a,u){const h=u.directiveStart,p=u.directiveEnd,b=u.index,C=function Gu(){return At.lFrame.currentDirectiveIndex}();try{sa(b);for(let I=h;I<p;I++){const N=o.data[I],R=a[I];Ja(I),(null!==N.hostBindings||0!==N.hostVars||null!==N.hostAttrs)&&Jm(N,R)}}finally{sa(-1),Ja(C)}}(o,a,u))}function xv(o,a,u=ki){const h=a.localNames;if(null!==h){let p=a.index+1;for(let _=0;_<h.length;_+=2){const b=h[_+1],C=-1===b?u(a,o):o[b];o[p++]=C}}}function ZE(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=fl(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function fl(o,a,u,h,p,_,b,C,I,N){const R=20+h,V=R+p,q=function Yc(o,a){const u=[];for(let h=0;h<a;h++)u.push(h<o?null:jt);return u}(R,V),te="function"==typeof N?N():N;return q[1]={type:o,blueprint:q,template:u,queries:null,viewQuery:C,declTNode:a,data:q.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:I,consts:te,incompleteFirstPass:!1}}function KE(o,a,u,h){const p=dC(a);null===u?p.push(h):(p.push(u),o.firstCreatePass&&hC(o).push(h,p.length-1))}function Nv(o,a,u){for(let h in o)if(o.hasOwnProperty(h)){const p=o[h];(u=null===u?{}:u).hasOwnProperty(h)?u[h].push(a,p):u[h]=[a,p]}return u}function Ms(o,a,u,h,p,_,b,C){const I=ki(a,u);let R,N=a.inputs;!C&&null!=N&&(R=N[h])?($h(o,u,R,h,p),Ud(a)&&function JE(o,a){const u=Ri(a,o);16&u[2]||(u[2]|=64)}(u,a.index)):3&a.type&&(h=function QE(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(h),p=null!=b?b(p,a.value||"",h):p,Tn(_)?_.setProperty(I,h,p):yn(h)||(I.setProperty?I.setProperty(h,p):I[h]=p))}function Qm(o,a,u,h){let p=!1;if(yc()){const _=function iC(o,a,u){const h=o.directiveRegistry;let p=null;if(h)for(let _=0;_<h.length;_++){const b=h[_];bv(u,b.selectors,!1)&&(p||(p=[]),Yi(Ds(u,a),o,b.type),bs(b)?(Xm(o,u),p.unshift(b)):p.push(b))}return p}(o,a,u),b=null===h?null:{"":-1};if(null!==_){p=!0,kv(u,o.data.length,_.length);for(let R=0;R<_.length;R++){const V=_[R];V.providersResolver&&V.providersResolver(V)}let C=!1,I=!1,N=Hh(o,a,_.length,null);for(let R=0;R<_.length;R++){const V=_[R];u.mergedAttrs=Ll(u.mergedAttrs,V.hostAttrs),e_(o,u,a,N,V),sC(N,V,b),null!==V.contentQueries&&(u.flags|=8),(null!==V.hostBindings||null!==V.hostAttrs||0!==V.hostVars)&&(u.flags|=128);const q=V.type.prototype;!C&&(q.ngOnChanges||q.ngOnInit||q.ngDoCheck)&&((o.preOrderHooks||(o.preOrderHooks=[])).push(u.index),C=!0),!I&&(q.ngOnChanges||q.ngDoCheck)&&((o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(u.index),I=!0),N++}!function YE(o,a){const h=a.directiveEnd,p=o.data,_=a.attrs,b=[];let C=null,I=null;for(let N=a.directiveStart;N<h;N++){const R=p[N],V=R.inputs,q=null===_||Zl(a)?null:Qc(V,_);b.push(q),C=Nv(V,N,C),I=Nv(R.outputs,N,I)}null!==C&&(C.hasOwnProperty("class")&&(a.flags|=16),C.hasOwnProperty("style")&&(a.flags|=32)),a.initialInputs=b,a.inputs=C,a.outputs=I}(o,u)}b&&function rC(o,a,u){if(a){const h=o.localNames=[];for(let p=0;p<a.length;p+=2){const _=u[a[p+1]];if(null==_)throw new Ve(-301,!1);h.push(a[p],_)}}}(u,h,b)}return u.mergedAttrs=Ll(u.mergedAttrs,u.attrs),p}function Ov(o,a,u,h,p,_){const b=_.hostBindings;if(b){let C=o.hostBindingOpCodes;null===C&&(C=o.hostBindingOpCodes=[]);const I=~a.index;(function $S(o){let a=o.length;for(;a>0;){const u=o[--a];if("number"==typeof u&&u<0)return u}return 0})(C)!=I&&C.push(I),C.push(h,p,b)}}function Jm(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function Xm(o,a){a.flags|=2,(o.components||(o.components=[])).push(a.index)}function sC(o,a,u){if(u){if(a.exportAs)for(let h=0;h<a.exportAs.length;h++)u[a.exportAs[h]]=o;bs(a)&&(u[""]=o)}}function kv(o,a,u){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+u,o.providerIndexes=a}function e_(o,a,u,h,p){o.data[h]=p;const _=p.factory||(p.factory=Zi(p.type)),b=new el(_,bs(p),null);o.blueprint[h]=b,u[h]=b,Ov(o,a,0,h,Hh(o,u,p.hostVars,jt),p)}function t_(o,a,u){const h=ki(a,o),p=ZE(u),_=o[10],b=r_(o,Vh(o,p,null,u.onPush?64:16,h,a,_,_.createRenderer(h,u),null,null));o[a.index]=b}function Ta(o,a,u,h,p,_){const b=ki(o,a);n_(a[11],b,_,o.value,u,h,p)}function n_(o,a,u,h,p,_,b){if(null==_)Tn(o)?o.removeAttribute(a,p,u):a.removeAttribute(p);else{const C=null==b?ye(_):b(_,h||"",p);Tn(o)?o.setAttribute(a,p,C,u):u?a.setAttributeNS(u,p,C):a.setAttribute(p,C)}}function oC(o,a,u,h,p,_){const b=_[a];if(null!==b){const C=h.setInput;for(let I=0;I<b.length;){const N=b[I++],R=b[I++],V=b[I++];null!==C?h.setInput(u,V,N,R):u[R]=V}}}function Qc(o,a){let u=null,h=0;for(;h<a.length;){const p=a[h];if(0!==p)if(5!==p){if("number"==typeof p)break;o.hasOwnProperty(p)&&(null===u&&(u=[]),u.push(p,o[p],a[h+1])),h+=2}else h+=2;else h+=4}return u}function Rv(o,a,u,h){return new Array(o,!0,!1,a,null,0,h,u,null,null)}function Dp(o,a){const u=Ri(a,o);if(Gs(u)){const h=u[1];80&u[2]?Lo(h,u,h.template,u[8]):u[5]>0&&cd(u)}}function cd(o){for(let h=rt(o);null!==h;h=Tt(h))for(let p=10;p<h.length;p++){const _=h[p];if(1024&_[2]){const b=_[1];Lo(b,_,b.template,_[8])}else _[5]>0&&cd(_)}const u=o[1].components;if(null!==u)for(let h=0;h<u.length;h++){const p=Ri(u[h],o);Gs(p)&&p[5]>0&&cd(p)}}function Pv(o,a){const u=Ri(a,o),h=u[1];(function i_(o,a){for(let u=a.length;u<o.blueprint.length;u++)a.push(o.blueprint[u])})(h,u),Gh(h,u,u[8])}function r_(o,a){return o[13]?o[14][4]=a:o[13]=a,o[14]=a,a}function Ip(o){for(;o;){o[2]|=64;const a=Y(o);if(Mu(o)&&!a)return o;o=a}return null}function zS(o){!function aC(o){for(let a=0;a<o.components.length;a++){const u=o.components[a],h=Ah(u),p=h[1];Bo(p,h,p.template,u)}}(o[8])}function cC(o,a,u){Qd(0),a(o,u)}const uC=(()=>Promise.resolve(null))();function dC(o){return o[7]||(o[7]=[])}function hC(o){return o.cleanup||(o.cleanup=[])}function Sp(o,a){const u=o[9],h=u?u.get(Xs,null):null;h&&h.handleError(a)}function $h(o,a,u,h,p){for(let _=0;_<u.length;){const b=u[_++],C=u[_++],I=a[b],N=o.data[b];null!==N.setInput?N.setInput(I,p,h,C):I[C]=p}}function Uo(o,a,u){const h=To(a,o);mp(o[11],h,u)}function ud(o,a,u){let h=u?o.styles:null,p=u?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?_=C:1==_?p=_e(p,C):2==_&&(h=_e(h,C+": "+a[++b]+";"))}u?o.styles=h:o.stylesWithoutHost=h,u?o.classes=p:o.classesWithoutHost=p}const Bv=new Wn("INJECTOR",-1);class pC{get(a,u=pr){if(u===pr){const h=new Error(`NullInjectorError: No provider for ${he(a)}!`);throw h.name="NullInjectorError",h}return u}}const s_=new Wn("Set Injector scope."),Ap={},gC={};let Uv;function ZS(){return void 0===Uv&&(Uv=new pC),Uv}function mC(o,a=null,u=null,h){const p=Vv(o,a,u,h);return p._resolveInjectorDefTypes(),p}function Vv(o,a=null,u=null,h){return new xF(o,u,a||ZS(),h)}class xF{constructor(a,u,h,p=null){this.parent=h,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];u&&fr(u,C=>this.processProvider(C,a,u)),fr([a],C=>this.processInjectorType(C,[],_)),this.records.set(Bv,Jc(void 0,this));const b=this.records.get(s_);this.scope=null!=b?b.value:null,this.source=p||("object"==typeof a?null:he(a))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(a=>a.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(a,u=pr,h=It.Default){this.assertNotDestroyed();const p=D(this),_=Ci(void 0);try{if(!(h&It.SkipSelf)){let C=this.records.get(a);if(void 0===C){const I=function Hv(o){return"function"==typeof o||"object"==typeof o&&o instanceof Wn}(a)&&Kt(a);C=I&&this.injectableDefInScope(I)?Jc(xp(a),Ap):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(h&It.Self?ZS():this.parent).get(a,u=h&It.Optional&&u===pr?null:u)}catch(b){if("NullInjectorError"===b.name){if((b[Pr]=b[Pr]||[]).unshift(he(a)),p)throw b;return function yt(o,a,u,h){const p=o[Pr];throw a[Rc]&&p.unshift(a[Rc]),o.message=function Mt(o,a,u,h=null){o=o&&"\n"===o.charAt(0)&&"\u0275"==o.charAt(1)?o.substr(2):o;let p=he(a);if(Array.isArray(a))p=a.map(he).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];_.push(b+":"+("string"==typeof C?JSON.stringify(C):he(C)))}p=`{${_.join(", ")}}`}return`${u}${h?"("+h+")":""}[${p}]: ${o.replace(gh,"\n  ")}`}("\n"+o.message,p,u,h),o.ngTokenPath=p,o[Pr]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{Ci(_),D(p)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(a=>this.get(a))}toString(){const a=[];return this.records.forEach((h,p)=>a.push(he(p))),`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ve(205,!1)}processInjectorType(a,u,h){if(!(a=re(a)))return!1;let p=rr(a);const _=null==p&&a.ngModule||void 0,b=void 0===_?a:_,C=-1!==h.indexOf(b);if(void 0!==_&&(p=rr(_)),null==p)return!1;if(null!=p.imports&&!C){let R;h.push(b);try{fr(p.imports,V=>{this.processInjectorType(V,u,h)&&(void 0===R&&(R=[]),R.push(V))})}finally{}if(void 0!==R)for(let V=0;V<R.length;V++){const{ngModule:q,providers:te}=R[V];fr(te,Ce=>this.processProvider(Ce,q,te||wt))}}this.injectorDefTypes.add(b);const I=Zi(b)||(()=>new b);this.records.set(b,Jc(I,Ap));const N=p.providers;if(null!=N&&!C){const R=a;fr(N,V=>this.processProvider(V,R,N))}return void 0!==_&&void 0!==a.providers}processProvider(a,u,h){let p=Ql(a=re(a))?a:re(a&&a.provide);const _=function _C(o,a,u){return YS(o)?Jc(void 0,o.useValue):Jc(o_(o),Ap)}(a);if(Ql(a)||!0!==a.multi)this.records.get(p);else{let b=this.records.get(p);b||(b=Jc(void 0,Ap,!0),b.factory=()=>oe(b.multi),this.records.set(p,b)),p=a,b.multi.push(a)}this.records.set(p,_)}hydrate(a,u){return u.value===Ap&&(u.value=gC,u.value=u.factory()),"object"==typeof u.value&&u.value&&function QS(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(a){if(!a.providedIn)return!1;const u=re(a.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function xp(o){const a=Kt(o),u=null!==a?a.factory:Zi(o);if(null!==u)return u;if(o instanceof Wn)throw new Ve(204,!1);if(o instanceof Function)return function KS(o){const a=o.length;if(a>0)throw pa(a,"?"),new Ve(204,!1);const u=function fs(o){const a=o&&(o[ps]||o[wr]);if(a){const u=function ir(o){if(o.hasOwnProperty("name"))return o.name;const a=(""+o).match(/^function\s*([^\s(]+)/);return null===a?"":a[1]}(o);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),a}return null}(o);return null!==u?()=>u.factory(o):()=>new o}(o);throw new Ve(204,!1)}function o_(o,a,u){let h;if(Ql(o)){const p=re(o);return Zi(p)||xp(p)}if(YS(o))h=()=>re(o.useValue);else if(function Mp(o){return!(!o||!o.useFactory)}(o))h=()=>o.useFactory(...oe(o.deps||[]));else if(function jv(o){return!(!o||!o.useExisting)}(o))h=()=>k(re(o.useExisting));else{const p=re(o&&(o.useClass||o.provide));if(!function Np(o){return!!o.deps}(o))return Zi(p)||xp(p);h=()=>new p(...oe(o.deps))}return h}function Jc(o,a,u=!1){return{factory:o,value:a,multi:u?[]:void 0}}function YS(o){return null!==o&&"object"==typeof o&&Pc in o}function Ql(o){return"function"==typeof o}let Da=(()=>{class o{static create(u,h){var p;if(Array.isArray(u))return mC({name:""},h,u,"");{const _=null!==(p=u.name)&&void 0!==p?p:"";return mC({name:_},u.parent,u.providers,_)}}}return o.THROW_IF_NOT_FOUND=pr,o.NULL=new pC,o.\u0275prov=cn({token:o,providedIn:"any",factory:()=>k(Bv)}),o.__NG_ELEMENT_ID__=-1,o})();function sA(o,a){Fl(Ah(o)[1],Bn())}function EC(o){let a=function wC(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),u=!0;const h=[o];for(;a;){let p;if(bs(o))p=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new Ve(903,"");p=a.\u0275dir}if(p){if(u){h.push(p);const b=o;b.inputs=zv(o.inputs),b.declaredInputs=zv(o.declaredInputs),b.outputs=zv(o.outputs);const C=p.hostBindings;C&&DC(o,C);const I=p.viewQuery,N=p.contentQueries;if(I&&TC(o,I),N&&oA(o,N),ce(o.inputs,p.inputs),ce(o.declaredInputs,p.declaredInputs),ce(o.outputs,p.outputs),bs(p)&&p.data.animation){const R=o.data;R.animation=(R.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let b=0;b<_.length;b++){const C=_[b];C&&C.ngInherit&&C(o),C===EC&&(u=!1)}}a=Object.getPrototypeOf(a)}!function CC(o){let a=0,u=null;for(let h=o.length-1;h>=0;h--){const p=o[h];p.hostVars=a+=p.hostVars,p.hostAttrs=Ll(p.hostAttrs,u=Ll(u,p.hostAttrs))}}(h)}function zv(o){return o===zi?{}:o===wt?[]:o}function TC(o,a){const u=o.viewQuery;o.viewQuery=u?(h,p)=>{a(h,p),u(h,p)}:a}function oA(o,a){const u=o.contentQueries;o.contentQueries=u?(h,p,_)=>{a(h,p,_),u(h,p,_)}:a}function DC(o,a){const u=o.hostBindings;o.hostBindings=u?(h,p)=>{a(h,p),u(h,p)}:a}let f_=null;function Xc(){if(!f_){const o=en.Symbol;if(o&&o.iterator)f_=o.iterator;else{const a=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<a.length;++u){const h=a[u];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(f_=h)}}}return f_}function hd(o){return!!p_(o)&&(Array.isArray(o)||!(o instanceof Map)&&Xc()in o)}function p_(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function pl(o,a,u){return o[a]=u}function Lr(o,a,u){return!Object.is(o[a],u)&&(o[a]=u,!0)}function eu(o,a,u,h){const p=Lr(o,a,u);return Lr(o,a+1,h)||p}function Kv(o,a,u,h){const p=Pe();return Lr(p,Io(),a)&&(Yt(),Ta(Xn(),p,o,a,u,h)),Kv}function fd(o,a,u,h){return Lr(o,Io(),u)?a+ye(u)+h:jt}function Jl(o,a,u,h,p,_){const b=Pe(),C=fd(b,a,u,h);return C!==jt&&Ta(Xn(),b,o,C,p,_),Jl}function Xv(o,a,u,h,p,_,b,C){const I=Pe(),N=Yt(),R=o+20,V=N.firstCreatePass?function uA(o,a,u,h,p,_,b,C,I){const N=a.consts,R=jh(a,o,4,b||null,Qr(N,C));Qm(a,u,R,Qr(N,I)),Fl(a,R);const V=R.tViews=fl(2,R,h,p,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,N);return null!==a.queries&&(a.queries.template(a,R),V.queries=a.queries.embeddedTView(R)),R}(R,N,I,a,u,h,p,_,b):N.data[R];kr(V,!1);const q=I[11].createComment("");Ph(N,I,q,V),gr(q,I),r_(I,I[R]=Rv(q,I,q,V)),vs(V)&&Av(N,I,V),null!=b&&xv(I,V,C)}function e0(o){return Cs(function Yd(){return At.lFrame.contextLView}(),20+o)}function Ur(o,a=It.Default){const u=Pe();return null===u?k(o,a):ua(Bn(),u,re(o),a)}function iu(){throw new Error("invalid")}function ks(o,a,u){const h=Pe();return Lr(h,Io(),a)&&Ms(Yt(),Xn(),h,o,a,h[11],u,!1),ks}function Bp(o,a,u,h,p){const b=p?"class":"style";$h(o,u,a.inputs[b],b,h)}function gl(o,a,u,h){const p=Pe(),_=Yt(),b=20+o,C=p[11],I=p[b]=zn(C,a,function om(){return At.lFrame.currentNamespace}()),N=_.firstCreatePass?function ru(o,a,u,h,p,_,b){const C=a.consts,N=jh(a,o,2,p,Qr(C,_));return Qm(a,u,N,Qr(C,b)),null!==N.attrs&&ud(N,N.attrs,!1),null!==N.mergedAttrs&&ud(N,N.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,N),N}(b,_,p,0,a,u,h):_.data[b];kr(N,!0);const R=N.mergedAttrs;null!==R&&Dn(C,I,R);const V=N.classes;null!==V&&yv(C,I,V);const q=N.styles;return null!==q&&OE(C,I,q),64!=(64&N.flags)&&Ph(_,p,I,N),0===function Pl(){return At.lFrame.elementDepthCount}()&&gr(I,p),function Lu(){At.lFrame.elementDepthCount++}(),vs(N)&&(Av(_,p,N),Sv(_,N,p)),null!==h&&xv(p,N),gl}function _d(){let o=Bn();Uu()?Vu():(o=o.parent,kr(o,!1));const a=o;!function _c(){At.lFrame.elementDepthCount--}();const u=Yt();return u.firstCreatePass&&(Fl(u,o),hc(o)&&u.queries.elementEnd(o)),null!=a.classesWithoutHost&&function cm(o){return 0!=(16&o.flags)}(a)&&Bp(u,a,Pe(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function An(o){return 0!=(32&o.flags)}(a)&&Bp(u,a,Pe(),a.stylesWithoutHost,!1),_d}function su(o,a,u,h){return gl(o,a,u,h),_d(),su}function ec(o,a,u){const h=Pe(),p=Yt(),_=o+20,b=p.firstCreatePass?function HC(o,a,u,h,p){const _=a.consts,b=Qr(_,h),C=jh(a,o,8,"ng-container",b);return null!==b&&ud(C,b,!0),Qm(a,u,C,Qr(_,p)),null!==a.queries&&a.queries.elementStart(a,C),C}(_,p,h,a,u):p.data[_];kr(b,!0);const C=h[_]=h[11].createComment("");return Ph(p,h,C,b),gr(C,h),vs(b)&&(Av(p,h,b),Sv(p,b,h)),null!=u&&xv(h,b),ec}function Xh(){let o=Bn();const a=Yt();return Uu()?Vu():(o=o.parent,kr(o,!1)),a.firstCreatePass&&(Fl(a,o),hc(o)&&a.queries.elementEnd(o)),Xh}function GC(){return Pe()}function Aa(o){return!!o&&"function"==typeof o.then}function $C(o){return!!o&&"function"==typeof o.subscribe}const xa=$C;function ef(o,a,u,h){const p=Pe(),_=Yt(),b=Bn();return function tf(o,a,u,h,p,_,b,C){const I=vs(h),R=o.firstCreatePass&&hC(o),V=a[8],q=dC(a);let te=!0;if(3&h.type||C){const Qe=ki(h,a),dt=C?C(Qe):Qe,Fe=q.length,Dt=C?nn=>C(gn(nn[h.index])):h.index;if(Tn(u)){let nn=null;if(!C&&I&&(nn=function WC(o,a,u,h){const p=o.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const b=p[_];if(b===u&&p[_+1]===h){const C=a[7],I=p[_+2];return C.length>I?C[I]:null}"string"==typeof b&&(_+=2)}return null}(o,a,p,h.index)),null!==nn)(nn.__ngLastListenerFn__||nn).__ngNextListenerFn__=_,nn.__ngLastListenerFn__=_,te=!1;else{_=v_(h,a,V,_,!1);const xn=u.listen(dt,p,_);q.push(_,xn),R&&R.push(p,Dt,Fe,Fe+1)}}else _=v_(h,a,V,_,!0),dt.addEventListener(p,_,b),q.push(_),R&&R.push(p,Dt,Fe,b)}else _=v_(h,a,V,_,!1);const Ce=h.outputs;let $e;if(te&&null!==Ce&&($e=Ce[p])){const Qe=$e.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const io=a[$e[dt]][$e[dt+1]].subscribe(_),Cd=q.length;q.push(_,io),R&&R.push(p,h.index,Cd,-(Cd+1))}}}(_,p,p[11],b,o,a,!!u,h),ef}function zC(o,a,u,h){try{return!1!==u(h)}catch(p){return Sp(o,p),!1}}function v_(o,a,u,h,p){return function _(b){if(b===Function)return h;const C=2&o.flags?Ri(o.index,a):a;0==(32&a[2])&&Ip(C);let I=zC(a,0,h,b),N=_.__ngNextListenerFn__;for(;N;)I=zC(a,0,N,b)&&I,N=N.__ngNextListenerFn__;return p&&!1===I&&(b.preventDefault(),b.returnValue=!1),I}}function qC(o=1){return function Yf(o){return(At.lFrame.contextLView=function $u(o,a){for(;o>0;)a=a[15],o--;return a}(o,At.lFrame.contextLView))[8]}(o)}function Up(o,a){let u=null;const h=function FE(o){const a=o.attrs;if(null!=a){const u=a.indexOf(5);if(0==(1&u))return a[u+1]}return null}(o);for(let p=0;p<a.length;p++){const _=a[p];if("*"!==_){if(null===h?bv(o,_,!0):Fi(h,_))return p}else u=p}return u}function l0(o){const a=Pe()[16][6];if(!a.projection){const h=a.projection=pa(o?o.length:1,null),p=h.slice();let _=a.child;for(;null!==_;){const b=o?Up(_,o):0;null!==b&&(p[b]?p[b].projectionNext=_:h[b]=_,p[b]=_),_=_.next}}}function b_(o,a=0,u){const h=Pe(),p=Yt(),_=jh(p,20+o,16,null,u||null);null===_.projection&&(_.projection=a),Vu(),64!=(64&_.flags)&&function ad(o,a,u){_v(a[11],0,a,u,IS(o,u,a),DE(u.parent||a[6],u,a))}(p,h,_)}function c0(o,a,u){return Vp(o,"",a,"",u),c0}function Vp(o,a,u,h,p){const _=Pe(),b=fd(_,a,u,h);return b!==jt&&Ms(Yt(),Xn(),_,o,b,_[11],p,!1),Vp}function QC(o,a,u,h,p){const _=o[u+1],b=null===a;let C=h?hl(_):Zc(_),I=!1;for(;0!==C&&(!1===I||b);){const R=o[C+1];TA(o[C],a)&&(I=!0,o[C+1]=h?VE(R):BE(R)),C=h?hl(R):Zc(R)}I&&(o[u+1]=h?BE(_):VE(_))}function TA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&ko(o,a)>=0}const Ji={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function nf(o){return o.substring(Ji.key,Ji.keyEnd)}function JC(o,a){const u=Ji.textEnd;return u===a?-1:(a=Ji.keyEnd=function SA(o,a,u){for(;a<u&&o.charCodeAt(a)>32;)a++;return a}(o,Ji.key=a,u),rf(o,a,u))}function rf(o,a,u){for(;a<u&&o.charCodeAt(a)<=32;)a++;return a}function g0(o,a,u){return jo(o,a,u,!1),g0}function m0(o,a){return jo(o,a,null,!0),m0}function MA(o){!function Na(o,a,u,h){const p=Yt(),_=Jr(2);p.firstUpdatePass&&jp(p,null,_,h);const b=Pe();if(u!==jt&&Lr(b,_,u)){const C=p.data[Ti()];if(l1(C,h)&&!NA(p,_)){let I=h?C.classesWithoutHost:C.stylesWithoutHost;null!==I&&(u=_e(I,u||"")),Bp(p,C,b,u,h)}else!function FA(o,a,u,h,p,_,b,C){p===jt&&(p=wt);let I=0,N=0,R=0<p.length?p[0]:null,V=0<_.length?_[0]:null;for(;null!==R||null!==V;){const q=I<p.length?p[I+1]:void 0,te=N<_.length?_[N+1]:void 0;let $e,Ce=null;R===V?(I+=2,N+=2,q!==te&&(Ce=V,$e=te)):null===V||null!==R&&R<V?(I+=2,Ce=R):(N+=2,Ce=V,$e=te),null!==Ce&&o1(o,a,u,h,Ce,$e,b,C),R=I<p.length?p[I]:null,V=N<_.length?_[N]:null}}(p,C,b,b[11],b[_+1],b[_+1]=function r1(o,a,u){if(null==u||""===u)return wt;const h=[],p=is(u);if(Array.isArray(p))for(let _=0;_<p.length;_++)o(h,p[_],!0);else if("object"==typeof p)for(const _ in p)p.hasOwnProperty(_)&&o(h,_,p[_]);else"string"==typeof p&&a(h,p);return h}(o,a,u),h,_)}}(mi,Ma,o,!0)}function Ma(o,a){for(let u=function p0(o){return function e1(o){Ji.key=0,Ji.keyEnd=0,Ji.value=0,Ji.valueEnd=0,Ji.textEnd=o.length}(o),JC(o,rf(o,0,Ji.textEnd))}(a);u>=0;u=JC(a,u))mi(o,nf(a),!0)}function jo(o,a,u,h){const p=Pe(),_=Yt(),b=Jr(2);_.firstUpdatePass&&jp(_,o,b,h),a!==jt&&Lr(p,b,a)&&o1(_,_.data[Ti()],p,p[11],o,p[b+1]=function LA(o,a){return null==o||("string"==typeof a?o+=a:"object"==typeof o&&(o=he(is(o)))),o}(a,u),h,b)}function NA(o,a){return a>=o.expandoStartIndex}function jp(o,a,u,h){const p=o.data;if(null===p[u+1]){const _=p[Ti()],b=NA(o,u);l1(_,h)&&null===a&&!b&&(a=!1),a=function OA(o,a,u,h){const p=function Cc(o){const a=At.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=h?a.residualClasses:a.residualStyles;if(null===p)0===(h?a.classBindings:a.styleBindings)&&(u=Hp(u=_0(null,o,a,u,h),a.attrs,h),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==p)if(u=_0(p,o,a,u,h),null===_){let I=function kA(o,a,u){const h=u?a.classBindings:a.styleBindings;if(0!==Zc(h))return o[hl(h)]}(o,a,h);void 0!==I&&Array.isArray(I)&&(I=_0(null,o,a,I[1],h),I=Hp(I,a.attrs,h),function RA(o,a,u,h){o[hl(u?a.classBindings:a.styleBindings)]=h}(o,a,h,I))}else _=function PA(o,a,u){let h;const p=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<p;_++)h=Hp(h,o[_].hostAttrs,u);return Hp(h,a.attrs,u)}(o,a,h)}return void 0!==_&&(h?a.residualClasses=_:a.residualStyles=_),u}(p,_,a,h),function EA(o,a,u,h,p,_){let b=_?a.classBindings:a.styleBindings,C=hl(b),I=Zc(b);o[h]=u;let R,N=!1;if(Array.isArray(u)){const V=u;R=V[1],(null===R||ko(V,R)>0)&&(N=!0)}else R=u;if(p)if(0!==I){const q=hl(o[C+1]);o[h+1]=$m(q,C),0!==q&&(o[q+1]=UE(o[q+1],h)),o[C+1]=function pF(o,a){return 131071&o|a<<17}(o[C+1],h)}else o[h+1]=$m(C,0),0!==C&&(o[C+1]=UE(o[C+1],h)),C=h;else o[h+1]=$m(I,0),0===C?C=h:o[I+1]=UE(o[I+1],h),I=h;N&&(o[h+1]=BE(o[h+1])),QC(o,R,h,!0),QC(o,R,h,!1),function CA(o,a,u,h,p){const _=p?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&ko(_,a)>=0&&(u[h+1]=VE(u[h+1]))}(a,R,o,h,_),b=$m(C,I),_?a.classBindings=b:a.styleBindings=b}(p,_,a,u,b,h)}}function _0(o,a,u,h,p){let _=null;const b=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<b&&(_=a[C],h=Hp(h,_.hostAttrs,p),_!==o);)C++;return null!==o&&(u.directiveStylingLast=C),h}function Hp(o,a,u){const h=u?1:2;let p=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?p=b:p===h&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),mi(o,b,!!u||a[++_]))}return void 0===o?null:o}function o1(o,a,u,h,p,_,b,C){if(!(3&a.type))return;const I=o.data,N=I[C+1];y0(function NS(o){return 1==(1&o)}(N)?a1(I,a,u,p,Zc(N),b):void 0)||(y0(_)||function MS(o){return 2==(2&o)}(N)&&(_=a1(I,null,u,p,C,b)),function ql(o,a,u,h,p){const _=Tn(o);if(a)p?_?o.addClass(u,h):u.classList.add(h):_?o.removeClass(u,h):u.classList.remove(h);else{let b=-1===h.indexOf("-")?void 0:g.DashCase;if(null==p)_?o.removeStyle(u,h,b):u.style.removeProperty(h);else{const C="string"==typeof p&&p.endsWith("!important");C&&(p=p.slice(0,-10),b|=g.Important),_?o.setStyle(u,h,p,b):u.style.setProperty(h,p,C?"important":"")}}}(h,b,To(Ti(),u),p,_))}function a1(o,a,u,h,p,_){const b=null===a;let C;for(;p>0;){const I=o[p],N=Array.isArray(I),R=N?I[1]:I,V=null===R;let q=u[p+1];q===jt&&(q=V?wt:void 0);let te=V?Oo(q,h):R===h?q:void 0;if(N&&!y0(te)&&(te=Oo(I,h)),y0(te)&&(C=te,b))return C;const Ce=o[p+1];p=b?hl(Ce):Zc(Ce)}if(null!==a){let I=_?a.residualClasses:a.residualStyles;null!=I&&(C=Oo(I,h))}return C}function y0(o){return void 0!==o}function l1(o,a){return 0!=(o.flags&(a?16:32))}function c1(o,a=""){const u=Pe(),h=Yt(),p=o+20,_=h.firstCreatePass?jh(h,p,1,a,null):h.data[p],b=u[p]=zl(u[11],a);Ph(h,u,b,_),kr(_,!1)}function v0(o){return E_("",o,""),v0}function E_(o,a,u){const h=Pe(),p=fd(h,o,a,u);return p!==jt&&Uo(h,Ti(),p),E_}function b0(o,a,u,h,p){const _=Pe(),b=function Yh(o,a,u,h,p,_){const C=eu(o,Rr(),u,p);return Jr(2),C?a+ye(u)+h+ye(p)+_:jt}(_,o,a,u,h,p);return b!==jt&&Uo(_,Ti(),b),b0}function w1(o,a,u){const h=Pe();return Lr(h,Io(),a)&&Ms(Yt(),Xn(),h,o,a,h[11],u,!0),w1}const vd=void 0;var XA=["en",[["a","p"],["AM","PM"],vd],[["AM","PM"],vd,vd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],vd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],vd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",vd,"{1} 'at' {0}",vd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function JA(o){const u=Math.floor(Math.abs(o)),h=o.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===h?1:5}];let sf={};function w0(o){const a=function ex(o){return o.toLowerCase().replace(/_/g,"-")}(o);let u=T1(a);if(u)return u;const h=a.split("-")[0];if(u=T1(h),u)return u;if("en"===h)return XA;throw new Error(`Missing locale data for the locale "${o}".`)}function C1(o){return w0(o)[Nt.PluralCase]}function T1(o){return o in sf||(sf[o]=en.ng&&en.ng.common&&en.ng.common.locales&&en.ng.common.locales[o]),sf[o]}var Nt=(()=>((Nt=Nt||{})[Nt.LocaleId=0]="LocaleId",Nt[Nt.DayPeriodsFormat=1]="DayPeriodsFormat",Nt[Nt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Nt[Nt.DaysFormat=3]="DaysFormat",Nt[Nt.DaysStandalone=4]="DaysStandalone",Nt[Nt.MonthsFormat=5]="MonthsFormat",Nt[Nt.MonthsStandalone=6]="MonthsStandalone",Nt[Nt.Eras=7]="Eras",Nt[Nt.FirstDayOfWeek=8]="FirstDayOfWeek",Nt[Nt.WeekendRange=9]="WeekendRange",Nt[Nt.DateFormat=10]="DateFormat",Nt[Nt.TimeFormat=11]="TimeFormat",Nt[Nt.DateTimeFormat=12]="DateTimeFormat",Nt[Nt.NumberSymbols=13]="NumberSymbols",Nt[Nt.NumberFormats=14]="NumberFormats",Nt[Nt.CurrencyCode=15]="CurrencyCode",Nt[Nt.CurrencySymbol=16]="CurrencySymbol",Nt[Nt.CurrencyName=17]="CurrencyName",Nt[Nt.Currencies=18]="Currencies",Nt[Nt.Directionality=19]="Directionality",Nt[Nt.PluralCase=20]="PluralCase",Nt[Nt.ExtraData=21]="ExtraData",Nt))();const tx=["zero","one","two","few","many"],C_="en-US",T_={marker:"element"},D_={marker:"ICU"};var _i=(()=>((_i=_i||{})[_i.SHIFT=2]="SHIFT",_i[_i.APPEND_EAGERLY=1]="APPEND_EAGERLY",_i[_i.COMMENT=2]="COMMENT",_i))();let D1=C_;function I1(o,a,u){const h=a.insertBeforeIndex,p=Array.isArray(h)?h[0]:h;return null===p?gv(o,0,u):gn(u[p])}function S1(o,a,u,h,p){const _=a.insertBeforeIndex;if(Array.isArray(_)){let b=h,C=null;if(3&a.type||(C=b,b=p),null!==b&&0==(2&a.flags))for(let I=1;I<_.length;I++)qc(o,b,u[_[I]],C,!1)}}function A1(o,a){if(o.push(a),o.length>1)for(let u=o.length-2;u>=0;u--){const h=o[u];x1(h)||E0(h,a)&&null===ox(h)&&ax(h,a.index)}}function x1(o){return!(64&o.type)}function E0(o,a){return x1(a)||o.index>a.index}function ox(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function ax(o,a){const u=o.insertBeforeIndex;Array.isArray(u)?u[0]=a:(SE(I1,S1),o.insertBeforeIndex=a)}function Gp(o,a){const u=o.data[a];return null===u||"string"==typeof u?null:u.hasOwnProperty("currentCaseLViewIndex")?u:u.value}function ux(o,a,u){const h=Cp(o,u,64,null,null);return A1(a,h),h}function I_(o,a){const u=a[o.currentCaseLViewIndex];return null===u?u:u<0?~u:u}function M1(o){return o>>>17}function N1(o){return(131070&o)>>>1}let $p=0,S_=0;function fx(o,a,u,h){const p=u[11];let b,_=null;for(let C=0;C<a.length;C++){const I=a[C];if("string"==typeof I){const N=a[++C];null===u[N]&&(u[N]=zl(p,I))}else if("number"==typeof I)switch(1&I){case 0:const N=M1(I);let R,V;if(null===_&&(_=N,b=Um(p,h)),N===_?(R=h,V=b):(R=null,V=gn(u[N])),null!==V){const $e=N1(I);qc(p,V,u[$e],R,!1);const dt=Gp(o,$e);if(null!==dt&&"object"==typeof dt){const Fe=I_(dt,u);null!==Fe&&fx(o,dt.create[Fe],u,u[dt.anchorIdx])}}break;case 1:const te=a[++C],Ce=a[++C];n_(p,To(I>>>1,u),null,null,te,Ce,null)}else switch(I){case D_:const N=a[++C],R=a[++C];null===u[R]&&gr(u[R]=_p(p,N),u);break;case T_:const V=a[++C],q=a[++C];null===u[q]&&gr(u[q]=zn(p,V,null),u)}}}function px(o,a,u,h,p){for(let _=0;_<u.length;_++){const b=u[_],C=u[++_];if(b&p){let I="";for(let N=_+1;N<=_+C;N++){const R=u[N];if("string"==typeof R)I+=R;else if("number"==typeof R)if(R<0)I+=ye(a[h-R]);else{const V=R>>>2;switch(3&R){case 1:const q=u[++N],te=u[++N],Ce=o.data[V];"string"==typeof Ce?n_(a[11],a[V],null,Ce,q,I,te):Ms(o,Ce,a,q,I,a[11],te,!1);break;case 0:const $e=a[V];null!==$e&&mp(a[11],$e,I);break;case 2:eL(o,Gp(o,V),a,I);break;case 3:gx(o,Gp(o,V),h,a)}}}}else{const I=u[_+1];if(I>0&&3==(3&I)){const R=Gp(o,I>>>2);a[R.currentCaseLViewIndex]<0&&gx(o,R,h,a)}}_+=C}}function gx(o,a,u,h){let p=h[a.currentCaseLViewIndex];if(null!==p){let _=$p;p<0&&(p=h[a.currentCaseLViewIndex]=~p,_=-1),px(o,h,a.update[p],u,_)}}function eL(o,a,u,h){const p=function tL(o,a){let u=o.cases.indexOf(a);if(-1===u)switch(o.type){case 1:{const h=function nx(o,a){const u=C1(a)(parseInt(o,10)),h=tx[u];return void 0!==h?h:"other"}(a,function sx(){return D1}());u=o.cases.indexOf(h),-1===u&&"other"!==h&&(u=o.cases.indexOf("other"));break}case 0:u=o.cases.indexOf("other")}return-1===u?null:u}(a,h);if(I_(a,u)!==p&&(mx(o,a,u),u[a.currentCaseLViewIndex]=null===p?null:~p,null!==p)){const b=u[a.anchorIdx];b&&fx(o,a.create[p],u,b)}}function mx(o,a,u){let h=I_(a,u);if(null!==h){const p=a.remove[h];for(let _=0;_<p.length;_++){const b=p[_];if(b>0){const C=To(b,u);null!==C&&xE(u[11],C)}else mx(o,Gp(o,~b),u)}}}function _x(){const o=[];let u,h,a=-1;function _(C,I){a=0;const N=I_(C,I);h=null!==N?C.remove[N]:wt}function b(){if(a<h.length){const C=h[a++];return C>0?u[C]:(o.push(a,h),_(u[1].data[~C],u),b())}return 0===o.length?null:(h=o.pop(),a=o.pop(),b())}return function p(C,I){for(u=I;o.length;)o.pop();return _(C.value,I),b}}const C0=/\ufffd(\d+):?\d*\ufffd/gi,yx=/\ufffd(\d+)\ufffd/,vx=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,bx=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,sL=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,oL=/\uE500/g;function Cx(o,a,u,h,p,_,b){const C=Hh(o,h,1,null);let I=C<<_i.SHIFT,N=ia();a===N&&(N=null),null===N&&(I|=_i.APPEND_EAGERLY),b&&(I|=_i.COMMENT,function M(o){void 0===m&&(m=o())}(_x)),p.push(I,null===_?"":_);const R=Cp(o,C,b?32:1,null===_?"":_,null);A1(u,R);const V=R.index;return kr(R,!1),null!==N&&a!==N&&function cx(o,a){let u=o.insertBeforeIndex;null===u?(SE(I1,S1),u=o.insertBeforeIndex=[null,a]):(function De(o,a,u){o!=a&&ot(u,o,a,"==")}(Array.isArray(u),!0,"Expecting array here"),u.push(a))}(N,V),R}function A_(o,a,u,h,p,_,b){const C=b.match(C0),I=Cx(o,a,u,_,h,C?null:b,!1);C&&af(p,b,I.index,null,0,null)}function af(o,a,u,h,p,_){const b=o.length,C=b+1;o.push(null,null);const I=b+2,N=a.split(C0);let R=0;for(let V=0;V<N.length;V++){const q=N[V];if(1&V){const te=p+parseInt(q,10);o.push(-1-te),R|=_l(te)}else""!==q&&o.push(q)}return o.push(u<<2|(h?1:0)),h&&o.push(h,_),o[b]=R,o[C]=o.length-I,R}function _l(o){return 1<<Math.min(o,31)}function ou(o){let a,_,u="",h=0,p=!1;for(;null!==(a=bx.exec(o));)p?a[0]===`\ufffd/*${_}\ufffd`&&(h=a.index,p=!1):(u+=o.substring(h,a.index+a[0].length),_=a[1],p=!0);return u+=o.substr(h),u}function Tx(o,a,u,h,p,_){let b=0;const C={type:p.type,currentCaseLViewIndex:Hh(o,a,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function Ix(o,a,u){o.push(_l(a.mainBinding),2,-1-a.mainBinding,u<<2|2)})(u,p,_),function lx(o,a,u){const h=o.data[a];null===h?o.data[a]=u:h.value=u}(o,_,C);const I=p.values;for(let N=0;N<I.length;N++){const R=I[N],V=[];for(let q=0;q<R.length;q++){const te=R[q];if("string"!=typeof te){const Ce=V.push(te)-1;R[q]=`\x3c!--\ufffd${Ce}\ufffd--\x3e`}}b=Dx(o,C,a,u,h,p.cases[N],R.join(""),V)|b}b&&function L1(o,a,u){o.push(a,1,u<<2|3)}(u,b,_)}function lL(o){const a=[],u=[];let h=1,p=0;const _=P1(o=o.replace(vx,function(b,C,I){return h="select"===I?0:1,p=parseInt(C.substr(1),10),""}));for(let b=0;b<_.length;){let C=_[b++].trim();1===h&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&a.push(C);const I=P1(_[b++]);a.length>u.length&&u.push(I)}return{type:h,mainBinding:p,cases:a,values:u}}function P1(o){if(!o)return[];let a=0;const u=[],h=[],p=/[{}]/g;let _;for(p.lastIndex=0;_=p.exec(o);){const C=_.index;if("}"==_[0]){if(u.pop(),0==u.length){const I=o.substring(a,C);vx.test(I)?h.push(lL(I)):h.push(I),a=C+1}}else{if(0==u.length){const I=o.substring(a,C);h.push(I),a=C+1}u.push("{")}}const b=o.substring(a);return h.push(b),h}function Dx(o,a,u,h,p,_,b,C){const I=[],N=[],R=[];a.cases.push(_),a.create.push(I),a.remove.push(N),a.update.push(R);const q=function ip(o){const a=new ym(o);return function Eh(){try{return!!(new window.DOMParser).parseFromString(Uc(""),"text/html")}catch(o){return!1}}()?new _m(a):a}(Es()).getInertBodyElement(b),te=function td(o){return"content"in o&&function Fr(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(q)||q;return te?bd(o,a,u,h,I,N,R,te,p,C,0):0}function bd(o,a,u,h,p,_,b,C,I,N,R){let V=0,q=C.firstChild;for(;q;){const te=Hh(o,u,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const Ce=q,$e=Ce.tagName.toLowerCase();if(sp.hasOwnProperty($e)){I0(p,T_,$e,I,te),o.data[te]=$e;const Dt=Ce.attributes;for(let nn=0;nn<Dt.length;nn++){const xn=Dt.item(nn),io=xn.name.toLowerCase();xn.value.match(C0)?wm.hasOwnProperty(io)&&af(b,xn.value,te,xn.name,0,Xu[io]?jc:op[io]?rp:null):Sx(p,te,xn)}V=bd(o,a,u,h,p,_,b,q,te,N,R+1)|V,F1(_,te,R)}break;case Node.TEXT_NODE:const Qe=q.textContent||"",dt=Qe.match(C0);I0(p,null,dt?"":Qe,I,te),F1(_,te,R),dt&&(V=af(b,Qe,te,null,0,null)|V);break;case Node.COMMENT_NODE:const Fe=yx.exec(q.textContent||"");if(Fe){const nn=N[parseInt(Fe[1],10)];I0(p,D_,"",I,te),Tx(o,u,h,I,nn,te),cL(_,te,R)}}q=q.nextSibling}return V}function F1(o,a,u){0===u&&o.push(a)}function cL(o,a,u){0===u&&(o.push(~a),o.push(a))}function I0(o,a,u,h,p){null!==a&&o.push(a),o.push(u,p,function dx(o,a,u){return o|a<<17|u<<1}(0,h,p))}function Sx(o,a,u){o.push(a<<1|1,u.name,u.value)}function A0(o,a,u=-1){const h=Yt(),p=Pe(),_=20+o,b=Qr(h.consts,a),C=ia();h.firstCreatePass&&function Ex(o,a,u,h,p,_){const b=ia(),C=[],I=[],N=[[]];p=function R1(o,a){if(function D0(o){return-1===o}(a))return ou(o);{const u=o.indexOf(`:${a}\ufffd`)+2+a.toString().length,h=o.search(new RegExp(`\ufffd\\/\\*\\d+:${a}\ufffd`));return ou(o.substring(u,h))}}(p,_);const R=function wx(o){return o.replace(oL," ")}(p).split(sL);for(let V=0;V<R.length;V++){let q=R[V];if(0==(1&V)){const te=P1(q);for(let Ce=0;Ce<te.length;Ce++){let $e=te[Ce];if(0==(1&Ce)){const Qe=$e;""!==Qe&&A_(o,b,N[0],C,I,u,Qe)}else{const Qe=$e;if("object"!=typeof Qe)throw new Error(`Unable to parse ICU expression in "${p}" message.`);Tx(o,u,I,a,Qe,Cx(o,b,N[0],u,C,"",!0).index)}}}else{const te=47===q.charCodeAt(0),$e=(q.charCodeAt(te?1:0),20+Number.parseInt(q.substring(te?2:1)));if(te)N.shift(),kr(ia(),!1);else{const Qe=ux(o,N[0],$e);N.unshift([]),kr(Qe,!0)}}}o.data[h]={create:C,update:I}}(h,null===C?0:C.index,p,_,b,u);const I=h.data[_],R=zc(h,C===p[6]?null:C,p);(function hx(o,a,u,h){const p=o[11];for(let _=0;_<a.length;_++){const b=a[_++],C=a[_],I=(b&_i.COMMENT)===_i.COMMENT,N=(b&_i.APPEND_EAGERLY)===_i.APPEND_EAGERLY,R=b>>>_i.SHIFT;let V=o[R];null===V&&(V=o[R]=I?p.createComment(C):zl(p,C)),N&&null!==u&&qc(p,u,V,h,!1)}})(p,I.create,R,C&&8&C.type?p[C.index]:null),wc(!0)}function x_(o,a,u){A0(o,a,u),function x0(){wc(!1)}()}function M_(o){return function JF(o){o&&($p|=1<<Math.min(S_,31)),S_++}(Lr(Pe(),Io(),o)),M_}function M0(o){!function XF(o,a,u){if(S_>0){const h=o.data[u];px(o,a,Array.isArray(h)?h:h.update,Rr()-S_-1,$p)}$p=0,S_=0}(Yt(),Pe(),o+20)}function V1(o,a,u,h,p){if(o=re(o),Array.isArray(o))for(let _=0;_<o.length;_++)V1(o[_],a,u,h,p);else{const _=Yt(),b=Pe();let C=Ql(o)?o:re(o.provide),I=o_(o);const N=Bn(),R=1048575&N.providerIndexes,V=N.directiveStart,q=N.providerIndexes>>20;if(Ql(o)||!o.multi){const te=new el(I,p,Ur),Ce=N_(C,a,p?R:R+q,V);-1===Ce?(Yi(Ds(N,b),_,C),j1(_,o,a.length),a.push(C),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(te),b.push(te)):(u[Ce]=te,b[Ce]=te)}else{const te=N_(C,a,R+q,V),Ce=N_(C,a,R,R+q),$e=te>=0&&u[te],Qe=Ce>=0&&u[Ce];if(p&&!Qe||!p&&!$e){Yi(Ds(N,b),_,C);const dt=function H1(o,a,u,h,p){const _=new el(o,u,Ur);return _.multi=[],_.index=a,_.componentProviders=0,kx(_,p,h&&!u),_}(p?Rx:N0,u.length,p,h,I);!p&&Qe&&(u[Ce].providerFactory=dt),j1(_,o,a.length,0),a.push(C),N.directiveStart++,N.directiveEnd++,p&&(N.providerIndexes+=1048576),u.push(dt),b.push(dt)}else j1(_,o,te>-1?te:Ce,kx(u[p?Ce:te],I,!p&&h));!p&&h&&Qe&&u[Ce].componentProviders++}}}function j1(o,a,u,h){const p=Ql(a),_=function Wh(o){return!!o.useClass}(a);if(p||_){const I=(_?re(a.useClass):a).prototype.ngOnDestroy;if(I){const N=o.destroyHooks||(o.destroyHooks=[]);if(!p&&a.multi){const R=N.indexOf(u);-1===R?N.push(u,[h,I]):N[R+1].push(h,I)}else N.push(u,I)}}}function kx(o,a,u){return u&&o.componentProviders++,o.multi.push(a)-1}function N_(o,a,u,h){for(let p=u;p<h;p++)if(a[p]===o)return p;return-1}function N0(o,a,u,h){return O0(this.multi,[])}function Rx(o,a,u,h){const p=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=lr(u,u[1],this.providerFactory.index,h);_=C.slice(0,b),O0(p,_);for(let I=b;I<C.length;I++)_.push(C[I])}else _=[],O0(p,_);return _}function O0(o,a){for(let u=0;u<o.length;u++)a.push((0,o[u])());return a}function Px(o,a=[]){return u=>{u.providersResolver=(h,p)=>function U1(o,a,u){const h=Yt();if(h.firstCreatePass){const p=bs(o);V1(u,h.data,h.blueprint,p,!0),V1(a,h.data,h.blueprint,p,!1)}}(h,p?p(o):o,a)}}class k0{}class k_{resolveComponentFactory(a){throw function lu(o){const a=Error(`No component factory found for ${he(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let R_=(()=>{class o{}return o.NULL=new k_,o})();function Fx(){return cf(Bn(),Pe())}function cf(o,a){return new zp(ki(o,a))}let zp=(()=>{class o{constructor(u){this.nativeElement=u}}return o.__NG_ELEMENT_ID__=Fx,o})();function G1(o){return o instanceof zp?o.nativeElement:o}class cu{}let fL=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function pL(){const o=Pe(),u=Ri(Bn().index,o);return function $1(o){return o[11]}(Cr(u)?u:o)}(),o})(),gL=(()=>{class o{}return o.\u0275prov=cn({token:o,providedIn:"root",factory:()=>null}),o})();class P0{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const Oa=new P0("13.3.11"),W1={};function F0(o,a,u,h,p=!1){for(;null!==u;){const _=a[u.index];if(null!==_&&h.push(gn(_)),ys(_))for(let C=10;C<_.length;C++){const I=_[C],N=I[1].firstChild;null!==N&&F0(I[1],I,N,h)}const b=u.type;if(8&b)F0(o,a,u.child,h);else if(32&b){const C=E(u,a);let I;for(;I=C();)h.push(I)}else if(16&b){const C=AE(a,u);if(Array.isArray(C))h.push(...C);else{const I=Y(a[16]);F0(I[1],I,C,h,!0)}}u=p?u.projectionNext:u.next}return h}class qp{constructor(a,u){this._lView=a,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const a=this._lView,u=a[1];return F0(u,a,u.firstChild,[])}get context(){return this._lView[8]}set context(a){this._lView[8]=a}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[3];if(ys(a)){const u=a[8],h=u?u.indexOf(this):-1;h>-1&&(Wc(a,h),Zu(u,h))}this._attachedToViewContainer=!1}Lm(this._lView[1],this._lView)}onDestroy(a){KE(this._lView[1],this._lView,null,a)}markForCheck(){Ip(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){!function lC(o,a,u){const h=a[10];h.begin&&h.begin();try{Lo(o,a,o.template,u)}catch(p){throw Sp(a,p),p}finally{h.end&&h.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ve(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function kh(o,a){Fh(o,a,a[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new Ve(902,"");this._appRef=a}}class mL extends qp{constructor(a){super(a),this._view=a}detectChanges(){zS(this._view)}checkNoChanges(){}get context(){return null}}class Lx extends R_{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const u=un(a);return new z1(u,this.ngModule)}}function Bx(o){const a=[];for(let u in o)o.hasOwnProperty(u)&&a.push({propName:o[u],templateName:u});return a}class z1 extends k0{constructor(a,u){super(),this.componentDef=a,this.ngModule=u,this.componentType=a.type,this.selector=function Gm(o){return o.map(wv).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return Bx(this.componentDef.inputs)}get outputs(){return Bx(this.componentDef.outputs)}create(a,u,h,p){const _=(p=p||this.ngModule)?function yL(o,a){return{get:(u,h,p)=>{const _=o.get(u,W1,p);return _!==W1||h===W1?_:a.get(u,h,p)}}}(a,p.injector):a,b=_.get(cu,Ol),C=_.get(gL,null),I=b.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",R=h?function Yl(o,a,u){if(Tn(o))return o.selectRootElement(a,u===on.ShadowDom);let h="string"==typeof a?o.querySelector(a):a;return h.textContent="",h}(I,h,this.componentDef.encapsulation):zn(b.createRenderer(null,this.componentDef),N,function _L(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(N)),V=this.componentDef.onPush?576:528,q=function qh(o,a){return{components:[],scheduler:o||od,clean:uC,playerHandler:a||null,flags:0}}(),te=fl(0,null,null,1,0,null,null,null,null,null),Ce=Vh(null,te,q,V,null,null,b,I,C,_);let $e,Qe;ra(Ce);try{const dt=function Wv(o,a,u,h,p,_){const b=u[1];u[20]=o;const I=jh(b,20,2,"#host",null),N=I.mergedAttrs=a.hostAttrs;null!==N&&(ud(I,N,!0),null!==o&&(Dn(p,o,N),null!==I.classes&&yv(p,o,I.classes),null!==I.styles&&OE(p,o,I.styles)));const R=h.createRenderer(o,a),V=Vh(u,ZE(a),null,a.onPush?64:16,u[20],I,h,R,_||null,null);return b.firstCreatePass&&(Yi(Ds(I,u),b,a.type),Xm(b,I),kv(I,u.length,1)),r_(u,V),u[20]=V}(R,this.componentDef,Ce,b,I);if(R)if(h)Dn(I,R,["ng-version",Oa.full]);else{const{attrs:Fe,classes:Dt}=function LE(o){const a=[],u=[];let h=1,p=2;for(;h<o.length;){let _=o[h];if("string"==typeof _)2===p?""!==_&&a.push(_,o[++h]):8===p&&u.push(_);else{if(!Ca(p))break;p=_}h++}return{attrs:a,classes:u}}(this.componentDef.selectors[0]);Fe&&Dn(I,R,Fe),Dt&&Dt.length>0&&yv(I,R,Dt.join(" "))}if(Qe=Gn(te,20),void 0!==u){const Fe=Qe.projection=[];for(let Dt=0;Dt<this.ngContentSelectors.length;Dt++){const nn=u[Dt];Fe.push(null!=nn?Array.from(nn):null)}}$e=function dd(o,a,u,h,p){const _=u[1],b=function eC(o,a,u){const h=Bn();o.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),e_(o,h,a,Hh(o,a,1,null),u));const p=lr(a,o,h.directiveStart,h);gr(p,a);const _=ki(h,a);return _&&gr(_,a),p}(_,u,a);if(h.components.push(b),o[8]=b,p&&p.forEach(I=>I(b,a)),a.contentQueries){const I=Bn();a.contentQueries(1,b,I.directiveStart)}const C=Bn();return!_.firstCreatePass||null===a.hostBindings&&null===a.hostAttrs||(sa(C.index),Ov(u[1],C,0,C.directiveStart,C.directiveEnd,a),Jm(a,b)),b}(dt,this.componentDef,Ce,q,[sA]),Gh(te,Ce,null)}finally{Tr()}return new Ux(this.componentType,$e,cf(Qe,Ce),Ce,Qe)}}class Ux extends class dL{}{constructor(a,u,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.instance=u,this.hostView=this.changeDetectorRef=new mL(p),this.componentType=a}get injector(){return new cr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}class Zp{}class jx{}const Kp=new Map;class Hx extends Zp{constructor(a,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lx(this);const h=Ot(a);this._bootstrapComponents=eo(h.bootstrap),this._r3Injector=Vv(a,u,[{provide:Zp,useValue:this},{provide:R_,useValue:this.componentFactoryResolver}],he(a)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(a)}get(a,u=Da.THROW_IF_NOT_FOUND,h=It.Default){return a===Da||a===Zp||a===Bv?this:this._r3Injector.get(a,u,h)}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class K1 extends jx{constructor(a){super(),this.moduleType=a,null!==Ot(a)&&function bL(o){const a=new Set;!function u(h){const p=Ot(h,!0),_=p.id;null!==_&&(function q1(o,a,u){if(a&&a!==u)throw new Error(`Duplicate module registered for ${o} - ${he(a)} vs ${he(a.name)}`)}(_,Kp.get(_),h),Kp.set(_,h));const b=eo(p.imports);for(const C of b)a.has(C)||(a.add(C),u(C))}(o)}(a)}create(a){return new Hx(this.moduleType,a)}}function Gx(o,a,u,h){return Yp(Pe(),Ki(),o,a,u,h)}function Y1(o,a,u,h,p){return function L0(o,a,u,h,p,_,b){const C=a+u;return eu(o,C,p,_)?pl(o,C+2,b?h.call(b,p,_):h(p,_)):P_(o,C+2)}(Pe(),Ki(),o,a,u,h,p)}function $x(o,a,u,h,p,_){return function Q1(o,a,u,h,p,_,b,C){const I=a+u;return function g_(o,a,u,h,p){const _=eu(o,a,u,h);return Lr(o,a+2,p)||_}(o,I,p,_,b)?pl(o,I+3,C?h.call(C,p,_,b):h(p,_,b)):P_(o,I+3)}(Pe(),Ki(),o,a,u,h,p,_)}function P_(o,a){const u=o[a];return u===jt?void 0:u}function Yp(o,a,u,h,p,_){const b=a+u;return Lr(o,b,p)?pl(o,b+1,_?h.call(_,p):h(p)):P_(o,b+1)}function U0(o,a){const u=Yt();let h;const p=o+20;u.firstCreatePass?(h=function X1(o,a){if(a)for(let u=a.length-1;u>=0;u--){const h=a[u];if(o===h.name)return h}}(a,u.pipeRegistry),u.data[p]=h,h.onDestroy&&(u.destroyHooks||(u.destroyHooks=[])).push(p,h.onDestroy)):h=u.data[p];const _=h.factory||(h.factory=Zi(h.type)),b=Ci(Ur);try{const C=ut(!1),I=_();return ut(C),function dA(o,a,u,h){u>=o.data.length&&(o.data[u]=null,o.blueprint[u]=null),a[u]=h}(u,Pe(),p,I),I}finally{Ci(b)}}function eT(o,a,u){const h=o+20,p=Pe(),_=Cs(p,h);return function Qp(o,a){return o[1].data[a].pure}(p,h)?Yp(p,Ki(),a,_.transform,u,_):_.transform(u)}function V0(o){return a=>{setTimeout(o,void 0,a)}}const yl=class Kx extends l.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,u,h){var p,_,b;let C=a,I=u||(()=>null),N=h;if(a&&"object"==typeof a){const V=a;C=null===(p=V.next)||void 0===p?void 0:p.bind(V),I=null===(_=V.error)||void 0===_?void 0:_.bind(V),N=null===(b=V.complete)||void 0===b?void 0:b.bind(V)}this.__isAsync&&(I=V0(I),C&&(C=V0(C)),N&&(N=V0(N)));const R=super.subscribe({next:C,error:I,complete:N});return a instanceof ne.w0&&a.add(R),R}};function Yx(){return this._results[Xc()]()}class j0{constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Xc(),h=j0.prototype;h[u]||(h[u]=Yx)}get changes(){return this._changes||(this._changes=new yl)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,u){return this._results.reduce(a,u)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,u){const h=this;h.dirty=!1;const p=hr(a);(this._changesDetected=!function Jf(o,a,u){if(o.length!==a.length)return!1;for(let h=0;h<o.length;h++){let p=o[h],_=a[h];if(u&&(p=u(p),_=u(_)),_!==p)return!1}return!0}(h._results,p,u))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Jp=(()=>{class o{}return o.__NG_ELEMENT_ID__=nT,o})();const Qx=Jp,tT=class extends Qx{constructor(a,u,h){super(),this._declarationLView=a,this._declarationTContainer=u,this.elementRef=h}createEmbeddedView(a){const u=this._declarationTContainer.tViews,h=Vh(this._declarationLView,u,a,16,null,u.declTNode,null,null,null,null);h[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(h[19]=_.createEmbeddedView(u)),Gh(u,h,a),new qp(h)}};function nT(){return Xp(Bn(),Pe())}function Xp(o,a){return 4&o.type?new tT(a,o,cf(o,a)):null}let H0=(()=>{class o{}return o.__NG_ELEMENT_ID__=Jx,o})();function Jx(){return eM(Bn(),Pe())}const SL=H0,Xx=class extends SL{constructor(a,u,h){super(),this._lContainer=a,this._hostTNode=u,this._hostLView=h}get element(){return cf(this._hostTNode,this._hostLView)}get injector(){return new cr(this._hostTNode,this._hostLView)}get parentInjector(){const a=xo(this._hostTNode,this._hostLView);if(tl(a)){const u=Ao(a,this._hostLView),h=So(a);return new cr(u[1].data[h+8],u)}return new cr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const u=iT(this._lContainer);return null!==u&&u[a]||null}get length(){return this._lContainer.length-10}createEmbeddedView(a,u,h){const p=a.createEmbeddedView(u||{});return this.insert(p,h),p}createComponent(a,u,h,p,_){const b=a&&!function Hl(o){return"function"==typeof o}(a);let C;if(b)C=u;else{const V=u||{};C=V.index,h=V.injector,p=V.projectableNodes,_=V.ngModuleRef}const I=b?a:new z1(un(a)),N=h||this.parentInjector;if(!_&&null==I.ngModule){const q=(b?N:this.parentInjector).get(Zp,null);q&&(_=q)}const R=I.create(N,p,void 0,_);return this.insert(R.hostView,C),R}insert(a,u){const h=a._lView,p=h[1];if(function Rl(o){return ys(o[3])}(h)){const R=this.indexOf(a);if(-1!==R)this.detach(R);else{const V=h[3],q=new Xx(V,V[6],V[3]);q.detach(q.indexOf(a))}}const _=this._adjustIndex(u),b=this._lContainer;!function dl(o,a,u,h){const p=10+h,_=u.length;h>0&&(u[p-1][4]=a),h<_-10?(a[4]=u[p],Gl(u,10+h,a)):(u.push(a),a[4]=null),a[3]=u;const b=a[17];null!==b&&u!==b&&function Pm(o,a){const u=o[9];a[16]!==a[3][3][16]&&(o[2]=!0),null===u?o[9]=[a]:u.push(a)}(b,a);const C=a[19];null!==C&&C.insertView(o),a[2]|=128}(p,h,b,_);const C=jm(_,b),I=h[11],N=Um(I,b[7]);return null!==N&&function Oh(o,a,u,h,p,_){h[0]=p,h[6]=a,Fh(o,h,u,1,p,_)}(p,b[6],I,h,N,C),a.attachToViewContainerRef(),Gl(rT(b),_,a),a}move(a,u){return this.insert(a,u)}indexOf(a){const u=iT(this._lContainer);return null!==u?u.indexOf(a):-1}remove(a){const u=this._adjustIndex(a,-1),h=Wc(this._lContainer,u);h&&(Zu(rT(this._lContainer),u),Lm(h[1],h))}detach(a){const u=this._adjustIndex(a,-1),h=Wc(this._lContainer,u);return h&&null!=Zu(rT(this._lContainer),u)?new qp(h):null}_adjustIndex(a,u=0){return null==a?this.length+u:a}};function iT(o){return o[8]}function rT(o){return o[8]||(o[8]=[])}function eM(o,a){let u;const h=a[o.index];if(ys(h))u=h;else{let p;if(8&o.type)p=gn(h);else{const _=a[11];p=_.createComment("");const b=ki(o,a);qc(_,Um(_,b),p,function SS(o,a){return Tn(o)?o.nextSibling(a):a.nextSibling}(_,b),!1)}a[o.index]=u=Rv(h,a,p,o),r_(a,u)}return new Xx(u,o,a)}class sT{constructor(a){this.queryList=a,this.matches=null}clone(){return new sT(this.queryList)}setDirty(){this.queryList.setDirty()}}class oT{constructor(a=[]){this.queries=a}createEmbeddedView(a){const u=a.queries;if(null!==u){const h=null!==a.contentQueries?a.contentQueries[0]:u.length,p=[];for(let _=0;_<h;_++){const b=u.getByIndex(_);p.push(this.queries[b.indexInDeclarationView].clone())}return new oT(p)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let u=0;u<this.queries.length;u++)null!==Kn(a,u).matches&&this.queries[u].setDirty()}}class tM{constructor(a,u,h=null){this.predicate=a,this.flags=u,this.read=h}}class aT{constructor(a=[]){this.queries=a}elementStart(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(a,u)}elementEnd(a){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(a)}embeddedTView(a){let u=null;for(let h=0;h<this.length;h++){const p=null!==u?u.length:0,_=this.getByIndex(h).embeddedTView(a,p);_&&(_.indexInDeclarationView=h,null!==u?u.push(_):u=[_])}return null!==u?new aT(u):null}template(a,u){for(let h=0;h<this.queries.length;h++)this.queries[h].template(a,u)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class lT{constructor(a,u=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(a,u){this.isApplyingToNode(u)&&this.matchTNode(a,u)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,u){this.elementStart(a,u)}embeddedTView(a,u){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,u),new lT(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let h=a.parent;for(;null!==h&&8&h.type&&h.index!==u;)h=h.parent;return u===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(a,u){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(a,u,ML(u,_)),this.matchTNodeWithReadOption(a,u,Vl(u,a,_,!1,!1))}else h===Jp?4&u.type&&this.matchTNodeWithReadOption(a,u,-1):this.matchTNodeWithReadOption(a,u,Vl(u,a,h,!1,!1))}matchTNodeWithReadOption(a,u,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===zp||p===H0||p===Jp&&4&u.type)this.addMatch(u.index,-2);else{const _=Vl(u,a,p,!1,!1);null!==_&&this.addMatch(u.index,_)}else this.addMatch(u.index,h)}}addMatch(a,u){null===this.matches?this.matches=[a,u]:this.matches.push(a,u)}}function ML(o,a){const u=o.localNames;if(null!==u)for(let h=0;h<u.length;h+=2)if(u[h]===a)return u[h+1];return null}function OL(o,a,u,h){return-1===u?function NL(o,a){return 11&o.type?cf(o,a):4&o.type?Xp(o,a):null}(a,o):-2===u?function kL(o,a,u){return u===zp?cf(a,o):u===Jp?Xp(a,o):u===H0?eM(a,o):void 0}(o,a,h):lr(o,o[1],u,a)}function cT(o,a,u,h){const p=a[19].queries[h];if(null===p.matches){const _=o.data,b=u.matches,C=[];for(let I=0;I<b.length;I+=2){const N=b[I];C.push(N<0?null:OL(a,_[N],b[I+1],u.metadata.read))}p.matches=C}return p.matches}function uT(o,a,u,h){const p=o.queries.getByIndex(u),_=p.matches;if(null!==_){const b=cT(o,a,p,u);for(let C=0;C<_.length;C+=2){const I=_[C];if(I>0)h.push(b[C/2]);else{const N=_[C+1],R=a[-I];for(let V=10;V<R.length;V++){const q=R[V];q[17]===q[3]&&uT(q[1],q,N,h)}if(null!==R[9]){const V=R[9];for(let q=0;q<V.length;q++){const te=V[q];uT(te[1],te,N,h)}}}}}return h}function nM(o){const a=Pe(),u=Yt(),h=Tc();Qd(h+1);const p=Kn(u,h);if(o.dirty&&ta(a)===(2==(2&p.metadata.flags))){if(null===p.matches)o.reset([]);else{const _=p.crossesNgTemplate?uT(u,a,h,[]):cT(u,a,p,h);o.reset(_,G1),o.notifyOnChanges()}return!0}return!1}function iM(o,a,u){const h=Yt();h.firstCreatePass&&(oM(h,new tM(o,a,u),-1),2==(2&a)&&(h.staticViewQueries=!0)),G0(h,Pe(),a)}function rM(o,a,u,h){const p=Yt();if(p.firstCreatePass){const _=Bn();oM(p,new tM(a,u,h),_.index),function ka(o,a){const u=o.contentQueries||(o.contentQueries=[]);a!==(u.length?u[u.length-1]:-1)&&u.push(o.queries.length-1,a)}(p,o),2==(2&u)&&(p.staticContentQueries=!0)}G0(p,Pe(),u)}function sM(){return function RL(o,a){return o[19].queries[a].queryList}(Pe(),Tc())}function G0(o,a,u){const h=new j0(4==(4&u));KE(o,a,h,h.destroy),null===a[19]&&(a[19]=new oT),a[19].queries.push(new sT(h))}function oM(o,a,u){null===o.queries&&(o.queries=new aT),o.queries.track(new lT(a,u))}function Kn(o,a){return o.queries.getByIndex(a)}function F_(o,a){return Xp(o,a)}function V_(...o){}const mT=new Wn("Application Initializer");let j_=(()=>{class o{constructor(u){this.appInits=u,this.resolve=V_,this.reject=V_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const u=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(Aa(_))u.push(_);else if(xa(_)){const b=new Promise((C,I)=>{_.subscribe({complete:C,error:I})});u.push(b)}}Promise.all(u).then(()=>{h()}).catch(p=>{this.reject(p)}),0===u.length&&h(),this.initialized=!0}}return o.\u0275fac=function(u){return new(u||o)(k(mT,8))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const _T=new Wn("AppId",{providedIn:"root",factory:function J0(){return`${H_()}${H_()}${H_()}`}});function H_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const G_=new Wn("Platform Initializer"),X0=new Wn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),eb=new Wn("appBootstrapListener");let bM=(()=>{class o{log(u){console.log(u)}warn(u){console.warn(u)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const yT=new Wn("LocaleId",{providedIn:"root",factory:()=>ee(yT,It.Optional|It.SkipSelf)||function tb(){return"undefined"!=typeof $localize&&$localize.locale||C_}()}),KL=new Wn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class vT{constructor(a,u){this.ngModuleFactory=a,this.componentFactories=u}}let bT=(()=>{class o{compileModuleSync(u){return new K1(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const h=this.compileModuleSync(u),_=eo(Ot(u).declarations).reduce((b,C)=>{const I=un(C);return I&&b.push(new z1(I)),b},[]);return new vT(h,_)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const ET=(()=>Promise.resolve(0))();function $_(o){"undefined"==typeof Zone?ET.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class vl{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yl(!1),this.onMicrotaskEmpty=new yl(!1),this.onStable=new yl(!1),this.onError=new yl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const p=this;p._nesting=0,p._outer=p._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&u,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function QL(){let o=en.requestAnimationFrame,a=en.cancelAnimationFrame;if("undefined"!=typeof Zone&&o&&a){const u=o[Zone.__symbol__("OriginalDelegate")];u&&(o=u);const h=a[Zone.__symbol__("OriginalDelegate")];h&&(a=h)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function DM(o){const a=()=>{!function TM(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(en,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,ib(o),o.isCheckStableRunning=!0,nb(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),ib(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,h,p,_,b,C)=>{try{return rb(o),u.invokeTask(p,_,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),TT(o)}},onInvoke:(u,h,p,_,b,C,I)=>{try{return rb(o),u.invoke(p,_,b,C,I)}finally{o.shouldCoalesceRunChangeDetection&&a(),TT(o)}},onHasTask:(u,h,p,_)=>{u.hasTask(p,_),h===p&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,ib(o),nb(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(u,h,p,_)=>(u.handleError(p,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!vl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(vl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(a,u,h){return this._inner.run(a,u,h)}runTask(a,u,h,p){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+p,a,CT,V_,V_);try{return _.runTask(b,u,h)}finally{_.cancelTask(b)}}runGuarded(a,u,h){return this._inner.runGuarded(a,u,h)}runOutsideAngular(a){return this._outer.run(a)}}const CT={};function nb(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function ib(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function rb(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function TT(o){o._nesting--,nb(o)}class IM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yl,this.onMicrotaskEmpty=new yl,this.onStable=new yl,this.onError=new yl}run(a,u,h){return a.apply(u,h)}runGuarded(a,u,h){return a.apply(u,h)}runOutsideAngular(a){return a()}runTask(a,u,h,p){return a.apply(u,h)}}let SM=(()=>{class o{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{vl.assertNotInAngularZone(),$_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())$_(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(u)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,h,p){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),u(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:u,timeoutId:_,updateCb:p})}whenStable(u,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,h,p){return[]}}return o.\u0275fac=function(u){return new(u||o)(k(vl))},o.\u0275prov=cn({token:o,factory:o.\u0275fac}),o})(),JL=(()=>{class o{constructor(){this._applications=new Map,W_.addToWindow(this)}registerApplication(u,h){this._applications.set(u,h)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,h=!0){return W_.findTestabilityInTree(this,u,h)}}return o.\u0275fac=function(u){return new(u||o)},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();class XL{addToWindow(a){}findTestabilityInTree(a,u,h){return null}}function e2(o){W_=o}let W_=new XL,ff=null;const AM=new Wn("AllowMultipleToken"),sb=new Wn("PlatformOnDestroy");class n2{constructor(a,u){this.name=a,this.token=u}}function xM(o,a,u=[]){const h=`Platform: ${a}`,p=new Wn(h);return(_=[])=>{let b=IT();if(!b||b.injector.get(AM,!1)){const C=[...u,..._,{provide:p,useValue:!0}];o?o(C):function r2(o){if(ff&&!ff.get(AM,!1))throw new Ve(400,"");ff=o;const a=o.get(ST),u=o.get(G_,null);u&&u.forEach(h=>h())}(function MM(o=[],a){return Da.create({name:a,providers:[{provide:s_,useValue:"platform"},{provide:sb,useValue:()=>ff=null},...o]})}(C,h))}return function s2(o){const a=IT();if(!a)throw new Ve(401,"");return a}()}}function IT(){var o;return null!==(o=null==ff?void 0:ff.get(ST))&&void 0!==o?o:null}let ST=(()=>{class o{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,h){const C=function o2(o,a){let u;return u="noop"===o?new IM:("zone.js"===o?void 0:o)||new vl({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==a?void 0:a.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==a?void 0:a.ngZoneRunCoalescing)}),u}(h?h.ngZone:void 0,{ngZoneEventCoalescing:h&&h.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:h&&h.ngZoneRunCoalescing||!1}),I=[{provide:vl,useValue:C}];return C.run(()=>{const N=Da.create({providers:I,parent:this.injector,name:u.moduleType.name}),R=u.create(N),V=R.injector.get(Xs,null);if(!V)throw new Ve(402,"");return C.runOutsideAngular(()=>{const q=C.onError.subscribe({next:te=>{V.handleError(te)}});R.onDestroy(()=>{xT(this._modules,R),q.unsubscribe()})}),function a2(o,a,u){try{const h=u();return Aa(h)?h.catch(p=>{throw a.runOutsideAngular(()=>o.handleError(p)),p}):h}catch(h){throw a.runOutsideAngular(()=>o.handleError(h)),h}}(V,C,()=>{const q=R.injector.get(j_);return q.runInitializers(),q.donePromise.then(()=>(function rx(o){(function $t(o,a){null==o&&ot(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(D1=o.toLowerCase().replace(/_/g,"-"))}(R.injector.get(yT,C_)||C_),this._moduleDoBootstrap(R),R))})})}bootstrapModule(u,h=[]){const p=ob({},h);return function t2(o,a,u){const h=new K1(u);return Promise.resolve(h)}(0,0,u).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(u){const h=u.injector.get(AT);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!u.instance.ngDoBootstrap)throw new Ve(403,"");u.instance.ngDoBootstrap(h)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ve(404,"");this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const u=this._injector.get(sb,null);null==u||u(),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(u){return new(u||o)(k(Da))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function ob(o,a){return Array.isArray(a)?a.reduce(ob,o):Object.assign(Object.assign({},o),a)}let AT=(()=>{class o{constructor(u,h,p,_){this._zone=u,this._injector=h,this._exceptionHandler=p,this._initStatus=_,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const b=new U.y(I=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{I.next(this._stable),I.complete()})}),C=new U.y(I=>{let N;this._zone.runOutsideAngular(()=>{N=this._zone.onStable.subscribe(()=>{vl.assertNotInAngularZone(),$_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,I.next(!0))})})});const R=this._zone.onUnstable.subscribe(()=>{vl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{I.next(!1)}))});return()=>{N.unsubscribe(),R.unsubscribe()}});this.isStable=(0,de.T)(b,C.pipe((0,le.B)()))}bootstrap(u,h){if(!this._initStatus.done)throw new Ve(405,"");let p;p=u instanceof k0?u:this._injector.get(R_).resolveComponentFactory(u),this.componentTypes.push(p.componentType);const _=function DT(o){return o.isBoundToModule}(p)?void 0:this._injector.get(Zp),C=p.create(Da.NULL,[],h||p.selector,_),I=C.location.nativeElement,N=C.injector.get(SM,null),R=N&&C.injector.get(JL);return N&&R&&R.registerApplication(I,N),C.onDestroy(()=>{this.detachView(C.hostView),xT(this.components,C),R&&R.unregisterApplication(I)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ve(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const h=u;this._views.push(h),h.attachToAppRef(this)}detachView(u){const h=u;xT(this._views,h),h.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(eb,[]).concat(this._bootstrapListeners).forEach(p=>p(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return o.\u0275fac=function(u){return new(u||o)(k(vl),k(Da),k(Xs),k(j_))},o.\u0275prov=cn({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function xT(o,a){const u=o.indexOf(a);u>-1&&o.splice(u,1)}let OM=!0,ab=!1;function kM(){return ab=!0,OM}function RM(){if(ab)throw new Error("Cannot enable prod mode after platform setup.");OM=!1}let u2=(()=>{class o{}return o.__NG_ELEMENT_ID__=d2,o})();function d2(o){return function h2(o,a,u){if(Ud(o)&&!u){const h=Ri(o.index,a);return new qp(h,h)}return 47&o.type?new qp(a[16],a):null}(Bn(),Pe(),16==(16&o))}class PT{constructor(){}supports(a){return hd(a)}create(a){return new hb(a)}}const Z_=(o,a)=>a;class hb{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||Z_}forEachItem(a){let u;for(u=this._itHead;null!==u;u=u._next)a(u)}forEachOperation(a){let u=this._itHead,h=this._removalsHead,p=0,_=null;for(;u||h;){const b=!h||u&&u.currentIndex<LT(h,p,_)?u:h,C=LT(b,p,_),I=b.currentIndex;if(b===h)p--,h=h._nextRemoved;else if(u=u._next,null==b.previousIndex)p++;else{_||(_=[]);const N=C-p,R=I-p;if(N!=R){for(let q=0;q<N;q++){const te=q<_.length?_[q]:_[q]=0,Ce=te+q;R<=Ce&&Ce<N&&(_[q]=te+1)}_[b.previousIndex]=R-N}}C!==I&&a(b,C,I)}}forEachPreviousItem(a){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachMovedItem(a){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}forEachIdentityChange(a){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)a(u)}diff(a){if(null==a&&(a=[]),!hd(a))throw new Ve(900,"");return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let p,_,b,u=this._itHead,h=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)_=a[C],b=this._trackByFn(C,_),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,_,b,C)),Object.is(u.item,_)||this._addIdentityChange(u,_)):(u=this._mismatch(u,_,b,C),h=!0),u=u._next}else p=0,function Zv(o,a){if(Array.isArray(o))for(let u=0;u<o.length;u++)a(o[u]);else{const u=o[Xc()]();let h;for(;!(h=u.next()).done;)a(h.value)}}(a,C=>{b=this._trackByFn(p,C),null!==u&&Object.is(u.trackById,b)?(h&&(u=this._verifyReinsertion(u,C,b,p)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,b,p),h=!0),u=u._next,p++}),this.length=p;return this._truncate(u),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,u,h,p){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._reinsertAfter(a,_,p)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(a.item,u)||this._addIdentityChange(a,u),this._moveAfter(a,_,p)):a=this._addAfter(new LM(u,h),_,p),a}_verifyReinsertion(a,u,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?a=this._reinsertAfter(_,a._prev,p):a.currentIndex!=p&&(a.currentIndex=p,this._addToMoves(a,p)),a}_truncate(a){for(;null!==a;){const u=a._next;this._addToRemovals(this._unlink(a)),a=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,u,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const p=a._prevRemoved,_=a._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(a,u,h),this._addToMoves(a,h),a}_moveAfter(a,u,h){return this._unlink(a),this._insertAfter(a,u,h),this._addToMoves(a,h),a}_addAfter(a,u,h){return this._insertAfter(a,u,h),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,u,h){const p=null===u?this._itHead:u._next;return a._next=p,a._prev=u,null===p?this._itTail=a:p._prev=a,null===u?this._itHead=a:u._next=a,null===this._linkedRecords&&(this._linkedRecords=new FT),this._linkedRecords.put(a),a.currentIndex=h,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const u=a._prev,h=a._next;return null===u?this._itHead=h:u._next=h,null===h?this._itTail=u:h._prev=u,a}_addToMoves(a,u){return a.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new FT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,u){return a.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class LM{constructor(a,u){this.item=a,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class BM{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,u){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===u||u<=h.currentIndex)&&Object.is(h.trackById,a))return h;return null}remove(a){const u=a._prevDup,h=a._nextDup;return null===u?this._head=h:u._nextDup=h,null===h?this._tail=u:h._prevDup=u,null===this._head}}class FT{constructor(){this.map=new Map}put(a){const u=a.trackById;let h=this.map.get(u);h||(h=new BM,this.map.set(u,h)),h.add(a)}get(a,u){const p=this.map.get(a);return p?p.get(a,u):null}remove(a){const u=a.trackById;return this.map.get(u).remove(a)&&this.map.delete(u),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function LT(o,a,u){const h=o.previousIndex;if(null===h)return h;let p=0;return u&&h<u.length&&(p=u[h]),h+a+p}class BT{constructor(){}supports(a){return a instanceof Map||p_(a)}create(){return new K_}}class K_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let u;for(u=this._mapHead;null!==u;u=u._next)a(u)}forEachPreviousItem(a){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)a(u)}forEachChangedItem(a){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)a(u)}forEachAddedItem(a){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)a(u)}forEachRemovedItem(a){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)a(u)}diff(a){if(a){if(!(a instanceof Map||p_(a)))throw new Ve(900,"")}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(a,(h,p)=>{if(u&&u.key===p)this._maybeAddToChanges(u,h),this._appendAfter=u,u=u._next;else{const _=this._getOrCreateRecordForKey(p,h);u=this._insertBeforeOrAppend(u,_)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let h=u;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,u){if(a){const h=a._prev;return u._next=a,u._prev=h,a._prev=u,h&&(h._next=u),a===this._mapHead&&(this._mapHead=u),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(a,u){if(this._records.has(a)){const p=this._records.get(a);this._maybeAddToChanges(p,u);const _=p._prev,b=p._next;return _&&(_._next=b),b&&(b._prev=_),p._next=null,p._prev=null,p}const h=new UM(a);return this._records.set(a,h),h.currentValue=u,this._addToAdditions(h),h}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,u){Object.is(u,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=u,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,u){a instanceof Map?a.forEach(u):Object.keys(a).forEach(h=>u(a[h],h))}}class UM{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function UT(){return new fb([new PT])}let fb=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(null!=h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||UT()),deps:[[o,new ci,new pt]]}}find(u){const h=this.factories.find(p=>p.supports(u));if(null!=h)return h;throw new Ve(901,"")}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:UT}),o})();function VT(){return new gf([new BT])}let gf=(()=>{class o{constructor(u){this.factories=u}static create(u,h){if(h){const p=h.factories.slice();u=u.concat(p)}return new o(u)}static extend(u){return{provide:o,useFactory:h=>o.create(u,h||VT()),deps:[[o,new ci,new pt]]}}find(u){const h=this.factories.find(_=>_.supports(u));if(h)return h;throw new Ve(901,"")}}return o.\u0275prov=cn({token:o,providedIn:"root",factory:VT}),o})();const HM=xM(null,"core",[]);let GM=(()=>{class o{constructor(u){}}return o.\u0275fac=function(u){return new(u||o)(k(AT))},o.\u0275mod=Ie({type:o}),o.\u0275inj=Xt({}),o})()},3942:(lt,Te,B)=>{B.d(Te,{Z:()=>Ve});var l=B(2090),ne=B(4859),U=B(9681),de=B(1877);class le{constructor(ye,xe){this._delegate=ye,this.firebase=xe,(0,U._addComponent)(ye,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,U.deleteApp)(this._delegate)))}_getService(ye,xe=U._DEFAULT_ENTRY_NAME){var Je;this._delegate.checkDestroyed();const st=this._delegate.container.getProvider(ye);return!st.isInitialized()&&"EXPLICIT"===(null===(Je=st.getComponent())||void 0===Je?void 0:Je.instantiationMode)&&st.initialize(),st.getImmediate({identifier:xe})}_removeServiceInstance(ye,xe=U._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(xe)}_addComponent(ye){(0,U._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,U._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ce=new l.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function _e(){const Ze=function he(Ze){const ye={},xe={__esModule:!0,initializeApp:function Le(Ke,K={}){const De=U.initializeApp(Ke,K);if((0,l.r3)(ye,De.name))return ye[De.name];const J=new Ze(De,xe);return ye[De.name]=J,J},app:st,registerVersion:U.registerVersion,setLogLevel:U.setLogLevel,onLog:U.onLog,apps:null,SDK_VERSION:U.SDK_VERSION,INTERNAL:{registerComponent:function Me(Ke){const K=Ke.name,De=K.replace("-compat","");if(U._registerComponent(Ke)&&"PUBLIC"===Ke.type){const J=(se=st())=>{if("function"!=typeof se[De])throw ce.create("invalid-app-argument",{appName:K});return se[De]()};void 0!==Ke.serviceProps&&(0,l.ZB)(J,Ke.serviceProps),xe[De]=J,Ze.prototype[De]=function(...se){return this._getService.bind(this,K).apply(this,Ke.multipleInstances?se:[])}}return"PUBLIC"===Ke.type?xe[De]:null},removeApp:function Je(Ke){delete ye[Ke]},useAsService:function qe(Ke,K){return"serverAuth"===K?null:K},modularAPIs:U}};function st(Ke){if(!(0,l.r3)(ye,Ke=Ke||U._DEFAULT_ENTRY_NAME))throw ce.create("no-app",{appName:Ke});return ye[Ke]}return xe.default=xe,Object.defineProperty(xe,"apps",{get:function we(){return Object.keys(ye).map(Ke=>ye[Ke])}}),st.App=Ze,xe}(le);return Ze.INTERNAL=Object.assign(Object.assign({},Ze.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function ye(xe){(0,l.ZB)(Ze,xe)},createSubscribe:l.ne,ErrorFactory:l.LL,deepExtend:l.ZB}),Ze}(),W=new de.Yd("@firebase/app-compat");if((0,l.jU)()&&void 0!==self.firebase){W.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ze=self.firebase.SDK_VERSION;Ze&&Ze.indexOf("LITE")>=0&&W.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ve=$;!function Re(Ze){(0,U.registerVersion)("@firebase/app-compat","0.1.38",Ze)}()},9681:(lt,Te,B)=>{B.r(Te),B.d(Te,{FirebaseError:()=>de.ZR,SDK_VERSION:()=>ps,_DEFAULT_ENTRY_NAME:()=>$t,_addComponent:()=>mn,_addOrOverwriteComponent:()=>cn,_apps:()=>pn,_clearComponents:()=>br,_components:()=>On,_getProvider:()=>Xt,_registerComponent:()=>nr,_removeServiceInstance:()=>Kt,deleteApp:()=>It,getApp:()=>wr,getApps:()=>Kr,initializeApp:()=>Us,onLog:()=>Ci,registerVersion:()=>Hn,setLogLevel:()=>mo});var l=B(5861),ne=B(4859),U=B(1877),de=B(2090),le=B(8766);class ve{constructor(Ne){this.container=Ne}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function ce(at){const Ne=at.getComponent();return"VERSION"===(null==Ne?void 0:Ne.type)}(et)){const Rt=et.getImmediate();return`${Rt.library}/${Rt.version}`}return null}).filter(et=>et).join(" ")}}const he="@firebase/app",$=new U.Yd("@firebase/app"),$t="[DEFAULT]",ot={[he]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},pn=new Map,On=new Map;function mn(at,Ne){try{at.container.addComponent(Ne)}catch(et){$.debug(`Component ${Ne.name} failed to register with FirebaseApp ${at.name}`,et)}}function cn(at,Ne){at.container.addOrOverwriteComponent(Ne)}function nr(at){const Ne=at.name;if(On.has(Ne))return $.debug(`There were multiple attempts to register component ${Ne}.`),!1;On.set(Ne,at);for(const et of pn.values())mn(et,at);return!0}function Xt(at,Ne){const et=at.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),at.container.getProvider(Ne)}function Kt(at,Ne,et=$t){Xt(at,Ne).clearInstance(et)}function br(){On.clear()}const ir=new de.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class rr{constructor(Ne,et,Rt){this._isDeleted=!1,this._options=Object.assign({},Ne),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=Rt,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ne){this._isDeleted=Ne}checkDestroyed(){if(this.isDeleted)throw ir.create("app-deleted",{appName:this._name})}}const ps="9.13.0";function Us(at,Ne={}){let et=at;"object"!=typeof Ne&&(Ne={name:Ne});const Rt=Object.assign({name:$t,automaticDataCollectionEnabled:!1},Ne),xt=Rt.name;if("string"!=typeof xt||!xt)throw ir.create("bad-app-name",{appName:String(xt)});if(et||(et=(0,de.aH)()),!et)throw ir.create("no-options");const zt=pn.get(xt);if(zt){if((0,de.vZ)(et,zt.options)&&(0,de.vZ)(Rt,zt.config))return zt;throw ir.create("duplicate-app",{appName:xt})}const z=new ne.H0(xt);for(const X of On.values())z.addComponent(X);const H=new rr(et,Rt,z);return pn.set(xt,H),H}function wr(at=$t){const Ne=pn.get(at);if(!Ne&&at===$t)return Us();if(!Ne)throw ir.create("no-app",{appName:at});return Ne}function Kr(){return Array.from(pn.values())}function It(at){return sr.apply(this,arguments)}function sr(){return(sr=(0,l.Z)(function*(at){const Ne=at.name;pn.has(Ne)&&(pn.delete(Ne),yield Promise.all(at.container.getProviders().map(et=>et.delete())),at.isDeleted=!0)})).apply(this,arguments)}function Hn(at,Ne,et){var Rt;let xt=null!==(Rt=ot[at])&&void 0!==Rt?Rt:at;et&&(xt+=`-${et}`);const zt=xt.match(/\s|\//),z=Ne.match(/\s|\//);if(zt||z){const H=[`Unable to register library "${xt}" with version "${Ne}":`];return zt&&H.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),zt&&z&&H.push("and"),z&&H.push(`version name "${Ne}" contains illegal characters (whitespace or "/")`),void $.warn(H.join(" "))}nr(new ne.wA(`${xt}-version`,()=>({library:xt,version:Ne}),"VERSION"))}function Ci(at,Ne){if(null!==at&&"function"!=typeof at)throw ir.create("invalid-log-argument");(0,U.Am)(at,Ne)}function mo(at){(0,U.Ub)(at)}const Qn="firebase-heartbeat-store";let Nr=null;function Zo(){return Nr||(Nr=(0,le.X3)("firebase-heartbeat-database",1,{upgrade:(at,Ne)=>{0===Ne&&at.createObjectStore(Qn)}}).catch(at=>{throw ir.create("idb-open",{originalErrorMessage:at.message})})),Nr}function _t(){return(_t=(0,l.Z)(function*(at){var Ne;try{return(yield Zo()).transaction(Qn).objectStore(Qn).get($i(at))}catch(et){if(et instanceof de.ZR)$.warn(et.message);else{const Rt=ir.create("idb-get",{originalErrorMessage:null===(Ne=et)||void 0===Ne?void 0:Ne.message});$.warn(Rt.message)}}})).apply(this,arguments)}function St(at,Ne){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,l.Z)(function*(at,Ne){var et;try{const xt=(yield Zo()).transaction(Qn,"readwrite");return yield xt.objectStore(Qn).put(Ne,$i(at)),xt.done}catch(Rt){if(Rt instanceof de.ZR)$.warn(Rt.message);else{const xt=ir.create("idb-set",{originalErrorMessage:null===(et=Rt)||void 0===et?void 0:et.message});$.warn(xt.message)}}})).apply(this,arguments)}function $i(at){return`${at.name}!${at.options.appId}`}class Wi{constructor(Ne){this.container=Ne,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Ko(et),this._heartbeatsCachePromise=this._storage.read().then(Rt=>(this._heartbeatsCache=Rt,Rt))}triggerHeartbeat(){var Ne=this;return(0,l.Z)(function*(){const Rt=Ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=zi();if(null===Ne._heartbeatsCache&&(Ne._heartbeatsCache=yield Ne._heartbeatsCachePromise),Ne._heartbeatsCache.lastSentHeartbeatDate!==xt&&!Ne._heartbeatsCache.heartbeats.some(zt=>zt.date===xt))return Ne._heartbeatsCache.heartbeats.push({date:xt,agent:Rt}),Ne._heartbeatsCache.heartbeats=Ne._heartbeatsCache.heartbeats.filter(zt=>{const z=new Date(zt.date).valueOf();return Date.now()-z<=2592e6}),Ne._storage.overwrite(Ne._heartbeatsCache)})()}getHeartbeatsHeader(){var Ne=this;return(0,l.Z)(function*(){if(null===Ne._heartbeatsCache&&(yield Ne._heartbeatsCachePromise),null===Ne._heartbeatsCache||0===Ne._heartbeatsCache.heartbeats.length)return"";const et=zi(),{heartbeatsToSend:Rt,unsentEntries:xt}=function wt(at,Ne=1024){const et=[];let Rt=at.slice();for(const xt of at){const zt=et.find(z=>z.agent===xt.agent);if(zt){if(zt.dates.push(xt.date),Wt(et)>Ne){zt.dates.pop();break}}else if(et.push({agent:xt.agent,dates:[xt.date]}),Wt(et)>Ne){et.pop();break}Rt=Rt.slice(1)}return{heartbeatsToSend:et,unsentEntries:Rt}}(Ne._heartbeatsCache.heartbeats),zt=(0,de.L)(JSON.stringify({version:2,heartbeats:Rt}));return Ne._heartbeatsCache.lastSentHeartbeatDate=et,xt.length>0?(Ne._heartbeatsCache.heartbeats=xt,yield Ne._storage.overwrite(Ne._heartbeatsCache)):(Ne._heartbeatsCache.heartbeats=[],Ne._storage.overwrite(Ne._heartbeatsCache)),zt})()}}function zi(){return(new Date).toISOString().substring(0,10)}class Ko{constructor(Ne){this.app=Ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,l.Z)(function*(){return!!(0,de.hl)()&&(0,de.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ne=this;return(0,l.Z)(function*(){return(yield Ne._canUseIndexedDBPromise)&&(yield function on(at){return _t.apply(this,arguments)}(Ne.app))||{heartbeats:[]}})()}overwrite(Ne){var et=this;return(0,l.Z)(function*(){var Rt;if(yield et._canUseIndexedDBPromise){const zt=yield et.read();return St(et.app,{lastSentHeartbeatDate:null!==(Rt=Ne.lastSentHeartbeatDate)&&void 0!==Rt?Rt:zt.lastSentHeartbeatDate,heartbeats:Ne.heartbeats})}})()}add(Ne){var et=this;return(0,l.Z)(function*(){var Rt;if(yield et._canUseIndexedDBPromise){const zt=yield et.read();return St(et.app,{lastSentHeartbeatDate:null!==(Rt=Ne.lastSentHeartbeatDate)&&void 0!==Rt?Rt:zt.lastSentHeartbeatDate,heartbeats:[...zt.heartbeats,...Ne.heartbeats]})}})()}}function Wt(at){return(0,de.L)(JSON.stringify({version:2,heartbeats:at})).length}!function Vs(at){nr(new ne.wA("platform-logger",Ne=>new ve(Ne),"PRIVATE")),nr(new ne.wA("heartbeat",Ne=>new Wi(Ne),"PRIVATE")),Hn(he,"0.8.3",at),Hn(he,"0.8.3","esm2017"),Hn("fire-js","")}("")},4859:(lt,Te,B)=>{B.d(Te,{H0:()=>he,wA:()=>U,zt:()=>le});var l=B(5861),ne=B(2090);class U{constructor($,W,re){this.name=$,this.instanceFactory=W,this.type=re,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const de="[DEFAULT]";class le{constructor($,W){this.name=$,this.container=W,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const W=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(W)){const re=new ne.BH;if(this.instancesDeferred.set(W,re),this.isInitialized(W)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:W});ze&&re.resolve(ze)}catch(ze){}}return this.instancesDeferred.get(W).promise}getImmediate($){var W;const re=this.normalizeInstanceIdentifier(null==$?void 0:$.identifier),ze=null!==(W=null==$?void 0:$.optional)&&void 0!==W&&W;if(!this.isInitialized(re)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:re})}catch(Re){if(ze)return null;throw Re}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function ce(_e){return"EAGER"===_e.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:de})}catch(W){}for(const[W,re]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(W);try{const Re=this.getOrInitializeService({instanceIdentifier:ze});re.resolve(Re)}catch(Re){}}}}clearInstance($=de){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,l.Z)(function*(){const W=Array.from($.instances.values());yield Promise.all([...W.filter(re=>"INTERNAL"in re).map(re=>re.INTERNAL.delete()),...W.filter(re=>"_delete"in re).map(re=>re._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=de){return this.instances.has($)}getOptions($=de){return this.instancesOptions.get($)||{}}initialize($={}){const{options:W={}}=$,re=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(re))throw Error(`${this.name}(${re}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:re,options:W});for(const[Re,Ve]of this.instancesDeferred.entries())re===this.normalizeInstanceIdentifier(Re)&&Ve.resolve(ze);return ze}onInit($,W){var re;const ze=this.normalizeInstanceIdentifier(W),Re=null!==(re=this.onInitCallbacks.get(ze))&&void 0!==re?re:new Set;Re.add($),this.onInitCallbacks.set(ze,Re);const Ve=this.instances.get(ze);return Ve&&$(Ve,ze),()=>{Re.delete($)}}invokeOnInitCallbacks($,W){const re=this.onInitCallbacks.get(W);if(re)for(const ze of re)try{ze($,W)}catch(Re){}}getOrInitializeService({instanceIdentifier:$,options:W={}}){let re=this.instances.get($);if(!re&&this.component&&(re=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=$,_e===de?void 0:_e),options:W}),this.instances.set($,re),this.instancesOptions.set($,W),this.invokeOnInitCallbacks(re,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,re)}catch(ze){}var _e;return re||null}normalizeInstanceIdentifier($=de){return this.component?this.component.multipleInstances?$:de:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor($){this.name=$,this.providers=new Map}addComponent($){const W=this.getProvider($.name);if(W.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);W.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const W=new le($,this);return this.providers.set($,W),W}getProviders(){return Array.from(this.providers.values())}}},1877:(lt,Te,B)=>{B.d(Te,{Am:()=>_e,Ub:()=>he,Yd:()=>ce,in:()=>ne});const l=[];var ne=(()=>{return($=ne||(ne={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",ne;var $})();const U={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},de=ne.INFO,le={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},ve=($,W,...re)=>{if(W<$.logLevel)return;const ze=(new Date).toISOString(),Re=le[W];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${W})`);console[Re](`[${ze}]  ${$.name}:`,...re)};class ce{constructor(W){this.name=W,this._logLevel=de,this._logHandler=ve,this._userLogHandler=null,l.push(this)}get logLevel(){return this._logLevel}set logLevel(W){if(!(W in ne))throw new TypeError(`Invalid value "${W}" assigned to \`logLevel\``);this._logLevel=W}setLogLevel(W){this._logLevel="string"==typeof W?U[W]:W}get logHandler(){return this._logHandler}set logHandler(W){if("function"!=typeof W)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=W}get userLogHandler(){return this._userLogHandler}set userLogHandler(W){this._userLogHandler=W}debug(...W){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...W),this._logHandler(this,ne.DEBUG,...W)}log(...W){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...W),this._logHandler(this,ne.VERBOSE,...W)}info(...W){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...W),this._logHandler(this,ne.INFO,...W)}warn(...W){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...W),this._logHandler(this,ne.WARN,...W)}error(...W){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...W),this._logHandler(this,ne.ERROR,...W)}}function he($){l.forEach(W=>{W.setLogLevel($)})}function _e($,W){for(const re of l){let ze=null;W&&W.level&&(ze=U[W.level]),re.userLogHandler=null===$?null:(Re,Ve,...Ze)=>{const ye=Ze.map(xe=>{if(null==xe)return null;if("string"==typeof xe)return xe;if("number"==typeof xe||"boolean"==typeof xe)return xe.toString();if(xe instanceof Error)return xe.message;try{return JSON.stringify(xe)}catch(Je){return null}}).filter(xe=>xe).join(" ");Ve>=(null!=ze?ze:Re.logLevel)&&$({level:ne[Ve].toLowerCase(),message:ye,args:Ze,type:Re.name})}}}},8766:(lt,Te,B)=>{B.d(Te,{Lj:()=>Le,X3:()=>st});var l=B(5861);let U,de;const ce=new WeakMap,he=new WeakMap,_e=new WeakMap,$=new WeakMap,W=new WeakMap;let Re={get(K,De,J){if(K instanceof IDBTransaction){if("done"===De)return he.get(K);if("objectStoreNames"===De)return K.objectStoreNames||_e.get(K);if("store"===De)return J.objectStoreNames[1]?void 0:J.objectStore(J.objectStoreNames[0])}return xe(K[De])},set:(K,De,J)=>(K[De]=J,!0),has:(K,De)=>K instanceof IDBTransaction&&("done"===De||"store"===De)||De in K};function ye(K){return"function"==typeof K?function Ze(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...De){return K.apply(Je(this),De),xe(ce.get(this))}:function(...De){return xe(K.apply(Je(this),De))}:function(De,...J){const se=K.call(Je(this),De,...J);return _e.set(se,De.sort?De.sort():[De]),xe(se)}}(K):(K instanceof IDBTransaction&&function ze(K){if(he.has(K))return;const De=new Promise((J,se)=>{const ie=()=>{K.removeEventListener("complete",be),K.removeEventListener("error",fe),K.removeEventListener("abort",fe)},be=()=>{J(),ie()},fe=()=>{se(K.error||new DOMException("AbortError","AbortError")),ie()};K.addEventListener("complete",be),K.addEventListener("error",fe),K.addEventListener("abort",fe)});he.set(K,De)}(K),((K,De)=>De.some(J=>K instanceof J))(K,function le(){return U||(U=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,Re):K)}function xe(K){if(K instanceof IDBRequest)return function re(K){const De=new Promise((J,se)=>{const ie=()=>{K.removeEventListener("success",be),K.removeEventListener("error",fe)},be=()=>{J(xe(K.result)),ie()},fe=()=>{se(K.error),ie()};K.addEventListener("success",be),K.addEventListener("error",fe)});return De.then(J=>{J instanceof IDBCursor&&ce.set(J,K)}).catch(()=>{}),W.set(De,K),De}(K);if($.has(K))return $.get(K);const De=ye(K);return De!==K&&($.set(K,De),W.set(De,K)),De}const Je=K=>W.get(K);function st(K,De,{blocked:J,upgrade:se,blocking:ie,terminated:be}={}){const fe=indexedDB.open(K,De),je=xe(fe);return se&&fe.addEventListener("upgradeneeded",bt=>{se(xe(fe.result),bt.oldVersion,bt.newVersion,xe(fe.transaction))}),J&&fe.addEventListener("blocked",()=>J()),je.then(bt=>{be&&bt.addEventListener("close",()=>be()),ie&&bt.addEventListener("versionchange",()=>ie())}).catch(()=>{}),je}function Le(K,{blocked:De}={}){const J=indexedDB.deleteDatabase(K);return De&&J.addEventListener("blocked",()=>De()),xe(J).then(()=>{})}const we=["get","getKey","getAll","getAllKeys","count"],Me=["put","add","delete","clear"],qe=new Map;function Ke(K,De){if(!(K instanceof IDBDatabase)||De in K||"string"!=typeof De)return;if(qe.get(De))return qe.get(De);const J=De.replace(/FromIndex$/,""),se=De!==J,ie=Me.includes(J);if(!(J in(se?IDBIndex:IDBObjectStore).prototype)||!ie&&!we.includes(J))return;const be=function(){var fe=(0,l.Z)(function*(je,...bt){const ln=this.transaction(je,ie?"readwrite":"readonly");let $t=ln.store;return se&&($t=$t.index(bt.shift())),(yield Promise.all([$t[J](...bt),ie&&ln.done]))[0]});return function(bt){return fe.apply(this,arguments)}}();return qe.set(De,be),be}!function Ve(K){Re=K(Re)}(K=>o5(s5({},K),{get:(De,J,se)=>Ke(De,J)||K.get(De,J,se),has:(De,J)=>!!Ke(De,J)||K.has(De,J)}))},5861:(lt,Te,B)=>{function l(U,de,le,ve,ce,he,_e){try{var $=U[he](_e),W=$.value}catch(re){return void le(re)}$.done?de(W):Promise.resolve(W).then(ve,ce)}function ne(U){return function(){var de=this,le=arguments;return new Promise(function(ve,ce){var he=U.apply(de,le);function _e(W){l(he,ve,ce,_e,$,"next",W)}function $(W){l(he,ve,ce,_e,$,"throw",W)}_e(void 0)})}}B.d(Te,{Z:()=>ne})}},lt=>{lt(lt.s=2626)}]);